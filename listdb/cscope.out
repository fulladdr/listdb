cscope 15 $HOME/listdb/listdb               0000844827
	@common.h

1 #iâdeà
LISTDB_COMMON_H_


2 
	#LISTDB_COMMON_H_


	)

4 
	~<sched.h
>

5 
	~<uni¡d.h
>

6 
	~<sys/sysÿÎ.h
>

8 
	~<©omic
>

9 
	~<ÿs£¹
>

10 
	~<c¡dio
>

14 
	#L0_CACHE_T_SIMPLE
 1

	)

15 
	#L0_CACHE_T_STATIC
 2

	)

16 
	#L0_CACHE_T_DOUBLE_HASHING
 3

	)

17 
	#L0_CACHE_T_LINEAR_PROBING
 4

	)

20 #ifdeà
LISTDB_L0_CACHE


21 #iâdeà
LISTDB_L0_CACHE_PROBING_DISTANCE


22 
	#LISTDB_L0_CACHE_PROBING_DISTANCE
 1

	)

26 #iâdeà
LISTDB_STRING_KEY


27 
	~"li¡db/cÜe/š‹g”_key.h
"

28 
	#Key
 
IÁeg”Key


	)

30 
	~"li¡db/cÜe/fixed_Ëngth_¡ršg_key.h
"

31 
cÚ¡ex´
 
size_t
 
	gkSŒšgKeyL’gth
 = 16;

32 
	#Key
 
FixedL’gthSŒšgKey
<
kSŒšgKeyL’gth
>

	)

34 
	#V®ue
 
ušt64_t


	)

36 
	#MO_RELAXED
 
¡d
::
memÜy_Üd”_»Ïxed


	)

38 
cÚ¡ex´
 
	gkNumRegiÚs
 = 1;

39 
cÚ¡ex´
 
	gkNumSh¬ds
 = 1;

40 #ifdeà
LISTDB_RANGE_SHARD


41 
cÚ¡ex´
 
ušt64_t
 
	gkSh¬dSize
 = 
¡d
::
num”ic_lim™s
<ušt64_t>::
max
(è/ 
kNumSh¬ds
 + (kNumShards > 1);

47 
cÚ¡ex´
 
	gkMaxNumMemTabËs
 = 4;

50 
cÚ¡ex´
 
size_t
 
	gkMemTabËC­ac™y
 = 1 * (1uÎ << 12è/ 
kMaxNumMemTabËs
;

52 
cÚ¡ex´
 
	gkMaxHeight
 = 4;

55 #ifdeà
LISTDB_L1_LRU


56 
cÚ¡ex´
 
	gkNumCachedLev–s
 = 4;

57 
cÚ¡ex´
 
	gkLruMaxHeight
 = 8;

62 #ifdeà
LISTDB_SKIPLIST_CACHE


63 
cÚ¡ex´
 
size_t
 
	gkSkLi¡CacheC¬dš®™y
 = 4;

64 
	#SkLi¡CacheR•
 
SkLi¡Cache
<
kSkLi¡CacheC¬dš®™y
>

	)

66 
cÚ¡ex´
 
ušt16_t
 
	gkSkLi¡CacheMaxHeight
 = 15;

67 
cÚ¡ex´
 
ušt16_t
 
	gkSkLi¡CacheB¿nchšg
 = 4;

69 
cÚ¡ex´
 
	gkSkLi¡CacheMšPmemHeight
 = 5;

70 
cÚ¡ex´
 
size_t
 
	gkSkLi¡CacheC­ac™y
 = (45ull << 20);

73 
cÚ¡ex´
 
	gkNumD¿mLev–s
 = 1;

74 
cÚ¡ex´
 
	gkNumPmemLev–s
 = 1;

75 
cÚ¡ex´
 
	gkNumLev–s
 = 
kNumD¿mLev–s
 + 
kNumPmemLev–s
;

77 
cÚ¡ex´
 
	gkNumWÜk”s
 = 80;

79 
cÚ¡ex´
 
size_t
 
	gkPmemLogBlockSize
 = 4 * (1uÎ<<20è/ 
kNumSh¬ds
;

80 
cÚ¡ex´
 
size_t
 
	gkPmemBlobBlockSize
 = 
kPmemLogBlockSize
;

83 #iâdeà
LISTDB_SKIPLIST_CACHE


85 
cÚ¡ex´
 
size_t
 
	gkHTSize
 = 150ull * 1000 * 1000;

87 #ià
LISTDB_L0_CACHE
 !ğ
L0_CACHE_T_SIMPLE


88 
cÚ¡ex´
 
size_t
 
	gkHTSize
 = ((1024uÎ<<20è- 
kSkLi¡CacheC­ac™y
) / 8;

90 
cÚ¡ex´
 
size_t
 
	gkHTSize
 = ((1024uÎ<<20è- 
kSkLi¡CacheC­ac™y
) / 24;

94 
	eV®ueTy³
 {

95 
	mkTy³AnchÜ
 = 0x0,

96 
	mkTy³ShÜtcut
 = 0x1,

97 
	mkTy³V®ue
 = 0x2,

98 
	mkTy³D–‘iÚ
 = 0x3

101 şas 
	cTabËTy³
 {

102 
	mkMemTabË
,

103 
	mkPmemTabË


106 şas 
	cTaskTy³
 {

107 
	mkMemTabËFlush
,

108 
	mkL0Com·ùiÚ


111 
šlše
 
	$S‘Affš™y
(
cÜeid
) {

112 
cÜeid
 = cÜeid % 
	`syscÚf
(
_SC_NPROCESSORS_ONLN
);

113 
ıu_£t_t
 
mask
;

114 
	`CPU_ZERO
(&
mask
);

115 
	`CPU_SET
(
cÜeid
, &
mask
);

116 #iâdeà
NDEBUG


117 
rc
 = 
	`sched_£ffš™y
(
	`sysÿÎ
(
__NR_g‘tid
), (
mask
), &mask);

118 
	`as£¹
(
rc
 == 0);

120 
	`sched_£ffš™y
(
	`sysÿÎ
(
__NR_g‘tid
), (
mask
), &mask);

122 
	}
}

124 
šlše
 
	$G‘Ch
() {

125 
a
,
d
,
c
;

126 
asm
 vŞ©e("rdtsı" : "÷" (
a
), "=d" (
d
), "=c" (
c
));

127 
ch
 = (
c
 & 0xFFF000)>>12;

129  
ch
;

130 
	}
}

132 
šlše
 
	$G‘CÜe
() {

133 
a
,
d
,
c
;

134 
asm
 vŞ©e("rdtsı" : "÷" (
a
), "=d" (
d
), "=c" (
c
));

136 
cÜe
 = 
c
 & 0xFFF;

137  
cÜe
;

138 
	}
}

	@core/buffered_pmem_log.h

1 #iâdeà
LISTDB_CORE_BUFFERED_PMEM_LOG_H_


2 
	#LISTDB_CORE_BUFFERED_PMEM_LOG_H_


	)

4 
	~"li¡db/cÜe/pmem_log.h
"

6 
cÚ¡ex´
 
size_t
 
	gkLogBufãrSize
 = 1ull << 10;

8 şas 
	cBufã»dPmemLog
 {

9 
	mpublic
:

10 
Add
(
Key
& 
key
, 
ušt64_t
 
g
, 
V®ue
& 
v®ue
, 
height
);

14 
	gBufã»dPmemLog
::
	$Add
(cÚ¡ 
Key
& 
key
, cÚ¡ 
ušt64_t
 
g
, cÚ¡ 
V®ue
& 
v®ue
, cÚ¡ 
height
) {

15 
size_t
 
log_size
 = 
key
.
	`size
(è+ 8 + 8 + 8 + (8 * 
height
);

16 
size_t
 
befÜe
 = 
bufã»d_size_
.
	`ãtch_add
(
log_size
, 
MO_RELAXED
);

17 ià(
befÜe
 + 
log_size
 <ğ
kLogBufãrSize
) {

18 * 
p
 = 
buf_
 + 
befÜe
;

19 *
»š‹½»t_ÿ¡
<
Key
*>(
p
èğ
key
;

20 
p
 += 8;

22 
	}
}

	@core/double_hashing_cache.h

1 #´agm¨
Úû


3 
	~"li¡db/commÚ.h
"

4 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

5 
	~"li¡db/lib/murmur3.h
"

6 
	~"li¡db/lib/sha1.h
"

8 
	#DOUBLE_HASHING_T_A
 1

	)

9 
	#DOUBLE_HASHING_T_B
 2

	)

10 #iâdeà
LISTDB_DOUBLE_HASHING


11 
	#LISTDB_DOUBLE_HASHING
 
DOUBLE_HASHING_T_B


	)

14 #iâdeà
LISTDB_L0_CACHE_PROBING_DISTANCE


15 
	#LISTDB_L0_CACHE_PROBING_DISTANCE
 1

	)

18 şas 
	cDoubËHashšgCache
 {

19 
	mpublic
:

20 
usšg
 
PmemNode
 = 
B¿idedPmemSkLi¡
::
Node
;

22 
	sBuck‘
 {

23 
	m¡d
::
©omic
<
PmemNode
*> 
v®ue
;

25 
Buck‘
(è: 
v®ue
(
nuÎ±r
) { }

28 
DoubËHashšgCache
(
size_t
 
size
, 
sh¬d
);

30 
Buck‘
* 
	$©
(cÚ¡ 
i
è{  &(
buck‘s_
[i]); 
	}
}

32 
In£¹
(cÚ¡ 
Key
& 
key
, 
PmemNode
* cÚ¡ 
p
);

34 
PmemNode
* 
Lookup
(cÚ¡ 
Key
& 
key
);

36 
ušt32_t
 
Hash1
(cÚ¡ 
Key
& 
key
);

38 
ušt32_t
 
Hash2
(cÚ¡ 
Key
& 
key
);

40 
	g´iv©e
:

41 cÚ¡ 
´obšg_di¡ªû_
 = 
LISTDB_L0_CACHE_PROBING_DISTANCE
;

43 cÚ¡ 
size_t
 
	gsize_
;

44 cÚ¡ 
	gsh¬d_
;

45 cÚ¡ 
ušt32_t
 
	g£ed_
;

46 
Buck‘
* 
	gbuck‘s_
;

49 
	gDoubËHashšgCache
::
	$DoubËHashšgCache
(
size_t
 
size
, 
sh¬d
)

50 : 
	`size_
(
size
), 
	`sh¬d_
(
sh¬d
), 
	`£ed_
(
¡d
::
hash
<>()(
sh¬d_
)) {

51 
buck‘s_
 = 
Ãw
 
Buck‘
[
size
];

52 
¡d
::
	`©omic_th»ad_ãnû
(¡d::
memÜy_Üd”_£q_c¡
);

53 
	}
}

55 
	gDoubËHashšgCache
::
	$In£¹
(cÚ¡ 
Key
& 
key
, 
PmemNode
* cÚ¡ 
p
) {

56 #ià
LISTDB_DOUBLE_HASHING
 =ğ
DOUBLE_HASHING_T_A


57 
ušt32_t
 
h
 = 
	`Hash1
(
key
);

58 
ušt32_t
 
pos
 = 
h
 % 
size_
;

59 
PmemNode
* 
Şd_v®ue
 = 
buck‘s_
[
pos
].
v®ue
.
	`lßd
(
¡d
::
memÜy_Üd”_£q_c¡
);

60 ià(
Şd_v®ue
 !ğ
nuÎ±r
) {

61 
ušt32_t
 
pos2
 = (
h
 + 
	`Hash2
(
key
)è% 
size_
;

62 
buck‘s_
[
pos2
].
v®ue
.
	`¡Üe
(
Şd_v®ue
, 
¡d
::
memÜy_Üd”_£q_c¡
);

64 
buck‘s_
[
pos
].
v®ue
.
	`¡Üe
(
p
, 
¡d
::
memÜy_Üd”_£q_c¡
);

65 #–ià
LISTDB_DOUBLE_HASHING
 =ğ
DOUBLE_HASHING_T_B


66 
ušt32_t
 
h
 = 
	`Hash1
(
key
);

67 
ušt32_t
 
pos
 = 
h
 % 
size_
;

68 
PmemNode
* 
ex³ùed
 = 
nuÎ±r
;

69 ià(
buck‘s_
[
pos
].
v®ue
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
, 
p
)) {

72 
ušt32_t
 
h2
 = 
	`Hash2
(
key
);

73 
út
 = 1;

74 
pos
 = (
h
 + 
út
 * 
h2
è% 
size_
;

75 
út
 < 
´obšg_di¡ªû_
) {

76 
ex³ùed
 = 
nuÎ±r
;

77 ià(
buck‘s_
[
pos
].
v®ue
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
, 
p
)) {

80 
út
++;

81 
pos
 = (
h
 + 
út
 * 
h2
è% 
size_
;

84 
buck‘s_
[
pos
].
v®ue
.
	`¡Üe
(
p
, 
¡d
::
memÜy_Üd”_£q_c¡
);

86 
	`årštf
(
¡d”r
, "DEFINE LISTDB_DOUBLE_HASHING <type>\n");

87 
	`abÜt
();

89 
	}
}

91 
	gDoubËHashšgCache
::
PmemNode
* 
DoubËHashšgCache
::
	$Lookup
(cÚ¡ 
Key
& 
key
) {

92 #ià
LISTDB_DOUBLE_HASHING
 =ğ
DOUBLE_HASHING_T_A


93 
ušt32_t
 
h
 = 
	`Hash1
(
key
);

94 
ušt32_t
 
pos
 = 
h
 % 
size_
;

95 
PmemNode
* 
v®ue
 = 
buck‘s_
[
pos
].v®ue.
	`lßd
(
¡d
::
memÜy_Üd”_£q_c¡
);

96 ià(
v®ue
 && v®ue->
key
.
	`Com·»
(key) == 0) {

97  
v®ue
;

99 
ušt32_t
 
pos2
 = (
h
 + 
	`Hash2
(
key
)è% 
size_
;

100 
PmemNode
* 
v®ue
 = 
buck‘s_
[
pos2
].v®ue.
	`lßd
(
¡d
::
memÜy_Üd”_£q_c¡
);

101 ià(
v®ue
 && v®ue->
key
.
	`Com·»
(key) == 0) {

102  
v®ue
;

105  
nuÎ±r
;

106 #–ià
LISTDB_DOUBLE_HASHING
 =ğ
DOUBLE_HASHING_T_B


107 
ušt32_t
 
h
 = 
	`Hash1
(
key
);

108 
ušt32_t
 
pos
 = 
h
 % 
size_
;

109 
PmemNode
* 
v®ue
 = 
buck‘s_
[
pos
].v®ue.
	`lßd
(
¡d
::
memÜy_Üd”_£q_c¡
);

110 ià(
v®ue
 && v®ue->
key
.
	`Com·»
(key) == 0) {

111  
v®ue
;

113 
ušt32_t
 
h2
 = 
	`Hash2
(
key
);

114 
út
 = 1;

115 
út
 <ğ
´obšg_di¡ªû_
) {

116 
pos
 = (
h
 + 
út
 * 
h2
è% 
size_
;

117 
v®ue
 = 
buck‘s_
[
pos
].v®ue.
	`lßd
(
¡d
::
memÜy_Üd”_£q_c¡
);

118 ià(
v®ue
 && v®ue->
key
.
	`Com·»
(key) == 0) {

119  
v®ue
;

121 
út
++;

126  
nuÎ±r
;

128 
	`årštf
(
¡d”r
, "DEFINE LISTDB_DOUBLE_HASHING <type>\n");

129 
	`abÜt
();

131 
	}
}

133 
šlše
 
ušt32_t
 
	gDoubËHashšgCache
::
	$Hash1
(cÚ¡ 
Key
& 
key
) {

134 
ušt32_t
 
h
;

136 #iâdeà
LISTDB_STRING_KEY


137 
	`MurmurHash3_x86_32
(&
key
, (
ušt64_t
), 
£ed_
, (*è&
h
);

139 
	`MurmurHash3_x86_32
(
key
.
	`d©a
(), 
kSŒšgKeyL’gth
, 
£ed_
, (*è&
h
);

141  
h
;

142 
	}
}

144 
šlše
 
ušt32_t
 
	gDoubËHashšgCache
::
	$Hash2
(cÚ¡ 
Key
& 
key
) {

145 
»suÉ
[21];

146 #iâdeà
LISTDB_STRING_KEY


147 
	`SHA1
(
»suÉ
, (*è&
key
, 8);

149 
	`SHA1
(
»suÉ
, 
key
.
	`d©a
(), 
kSŒšgKeyL’gth
);

151  *
»š‹½»t_ÿ¡
<
ušt32_t
*>(
»suÉ
);

152 
	}
}

	@core/fixed_length_string_key.h

1 #iâdeà
LISTDB_CORE_FIXED_LENGTH_STRING_KEY_H_


2 
	#LISTDB_CORE_FIXED_LENGTH_STRING_KEY_H_


	)

4 
	~<®gÜ™hm
>

5 
	~<c¡ršg
>

7 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

8 şas 
	cFixedL’gthSŒšgKey
 {

9 
public
:

10 
FixedL’gthSŒšgKey
();

11 
FixedL’gthSŒšgKey
(cÚ¡ * 
key
);

12 
FixedL’gthSŒšgKey
(cÚ¡ 
¡d
::
¡ršg
& 
key
);

13 
FixedL’gthSŒšgKey
(cÚ¡ 
ušt64_t
 
key
);

14 
FixedL’gthSŒšgKey
(cÚ¡ 
key
);

15 
size_t
 
	$size
(ècÚ¡ {  
N
; }

16 
ušt64_t
 
	$key_num
() const;

17 
	`Com·»
(cÚ¡ 
FixedL’gthSŒšgKey
<
N
>& 
Ùh”
) const;

19 cÚ¡ * 
	$d©a
(ècÚ¡ {  
d©a_
; 
	}
}

21 
boŞ
 
	$V®id
(ècÚ¡ {  *((
ušt64_t
*è
d©a_
è!ğ0; 
	}
}

23 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
FixedL’gthSŒšgKey
<
N
>& 
Ùh”
) const;

25 
	g´iv©e
:

26 
d©a_
[
N
];

29 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

30 
šlše
 
FixedL’gthSŒšgKey
<
N
>::
	$FixedL’gthSŒšgKey
() {

31 
	`mem£t
(
d©a_
, 0, 
N
);

32 
	}
}

34 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

35 
šlše
 
FixedL’gthSŒšgKey
<
N
>::
	$FixedL’gthSŒšgKey
(cÚ¡ * 
key
) {

36 
	`memıy
(
d©a_
, 
key
, 
N
);

37 
	}
}

39 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

40 
šlše
 
FixedL’gthSŒšgKey
<
N
>::
	$FixedL’gthSŒšgKey
(cÚ¡ 
¡d
::
¡ršg
& 
key
) {

41 
	`as£¹
(
key
.
	`size
(è<ğ
N
);

42 
	`memıy
(
d©a_
, 
key
.
	`d©a
(), key.
	`size
());

43 
	`mem£t
(
d©a_
 + 
key
.
	`size
(), 0, 
N
 - key.size());

44 
	}
}

46 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

47 
šlše
 
FixedL’gthSŒšgKey
<
N
>::
	$FixedL’gthSŒšgKey
(cÚ¡ 
ušt64_t
 
key
) {

48 
	`as£¹
(
N
 >= 8);

49 
	`memıy
(
d©a_
, &
key
, 8);

50 
	`mem£t
(
d©a_
 + 8, 0, 
N
 - 8);

51 
	}
}

53 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

54 
šlše
 
FixedL’gthSŒšgKey
<
N
>::
	$FixedL’gthSŒšgKey
(cÚ¡ 
key
) {

55 
	`as£¹
(
N
 >= 8);

56 
	`mem£t
(
d©a_
, 0, 4);

57 
	`memıy
(
d©a_
 + 4, &
key
, 4);

58 
	`mem£t
(
d©a_
 + 8, 0, 
N
 - 8);

59 
	}
}

61 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

62 
šlše
 
ušt64_t
 
FixedL’gthSŒšgKey
<
N
>::
	$key_num
() const {

66 * 
buf
 = (*è
d©a_
;

67 
ušt64_t
 
numb”
;

68 
numb”
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[0]) << 56

69 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[1]) << 48

70 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[2]) << 40

71 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[3]) << 32

72 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[4]) << 24

73 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[5]) << 16

74 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[6]) << 8

75 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[7]);

76  
numb”
;

77 
	}
}

79 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

80 
šlše
 
FixedL’gthSŒšgKey
<
N
>::
Com·»
(cÚ¡ FixedL’gthSŒšgKey<N>& 
Ùh”
) const {

82  
memcmp
(
d©a_
, 
Ùh”
.d©a_, 
N
);

85 
size_t
 
	gpos
 = 0;

86 
	gpos
 + 8 <ğ
N
) {

87 
ušt64_t
 
a
 = 
ut
::
KeyNum
((*è(
d©a_
 + 
pos
));

88 
ušt64_t
 
	gb
 = 
ut
::
KeyNum
((*è(
Ùh”
.
d©a_
 + 
pos
));

89 ià(
	ga
 < 
	gb
) {

91 } ià(
	ga
 > 
	gb
) {

94 
	gpos
 += 8;

97  
memcmp
(
d©a_
 + 
pos
, 
Ùh”
.d©a_ +…os, 
N
 -…os);

101 cÚ¡ * 
	ga
 = (cÚ¡ *è
d©a_
;

102 cÚ¡ * 
	gb
 = (cÚ¡ *è
Ùh”
.
d©a_
;

103 
size_t
 
	gpos
 = 0;

104 
	g»t
 = 0;

105 
	gpos
 < 
	gN
 && (
	g»t
 = 
a
[
pos
] - 
b
[pos]) != 0) {

106 
pos
++;

108  
	g»t
;

112 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

113 
šlše
 
boŞ
 
FixedL’gthSŒšgKey
<
N
>::
İ”©Ü
==(cÚ¡ FixedL’gthSŒšgKey<N>& 
Ùh”
) const {

114  
this
->
Com·»
(
Ùh”
) == 0;

117 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

118 
šlše
 
boŞ
 
İ”©Ü
< (cÚ¡ 
FixedL’gthSŒšgKey
<
N
>& 
lhs
, cÚ¡ 
	gFixedL’gthSŒšgKey
<
	gN
>& 
	grhs
) {

119  
	glhs
.
Com·»
(
rhs
) < 0;

122 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

123 
šlše
 
boŞ
 
İ”©Ü
> (cÚ¡ 
FixedL’gthSŒšgKey
<
N
>& 
lhs
, cÚ¡ 
	gFixedL’gthSŒšgKey
<
	gN
>& 
	grhs
) {

124  
	glhs
.
Com·»
(
rhs
) > 0;

	@core/integer_key.h

1 #iâdeà
LISTDB_CORE_INTEGER_KEY_H_


2 
	#LISTDB_CORE_INTEGER_KEY_H_


	)

4 
	~<c¡dlib
>

5 
	~<c¡dšt
>

7 şas 
	cIÁeg”Key
 {

8 
	mpublic
:

9 
IÁeg”Key
(cÚ¡ 
ušt64_t
 
key
);

10 
İ”©Ü
 
	$ušt64_t
(ècÚ¡ {  
d©a_
; }

11 
size_t
 
	$size
() const;

12 
ušt64_t
 
	$key_num
(ècÚ¡ {  
d©a_
; 
	}
}

13 
	$Com·»
(cÚ¡ 
IÁeg”Key
& 
Ùh”
) const;

15 cÚ¡ * 
	$d©a
(ècÚ¡ {  (*è&
d©a_
; 
	}
}

17 
boŞ
 
	$V®id
(ècÚ¡ {  
d©a_
 !ğ0; 
	}
}

19 
	g´iv©e
:

20 
ušt64_t
 
d©a_
;

23 
šlše
 
	gIÁeg”Key
::
	$IÁeg”Key
(cÚ¡ 
ušt64_t
 
key
è: 
	$d©a_
(
key
è{ 
	}
}

25 
šlše
 
size_t
 
IÁeg”Key
::
	$size
() const {

26  (
d©a_
);

27 
	}
}

29 
šlše
 
	gIÁeg”Key
::
	$Com·»
(cÚ¡ 
IÁeg”Key
& 
Ùh”
) const {

30 ià(
d©a_
 < 
Ùh”
.data_) {

32 } ià(
d©a_
 > 
Ùh”
.data_) {

38 
	}
}

40 
šlše
 
boŞ
 
	gİ”©Ü
< (cÚ¡ 
	gIÁeg”Key
& 
	glhs
, cÚ¡ IÁeg”Key& 
	grhs
) {

41  
	glhs
.
Com·»
(
rhs
) < 0;

	@core/linear_probing_hashtable_cache.h

1 #´agm¨
Úû


3 
	~"li¡db/commÚ.h
"

4 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

5 
	~"li¡db/lib/murmur3.h
"

7 
	#LP_HASH_T_A
 1

	)

8 #iâdeà
LISTDB_LINEAR_PROBING_HASHTABLE_CACHE


9 
	#LISTDB_LINEAR_PROBING_HASHTABLE_CACHE
 
LP_HASH_T_A


	)

12 şas 
	cLš—rProbšgHashTabËCache
 {

13 
	mpublic
:

14 
usšg
 
PmemNode
 = 
B¿idedPmemSkLi¡
::
Node
;

16 
	sBuck‘
 {

17 
	m¡d
::
©omic
<
PmemNode
*> 
v®ue
;

19 
Buck‘
(è: 
v®ue
(
nuÎ±r
) { }

22 
Lš—rProbšgHashTabËCache
(
size_t
 
size
, 
sh¬d
);

24 
Buck‘
* 
	$©
(cÚ¡ 
i
è{  &(
buck‘s_
[i]); 
	}
}

26 
In£¹
(cÚ¡ 
Key
& 
key
, 
PmemNode
* cÚ¡ 
p
);

28 
PmemNode
* 
Lookup
(cÚ¡ 
Key
& 
key
);

30 
ušt32_t
 
Hash1
(cÚ¡ 
Key
& 
key
);

32 
	g´iv©e
:

33 cÚ¡ 
´obšg_di¡ªû_
 = 
LISTDB_L0_CACHE_PROBING_DISTANCE
;

35 cÚ¡ 
size_t
 
	gsize_
;

36 cÚ¡ 
	gsh¬d_
;

37 cÚ¡ 
ušt32_t
 
	g£ed_
;

38 
Buck‘
* 
	gbuck‘s_
;

41 
	gLš—rProbšgHashTabËCache
::
	$Lš—rProbšgHashTabËCache
(
size_t
 
size
, 
sh¬d
)

42 : 
	`size_
(
size
), 
	`sh¬d_
(
sh¬d
), 
	`£ed_
(
¡d
::
hash
<>()(
sh¬d_
)) {

43 
buck‘s_
 = 
Ãw
 
Buck‘
[
size
];

44 
¡d
::
	`©omic_th»ad_ãnû
(¡d::
memÜy_Üd”_£q_c¡
);

45 
	}
}

47 
	gLš—rProbšgHashTabËCache
::
	$In£¹
(cÚ¡ 
Key
& 
key
, 
PmemNode
* cÚ¡ 
p
) {

48 #ià
LISTDB_LINEAR_PROBING_HASHTABLE_CACHE
 =ğ
LP_HASH_T_A


49 
ušt32_t
 
h
 = 
	`Hash1
(
key
);

50 
ušt32_t
 
pos
 = 
h
 % 
size_
;

51 
út
 = 0;

52 
út
 < 
´obšg_di¡ªû_
) {

53 
PmemNode
* 
ex³ùed
 = 
nuÎ±r
;

54 ià(
buck‘s_
[
pos
].
v®ue
.
	`com·»_exchªge_¡rÚg
(
ex³ùed
, 
p
)) {

57 
út
++;

58 
pos
 = (
h
 + 
út
è% 
size_
;

62 
buck‘s_
[
pos
].
v®ue
.
	`¡Üe
(
p
, 
¡d
::
memÜy_Üd”_£q_c¡
);

64 
	`årštf
(
¡d”r
, "DEFINE LISTDB_LINEAR_PROBING_HASHTABLE_CACHE <type>\n");

65 
	`abÜt
();

67 
	}
}

69 
	gLš—rProbšgHashTabËCache
::
PmemNode
* 
Lš—rProbšgHashTabËCache
::
	$Lookup
(cÚ¡ 
Key
& 
key
) {

70 #ià
LISTDB_LINEAR_PROBING_HASHTABLE_CACHE
 =ğ
LP_HASH_T_A


71 
ušt32_t
 
h
 = 
	`Hash1
(
key
);

72 
ušt32_t
 
pos
 = 
h
 % 
size_
;

73 
út
 = 0;

74 
út
 <ğ
´obšg_di¡ªû_
) {

75 
PmemNode
* 
v®ue
 = 
buck‘s_
[
pos
].v®ue.
	`lßd
(
¡d
::
memÜy_Üd”_£q_c¡
);

76 ià(
v®ue
 && v®ue->
key
.
	`Com·»
(key) == 0) {

77  
v®ue
;

79 
út
++;

80 
pos
 = (
h
 + 
út
è% 
size_
;

84  
nuÎ±r
;

86 
	`årštf
(
¡d”r
, "DEFINE LISTDB_LINEAR_PROBING_HASHTABLE_CACHE <type>\n");

87 
	`abÜt
();

89 
	}
}

91 
šlše
 
ušt32_t
 
	gLš—rProbšgHashTabËCache
::
	$Hash1
(cÚ¡ 
Key
& 
key
) {

92 
ušt32_t
 
h
;

94 #iâdeà
LISTDB_STRING_KEY


95 
	`MurmurHash3_x86_32
(&
key
, (
ušt64_t
), 
£ed_
, (*è&
h
);

97 
	`MurmurHash3_x86_32
(
key
.
	`d©a
(), 
kSŒšgKeyL’gth
, 
£ed_
, (*è&
h
);

99  
h
;

100 
	}
}

	@core/log.cc

1 
	~"log.h
"

5 
	gLogBlock
::
	$LogBlock
(cÚ¡ 
r
è: 
	$r_
(
r
è{ 
	}
}

7 
LogBlock
::
	$š™
(cÚ¡ 
s
) {

8 
	`TOID
(
LogBlockBa£
è
ba£
;

9 
	`POBJ_ZALLOC
(
Íİ
[
s
][
r_
], &
ba£
, 
LogBlockBa£
, (LogBlockBa£è+ (
kLogBlockSize
 - 1));

10 
ba£_
 = 
ba£
;

11 
p_
 = &(
	`D_RW
(
ba£_
)->
p
);

12 
d©a_
 = 
	`D_RW
(
ba£_
)->
d©a
;

13 
	}
}

15 
	gLogBlock
::
lßd
(
	$TOID
(
LogBlockBa£
è
ba£
) {

16 
ba£_
 = 
ba£
;

17 
p_
 = &(
	`D_RW
(
ba£_
)->
p
);

18 
d©a_
 = 
	`D_RW
(
ba£_
)->
d©a
;

19 
	}
}

21 
size_t
 
	gLogBlock
::
	$ãtch_add_size
(cÚ¡ 
size_t
 
size
) {

22 
size_t
 
befÜe
 = 
¡d
::
	`©omic_ãtch_add
((¡d::
©omic
<
ušt64_t
>*è
p_
, 
size
);

24  
befÜe
;

25 
	}
}

27 
	$TOID
(
LogBlockBa£
è
LogBlock
::
	$ba£
() {

28  
ba£_
;

29 
	}
}

31 * 
	gLogBlock
::
	$d©a
() {

32  
d©a_
;

33 
	}
}

37 
	gLog
::
	$š™
(cÚ¡ 
s
) {

38 
i
 = 0; i < 
kNumRegiÚs
; i++) {

39 
	`TOID
(
LogBa£
è
ba£
;

40 
	`POBJ_ZALLOC
(
Íİ
[
s
][
i
], &
ba£
, 
LogBa£
, (LogBase));

41 
log_ba£_
[
i
] = 
ba£
;

43 
	`TOID
(
LogBlockBa£
è
nbb
;

44 
	`POBJ_ZALLOC
(
Íİ
[
s
][
i
], &
nbb
, 
LogBlockBa£
, (LogBlockBa£è+ (
kLogBlockSize
 - 1));

45 
	`D_RW
(
log_ba£_
[
i
])->
h—d_block_ba£
 = 
nbb
;

46 
	`D_RW
(
log_ba£_
[
i
])->
Åp
 = 
nbb
;

47 
	`pmemobj_³rsi¡
(
Íİ
[
s
][
i
], 
	`D_RW
(
log_ba£_
[i]), (
LogBlockBa£
));

49 * 
buf
 = 
	`m®loc
((
LogBlock
));

50 
LogBlock
* 
nb
 = 
	`Ãw
 (
buf
è
	`LogBlock
(
i
);

51 
nb
->
	`lßd
(
nbb
);

52 
blocks_
[
i
] = 
nb
;

54 
	}
}

56 
	gLog
::
lßd
(
	$TOID
(
LogBa£
è
log_ba£
[]) {

57 
i
 = 0; i < 
kNumRegiÚs
; i++) {

58 
log_ba£_
[
i
] = 
log_ba£
[i];

59 
	`TOID
(
LogBlockBa£
è
bb
 = 
	`D_RW
(
log_ba£_
[
i
])->
Åp
;

60 
Œue
) {

61 ià(!
	`TOID_IS_NULL
(
	`D_RW
(
bb
)->
Ãxt
)) {

62 
bb
 = 
	`D_RW
(bb)->
Ãxt
;

67 * 
buf
 = 
	`m®loc
((
LogBlock
));

68 
LogBlock
* 
nb
 = 
	`Ãw
 (
buf
è
	`LogBlock
(
i
);

69 
nb
->
	`lßd
(
bb
);

70 
blocks_
[
i
] = 
nb
;

72 
	}
}

74 
ušt64_t
 
	gLog
::
	$wr™e_WAL
(
Th»adD©a
* 
td
, cÚ¡ 
s
, cÚ¡ 
¡d
::
¡ršg_v›w
& 
key
, cÚ¡ 
ušt64_t
 
v®ue
) {

75 cÚ¡ 
r
 = 
td
->
»giÚ
;

77 #iâdeà
BR_STRING_KV


78 cÚ¡ 
size_t
 
my_size
 = 3 * (
ušt64_t
);

80 cÚ¡ 
size_t
 
my_size
 = (
ušt32_t
è+ 
key
.
	`size
(è+ (
ušt64_t
) + (uint64_t);

82 
LogBlock
* 
b
 = 
blocks_
[
r
];

83 
size_t
 
befÜe
;

84 
Œue
) {

85 ià(
b
 =ğ
NULL
) {

86 
b
 = 
blocks_
[
r
];

89 
befÜe
 = 
b
->
	`ãtch_add_size
(
my_size
);

90 ià(
my_size
 + 
befÜe
 > 
kLogBlockSize
) {

91 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

92 ià(
b
 =ğ
blocks_
[
r
]) {

93 
	`TOID
(
LogBlockBa£
è
nbb
;

94 
	`POBJ_ZALLOC
(
Íİ
[
s
][
r
], &
nbb
, 
LogBlockBa£
, (LogBlockBa£è+ (
kLogBlockSize
 - 1));

95 
LogBlockBa£
* 
nbbp
 = 
	`D_RW
(
nbb
);

96 
nbbp
->
p
 = 0;

97 
nbbp
->
Åp
 = 0;

98 
	`D_RW
(
b
->
	`ba£
())->
Ãxt
 = 
nbb
;

99 
	`pmemobj_³rsi¡
(
Íİ
[
s
][
r
], &(
	`D_RW
(
b
->
	`ba£
())->
Ãxt
), (
	`TOID
(
LogBlockBa£
)));

100 * 
buf
 = 
	`m®loc
((
LogBlock
));

101 
LogBlock
* 
nb
 = 
	`Ãw
 (
buf
è
	`LogBlock
(
r
);

102 
nb
->
	`lßd
(
nbb
);

104 
blocks_
[
r
] = 
nb
;

105 
b
 = 
blocks_
[
r
];

108 
b
 = 
blocks_
[
r
];

110 
lk
.
	`uÆock
();

116 
ušt64_t
 
dummy_g
 = 0x1;

117 * 
begš
 = 
b
->
	`d©a
(è+ 
befÜe
;

118 * 
p
 = (*è
begš
;

119 #iâdeà
BR_STRING_KV


120 *((
ušt64_t
*è
p
èğ*((ušt64_t*è
key
.
	`d©a
());

121 
p
 += 8;

123 *((
ušt32_t
*è
p
èğ
key
.
	`Ëngth
();

124 
p
 += 4;

125 
	`memıy
(
p
, 
key
.
	`d©a
(), key.
	`Ëngth
());

126 
p
 +ğ
key
.
	`Ëngth
();

128 *((
ušt64_t
*è
p
èğ
dummy_g
;

129 
p
 += 8;

130 *((
ušt64_t
*è
p
èğ
v®ue
;

131 
	`pmemobj_³rsi¡
(
Íİ
[
s
][
r
], 
begš
, 
my_size
);

132 
ušt64_t
 
log_moff
 = (((
ušŒ_t
è
begš
 - (ušŒ_tè
Íİ
[
s
][
r
]) << 16) |„;

133  
log_moff
;

134 
	}
}

136 
ušt64_t
 
	gLog
::
	$wr™e_IUL
(
Th»adD©a
* 
td
, cÚ¡ 
s
, cÚ¡ 
¡d
::
¡ršg_v›w
& 
key
, cÚ¡ 
ušt64_t
 
v®ue
) {

137 cÚ¡ 
r
 = 
td
->
»giÚ
;

139 cÚ¡ 
kB¿nchšg
 = 4;

140 cÚ¡ 
bb
 = (
kB¿nchšg
 > (è
kNumRegiÚs
) ? kBranching / kNumRegions : 1;

141 
height
 = 1;

142 ià(
height
 < 
kMaxHeight
 && ((
td
->
ºd
.
	`Next
(è% 
bb
) == 0)) {

143 
height
++;

144 
height
 < 
kMaxHeight
 && ((
td
->
ºd
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

145 
height
++;

149 #iâdeà
BR_STRING_KV


150 cÚ¡ 
size_t
 
my_size
 = (
UINT64_²ode
è+ (
height
 - 1) * 8;

152 cÚ¡ 
size_t
 
my_size
 = 
VARSTR_²ode
::
	`compu‹_®loc_size
(
key
, 
height
);

154 
LogBlock
* 
b
 = 
blocks_
[
r
];

155 
size_t
 
befÜe
;

156 
Œue
) {

157 ià(
b
 =ğ
NULL
) {

158 
b
 = 
blocks_
[
r
];

161 
befÜe
 = 
b
->
	`ãtch_add_size
(
my_size
);

162 ià(
my_size
 + 
befÜe
 > 
kLogBlockSize
) {

163 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

164 ià(
b
 =ğ
blocks_
[
r
]) {

165 
	`TOID
(
LogBlockBa£
è
nbb
;

166 
	`POBJ_ZALLOC
(
Íİ
[
s
][
r
], &
nbb
, 
LogBlockBa£
, (LogBlockBa£è+ (
kLogBlockSize
 - 1));

167 
LogBlockBa£
* 
nbbp
 = 
	`D_RW
(
nbb
);

168 
nbbp
->
p
 = 0;

169 
nbbp
->
Åp
 = 0;

170 
	`D_RW
(
b
->
	`ba£
())->
Ãxt
 = 
nbb
;

171 
	`pmemobj_³rsi¡
(
Íİ
[
s
][
r
], &(
	`D_RW
(
b
->
	`ba£
())->
Ãxt
), 16);

172 * 
buf
 = 
	`m®loc
((
LogBlock
));

173 
LogBlock
* 
nb
 = 
	`Ãw
 (
buf
è
	`LogBlock
(
r
);

174 
nb
->
	`lßd
(
nbb
);

176 
blocks_
[
r
] = 
nb
;

177 
b
 = 
blocks_
[
r
];

179 
b
 = 
blocks_
[
r
];

181 
lk
.
	`uÆock
();

187 
ušt64_t
 
dummy_g
 = 
kTy³V®ue
;

188 * 
begš
 = 
b
->
	`d©a
(è+ 
befÜe
;

189 * 
p
 = (*è
begš
;

190 #iâdeà
BR_STRING_KV


191 *((
ušt64_t
*è
p
èğ*((ušt64_t*è
key
.
	`d©a
());

192 
p
 += 8;

193 *((
ušt64_t
*è
p
èğ
dummy_g
;

194 
p
 += 8;

195 *((
ušt64_t
*è
p
èğ
v®ue
;

196 
p
 += 8;

197 *((*è
p
èğ
height
;

199 
VARSTR_²ode
::
	`š™_node
(
p
, 
key
, 
dummy_g
, 
v®ue
, 
height
, 
çl£
);

201 
	`pmemobj_³rsi¡
(
Íİ
[
s
][
r
], 
begš
, 
my_size
 - (
height
 * 8));

202 
ušt64_t
 
log_moff
 = (((
ušŒ_t
è
begš
 - (ušŒ_tè
Íİ
[
s
][
r
]) << 16) |„;

203  
log_moff
;

204 
	}
}

	@core/log.h

1 #iâdeà
LISTDB_CORE_LOG_H_


2 
	#LISTDB_CORE_LOG_H_


	)

4 
	~<©omic
>

5 
	~<mu‹x
>

7 
	~<libpmemobj.h
>

9 
	~"commÚ.h
"

10 
	~"pmem.h
"

12 şas 
	cLogBlock
 {

13 
	mpublic
:

14 
LogBlock
(cÚ¡ 
r
);

15 
š™
(cÚ¡ 
s
);

16 
lßd
(
	$TOID
(
LogBlockBa£
è
ba£
);

17 
size_t
 
	`ãtch_add_size
(cÚ¡ size_ˆ
size
);

18 
	$TOID
(
LogBlockBa£
è
	`ba£
();

19 * 
	`d©a
();

21 
´iv©e
:

22 cÚ¡ 
r_
;

23 
	$TOID
(
LogBlockBa£
è
ba£_
;

24 
ušt64_t
* 
p_
;

25 * 
d©a_
;

28 şas 
	cLog
 {

29 
public
:

30 
	`š™
(cÚ¡ 
s
);

31 
	`lßd
(
	$TOID
(
LogBa£
è
log_ba£
[]);

32 
ušt64_t
 
	`wr™e_WAL
(cÚ¡ 
s
, cÚ¡ 
¡d
::
¡ršg_v›w
& 
key
, cÚ¡ ušt64_ˆ
v®ue
);

33 
ušt64_t
 
	`wr™e_IUL
(cÚ¡ 
s
, cÚ¡ 
¡d
::
¡ršg_v›w
& 
key
, cÚ¡ ušt64_ˆ
v®ue
);

35 
´iv©e
:

36 
LogBlock
* 
blocks_
[
kMaxNumRegiÚs
];

37 
	$TOID
(
LogBa£
è
log_ba£_
[
kMaxNumRegiÚs
];

38 
¡d
::
mu‹x
 
mu_
;

41 şas 
	cLogWr™”
 {

42 
public
:

43 
vœtu®
 
	`Wr™e
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) = 0;

	@core/log_buffer.cc

1 
	~"li¡db/cÜe/log_bufãr.h
"

5 
	gLogBufãr
::
	$Add
(cÚ¡ 
Key
& 
key
, cÚ¡ 
ušt64_t
 
g
, cÚ¡ 
V®ue
& 
v®ue
, cÚ¡ 
height
) {

6 cÚ¡ 
size_t
 
kV®ueSize
 = (
ušt64_t
);

7 
size_t
 
log_size
 = 
key
.
	`size
(è+ 
kTagSize
 + (
g
è+ 
kV®ueSize
 + 8 + 8 * 
height
;

9 ià(
bufã»d_size_
 + 
log_size
 > 
kLogBufãrSize
) {

10 
	`Flush
();

11 
bufã»d_size_
 = 0;

14 
š£¹_İs_
.
	`em¶aû_back
(
key
, 
g
, 
v®ue
, 
height
, 
log_size
);

15 
bufã»d_size_
 +ğ
log_size
;

16 
	}
}

	@core/log_buffer.h

1 #iâdeà
LISTDB_CORE_LOG_BUFFER_H_


2 
	#LISTDB_CORE_LOG_BUFFER_H_


	)

4 
	~"li¡db/commÚ.h
"

6 şas 
	cLogBufãr
 {

7 
	mpublic
:

8 
Add
(
Key
& 
key
, 
ušt64_t
 
g
, 
V®ue
& 
v®ue
, 
height
);

9 
Flush
();

11 
	m´iv©e
:

12 
	sNodeIn£¹Op
 {

13 
Key
 
key
;

14 
ušt64_t
 
	mg
;

15 
V®ue
 
	mv®ue
;

16 
	mheight
;

17 
size_t
 
	mlog_size
;

19 
NodeIn£¹Op
(
Key
 
key_
, 
ušt64_t
 
g_
, 
V®ue
 
v®ue_
, 
height_
, 
size_t
 
log_size_
)

20 : 
key
(
key_
), 
g
(
g_
), 
v®ue
(
v®ue_
), 
height
(
height_
), 
log_size
(
log_size_
) { }

23 
size_t
 
	gbufã»d_size_
;

24 
	g¡d
::
veùÜ
<
NodeIn£¹Op
> 
š£¹_İs_
;

25 
PmemLog
* 
	glog_
;

	@core/log_writer.h

1 #iâdeà
LISTDB_CORE_LOG_WRITER_H_


2 
	#LISTDB_CORE_LOG_WRITER_H_


	)

4 
	~"li¡db/commÚ.h
"

6 şas 
	cLogWr™”
 {

7 
	mpublic
:

8 
vœtu®
 
ušt64_t
 
Wr™e
(cÚ¡ 
IKey
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) = 0;

	@core/lru_skiplist.h

1 #iâdeà
LISTDB_CORE_LRU_SKIPLIST_H_


2 
	#LISTDB_CORE_LRU_SKIPLIST_H_


	)

4 
	#MUTEX
 
mu‹x


	)

5 
	#MUTEX_HEADER
 <
MUTEX
>

	)

6 #šşud
MUTEX_HEADER


8 
	~"li¡db/commÚ.h
"

9 
	~"li¡db/šdex/lockä“_skli¡.h
"

11 şas 
	cLruSkLi¡
 {

12 
	mpublic
:

13 
	sNode
 {

14 
Key
 
key
;

15 
ušt64_t
 
	mg
;

16 
ušt64_t
 
	mv®ue
;

17 
Node
* 
	mÌu_Ãxt
;

18 
Node
* 
	mÌu_´ev
;

19 
	m¡d
::
©omic
<
Node
*> 
Ãxt
[1];

21 #iâdeà
LISTDB_STRING_KEY


22 
Key
 
h—d_key
() {  0ULL; }

24 
Key
 
h—d_key
() {  Key(); }

27 
size_t
 
compu‹_®loc_size
(cÚ¡ 
Key
& 
key
, cÚ¡ 
height
) {

28  
®igÃd_size
(8, (
Node
è+ (
height
-1)*8);

31 
height
(ècÚ¡ {  
	mg
 & 0xff; }

32 
size_t
 
®loc_size
(ècÚ¡ {  (
	mNode
è+ (
height
() - 1) * 8; }

33 
ušt8_t
 
ty³
(ècÚ¡ {  
V®ueTy³
((
g
 & 0xf00) >> 4); }

34 * 
d©a
(ècÚ¡ {  (*è
	mthis
; }

37 
LruSkLi¡
(cÚ¡ 
size_t
 
ÿ·c™y
);

41 
ušt64_t
 
FšdLessThª
(cÚ¡ 
Key
& 
key
);

43 
In£¹
(cÚ¡ 
Key
& 
key
, cÚ¡ 
ušt64_t
 
v®ue
, cÚ¡ 
height
);

45 
	g´iv©e
:

46 
FšdPos™iÚ
(
Node
* 
node
, Node* 
´eds
[], Node* 
succs
[]);

48 cÚ¡ 
size_t
 
	gÿ·c™y_
;

49 
size_t
 
	gsize_
;

50 
Node
* 
	gh—d_
;

51 
	g¡d
::
MUTEX
 
mu_
;

54 
	gLruSkLi¡
::
	$LruSkLi¡
(cÚ¡ 
size_t
 
ÿ·c™y
è: 
	`ÿ·c™y_
(ÿ·c™y), 
	$size_
(0) {

56 
size_t
 
node_size
 = (
Node
è+ (
kLruMaxHeight
 - 1) * 8;

57 
Node
* 
Ãw_node
 = (Node*è
	`®igÃd_®loc
(8, 
node_size
);

59 
Ãw_node
->
key
 = 
Node
::
	`h—d_key
();

60 
Ãw_node
->
g
 = 
kLruMaxHeight
 & 0xff;

61 
Ãw_node
->
v®ue
 = 0;

62 
	`mem£t
(
Ãw_node
->
Ãxt
, 0, 
kLruMaxHeight
 * 8);

64 
h—d_
 = 
Ãw_node
;

65 
h—d_
->
Ìu_Ãxt
 = head_;

66 
h—d_
->
Ìu_´ev
 = head_;

67 
¡d
::
	`©omic_th»ad_ãnû
(¡d::
memÜy_Üd”_»Ëa£
);

68 
	}
}

70 
ušt64_t
 
	gLruSkLi¡
::
	$FšdLessThª
(cÚ¡ 
Key
& 
key
) {

71 
Node
* 
´ed
 = 
h—d_
;

72 
Node
* 
cu¼
 = 
nuÎ±r
;

73 
h
 = 
´ed
->
	`height
();

74 
l
 = 
h
 - 1;† >= 0;†--) {

75 
Œue
) {

76 
cu¼
 = 
´ed
->
Ãxt
[
l
].
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

77 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(key) < 0) {

78 
´ed
 = 
cu¼
;

85 ià(
´ed
 !ğ
h—d_
) {

87 
¡d
::
unique_lock
<¡d::
MUTEX
> 
	`lk
(
mu_
);

88 autØ

 = 
h—d_
->
Ìu_´ev
;

89 ià(
´ed
 !ğ

) {

90 
´ed
->
Ìu_´ev
->
Ìu_Ãxt
 =…red->lru_next;

91 
´ed
->
Ìu_Ãxt
->
Ìu_´ev
 =…red->lru_prev;

93 
h—d_
->
Ìu_´ev
 = 
´ed
;

94 
´ed
->
Ìu_Ãxt
 = 
h—d_
;

96 
´ed
->
Ìu_´ev
 = 

;

97 

->
Ìu_Ãxt
 = 
´ed
;

99 
lk
.
	`uÆock
();

101  
´ed
->
v®ue
;

102 
	}
}

104 
	gLruSkLi¡
::
	$In£¹
(cÚ¡ 
Key
& 
key
, cÚ¡ 
ušt64_t
 
v®ue
, cÚ¡ 
height
) {

106 
size_t
 
node_size
 = (
Node
è+ (
height
 - 1) * 8;

107 
Node
* 
Ãw_node
 = (Node*è
	`®igÃd_®loc
(8, 
node_size
);

110 
Ãw_node
->
key
 = key;

111 
Ãw_node
->
g
 = 
height
 & 0xff;

112 
Ãw_node
->
v®ue
 = value;

113 
	`mem£t
(
Ãw_node
->
Ãxt
, 0, 
height
 * 8);

118 
¡d
::
unique_lock
<¡d::
MUTEX
> 
	`lk
(
mu_
);

119 autØ

 = 
h—d_
->
Ìu_´ev
;

121 
h—d_
->
Ìu_´ev
 = 
Ãw_node
;

122 
Ãw_node
->
Ìu_Ãxt
 = 
h—d_
;

124 
Ãw_node
->
Ìu_´ev
 = 

;

125 

->
Ìu_Ãxt
 = 
Ãw_node
;

126 
lk
.
	`uÆock
();

129 
Node
* 
´eds
[
kLruMaxHeight
];

130 
Node
* 
succs
[
kLruMaxHeight
];

131 
Œue
) {

132 
	`FšdPos™iÚ
(
Ãw_node
, 
´eds
, 
succs
);

133 
l
 = 0;† < 
Ãw_node
->
	`height
();†++) {

134 
Ãw_node
->
Ãxt
[
l
].
	`¡Üe
(
succs
[l], 
¡d
::
memÜy_Üd”_»Ïxed
);

136 ià(!
´eds
[0]->
Ãxt
[0].
	`com·»_exchªge_¡rÚg
(
succs
[0], 
Ãw_node
)) {

139 
l
 = 1;† < 
Ãw_node
->
	`height
();†++) {

140 
Œue
) {

141 ià(
´eds
[
l
]->
Ãxt
[l].
	`com·»_exchªge_¡rÚg
(
succs
[l], 
Ãw_node
)) {

144 
	`FšdPos™iÚ
(
Ãw_node
, 
´eds
, 
succs
);

149 
	}
}

151 
	gLruSkLi¡
::
	$FšdPos™iÚ
(
Node
* 
node
, Node* 
´eds
[], Node* 
succs
[]) {

152 
Node
* 
´ed
 = 
h—d_
;

153 
Node
* 
cu¼
 = 
nuÎ±r
;

154 
h
 = 
´ed
->
	`height
();

155 
l
 = 
h
 - 1;† >= 0;†--) {

156 
Œue
) {

157 
cu¼
 = 
´ed
->
Ãxt
[
l
].
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

158 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(
node
->key) < 0) {

159 
´ed
 = 
cu¼
;

164 
´eds
[
l
] = 
´ed
;

165 
succs
[
l
] = 
cu¼
;

167 
	}
}

	@core/pmem_blob.h

1 #iâdeà
LISTDB_CORE_PMEM_BLOB_H_


2 
	#LISTDB_CORE_PMEM_BLOB_H_


	)

4 
	~<mu‹x
>

6 
	~<libpmemobj++/³rsi¡’t_±r.hµ
>

7 
	~<libpmemobj++/make_³rsi¡’t_©omic.hµ
>

9 
	~"li¡db/commÚ.h
"

10 
	~"li¡db/pmem/pmem.h
"

11 
	~"li¡db/pmem/pmem_±r.h
"

13 
	spmem_blob_block
 {

14 
size_t
 
	mp
;

15 
	md©a
[
kPmemBlobBlockSize
];

16 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_block
> 
Ãxt
;

18 
pmem_blob_block
(
pmem
::
obj
::
³rsi¡’t_±r
<pmem_blob_block> 
Ãxt_
 = 
nuÎ±r
è: 
p
(0), 
d©a
(), 
Ãxt
(next_) { }

21 
	spmem_blob_roÙ
 {

22 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_block
> 
h—d
[
kNumSh¬ds
];

25 şas 
	cPmemBlob
 {

26 
	mpublic
:

27 
	sBlock
 {

28 
¡d
::
©omic
<
size_t
> 
p
;

29 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_block
> 
p_block
;

31 
ex¶ic™
 
Block
(
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_block
> 
p_block_
, Block* 
Ãxt_
);

32 * 
AÎoÿ‹
(cÚ¡ 
size_t
 
size
);

33 * 
d©a
(è{  
	mp_block
->
	md©a
; }

37 
PmemBlob
(cÚ¡ 
poŞ_id
, cÚ¡ 
sh¬d_id
);

39 
PmemPŒ
 
AÎoÿ‹
(cÚ¡ 
size_t
 
size
);

41 
	g´iv©e
:

42 
Block
* 
G‘Wr™abËBlock
();

44 cÚ¡ 
	gpoŞ_id_
;

45 cÚ¡ 
	gsh¬d_id_
;

46 
	gpmem
::
obj
::
poŞ
<
pmem_blob_roÙ
> 
poŞ_
;

47 
	gpmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_roÙ
> 
p_blob_
;

48 
	g¡d
::
©omic
<
Block
*> 
äÚt_
;

49 
	g¡d
::
mu‹x
 
block_š™_mu_
;

52 
	gPmemBlob
::
Block
::Block(
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_block
> 
p_block_
, Block* 
Ãxt_
) {

53 
	gp
.
¡Üe
(
p_block_
->
p
);

54 
	gp_block
 = 
p_block_
;

55 
	gp_block
->
	gÃxt
 = (
Ãxt_
è?‚ext_->
p_block
 : 
nuÎ±r
;

58 * 
	gPmemBlob
::
Block
::
	$AÎoÿ‹
(cÚ¡ 
size_t
 
size
) {

59 
size_t
 
befÜe
 = 
p
.
	`ãtch_add
(
size
, 
MO_RELAXED
);

60 ià(
befÜe
 + 
size
 <ğ
kPmemBlobBlockSize
) {

61  (*è(
	`d©a
(è+ 
befÜe
);

63  
nuÎ±r
;

65 
	}
}

67 
	gPmemBlob
::
	$PmemBlob
(cÚ¡ 
poŞ_id
, cÚ¡ 
sh¬d_id
è: 
	`poŞ_id_
ÕoŞ_id), 
	$sh¬d_id_
(
sh¬d_id
) {

68 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_blob_roÙ
>(
poŞ_id_
);

69 
poŞ_
 = 
poŞ
;

70 
p_blob_
 = 
poŞ
.
	`roÙ
();

71 
äÚt_
.
	`¡Üe
(
nuÎ±r
);

72 
	}
}

74 
	gPmemBlob
::
Block
* 
PmemBlob
::
	$G‘Wr™abËBlock
() {

75 
Block
* 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

76 ià(
»t
 =ğ
nuÎ±r
) {

77 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
block_š™_mu_
);

78 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

79 ià(
»t
 =ğ
nuÎ±r
) {

80 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_block
> 
p_Ãw_block
;

81 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_blob_block
>(
poŞ_
, 
p_Ãw_block
, 
nuÎ±r
);

82 
p_blob_
->
h—d
[
sh¬d_id_
] = 
p_Ãw_block
;

83 autØ
Ãw_block
 = 
Ãw
 
	`Block
(
p_Ãw_block
, 
nuÎ±r
);

84 
äÚt_
.
	`¡Üe
(
Ãw_block
, 
MO_RELAXED
);

85 
»t
 = 
Ãw_block
;

88  
»t
;

89 
	}
}

91 
PmemPŒ
 
	gPmemBlob
::
	$AÎoÿ‹
(cÚ¡ 
size_t
 
size
) {

92 autØ
block
 = 
	`G‘Wr™abËBlock
();

93 * 
buf
 = 
nuÎ±r
;

94 ià((
buf
 = 
block
->
	`AÎoÿ‹
(
size
)è=ğ
nuÎ±r
) {

95 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
block_š™_mu_
);

96 
block
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

97 ià((
buf
 = 
block
->
	`AÎoÿ‹
(
size
)è=ğ
nuÎ±r
) {

98 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_blob_block
> 
p_Ãw_block
;

99 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_blob_block
>(
poŞ_
, 
p_Ãw_block
, 
block
->
p_block
);

100 
p_blob_
->
h—d
[
sh¬d_id_
] = 
p_Ãw_block
;

101 autØ
Ãw_block
 = 
Ãw
 
	`Block
(
p_Ãw_block
, 
block
);

102 
äÚt_
.
	`¡Üe
(
Ãw_block
, 
MO_RELAXED
);

103 
buf
 = 
Ãw_block
->
	`AÎoÿ‹
(
size
);

106 
PmemPŒ
 
	`»t
(
poŞ_id_
, (
ušt64_t
è((
ušŒ_t
è
buf
 - (ušŒ_tè
poŞ_
.
	`hªdË
()));

107  
»t
;

108 
	}
}

	@core/pmem_db.h

1 #iâdeà
LISTDB_CORE_PMEM_DB_H_


2 
	#LISTDB_CORE_PMEM_DB_H_


	)

4 
	~<libpmemobj++/³rsi¡’t_±r.hµ
>

6 
	~"li¡db/commÚ.h
"

7 
	~"li¡db/cÜe/pmem_log.h
"

9 
	gpmem_db_sh¬d
;

10 
	gpmem_l0_šfo
;

11 
	gpmem_l1_šfo
;

13 şas 
	cLev–0Stus
 {

14 
	mkIn™Ÿlized
,

15 
	mkFuÎ
,

16 
	mkP”si¡ed
,

17 
	mkM”geIn™Ÿ‹d
,

18 
	mkM”geDÚe
,

21 
	spmem_db
 {

23 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_db_sh¬d
> 
sh¬d
[
kNumSh¬ds
];

26 
	spmem_db_sh¬d
 {

27 
ušt64_t
 
	ml0_út
;

31 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
> 
l0_li¡_h—d
;

32 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_l1_šfo
> 
l1_šfo
;

35 
	spmem_l0_šfo
 {

36 
ušt64_t
 
	mid
;

38 
Lev–0Stus
 
	m¡©us
;

39 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
> 
Ãxt
;

40 
	mpmem
::
obj
::
³rsi¡’t_±r
<[]> 
h—d
[
kNumRegiÚs
];

43 
	spmem_l1_šfo
 {

44 
ušt64_t
 
	mid
;

45 
	mpmem
::
obj
::
³rsi¡’t_±r
<[]> 
h—d
[
kNumRegiÚs
];

	@core/pmem_log.h

1 #iâdeà
LISTDB_CORE_PMEM_LOG_H_


2 
	#LISTDB_CORE_PMEM_LOG_H_


	)

4 
	~<funùiÚ®
>

5 
	~<mu‹x
>

7 
	~<libpmemobj++/make_³rsi¡’t_©omic.hµ
>

8 
	~<libpmemobj++/p.hµ
>

9 
	~<libpmemobj++/³rsi¡’t_±r.hµ
>

10 
	~<libpmemobj++/poŞ.hµ
>

12 
	~"li¡db/commÚ.h
"

13 
	~"li¡db/pmem/pmem.h
"

14 
	~"li¡db/pmem/pmem_±r.h
"

15 
	~"li¡db/lib/memÜy.h
"

17 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

18 
usšg
 
	gPoŞ
 = 
pmem
::
obj
::
poŞ
<
T
>;

20 
	gpmem_log
;

21 
	gpmem_log_block
;

23 
	sLogRecÜdId
 {

24 
ušt32_t
 
	mblock_id
;

25 
ušt32_t
 
	moff£t
;

28 
	sLogRªge
 {

29 
LogRecÜdId
 
	mbegš
;

30 
LogRecÜdId
 
	m’d
;

33 
	spmem_log_roÙ
 {

34 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_log
> 
sh¬d
[
kNumSh¬ds
];

37 
	spmem_log
 {

38 
ušt32_t
 
	mblock_út
;

39 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
h—d
;

42 
	spmem_log_block
 {

43 
ušt32_t
 
	mid
;

44 
size_t
 
	mp
;

45 
	md©a
[
kPmemLogBlockSize
];

46 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
Ãxt
;

48 
pmem_log_block
(
pmem
::
obj
::
³rsi¡’t_±r
<pmem_log_block> 
Ãxt_
 = 
nuÎ±r
è: 
p
(0), 
d©a
(), 
Ãxt
(next_) { }

53 şas 
	cPmemLog
 {

54 
	mpublic
:

55 
	sBlock
 {

56 
¡d
::
©omic
<
size_t
> 
p
;

57 * 
	md©a
;

58 
	mpmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
p_block
;

60 
ex¶ic™
 
Block
(
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
p_block_
);

61 * 
AÎoÿ‹
(cÚ¡ 
size_t
 
size
);

64 
PmemLog
(cÚ¡ 
poŞ_id
, cÚ¡ 
sh¬d_id
);

66 ~
PmemLog
();

68 
PmemPŒ
 
AÎoÿ‹
(cÚ¡ 
size_t
 
size
);

70 
	$poŞ_id
(è{  
poŞ_id_
; 
	}
}

72 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
	$poŞ
(è{  
poŞ_
; 
	}
}

74 
	g´iv©e
:

75 
Block
* 
G‘Cu¼’tBlock
();

77 cÚ¡ 
	gpoŞ_id_
;

78 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_
;

79 
	gpmem
::
obj
::
³rsi¡’t_±r
<
pmem_log
> 
p_log_
;

80 
	g¡d
::
©omic
<
Block
*> 
äÚt_
;

81 
	g¡d
::
©omic
<
size_t
> 
hmm
;

82 
	g¡d
::
mu‹x
 
block_š™_mu_
;

85 
	gPmemLog
::
Block
::Block(
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
p_block_
) {

86 
as£¹
(
p_block_
 !ğ
nuÎ±r
);

87 
	gp
.
¡Üe
(
p_block_
->
p
);

88 
	gd©a
 = 
p_block_
->
d©a
;

89 
	gp_block
 = 
p_block_
;

90 
	g¡d
::
©omic_th»ad_ãnû
(
¡d
::
memÜy_Üd”_»Ëa£
);

93 * 
	gPmemLog
::
Block
::
	$AÎoÿ‹
(cÚ¡ 
size_t
 
size
) {

94 
size_t
 
befÜe
 = 
p
.
	`ãtch_add
(
size
, 
MO_RELAXED
);

95 ià(
befÜe
 + 
size
 <ğ
kPmemLogBlockSize
) {

96  (*è(
d©a
 + 
befÜe
);

98  
nuÎ±r
;

100 
	}
}

102 
	gPmemLog
::
	$PmemLog
(cÚ¡ 
poŞ_id
, cÚ¡ 
sh¬d_id
è: 
	$poŞ_id_
(
poŞ_id
) {

103 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
poŞ_id_
);

104 
poŞ_
 = 
poŞ
;

105 autØ
roÙ
 = 
poŞ_
.
	`roÙ
();

106 ià(
roÙ
->
sh¬d
[
sh¬d_id
] =ğ
nuÎ±r
) {

108 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log
> 
p_log
;

109 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_log
>(
poŞ_
, 
p_log
);

110 
p_log
->
block_út
 = 0;

111 
roÙ
->
sh¬d
[
sh¬d_id
] = 
p_log
;

112 
p_log_
 = 
p_log
;

113 
äÚt_
.
	`¡Üe
(
nuÎ±r
);

116 
p_log_
 = 
roÙ
->
sh¬d
[
sh¬d_id
];

118 
¡d
::
funùiÚ
<
Block
*(
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
>)> 
š™_â
 =

119 [&](
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
p_block
) {

120  (
p_block
è? 
Ãw
 
	`Block
Õ_block, 
	`š™_â
Õ_block->
Ãxt
)è: 
nuÎ±r
;

122 autØ
h—d_block
 = 
	`š™_â
(
p_log_
->
h—d
);

124 autØ
h—d_block
 = 
Ãw
 
	`Block
(
p_log_
->
h—d
);

126 
äÚt_
.
	`¡Üe
(
h—d_block
);

128 
	}
}

130 
	gPmemLog
::~
	$PmemLog
() {

131 autØ
block
 = 
	`G‘Cu¼’tBlock
();

132 
block
->
p_block
->
p
 = block->p;

133 
	`şwb
(&(
block
->
p_block
->
p
), (
size_t
));

134 
	}
}

136 
	gPmemLog
::
Block
* 
PmemLog
::
	$G‘Cu¼’tBlock
() {

137 
Block
* 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

138 ià(
»t
 =ğ
nuÎ±r
) {

139 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
block_š™_mu_
);

140 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

141 ià(
»t
 =ğ
nuÎ±r
) {

142 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
p_Ãw_block
;

143 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_log_block
>(
poŞ_
, 
p_Ãw_block
, 
p_log_
->
h—d
);

145 
p_Ãw_block
->
id
 = 
p_log_
->
block_út
;

146 
p_log_
->
block_út
++;

148 
p_log_
->
h—d
 = 
p_Ãw_block
;

149 autØ
Ãw_block
 = 
Ãw
 
	`Block
(
p_Ãw_block
);

150 
äÚt_
.
	`¡Üe
(
Ãw_block
, 
MO_RELAXED
);

151 
»t
 = 
Ãw_block
;

154  
»t
;

155 
	}
}

157 
PmemPŒ
 
	gPmemLog
::
	$AÎoÿ‹
(cÚ¡ 
size_t
 
size
) {

158 
Block
* 
block
 = 
	`G‘Cu¼’tBlock
();

159 * 
buf
 = 
nuÎ±r
;

160 ià((
buf
 = 
block
->
	`AÎoÿ‹
(
size
)è=ğ
nuÎ±r
) {

161 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
block_š™_mu_
);

162 
block
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

163 ià((
buf
 = 
block
->
	`AÎoÿ‹
(
size
)è=ğ
nuÎ±r
) {

165 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
> 
p_Ãw_block
;

166 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_log_block
>(
poŞ_
, 
p_Ãw_block
, 
p_log_
->
h—d
);

168 
p_Ãw_block
->
id
 = 
p_log_
->
block_út
;

169 
p_log_
->
block_út
++;

171 
p_log_
->
h—d
 = 
p_Ãw_block
;

172 autØ
Ãw_block
 = 
Ãw
 
	`Block
(
p_Ãw_block
);

173 
äÚt_
.
	`¡Üe
(
Ãw_block
, 
MO_RELAXED
);

174 
buf
 = 
Ãw_block
->
	`AÎoÿ‹
(
size
);

177 
PmemPŒ
 
	`»t
(
poŞ_id_
, (
ušt64_t
è((
ušŒ_t
è
buf
 - (ušŒ_tè
poŞ_
.
	`hªdË
()));

178  
»t
;

179 
	}
}

	@core/pmem_log_writer.cc

1 
	~"li¡db/cÜe/pmem_log_wr™”.h
"

3 
ušt64_t
 
	gIulWr™”
::
	$Wr™e
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

4 #iâdeà
LISTDB_STRING_KEY


5 autØ
node_def
 = 
_Index
::
	`NewNodeDef
(
key
);

6 cÚ¡ 
size_t
 
®loc_size
 = 
_Index
::
Node
::
	`Compu‹AÎocSize
(
node_def
);

8 
	`årštf
(
¡d”r
, "notimpl\n");

9 
	`ex™
(1);

11 * 
buf
 = 
log_
.
	`AÎoÿ‹
()

12 
	}
}

	@core/pmem_log_writer.h

1 #iâdeà
LISTDB_CORE_PMEM_LOG_WRITER_H_


2 
	#LISTDB_CORE_PMEM_LOG_WRITER_H_


	)

4 
	~"li¡db/cÜe/log_wr™”.h
"

6 
	~<libpmemobj.h
>

8 
	~"li¡db/šdex/lockä“_pskli¡.h
"

10 şas 
	cIulWr™”
 : 
public
 
LogWr™”
 {

11 
public
:

12 
usšg
 
_Index
 = 
lockä“_pskli¡
;

14 
ušt64_t
 
	$Wr™e
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
è
ov”ride
;

16 
´iv©e
:

17 
PMEMobjpoŞ
* 
pİ_
;

	@core/pmem_ptr.h

1 #iâdeà
LISTDB_CORE_PMEM_PTR_H_


2 
	#LISTDB_CORE_PMEM_PTR_H_


	)

	@core/pmem_wal_writer.h

1 #iâdeà
LISTDB_CORE_PMEM_WAL_WRITER_H_


2 
	#LISTDB_CORE_PMEM_WAL_WRITER_H_


	)

6 
	~"li¡db/commÚ.h
"

7 
	~"li¡db/ut.h
"

8 
	~"li¡db/cÜe/log_wr™”.h
"

10 şas 
	cPmemW®Wr™”
 : 
public
 
LogWr™”
 {

11 
public
:

12 
ušt64_t
 
	$Wr™e
(cÚ¡ 
IKey
& 
key
, cÚ¡ 
V®ue
& 
v®ue
è
ov”ride
;

15 
ušt64_t
 
PmemW®Wr™”
::
	$Wr™e
(cÚ¡ 
IKey
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

16 cÚ¡ 
size_t
 
®loc_size
 = 
ut
::
	`AligÃdSize
(
key
.
	`size
() + 8 + 8);

17 
PmemPŒ
 
’Œy_±r
 = 
log_
.
	`AÎoÿ‹
(
®loc_size
);

18 * 
p
 = (*è
’Œy_±r
.
	`vaddr
();

19 
ušt64_t
 
g
 = 0;

20 
	`memıy
(
p
, 
key
.
	`d©a
(), 8);

21 
	`memıy
(
p
 + 8, &
v®ue
, 8);

22 
	}
}

	@core/skiplist_cache.h

1 #iâdeà
LISTDB_CORE_SKIPLIST_CACHE_H_


2 
	#LISTDB_CORE_SKIPLIST_CACHE_H_


	)

4 
	~<®gÜ™hm
>

5 
	~<s¡»am
>

7 
	~"li¡db/commÚ.h
"

8 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

9 
	~"li¡db/ut.h
"

10 
	~"li¡db/ut/¿ndom.h
"

13 
	#CACHE_SIZE_IS_FIELD_COUNT


	)

15 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

16 şas 
	cSkLi¡Cache
 {

17 
public
:

18 
usšg
 
PmemNode
 = 
B¿idedPmemSkLi¡
::
Node
;

19 cÚ¡ 
ušt16_t
 
	mkMaxHeight_
 = 
kSkLi¡CacheMaxHeight
;

20 cÚ¡ 
ušt16_t
 
	mkB¿nchšg_
 = 
kSkLi¡CacheB¿nchšg
;

22 
	sF›ld
 {

23 
Key
 
	mkey
;

24 
	m¡d
::
©omic
<
ušt64_t
> 
v®ue
;

26 
F›ld
(è: 
key
(0), 
v®ue
(0) { }

27 
F›ld
(cÚ¡ 
Key
& 
k
, 
ušt64_t
 
v
è: 
key
(k), 
v®ue
(v) { }

30 
S‘
(cÚ¡ 
Key
& 
k
, 
height
, 
ušt64_t
 
off£t
) {

31 
	mkey
 = 
k
;

33 
	mv®ue
.
¡Üe
((
¡©ic_ÿ¡
<
ušt64_t
>(
height
è<< 48è| 
off£t
, 
¡d
::
memÜy_Üd”_»Ëa£
);

36 
Re£t
() {

37 
	mv®ue
.
¡Üe
(0, 
¡d
::
memÜy_Üd”_»Ëa£
);

40 
boŞ
 
IsEm±y
() const {

41  
	mv®ue
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
) == 0;

44 
	mİ”©Ü
=(cÚ¡ 
F›ld
& 
Ùh”
) {

45 
key
 = 
Ùh”
.key;

46 
	mv®ue
.
¡Üe
(
Ùh”
.
v®ue
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
), std::
memÜy_Üd”_»Ëa£
);

49 
ušt16_t
 
height
(ècÚ¡ {  (
	mv®ue
 >> 48); }

50 
ušt64_t
 
off£t
() const {

51 cÚ¡ 
ušt64_t
 
	mkMask
 = 0x0000ffffffffffff;

52  (
	mv®ue
 & 
	mkMask
);

56 
	sNode
 {

57 
ušt64_t
 
	gg
;

58 
F›ld
 
	gf›lds
[
N
];

59 
	g¡d
::
©omic
<
Node
*> 
Ãxt
[1];

61 
ex¶ic™
 
Node
(cÚ¡ 
Key
& 
k
, 
height
, 
²ode_height
, 
ušt64_t
 
off£t
) {

62 
	gg
 = 
¡©ic_ÿ¡
<
ušt16_t
>(
height
);

63 
	gf›lds
[0].
S‘
(
k
, 
²ode_height
, 
off£t
);

65 
Key
* 
key
(è{  &
	gf›lds
[0].
	gkey
; }

66 
ušt16_t
 
height
(ècÚ¡ {  
	gg
 & 0xff; }

68 
boŞ
 
IsFuÎ
(è{  
	gf›lds
[
N
 - 1].
	gv®ue
 != 0; }

70 
MaybeShiáIn£¹F›ld
(cÚ¡ 
Key
& 
key
, 
²ode_height
, 
ušt64_t
 
off£t
) {

71 
as£¹
(
IsFuÎ
(è=ğ
çl£
);

72 
	gpos
 = 0;

73 
	gpos
 < 
	gN
) {

74 ià(!
	gf›lds
[
pos
].
IsEm±y
(è&& f›lds[pos].
	gkey
.
Com·»
(
key
) >= 0) {

75 
pos
++;

80 
as£¹
(
pos
 < 
N
);

81 
	gpos2
 = 
pos
;

82 
	gpos2
 < 
	gN
) {

83 ià(
	gf›lds
[
pos2
].
IsEm±y
()) {

86 
	gpos2
++;

88 
	gpos2
 > 
	gpos
) {

89 
	gf›lds
[
pos2
] = 
f›lds
[
pos
];

92 
	gpos2
--;

94 
	gf›lds
[
pos
].
S‘
(
key
, 
²ode_height
, 
off£t
);

97 
MaybeShiáD–‘eF›ldByPos™iÚ
(
pos
) {

98 
as£¹
(
pos
 != 0);

99 
	gpos
 < 
	gN
 - 1 && !
	gf›lds
[
pos
 + 1].
IsEm±y
()) {

100 
	gf›lds
[
pos
] = 
f›lds
[pos + 1];

101 
	gpos
++;

103 
	gf›lds
[
pos
].
Re£t
();

107 
	sCursÜ
 {

108 
Key
 
	gkey
;

109 
	g¡d
::
©omic
<
Node
*> 
node
;

111 
CursÜ
(è: 
key
(0), 
node
(
nuÎ±r
) { }

113 
S‘
(cÚ¡ 
Key
& 
k
, 
Node
* 
n
) {

114 
	gkey
 = 
k
;

115 
	gnode
.
¡Üe
(
n
, 
¡d
::
memÜy_Üd”_»Ëa£
);

118 
Re£t
() {

119 
	gnode
.
¡Üe
(
nuÎ±r
, 
¡d
::
memÜy_Üd”_»Ëa£
);

122 
boŞ
 
IsEm±y
() {

123  
	gnode
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
) == 0;

128 
SkLi¡Cache
(cÚ¡ 
poŞ_id
, 
size_t
 
ÿ·c™y
 = 
kSkLi¡CacheC­ac™y
);

132 
In£¹
(
PmemNode
* cÚ¡ 
p
);

134 
PmemNode
* 
LookupLessThª
(cÚ¡ 
Key
& 
key
);

137 
LookupLessThªOrEqu®sTo
(cÚ¡ 
Key
& 
key
, 
PmemNode
** 
out
);

139 
G‘DebugSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, std::¡ršg* 
buf
);

141 
size_t
 
	$AcquœeLßdSize
(è{  
size_
.
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
); 
	}
}

143 
	g´iv©e
:

144 
Node
* 
NewNode
(cÚ¡ 
Key
& 
key
, cÚ¡ 
height
, 
PmemNode
* 
p
 = 
nuÎ±r
);

146 
RªdomHeight
();

148 
PmemNode
* 
	$DecodeF›ldV®ue
(cÚ¡ 
F›ld
& 
f
) {

149  
PmemPŒ
::
Compo£
<
PmemNode
>(
poŞ_id_
, 
f
.
	`off£t
());

150 
	}
}

152 
boŞ
 
	$KeyIsAá”Node
(cÚ¡ 
Key
& 
key
, 
Node
* 
n
) const;

154 
Node
* 
	`FšdPos™iÚ
(cÚ¡ 
Key
& 
key
, Node* 
´eds
[], Node* 
succs
[]);

156 
	`MaybeMoveCursÜ
(
Node
* 
node
, 
begš
, 
’d
, Node* 
move_to
);

158 
	`MaybeUpd©eCursÜ
(
height
, cÚ¡ 
Key
& 
key
, 
Node
* 
node
);

160 
	`EviùSome
(
height_uµ”
);

162 cÚ¡ 
poŞ_id_
;

163 cÚ¡ 
size_t
 
ÿ·c™y_
;

164 
Node
* 
h—d_
;

169 
¡d
::
©omic
<
size_t
> 
size_
;

170 
¡d
::
veùÜ
<
CursÜ
> 
sm®Ë¡_cursÜ_
;

172 
	}
};

174 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

175 
SkLi¡Cache
<
N
>::
	$SkLi¡Cache
(cÚ¡ 
poŞ_id
, 
size_t
 
ÿ·c™y
)

176 : 
	`poŞ_id_
(
poŞ_id
),

177 
	`ÿ·c™y_
(
ÿ·c™y
),

178 
	`h—d_
(
	`NewNode
(
ušt64_t
{0
	}
}, 
	gkMaxHeight_
)),

179 
size_
(0),

180 
	$sm®Ë¡_cursÜ_
(
kMaxHeight
) {

181 
i
 = 0; i < 
kMaxHeight_
; i++) {

182 
h—d_
->
Ãxt
[
i
].
	`¡Üe
(
nuÎ±r
, 
¡d
::
memÜy_Üd”_»Ïxed
);

184 
¡d
::
	`©omic_th»ad_ãnû
(¡d::
memÜy_Üd”_»Ëa£
);

185 
	}
}

187 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

188 
SkLi¡Cache
<
N
>::
	$In£¹
(
PmemNode
* cÚ¡ 
p
) {

189 #ifdeà
CACHE_SIZE_IS_FIELD_COUNT


190 
size_t
 
cu¼_size
 = 
size_
.
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
);

191 ià(
cu¼_size
 + (
F›ld
è> 
ÿ·c™y_
) {

192 
num_eviùed
 = 
	`EviùSome
(
p
->
	`height
());

194 ià(
num_eviùed
 == 0) {

201 
Key
& 
key
 = 
p
->key;

204 
Node
* 
´eds
[
kMaxHeight_
];

205 
Node
* 
succs
[
kMaxHeight_
];

207 
Node
* 
n
 = 
	`FšdPos™iÚ
(
key
, 
´eds
, 
succs
);

208 ià(
n
 =ğ
nuÎ±r
) {

210 
height
 = 
	`RªdomHeight
();

211 
Node
* 
x
 = 
	`NewNode
(
key
, 
height
, 
p
);

212 
i
 = 0; i < 
height
; i++) {

213 
x
->
Ãxt
[
i
].
	`¡Üe
(
succs
[i], 
¡d
::
memÜy_Üd”_»Ïxed
);

214 
´eds
[
i
]->
Ãxt
[i].
	`¡Üe
(
x
, 
¡d
::
memÜy_Üd”_»Ëa£
);

216 #ifdeà
CACHE_SIZE_IS_FIELD_COUNT


217 
	`MaybeUpd©eCursÜ
(
p
->
	`height
(), 
key
, 
x
);

218 
size_
.
	`ãtch_add
((
F›ld
));

220 } ià(!
n
->
	`IsFuÎ
()) {

221 
n
->
	`MaybeShiáIn£¹F›ld
(
key
, 
p
->
	`height
(), 
PmemPŒ
::
	`Off£tOfVaddr
(
poŞ_id_
,…));

222 
	`MaybeUpd©eCursÜ
(
p
->
	`height
(), 
key
, 
n
);

223 #ifdeà
CACHE_SIZE_IS_FIELD_COUNT


224 
size_
.
	`ãtch_add
((
F›ld
));

232 auto& 
¥l™_f›ld
 = 
n
->
f›lds
[
N
/2];

233 auto& 
¥l™_key
 = 
¥l™_f›ld
.
key
;

234 
PmemNode
* 
¥l™_²ode
 = 
	`DecodeF›ldV®ue
(
¥l™_f›ld
);

237 
height
 = 
	`RªdomHeight
();

238 #ifdeà
CACHE_SIZE_IS_FIELD_COUNT


239 
size_
.
	`ãtch_add
((
F›ld
));

241 
size_t
 
node_size
 = 
ut
::
	`AligÃdSize
(8, (
Node
è+ (
height
 - 1) * 8);

242 ià(
cu¼_size
 + 
node_size
 > 
ÿ·c™y_
) {

243 
size_t
 
avaabË_¥aû_fÜ_height
 = 
ÿ·c™y_
 - (
cu¼_size
 + ((
Node
) - 8));

244 
height
 = 
avaabË_¥aû_fÜ_height
 / 8;

245 
node_size
 = 
ut
::
	`AligÃdSize
(8, (
Node
è+ (
height
 - 1) * 8);

246 
cu¼_size
 + 
node_size
 > 
ÿ·c™y_
 && 
height
 > 1) {

247 
height
--;

248 
node_size
 = 
ut
::
	`AligÃdSize
(8, (
Node
è+ (
height
 - 1) * 8);

251 
size_
.
	`ãtch_add
(
node_size
, 
¡d
::
memÜy_Üd”_»Ëa£
);

253 
Node
* 
x
 = 
	`NewNode
(
¥l™_key
, 
height
, 
¥l™_²ode
);

255 
boŞ
 
š£¹_to_Ãw_node
 = 
key
.
	`Com·»
(
¥l™_key
) <= 0;

258 
pos
 = 1;

259 ià(
š£¹_to_Ãw_node
) {

260 
i
 = 
N
/2 + 1; i < N; i++) {

262 ià(
	`UNLIKELY
(
n
->
f›lds
[
i
].
key
.
	`Com·»
(key) < 0)) {

263 
x
->
f›lds
[
pos
++].
	`S‘
(
key
, 
p
->
	`height
(), 
PmemPŒ
::
	`Off£tOfVaddr
(
poŞ_id_
,…));

265 
x
->
f›lds
[
pos
++] = 
n
->f›lds[
i
];

268 
i
 = 
N
/2 + 1; i < N; i++) {

270 
x
->
f›lds
[
pos
++] = 
n
->f›lds[
i
];

273 
	`MaybeMoveCursÜ
(
n
, 
N
/2 + 1, N, 
x
);

276 
i
 = 0; i < 
height
; i++) {

277 
x
->
Ãxt
[
i
].
	`¡Üe
(
succs
[i], 
¡d
::
memÜy_Üd”_»Ïxed
);

278 
´eds
[
i
]->
Ãxt
[i].
	`¡Üe
(
x
, 
¡d
::
memÜy_Üd”_»Ëa£
);

281 
i
 = 
N
-1; i >= N/2; i--) {

282 
n
->
f›lds
[
i
].
	`Re£t
();

284 ià(
š£¹_to_Ãw_node
) {

285 
	`MaybeUpd©eCursÜ
(
p
->
	`height
(), 
key
, 
x
);

287 
n
->
	`MaybeShiáIn£¹F›ld
(
key
, 
p
->
	`height
(), 
PmemPŒ
::
	`Off£tOfVaddr
(
poŞ_id_
,…));

288 
	`MaybeUpd©eCursÜ
(
p
->
	`height
(), 
key
, 
n
);

292 
	}
}

294 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

295 
ty³Çme
 
SkLi¡Cache
<
N
>::
PmemNode
* SkLi¡Cache<N>::
	$LookupLessThª
(cÚ¡ 
Key
& 
key
) {

296 
Node
* 
´eds
[
kMaxHeight_
];

297 
Node
* 
n
 = 
	`FšdPos™iÚ
(
key
, 
´eds
, 
nuÎ±r
);

298 ià(
n
 !ğ
nuÎ±r
) {

299 
i
 = 0; i < 
N
; i++) {

300 ià(
n
->
f›lds
[
i
].
	`IsEm±y
()) {

303 ià(
n
->
f›lds
[
i
].
key
.
	`Com·»
(key) < 0) {

304  
	`DecodeF›ldV®ue
(
n
->
f›lds
[
i
]);

308 ià(
´eds
[0] !ğ
h—d_
) {

309 
n
 = 
´eds
[0];

310  
	`DecodeF›ldV®ue
(
n
->
f›lds
[0]);

312  
nuÎ±r
;

313 
	}
}

316 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

317 
SkLi¡Cache
<
N
>::
	$LookupLessThªOrEqu®sTo
(cÚ¡ 
Key
& 
key
, 
PmemNode
** 
out
) {

318 
Node
* 
´eds
[
kMaxHeight_
];

319 
Node
* 
n
 = 
	`FšdPos™iÚ
(
key
, 
´eds
, 
nuÎ±r
);

320 ià(
n
 !ğ
nuÎ±r
) {

321 #iâdeà
SKIPLIST_CACHE_BINARY_SEARCH


322 
i
 = 0; i < 
N
; i++) {

323 ià(
n
->
f›lds
[
i
].
	`IsEm±y
()) {

326 
cmp
 = 
n
->
f›lds
[
i
].
key
.
	`Com·»
(key);

327 ià(
cmp
 == 0) {

328 *
out
 = 
	`DecodeF›ldV®ue
(
n
->
f›lds
[
i
]);

330 } ià(
cmp
 < 0) {

331 *
out
 = 
	`DecodeF›ldV®ue
(
n
->
f›lds
[
i
]);

336 
·
 = 0;

337 
pb
 = 
N
;

338 
i
;

339 
Ï¡_É_pos
 = 
N
;

340 
·
 < 
pb
) {

341 
i
 = (
pb
 + 
·
) / 2;

342 ià(
n
->
f›lds
[
i
].
	`IsEm±y
()) {

343 
pb
 = 
i
;

346 
cmp
 = 
n
->
f›lds
[
i
].
key
.
	`Com·»
(key);

347 ià(
cmp
 == 0) {

348 *
out
 = 
	`DecodeF›ldV®ue
(
n
->
f›lds
[
i
]);

350 } ià(
cmp
 > 0) {

351 
pb
 = 
i
;

355 
Ï¡_É_pos
 = 
i
;

356 
·
 = 
i
 + 1;

361 ià(
Ï¡_É_pos
 < 
N
) {

362 *
out
 = 
	`DecodeF›ldV®ue
(
n
->
f›lds
[
Ï¡_É_pos
]);

367 ià(
´eds
[0] !ğ
h—d_
) {

368 
n
 = 
´eds
[0];

369 *
out
 = 
	`DecodeF›ldV®ue
(
n
->
f›lds
[0]);

372 *
out
 = 
nuÎ±r
;

374 
	}
}

375 #undeà
SKIPLIST_CACHE_BINARY_SEARCH


377 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

378 
ty³Çme
 
SkLi¡Cache
<
N
>::
Node
* SkLi¡Cache<N>::
	$NewNode
(cÚ¡ 
Key
& 
key
, cÚ¡ 
height
, 
PmemNode
* 
p
) {

379 
size_t
 
node_size
 = 
ut
::
	`AligÃdSize
(8, (
Node
è+ (
height
 - 1) * 8);

380 * 
buf
 = 
	`®igÃd_®loc
(8, 
node_size
);

381 
Node
* 
node
;

382 ià(
p
 !ğ
nuÎ±r
) {

383 
node
 = 
	`Ãw
 (
buf
è
	`Node
(
key
, 
height
, 
p
->
	`height
(), 
PmemPŒ
::
	`Off£tOfVaddr
(
poŞ_id_
,…));

385 
node
 = 
	`Ãw
 (
buf
è
	`Node
(
key
, 
height
, 0, 0);

387  
node
;

388 
	}
}

390 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

391 
SkLi¡Cache
<
N
>::
	$RªdomHeight
() {

392 autØ
ºd
 = 
Rªdom
::
	`G‘TLSIn¡ªû
();

394 
height
 = 1;

395 
height
 < 
kMaxHeight_
 && 
ºd
->
	`Next
(è% 
kB¿nchšg_
 == 0) {

396 
height
++;

398  
height
;

399 
	}
}

401 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

402 
boŞ
 
SkLi¡Cache
<
N
>::
	$KeyIsAá”Node
(cÚ¡ 
Key
& 
key
, 
Node
* 
n
) const {

404  (
n
 !ğ
nuÎ±r
è&& (n->
	`key
()->
	`Com·»
(
key
) < 0);

405 
	}
}

407 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

408 
ty³Çme
 
SkLi¡Cache
<
N
>::
Node
* SkLi¡Cache<N>::
	$FšdPos™iÚ
(cÚ¡ 
Key
& 
key
, 
Node
* 
´eds
[], Node* 
succs
[]) {

409 
Node
* 
x
 = 
h—d_
;

410 
Ëv–
 = 
kMaxHeight_
 - 1;

411 
Node
* 
Ï¡_nÙ_aá”
 = 
nuÎ±r
;

412 
Œue
) {

413 
Node
* 
Ãxt
 = 
x
->Ãxt[
Ëv–
].
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

414 ià(
Ãxt
 !ğ
Ï¡_nÙ_aá”
 && 
	`KeyIsAá”Node
(
key
,‚ext)) {

415 
x
 = 
Ãxt
;

417 ià(
´eds
 !ğ
nuÎ±r
) {

418 
´eds
[
Ëv–
] = 
x
;

420 ià(
succs
 !ğ
nuÎ±r
) {

421 
succs
[
Ëv–
] = 
Ãxt
;

423 ià(
Ëv–
 == 0) {

424  
Ãxt
;

427 
Ï¡_nÙ_aá”
 = 
Ãxt
;

428 
Ëv–
--;

432 
	}
}

434 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

435 
SkLi¡Cache
<
N
>::
	$MaybeMoveCursÜ
(
Node
* 
node
, 
begš
, 
’d
, Node* 
move_to
) {

436 
i
 = 0; i < 
kMaxHeight_
; i++) {

437 ià(
sm®Ë¡_cursÜ_
[
i
].
node
.
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
) ==‚ode) {

438 
pos
 = 
begš
;

439 
pos
 < 
’d
) {

440 ià(
node
->
f›lds
[
pos
].
	`IsEm±y
()) {

443 
cmp
 = 
node
->
f›lds
[
pos
].
key
.
	`Com·»
(
sm®Ë¡_cursÜ_
[
i
].key);

444 ià(
cmp
 < 0) {

446 } ià(
cmp
 == 0) {

447 
sm®Ë¡_cursÜ_
[
i
].
node
.
	`¡Üe
(
move_to
, 
¡d
::
memÜy_Üd”_»Ïxed
);

450 
pos
++;

454 
	}
}

456 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

457 
SkLi¡Cache
<
N
>::
	$MaybeUpd©eCursÜ
(
height
, cÚ¡ 
Key
& 
key
, 
Node
* 
node
) {

458 ià(
sm®Ë¡_cursÜ_
[
height
].
	`IsEm±y
(è|| sm®Ë¡_cursÜ_[height].
key
.
	`Com·»
(key) > 0) {

459 
sm®Ë¡_cursÜ_
[
height
].
	`S‘
(
key
, 
node
);

461 
	}
}

463 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

464 
SkLi¡Cache
<
N
>::
	$EviùSome
(
height_uµ”
) {

467 cÚ¡ 
kEviùiÚB©chSize
 = 4;

468 
eviùiÚ_út
 = 0;

469 
cu¼_height
 = 0;

470 
boŞ
 
cŞËùiÚ_dÚe
 = 
çl£
;

472 
cu¼_height
 < 
height_uµ”
 && !
cŞËùiÚ_dÚe
) {

473 ià(
sm®Ë¡_cursÜ_
[
cu¼_height
].
	`IsEm±y
()) {

474 
cu¼_height
++;

477 
¡d
::
veùÜ
<¡d::
·œ
<
Node
*, >> 
viùims
;

478 
Node
* 
x
 = 
sm®Ë¡_cursÜ_
[
cu¼_height
].
node
.
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
);

479 
x
 !ğ
nuÎ±r
 && !
cŞËùiÚ_dÚe
) {

483 
pos
 = 
N
 - 1;

484 
pos
 > 0) {

485 ià(!
x
->
f›lds
[
pos
].
	`IsEm±y
(è&& x->f›lds[pos].
	`height
(è- 1 =ğ
cu¼_height
) {

487 
viùims
.
	`em¶aû_back
(
x
, 
pos
);

488 ià(
eviùiÚ_út
 + 
viùims
.
	`size
(è> 
kEviùiÚB©chSize
) {

489 
cŞËùiÚ_dÚe
 = 
Œue
;

493 
pos
--;

495 
x
 = x->
Ãxt
[0].
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
);

498 ià(
viùims
.
	`size
(è> 
kEviùiÚB©chSize
 - 
eviùiÚ_út
) {

499 auto& 
Ãw_sm®Ë¡
 = 
viùims
.
	`back
();

500 
Node
* 
Ãw_sm®Ë¡_node
 = 
Ãw_sm®Ë¡
.
fœ¡
;

501 
Ãw_sm®Ë¡_f›ld_pos
 = 
Ãw_sm®Ë¡
.
£cÚd
;

502 
sm®Ë¡_cursÜ_
[
cu¼_height
].
	`S‘
(
Ãw_sm®Ë¡_node
->
f›lds
[
Ãw_sm®Ë¡_f›ld_pos
].
key
,‚ew_smallest_node);

503 
viùims
.
	`pİ_back
();

505 
sm®Ë¡_cursÜ_
[
cu¼_height
].
	`Re£t
();

508 autØ
™
 = 
viùims
.
	`begš
();

509 
™
 !ğ
viùims
.
	`’d
()) {

510 
¡d
::
veùÜ
<> 
pos™iÚs
;

511 
Node
* 
x
 = 
™
->
fœ¡
;

512 
™
 !ğ
viùims
.
	`’d
()) {

513 ià(
™
->
fœ¡
 =ğ
x
) {

514 
pos™iÚs
.
	`push_back
(
™
->
£cÚd
);

516 ++
™
;

518 auto& 
pos
 : 
pos™iÚs
) {

519 
x
->
	`MaybeShiáD–‘eF›ldByPos™iÚ
(
pos
);

522 
eviùiÚ_út
 +ğ
viùims
.
	`size
();

523 
cu¼_height
++;

526 
size_
.
	`ãtch_sub
(
eviùiÚ_út
 * (
F›ld
));

528  
eviùiÚ_út
;

529 
	}
}

531 
	g‹m¶©e
 <
	g¡d
::
size_t
 
N
>

532 
SkLi¡Cache
<
N
>::
	$G‘DebugSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, std::¡ršg* 
buf
) {

533 
¡d
::
¡ršg¡»am
 
ss
;

534 ià(
Çme
 == "cursor") {

535 
i
 = 0; i < 
kMaxHeight_
; i++) {

536 
ss
 << 
i
 + 1 << ": " << 
sm®Ë¡_cursÜ_
[i].
key
.
	`key_num
(è<< 
¡d
::
’dl
;

538 
buf
->
	`assign
(
¡d
::
	`move
(
ss
.
	`¡r
()));

540 
	}
}

	@core/skiplist_cache_test.cc

1 #iâdeà
LISTDB_SKIPLIST_CACHE


2 
	~<io¡»am
>

3 
	$maš
() {

4 
¡d
::
û¼
 << "cmak.. -DSKIPLIST_CACHE=ON" << std::
’dl
;

6 
	}
}

8 
	~<®gÜ™hm
>

9 
	~<f¡»am
>

10 
	~<memÜy
>

11 
	~<s¡»am
>

12 
	~<¡ršg_v›w
>

13 
	~<veùÜ
>

14 
	~<io¡»am
>

16 
	~<ex³rim’l/fesy¡em
>

17 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

19 
	~"li¡db/pmem/pmem.h
"

20 
	~"li¡db/cÜe/pmem_log.h
"

21 
	~"li¡db/cÜe/skli¡_ÿche.h
"

22 
	~"li¡db/pÜt/pÜt_posix.h
"

23 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

24 
	~"li¡db/ut/¿ndom.h
"

26 
	gpoŞ_id
;

28 
	$In™PoŞS‘
() {

30 
i
 = 0; i < 1 ; i++) {

31 
¡d
::
¡ršg¡»am
 
pss
;

32 
pss
 << "/pmem" << 
i
 << "/wkim/cache_test";

33 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

34 
fs
::
	`»move_®l
(
·th
);

35 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

37 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

38 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

39 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

40 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

41 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

42 
¡rm
.
	`şo£
();

44 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

45 
poŞ_id
 = 
id
;

49 
	}
}

51 #ifdeà
LISTDB_STRING_KEY


52 
	gkey_size_
 = 
kSŒšgKeyL’gth
;

54 
	gkey_size_
 = (
ušt64_t
);

57 
	g¡d
::
¡ršg_v›w
 
AÎoÿ‹Key
(
¡d
::
unique_±r
<cÚ¡ []>* 
key_gu¬d
) {

58 * 
d©a
 = 
Ãw
 [
key_size_
];

59 cÚ¡ * 
	gcÚ¡_d©a
 = 
d©a
;

60 
	gkey_gu¬d
->
»£t
(
cÚ¡_d©a
);

61  
	g¡d
::
¡ršg_v›w
(
key_gu¬d
->
g‘
(), 
key_size_
);

64 
	$G’”©eKeyFromIÁ
(
ušt64_t
 
v
, 
¡d
::
¡ršg_v›w
* 
key
) {

65 * 
¡¬t
 = 
cÚ¡_ÿ¡
<*>(
key
->
	`d©a
());

66 * 
pos
 = 
¡¬t
;

68 
by‹s_to_fl
 = 
¡d
::
	`mš
(
key_size_
 - 
¡©ic_ÿ¡
<>(
pos
 - 
¡¬t
), 8);

69 ià(
pÜt
::
kL™eEndŸn
) {

70 
i
 = 0; i < 
by‹s_to_fl
; ++i) {

71 
pos
[
i
] = (
v
 >> ((
by‹s_to_fl
 - i - 1) << 3)) & 0xFF;

74 
	`memıy
(
pos
, 
¡©ic_ÿ¡
<*>(&
v
), 
by‹s_to_fl
);

76 
pos
 +ğ
by‹s_to_fl
;

77 ià(
key_size_
 > 
pos
 - 
¡¬t
) {

78 
	`mem£t
(
pos
, '0', 
key_size_
 - (po - 
¡¬t
));

80 
	}
}

82 
usšg
 
	gPmemNode
 = 
B¿idedPmemSkLi¡
::
Node
;

83 
PmemLog
* 
	glog_
;

85 
PmemNode
* 
	$C»©eIULNode
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
key_sv
, 
height
) {

86 
Key
& 
key
 = *((Key*è
key_sv
.
	`d©a
());

87 
size_t
 
iul_’Œy_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

88 autØ
log_·ddr
 = 
log_
->
	`AÎoÿ‹
(
iul_’Œy_size
);

89 
PmemNode
* 
iul_’Œy
 = (PmemNode*è
log_·ddr
.
	`g‘
();

90 
iul_’Œy
->
g
 = 
height
;

91 
iul_’Œy
->
v®ue
 = 1234;

92 
iul_’Œy
->
key
 = key;

93  
iul_’Œy
;

94 
	}
}

96 
	$maš
() {

97 
	`In™PoŞS‘
();

98 
log_
 = 
Ãw
 
	`PmemLog
(
poŞ_id
, 0);

100 
n
 = 40;

102 autØ
c
 = 
Ãw
 
SkLi¡Cache
<4>(
poŞ_id
, 16 * 
n
 / 2);

104 
¡d
::
unique_±r
<cÚ¡ []> 
key_gu¬d
;

105 
¡d
::
¡ršg_v›w
 
key
 = 
	`AÎoÿ‹Key
(&
key_gu¬d
);

107 
Rªdom64
 
	`¿nd
(999);

108 
¡d
::
veùÜ
<
ušt64_t
> 
¿ndšts
;

110 
i
 = 0; i < 
n
; i++) {

111 
¿ndšts
.
	`push_back
(
¿nd
.
	`UnifÜm
(
n
<<3) + 1);

112 
¡d
::
cout
 << 
¿ndšts
.
	`back
() << " ";

114 
¡d
::
cout
 << std::
’dl
;

116 
i
 = 0; i < 
n
; i++) {

117 
	`G’”©eKeyFromIÁ
(
¿ndšts
[
i
], &
key
);

118 
height
 = 
¿nd
.
	`Next
() % 12 + 1;

119 
PmemNode
* 
p
 = 
	`C»©eIULNode
(
key
, 
height
);

120 
¡d
::
cout
 << 
p
 << ": " <<…->
key
.
	`key_num
(è<< std::
’dl
;

121 
c
->
	`In£¹
(
p
);

124 
ušt64_t
 
lkey_št
;

126 
lkey_št
 = 
¿ndšts
[0];

127 
¡d
::
cout
 << "looku°key: " << 
lkey_št
 << std::
’dl
;

128 
	`G’”©eKeyFromIÁ
(
lkey_št
, &
key
);

129 
Key
& 
lookup_key
 = *((Key*è
key
.
	`d©a
());

130 
PmemNode
* 
É
 = 
c
->
	`LookupLessThª
(
lookup_key
);

131 
¡d
::
cout
 << 
É
 << std::
’dl
;

134 
lkey_št
 = 
¿ndšts
[0] + 1;

135 
¡d
::
cout
 << "looku°key: " << 
lkey_št
 << std::
’dl
;

136 
	`G’”©eKeyFromIÁ
(
lkey_št
, &
key
);

137 
Key
& 
lookup_key
 = *((Key*è
key
.
	`d©a
());

138 
PmemNode
* 
É
 = 
c
->
	`LookupLessThª
(
lookup_key
);

139 
¡d
::
cout
 << 
É
 << std::
’dl
;

142 
lkey_št
 = 
¿ndšts
[0] - 1;

143 
¡d
::
cout
 << "looku°key: " << 
lkey_št
 << std::
’dl
;

144 
	`G’”©eKeyFromIÁ
(
lkey_št
, &
key
);

145 
Key
& 
lookup_key
 = *((Key*è
key
.
	`d©a
());

146 
PmemNode
* 
É
 = 
c
->
	`LookupLessThª
(
lookup_key
);

147 
¡d
::
cout
 << 
É
 << std::
’dl
;

150 
¡d
::
¡ršg
 
debug_¡r
;

151 
c
->
	`G‘DebugSŒšg
("cursÜ", &
debug_¡r
);

152 
¡d
::
cout
 << 
debug_¡r
 << std::
’dl
;

155 
	}
}

	@core/static_hashtable_cache.h

1 #iâdeà
LISTDB_CORE_STATIC_HASHTABLE_CACHE_H_


2 
	#LISTDB_CORE_STATIC_HASHTABLE_CACHE_H_


	)

4 
	~"li¡db/commÚ.h
"

5 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

6 
	~"li¡db/lib/murmur3.h
"

8 şas 
	cSticHashTabËCache
 {

9 
	mpublic
:

10 
usšg
 
PmemNode
 = 
B¿idedPmemSkLi¡
::
Node
;

12 
	sBuck‘
 {

13 
	m¡d
::
©omic
<
PmemNode
*> 
v®ue
;

15 
Buck‘
(è: 
v®ue
(
nuÎ±r
) { }

18 
SticHashTabËCache
(
size_t
 
size
, 
sh¬d
);

20 
Buck‘
* 
	$©
(cÚ¡ 
i
è{  &(
buck‘s_
[i]); 
	}
}

22 
In£¹
(cÚ¡ 
Key
& 
key
, 
PmemNode
* cÚ¡ 
p
);

24 
PmemNode
* 
Lookup
(cÚ¡ 
Key
& 
key
);

26 
ušt32_t
 
Hash
(cÚ¡ 
Key
& 
key
);

28 
	g´iv©e
:

29 cÚ¡ 
size_t
 
size_
;

30 cÚ¡ 
	gsh¬d_
;

31 cÚ¡ 
ušt32_t
 
	g£ed_
;

32 
Buck‘
* 
	gbuck‘s_
;

35 
	gSticHashTabËCache
::
	$SticHashTabËCache
(
size_t
 
size
, 
sh¬d
)

36 : 
	`size_
(
size
), 
	`sh¬d_
(
sh¬d
), 
	`£ed_
(
¡d
::
hash
<>()(
sh¬d_
)) {

37 
buck‘s_
 = 
Ãw
 
Buck‘
[
size
];

38 
¡d
::
	`©omic_th»ad_ãnû
(¡d::
memÜy_Üd”_£q_c¡
);

39 
	}
}

41 
	gSticHashTabËCache
::
	$In£¹
(cÚ¡ 
Key
& 
key
, 
PmemNode
* cÚ¡ 
p
) {

42 
ušt32_t
 
pos
 = 
	`Hash
(
key
);

43 
buck‘s_
[
pos
].
v®ue
.
	`¡Üe
(
p
, 
¡d
::
memÜy_Üd”_£q_c¡
);

44 
	}
}

46 
	gSticHashTabËCache
::
PmemNode
* 
SticHashTabËCache
::
	$Lookup
(cÚ¡ 
Key
& 
key
) {

47 
ušt32_t
 
pos
 = 
	`Hash
(
key
);

48 
PmemNode
* 
v®ue
 = 
buck‘s_
[
pos
].v®ue.
	`lßd
(
¡d
::
memÜy_Üd”_£q_c¡
);

49 ià(
v®ue
 && v®ue->
key
.
	`Com·»
(key) == 0) {

50  
v®ue
;

52  
nuÎ±r
;

53 
	}
}

55 
šlše
 
ušt32_t
 
	gSticHashTabËCache
::
	$Hash
(cÚ¡ 
Key
& 
key
) {

56 
ušt32_t
 
h
;

58 #iâdeà
LISTDB_STRING_KEY


59 
	`MurmurHash3_x86_32
(&
key
, (
ušt64_t
), 
£ed_
, (*è&
h
);

61 
	`MurmurHash3_x86_32
(
key
.
	`d©a
(), 
kSŒšgKeyL’gth
, 
£ed_
, (*è&
h
);

63  
h
 % 
size_
;

64 
	}
}

	@db_client.h

1 #iâdeà
LISTDB_DB_CLIENT_H_


2 
	#LISTDB_DB_CLIENT_H_


	)

4 
	~<®gÜ™hm
>

5 
	~<veùÜ
>

7 
	~"li¡db/commÚ.h
"

8 
	~"li¡db/li¡db.h
"

9 
	~"li¡db/ut.h
"

10 
	~"li¡db/ut/¿ndom.h
"

12 
	#LEVEL_CHECK_PERIOD_FACTOR
 1

	)

15 şas 
	cDBCl›Á
 {

16 
	mpublic
:

17 
usšg
 
MemNode
 = 
Li¡DB
::MemNode;

18 
usšg
 
	mPmemNode
 = 
Li¡DB
::
PmemNode
;

20 
DBCl›Á
(
Li¡DB
* 
db
, 
id
, 
»giÚ
);

22 
S‘RegiÚ
(
»giÚ
);

24 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

26 
boŞ
 
G‘
(cÚ¡ 
Key
& 
key
, 
V®ue
* 
v®ue_out
);

28 #ià
defšed
(
LISTDB_STRING_KEY
è&& 
	$defšed
(
LISTDB_WISCKEY
)

29 
	`PutSŒšgKV
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
key_sv
, cÚ¡ std::¡ršg_v›w& 
v®ue
);

30 
boŞ
 
	`G‘SŒšgKV
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
key_sv
, 
V®ue
* 
v®ue_out
);

35 
size_t
 
	$pmem_g‘_út
(è{  
pmem_g‘_út_
; }

36 
size_t
 
	$£¬ch_vis™_út
(è{  
£¬ch_vis™_út_
; 
	}
}

37 
size_t
 
	$height_vis™_út
(
h
è{  
height_vis™_út_
[h]; 
	}
}

40 
	g´iv©e
:

41 
D¿mRªdomHeight
();

42 
PmemRªdomHeight
();

44 
KeySh¬d
(cÚ¡ 
Key
& 
key
);

46 #ifdeà
LISTDB_EXPERIMENTAL_SEARCH_LEVEL_CHECK


47 
PmemPŒ
 
Lev–Lookup
(cÚ¡ 
Key
& 
key
, cÚ¡ 
poŞ_id
, cÚ¡ 
Ëv–
, 
B¿idedPmemSkLi¡
* 
skli¡
);

49 
PmemPŒ
 
Lookup
(cÚ¡ 
Key
& 
key
, cÚ¡ 
poŞ_id
, 
B¿idedPmemSkLi¡
* 
skli¡
);

50 
PmemPŒ
 
LookupL1
(cÚ¡ 
Key
& 
key
, cÚ¡ 
poŞ_id
, 
B¿idedPmemSkLi¡
* 
skli¡
, cÚ¡ 
sh¬d
);

52 
Li¡DB
* 
	gdb_
;

53 
	gid_
;

54 
	g»giÚ_
;

55 
	gl0_poŞ_id_
;

56 
	gl1_poŞ_id_
;

57 
Rªdom
 
	gºd_
;

58 
PmemLog
* 
	glog_
[
kNumSh¬ds
];

59 #ifdeà
LISTDB_WISCKEY


60 
PmemBlob
* 
	gv®ue_blob_
[
kNumSh¬ds
];

63 
size_t
 
	gpmem_g‘_út_
 = 0;

64 
size_t
 
	g£¬ch_vis™_út_
 = 0;

65 
size_t
 
	gheight_vis™_út_
[
kMaxHeight
] = {};

67 #ifdeà
GROUP_LOGGING


68 
	sLogI‹m
 {

69 
Key
 
	gkey
;

70 
ušt64_t
 
	gg
;

71 
V®ue
 
	gv®ue
;

72 
MemNode
* 
	gmem_node
;

75 
	g¡d
::
veùÜ
<
LogI‹m
> 
log_group_
[
kNumSh¬ds
];

76 
size_t
 
	glog_group_®loc_size_
[
kNumSh¬ds
];

82 
	gDBCl›Á
::
	$DBCl›Á
(
Li¡DB
* 
db
, 
id
, 
»giÚ
è: 
	`db_
(db), 
	`id_
(id), 
	`»giÚ_
ÔegiÚ % 
kNumRegiÚs
), 
	$ºd_
(
id
) {

83 
i
 = 0; i < 
kNumSh¬ds
; i++) {

84 
log_
[
i
] = 
db_
->
	`log
(
»giÚ_
, i);

85 #ifdeà
LISTDB_WISCKEY


86 
v®ue_blob_
[
i
] = 
db_
->
	`v®ue_blob
(
»giÚ_
, i);

89 
l0_poŞ_id_
 = 
db_
->
	`l0_poŞ_id
(
»giÚ_
);

90 
l1_poŞ_id_
 = 
db_
->
	`l1_poŞ_id
(
»giÚ_
);

91 
	}
}

93 
	gDBCl›Á
::
	$S‘RegiÚ
(
»giÚ
) {

94 
»giÚ_
 = 
»giÚ
;

95 
i
 = 0; i < 
kNumSh¬ds
; i++) {

96 
log_
[
i
] = 
db_
->
	`log
(
»giÚ_
, i);

97 #ifdeà
LISTDB_WISCKEY


98 
v®ue_blob_
[
i
] = 
db_
->
	`v®ue_blob
(
»giÚ_
, i);

101 
	}
}

103 
	gDBCl›Á
::
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

104 #iâdeà
GROUP_LOGGING


105 
s
 = 
	`KeySh¬d
(
key
);

107 
ušt64_t
 
pmem_height
 = 
	`PmemRªdomHeight
();

108 
size_t
 
iul_’Œy_size
 = (
PmemNode
è+ (
pmem_height
 - 1è* (
ušt64_t
);

109 
size_t
 
kv_size
 = 
key
.
	`size
(è+ (
V®ue
);

112 autØ
mem
 = 
db_
->
	`G‘Wr™abËMemTabË
(
kv_size
, 
s
);

113 
ušt64_t
 
l0_id
 = 
mem
->
	`l0_id
();

116 autØ
log_·ddr
 = 
log_
[
s
]->
	`AÎoÿ‹
(
iul_’Œy_size
);

117 
PmemNode
* 
iul_’Œy
 = (PmemNode*è
log_·ddr
.
	`g‘
();

118 #ifdeà
LOG_NTSTORE


119 
	`_mm_¡»am_pi
((
__m64
*è&
iul_’Œy
->
g
, (__m64è
pmem_height
);

120 
	`_mm_¡»am_pi
((
__m64
*è&
iul_’Œy
->
v®ue
, (__m64) value);

122 
	`_mm_¡»am_pi
((
__m64
*è&
iul_’Œy
->
key
, (__m64è(
ušt64_t
) key);

124 
iul_’Œy
->
g
 = (
l0_id
 << 32è| 
pmem_height
;

125 
iul_’Œy
->
v®ue
 = value;

126 
	`şwb
(&
iul_’Œy
->
g
, 16);

127 
	`_mm_sãnû
();

128 
iul_’Œy
->
key
 = key;

129 
	`şwb
(
iul_’Œy
, 8);

134 
ušt64_t
 
d¿m_height
 = 
	`D¿mRªdomHeight
();

135 
MemNode
* 
node
 = (MemNode*è
	`m®loc
((MemNodeè+ (
d¿m_height
 - 1è* (
ušt64_t
));

136 
node
->
key
 = key;

137 
node
->
g
 = (
l0_id
 << 32è| 
d¿m_height
;

138 
node
->
v®ue
 = 
log_·ddr
.
	`dump
();

139 
	`mem£t
((*è&
node
->
Ãxt
[0], 0, 
d¿m_height
 * (
ušt64_t
));

141 autØ
skli¡
 = 
mem
->
	`skli¡
();

142 
skli¡
->
	`In£¹
(
node
);

143 
mem
->
	`w_UnRef
();

145 
s
 = 
	`KeySh¬d
(
key
);

147 
ušt64_t
 
height
 = 
	`RªdomHeight
();

149 
size_t
 
kv_size
 = 
key
.
	`size
(è+ (
V®ue
);

153 
MemNode
* 
node
 = (MemNode*è
	`m®loc
((MemNodeè+ (
height
 - 1è* (
ušt64_t
));

154 
node
->
key
 = key;

155 
node
->
g
 = 
height
;

157 
node
->
v®ue
 = 0;

158 
	`mem£t
(&
node
->
Ãxt
[0], 0, 
height
 * (
ušt64_t
));

160 autØ
mem
 = 
db_
->
	`G‘Wr™abËMemTabË
(
kv_size
, 
s
);

161 autØ
skli¡
 = 
mem
->
	`skli¡
();

163 
size_t
 
iul_’Œy_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

164 
log_group_
[
s
].
	`em¶aû_back
(
LogI‹m
{ 
key
, 
height
, 
v®ue
, 
node
 });

165 
log_group_®loc_size_
[
s
] +ğ
iul_’Œy_size
;

166 ià(
log_group_
[
s
].
	`size
() > 7) {

167 
group_size
 = 
log_group_
[
s
].
	`size
();

176 autØ
log_·ddr
 = 
log_
[
s
]->
	`AÎoÿ‹
(
log_group_®loc_size_
[s]);

177 * 
p
 = (*è
log_·ddr
.
	`g‘
();

178 autØ
poŞ_id
 = 
log_·ddr
.
	`poŞ_id
();

179 autØ
poŞ_off£t
 = 
log_·ddr
.
	`off£t
();

181 
i
 = 0; i < 
group_size
; i++) {

182 
PmemNode
* 
iul_’Œy
 = (PmemNode*è(
p
);

183 
iul_’Œy
->
key
 = 
log_group_
[
s
][
i
].key;

184 
iul_’Œy
->
g
 = 
log_group_
[
s
][
i
].tag;

185 
iul_’Œy
->
v®ue
 = 
log_group_
[
s
][
i
].value;

186 
log_group_
[
s
][
i
].
mem_node
->
v®ue
 = 
	`PmemPŒ
(
poŞ_id
, 
p
).
	`dump
();

187 
p
 +ğ(
PmemNode
è+ (
log_group_
[
s
][
i
].
g
 - 1) * 8;

190 
	`şwb
(
log_·ddr
.
	`g‘
(), 
log_group_®loc_size_
[
s
]);

191 
log_group_
[
s
].
	`ş—r
();

192 
log_group_®loc_size_
[
s
] = 0;

195 
skli¡
->
	`In£¹
(
node
);

196 
mem
->
	`w_UnRef
();

209 
	}
}

211 
boŞ
 
	gDBCl›Á
::
	$G‘
(cÚ¡ 
Key
& 
key
, 
V®ue
* 
v®ue_out
) {

212 
s
 = 
	`KeySh¬d
(
key
);

214 
MemTabËLi¡
* 

 = (MemTabËLi¡*è
db_
->
	`G‘TabËLi¡
(0, 
s
);

216 autØ
bË
 = 

->
	`G‘FrÚt
();

217 
bË
) {

218 ià(
bË
->
	`ty³
(è=ğ
TabËTy³
::
kMemTabË
) {

219 autØ
mem
 = (
MemTabË
*è
bË
;

220 autØ
skli¡
 = 
mem
->
	`skli¡
();

221 autØ
found
 = 
skli¡
->
	`Lookup
(
key
);

222 ià(
found
 && found->
key
 == key) {

223 *
v®ue_out
 = 
found
->
v®ue
;

224  
Œue
;

226 } ià(
bË
->
	`ty³
(è=ğ
TabËTy³
::
kPmemTabË
) {

229 
bË
 =abË->
	`Next
();

232 #ifdeà
LISTDB_L0_CACHE


234 autØ
ht
 = 
db_
->
	`G‘HashTabË
(
s
);

235 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


236 ià(
ht
->
	`G‘
(
key
, 
v®ue_out
)) {

237  
Œue
;

239 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


240 
Li¡DB
::
PmemNode
* 
rv
 = 
ht
->
	`Lookup
(
key
);

241 ià(
rv
) {

242 *
v®ue_out
 = 
rv
->
v®ue
;

243  
Œue
;

245 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


246 
Li¡DB
::
PmemNode
* 
rv
 = 
ht
->
	`Lookup
(
key
);

247 ià(
rv
) {

248 *
v®ue_out
 = 
rv
->
v®ue
;

249  
Œue
;

251 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


252 
Li¡DB
::
PmemNode
* 
rv
 = 
ht
->
	`Lookup
(
key
);

253 ià(
rv
) {

254 *
v®ue_out
 = 
rv
->
v®ue
;

255  
Œue
;

260 
pmem_g‘_út_
++;

261 
bË
) {

262 autØ
pmem
 = (
PmemTabË
*è
bË
;

263 autØ
skli¡
 = 
pmem
->
	`skli¡
();

265 autØ
found_·ddr
 = 
	`Lookup
(
key
, 
l0_poŞ_id_
, 
skli¡
);

266 
Li¡DB
::
PmemNode
* 
found
 = (Li¡DB::PmemNode*è
found_·ddr
.
	`g‘
();

267 ià(
found
 && found->
key
 == key) {

269 *
v®ue_out
 = 
found
->
v®ue
;

270  
Œue
;

272 
bË
 =abË->
	`Next
();

277 autØ

 = (
PmemTabËLi¡
*è
db_
->
	`G‘TabËLi¡
(1, 
s
);

278 autØ
bË
 = 

->
	`G‘FrÚt
();

279 
bË
) {

280 autØ
pmem
 = (
PmemTabË
*è
bË
;

281 autØ
skli¡
 = 
pmem
->
	`skli¡
();

283 autØ
found_·ddr
 = 
	`LookupL1
(
key
, 
l1_poŞ_id_
, 
skli¡
, 
s
);

284 
Li¡DB
::
PmemNode
* 
found
 = (Li¡DB::PmemNode*è
found_·ddr
.
	`g‘
();

285 ià(
found
 && found->
key
 == key) {

287 *
v®ue_out
 = 
found
->
v®ue
;

288  
Œue
;

290 
bË
 =abË->
	`Next
();

293  
çl£
;

294 
	}
}

296 #ià
defšed
(
LISTDB_STRING_KEY
è&& defšed(
LISTDB_WISCKEY
)

297 
	gDBCl›Á
::
	$PutSŒšgKV
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
key_sv
, cÚ¡ std::¡ršg_v›w& 
v®ue
) {

298 
Key
& 
key
 = *((Key*è
key_sv
.
	`d©a
());

302 
s
 = 
	`KeySh¬d
(
key
);

304 
ušt64_t
 
pmem_height
 = 
	`PmemRªdomHeight
();

305 
size_t
 
iul_’Œy_size
 = (
PmemNode
è+ (
pmem_height
 - 1è* (
ušt64_t
);

309 
size_t
 
v®ue_®loc_size
 = 
ut
::
	`AligÃdSize
(8, 8 + 
v®ue
.
	`size
());

310 autØ
v®ue_·ddr
 = 
v®ue_blob_
[
s
]->
	`AÎoÿ‹
(
v®ue_®loc_size
);

311 * 
v®ue_p
 = (*è
v®ue_·ddr
.
	`g‘
();

312 *((
size_t
*è
v®ue_p
èğ
v®ue
.
	`size
();

313 
v®ue_p
 +ğ(
size_t
);

314 
	`memıy
(
v®ue_p
, 
v®ue
.
	`d©a
(), v®ue.
	`size
());

316 
ušt64_t
 
d¿m_height
 = 
	`D¿mRªdomHeight
();

317 
size_t
 
mem_node_size
 = (
MemNode
è+ (
d¿m_height
 - 1è* (
ušt64_t
);

318 autØ
mem
 = 
db_
->
	`G‘Wr™abËMemTabË
(
mem_node_size
, 
s
);

319 
ušt64_t
 
l0_id
 = 
mem
->
	`l0_id
();

322 autØ
log_·ddr
 = 
log_
[
s
]->
	`AÎoÿ‹
(
iul_’Œy_size
);

323 
PmemNode
* 
iul_’Œy
 = (PmemNode*è
log_·ddr
.
	`g‘
();

324 
iul_’Œy
->
g
 = (
l0_id
 << 32è| 
pmem_height
;

325 
iul_’Œy
->
v®ue
 = 
v®ue_·ddr
.
	`dump
();

326 
	`şwb
(&
iul_’Œy
->
g
, 16);

327 
	`_mm_sãnû
();

328 
iul_’Œy
->
key
 = key;

329 
	`şwb
(
iul_’Œy
, 
key
.
	`size
());

333 
MemNode
* 
node
 = (MemNode*è
	`m®loc
(
mem_node_size
);

334 
node
->
key
 = key;

335 
node
->
g
 = (
l0_id
 << 32è| 
d¿m_height
;

337 
node
->
v®ue
 = 
log_·ddr
.
	`dump
();

338 
	`mem£t
((*è&
node
->
Ãxt
[0], 0, 
d¿m_height
 * (
ušt64_t
));

340 autØ
skli¡
 = 
mem
->
	`skli¡
();

341 
skli¡
->
	`In£¹
(
node
);

342 
mem
->
	`w_UnRef
();

343 
	}
}

345 
boŞ
 
	gDBCl›Á
::
	$G‘SŒšgKV
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
key_sv
, 
V®ue
* 
v®ue_out
) {

346 
Key
& 
key
 = *((Key*è
key_sv
.
	`d©a
());

347 
s
 = 
	`KeySh¬d
(
key
);

349 
MemTabËLi¡
* 

 = (MemTabËLi¡*è
db_
->
	`G‘TabËLi¡
(0, 
s
);

351 autØ
bË
 = 

->
	`G‘FrÚt
();

352 
bË
) {

353 ià(
bË
->
	`ty³
(è=ğ
TabËTy³
::
kMemTabË
) {

354 autØ
mem
 = (
MemTabË
*è
bË
;

355 autØ
skli¡
 = 
mem
->
	`skli¡
();

356 autØ
found
 = 
skli¡
->
	`Lookup
(
key
);

357 ià(
found
 && found->
key
 == key) {

358 
PmemNode
* 
p_node
 = 
PmemPŒ
::
Decode
<PmemNode>(
found
->
v®ue
);

359 *
v®ue_out
 = (
ušt64_t
è
PmemPŒ
::
Decode
<>(
p_node
->
v®ue
);

360  
Œue
;

362 } ià(
bË
->
	`ty³
(è=ğ
TabËTy³
::
kPmemTabË
) {

365 
bË
 =abË->
	`Next
();

367 #ifdeà
LISTDB_L0_CACHE


369 autØ
ht
 = 
db_
->
	`G‘HashTabË
(
s
);

370 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


371 ià(
ht
->
	`G‘
(
key
, 
v®ue_out
)) {

372  
Œue
;

374 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


375 
Li¡DB
::
PmemNode
* 
rv
 = 
ht
->
	`Lookup
(
key
);

376 ià(
rv
) {

377 *
v®ue_out
 = (
ušt64_t
è
PmemPŒ
::
Decode
<>(
rv
->
v®ue
);

378  
Œue
;

380 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


381 
Li¡DB
::
PmemNode
* 
rv
 = 
ht
->
	`Lookup
(
key
);

382 ià(
rv
) {

383 *
v®ue_out
 = (
ušt64_t
è
PmemPŒ
::
Decode
<>(
rv
->
v®ue
);

384  
Œue
;

386 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


387 
Li¡DB
::
PmemNode
* 
rv
 = 
ht
->
	`Lookup
(
key
);

388 ià(
rv
) {

389 *
v®ue_out
 = (
ušt64_t
è
PmemPŒ
::
Decode
<>(
rv
->
v®ue
);

390  
Œue
;

395 
pmem_g‘_út_
++;

396 
bË
) {

397 autØ
pmem
 = (
PmemTabË
*è
bË
;

398 autØ
skli¡
 = 
pmem
->
	`skli¡
();

400 autØ
found_·ddr
 = 
	`Lookup
(
key
, 
l0_poŞ_id_
, 
skli¡
);

401 
Li¡DB
::
PmemNode
* 
found
 = (Li¡DB::PmemNode*è
found_·ddr
.
	`g‘
();

402 ià(
found
 && found->
key
 == key) {

409 *
v®ue_out
 = (
ušt64_t
è
PmemPŒ
::
Decode
<>(
found
->
v®ue
);

410  
Œue
;

412 
bË
 =abË->
	`Next
();

417 autØ

 = (
PmemTabËLi¡
*è
db_
->
	`G‘TabËLi¡
(1, 
s
);

418 autØ
bË
 = 

->
	`G‘FrÚt
();

419 
bË
) {

420 autØ
pmem
 = (
PmemTabË
*è
bË
;

421 autØ
skli¡
 = 
pmem
->
	`skli¡
();

423 autØ
found_·ddr
 = 
	`LookupL1
(
key
, 
l1_poŞ_id_
, 
skli¡
, 
s
);

424 
Li¡DB
::
PmemNode
* 
found
 = (Li¡DB::PmemNode*è
found_·ddr
.
	`g‘
();

425 ià(
found
 && found->
key
 == key) {

432 *
v®ue_out
 = (
ušt64_t
è
PmemPŒ
::
Decode
<>(
found
->
v®ue
);

433  
Œue
;

435 
bË
 =abË->
	`Next
();

438  
çl£
;

439 
	}
}

442 
šlše
 
	gDBCl›Á
::
	$PmemRªdomHeight
() {

443 #ià
	`defšed
(
LISTDB_L1_LRU
è|| defšed(
LISTDB_SKIPLIST_CACHE
)

444 cÚ¡ 
kB¿nchšg
 = 2;

446 cÚ¡ 
kB¿nchšg
 = 4;

448 
height
 = 1;

450 ià(
ºd_
.
	`Next
(è% 
¡d
::
max
<>(1, (
kB¿nchšg
 / 
kNumRegiÚs
)) == 0) {

451 
height
++;

452 
height
 < 
kMaxHeight
 && ((
ºd_
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

453 
height
++;

457 
height
 < 
kMaxHeight
 && ((
ºd_
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

458 
height
++;

461  
height
;

462 
	}
}

464 
šlše
 
	gDBCl›Á
::
	$D¿mRªdomHeight
() {

465 cÚ¡ 
kB¿nchšg
 = 4;

466 
height
 = 1;

467 
height
 < 
kMaxHeight
 && ((
ºd_
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

468 
height
++;

470  
height
;

471 
	}
}

473 
šlše
 
	gDBCl›Á
::
	$KeySh¬d
(cÚ¡ 
Key
& 
key
) {

474  
key
.
	`key_num
(è% 
kNumSh¬ds
;

476 
	}
}

478 #ifdeà
LISTDB_EXPERIMENTAL_SEARCH_LEVEL_CHECK


479 
PmemPŒ
 
	gDBCl›Á
::
	$Lev–Lookup
(cÚ¡ 
Key
& 
key
, cÚ¡ 
»giÚ
, cÚ¡ 
Ëv–
, 
B¿idedPmemSkLi¡
* 
skli¡
) {

480 
usšg
 
Node
 = 
PmemNode
;

481 
Node
* 
´ed
 = 
skli¡
->
	`h—d
(
poŞ_id
);

482 
ušt64_t
 
cu¼_·ddr_dump
;

483 
Node
* 
cu¼
;

484 
height
 = 
´ed
->
	`height
();

487 
i
 = 
height
 - 1; i >= 1; i--) {

488 
Œue
) {

489 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[
i
];

490 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

491 ià(
cu¼
) {

492 ià(
ºd_
.
	`Next
(è% 
LEVEL_CHECK_PERIOD_FACTOR
 == 0) {

493 
cu¼_Ëv–
 = (
cu¼
->
g
 & 0xf00) >> 8;

494 ià(
cu¼_Ëv–
 > 
Ëv–
) {

495 
	`årštf
(
¡dout
, "Level 1 detected. Skipo L1 Search.");

499 ià(
cu¼
->
key
.
	`Com·»
(key) < 0) {

500 
´ed
 = 
cu¼
;

509 ià(
´ed
 =ğ
skli¡
->
	`h—d
(
poŞ_id
)) {

510 
´ed
 = 
skli¡
->
	`h—d
(0);

512 
Œue
) {

513 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[0];

514 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

515 ià(
cu¼
) {

516 ià(
ºd_
.
	`Next
(è% 
LEVEL_CHECK_PERIOD_FACTOR
 == 0) {

517 
cu¼_Ëv–
 = (
cu¼
->
g
 & 0xf00) >> 8;

518 ià(
cu¼_Ëv–
 > 
Ëv–
) {

519 
	`årštf
(
¡dout
, "Level 1 detected. Skipo L1 Search.");

523 ià(
cu¼
->
key
.
	`Com·»
(key) < 0) {

524 
´ed
 = 
cu¼
;

531  
cu¼_·ddr_dump
;

532 
	}
}

535 
PmemPŒ
 
	gDBCl›Á
::
	$Lookup
(cÚ¡ 
Key
& 
key
, cÚ¡ 
poŞ_id
, 
B¿idedPmemSkLi¡
* 
skli¡
) {

536 
usšg
 
Node
 = 
PmemNode
;

537 
Node
* 
´ed
 = 
skli¡
->
	`h—d
(
poŞ_id
);

538 
£¬ch_vis™_út_
++;

539 
height_vis™_út_
[
kMaxHeight
 - 1]++;

540 
ušt64_t
 
cu¼_·ddr_dump
;

541 
Node
* 
cu¼
;

542 
height
 = 
´ed
->
	`height
();

545 
i
 = 
height
 - 1; i >= 1; i--) {

546 
Œue
) {

547 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[
i
];

548 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

549 ià(
cu¼
) {

550 
£¬ch_vis™_út_
++;

551 
height_vis™_út_
[
i
]++;

552 ià(
cu¼
->
key
.
	`Com·»
(key) < 0) {

553 
´ed
 = 
cu¼
;

562 ià(
´ed
 =ğ
skli¡
->
	`h—d
(
poŞ_id
)) {

563 ià(
poŞ_id
 !ğ
skli¡
->
	`´im¬y_poŞ_id
()) {

564 
£¬ch_vis™_út_
++;

565 
height_vis™_út_
[
kMaxHeight
 - 1]++;

567 
´ed
 = 
skli¡
->
	`h—d
();

569 
Œue
) {

570 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[0];

571 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

572 ià(
cu¼
) {

573 
£¬ch_vis™_út_
++;

574 
height_vis™_út_
[0]++;

575 ià(
cu¼
->
key
.
	`Com·»
(key) < 0) {

576 
´ed
 = 
cu¼
;

583  
cu¼_·ddr_dump
;

584 
	}
}

586 
PmemPŒ
 
	gDBCl›Á
::
	$LookupL1
(cÚ¡ 
Key
& 
key
, cÚ¡ 
poŞ_id
, 
B¿idedPmemSkLi¡
* 
skli¡
, cÚ¡ 
sh¬d
) {

587 
usšg
 
Node
 = 
PmemNode
;

588 
Node
* 
´ed
 = 
skli¡
->
	`h—d
(
poŞ_id
);

589 
ušt64_t
 
cu¼_·ddr_dump
;

590 
Node
* 
cu¼
;

591 
height
 = 
´ed
->
	`height
();

593 #ifdeà
LISTDB_L1_LRU


595 
usšg
 
MyTy³1
 = 
¡d
::
·œ
<
Key
, 
ušt64_t
>;

596 
MyTy³1
 
	`£¬ch_key
(
key
, 0);

597 auto&& 
sÜ‹d_¬r
 = 
db_
->
	`sÜ‹d_¬r
(
poŞ_id
, 
sh¬d
);

598 autØ
found
 = 
¡d
::
	`uµ”_bound
(
sÜ‹d_¬r
.
	`begš
(),

599 
sÜ‹d_¬r
.
	`’d
(), 
£¬ch_key
,

600 [&](cÚ¡ 
MyTy³1
 &
a
, cÚ¡ MyTy³1 &
b
è{ ‡.
fœ¡
 > b.first; });

601 ià(
found
 !ğ
sÜ‹d_¬r
.
	`’d
()) {

603 
´ed
 = (
Node
*è((
PmemPŒ
*è&((*
found
).
£cÚd
))->
	`g‘
();

604 
height
 = 
´ed
->
	`height
();

609 autØ
c
 = 
db_
->
	`Ìu_ÿche
(
sh¬d
, 
poŞ_id
);

610 
ušt64_t
 
É
 = 
c
->
	`FšdLessThª
(
key
);

611 ià(
É
 != 0) {

612 
´ed
 = (
Node
*è((
PmemPŒ
*è&
É
)->
	`g‘
();

613 
height
 = 
´ed
->
	`height
();

617 #ifdeà
LISTDB_SKIPLIST_CACHE


618 autØ
c
 = 
db_
->
	`skli¡_ÿche
(
sh¬d
, db_->
	`poŞ_id_to_»giÚ
(
poŞ_id
));

620 
PmemNode
* 
rv
 = 
c
->
	`LookupLessThª
(
key
);

621 ià(
rv
) {

622 
´ed
 = 
rv
;

623 
height
 = 
´ed
->
	`height
();

626 
PmemNode
* 
Ée_²ode
 = 
nuÎ±r
;

627 
rv
 = 
c
->
	`LookupLessThªOrEqu®sTo
(
key
, &
Ée_²ode
);

628 ià(
Ée_²ode
) {

629 ià(
rv
 == 0) {

630  
	`PmemPŒ
(
poŞ_id
, (*è
Ée_²ode
);

632 
´ed
 = 
Ée_²ode
;

634 
height
 = 
kSkLi¡CacheMšPmemHeight
;

640 
£¬ch_vis™_út_
++;

641 
height_vis™_út_
[
height
 - 1]++;

644 
i
 = 
height
 - 1; i >= 1; i--) {

645 
Œue
) {

646 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[
i
];

647 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

648 ià(
cu¼
) {

649 
£¬ch_vis™_út_
++;

650 
height_vis™_út_
[
i
]++;

651 ià(
cu¼
->
key
.
	`Com·»
(key) < 0) {

652 
´ed
 = 
cu¼
;

661 ià(
´ed
 =ğ
skli¡
->
	`h—d
(
poŞ_id
)) {

662 ià(
poŞ_id
 !ğ
skli¡
->
	`´im¬y_poŞ_id
()) {

663 
£¬ch_vis™_út_
++;

664 
height_vis™_út_
[
kMaxHeight
 - 1]++;

666 
´ed
 = 
skli¡
->
	`h—d
();

668 
Œue
) {

669 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[0];

670 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

671 ià(
cu¼
) {

672 
£¬ch_vis™_út_
++;

673 
height_vis™_út_
[0]++;

674 ià(
cu¼
->
key
.
	`Com·»
(key) < 0) {

675 
´ed
 = 
cu¼
;

682  
cu¼_·ddr_dump
;

683 
	}
}

	@db_client_group_logging.h

1 #iâdeà
LISTDB_DB_CLIENT_H_


2 
	#LISTDB_DB_CLIENT_H_


	)

4 
	~<veùÜ
>

6 
	~"li¡db/commÚ.h
"

7 
	~"li¡db/li¡db.h
"

8 
	~"li¡db/ut.h
"

10 şas 
	cDBCl›Á
 {

11 
	mpublic
:

12 
usšg
 
MemNode
 = 
Li¡DB
::MemNode;

14 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

15 
ProûssPutGroup
(cÚ¡ 
sh¬d
);

17 
	m´iv©e
:

18 
	sPutI‹m
 {

19 cÚ¡ 
Key
& 
k
;

20 cÚ¡ 
	mV®ue
& 
	mv
;

21 cÚ¡ 
	mheight
;

22 cÚ¡ 
size_t
 
	mlog_®loc_size
;

23 cÚ¡ 
size_t
 
	mnode_®loc_size
;

25 
PutI‹m
(cÚ¡ 
Key
& 
k_
, cÚ¡ 
V®ue
& 
v_
, cÚ¡ 
height_
,cÚ¡ 
size_t
 
log_®loc_size_
,

26 cÚ¡ 
size_t
 
node_®loc_size_
)

27 : 
k
(
k_
), 
v
(
v_
), 
height
(
height_
), 
log_®loc_size
(
log_®loc_size_
), 
node_®loc_size
(
node_®loc_size_
) { }

30 
	sGroupS‹
 {

31 
size_t
 
	gkv_size
;

32 
size_t
 
	glog_®loc_size
;

33 
size_t
 
	gnode_®loc_size
;

36 
RªdomHeight
();

37 
KeySh¬d
(cÚ¡ 
Key
& 
key
);

39 
Rªdom
 
ºd_
(1);

40 
Li¡DB
* 
	gdb_
;

41 
LogWr™”
* 
	glogg”_
[
kNumSh¬ds
][
kNumRegiÚs
];

42 
	g¡d
::
veùÜ
<
PutI‹m
> 
put_group_
[
kNumSh¬ds
];

43 
GroupS‹
 
	ggroup_¡©e_
[
kNumSh¬ds
];

47 
	g¡d
::
veùÜ
<
PmemPŒ
> 
log_·ddrs_
[
kNumSh¬ds
];

48 
	g¡d
::
veùÜ
<
MemNode
*> 
nodes_
[
kNumSh¬ds
];

49 
	gid_
;

52 
	gDBCl›Á
::
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

53 
s
 = 
	`KeySh¬d
(
key
);

55 
height
 = 
	`RªdomHeight
();

56 
size_t
 
log_®loc_size
 = 
ut
::
	`AligÃdSize
(8, 
LogWr™”
::
EÁry
::
	`Compu‹AÎocSize
(
key
, 
height
));

57 
size_t
 
node_®loc_size
 = 
ut
::
	`AligÃdSize
(8, 
MemNode
::
	`Compu‹AÎocSize
(
key
, 
height
));

59 
put_group_
[
s
].
	`em¶aû_back
(
key
, 
v®ue
, 
height
, 
log_®loc_size
, 
node_®loc_size
);

60 
group_¡©e_
[
s
].
kv_size
 +ğ
key
.
	`size
() + 8;

61 
group_¡©e_
[
s
].
log_®loc_size
 +=†og_alloc_size;

62 
group_¡©e_
[
s
].
node_®loc_size
 +=‚ode_alloc_size;

63 ià(
group_¡©e_
[
s
].
log_®loc_size
 >= 1024) {

64 
	`ProûssPutGroup
(
s
);

66 
	}
}

68 
	gDBCl›Á
::
	$ProûssPutGroup
(cÚ¡ 
s
) {

69 
¡d
::
	`sÜt
(
put_group_
[
s
].
	`begš
(),…ut_group_[s].
	`’d
(), 
PutI‹mCom·¿tÜ
);

71 
»giÚ
 = 
	`G‘Ch
();

72 autØ
log_group_·ddr
 = 
logg”_
[
s
][
»giÚ
]->
	`AÎoÿ‹
(
group_¡©e_
[s].
log_®loc_size
);

73 * 
log_group_buf
 = (*è
log_group_·ddr
.
	`g‘
();

74 * 
p
 = 
log_group_buf
;

75 auto& 
™em
 : 
put_group_
[
s
]) {

76 
LogWr™”
::
	`Wr™eOnBuf
(
p
, 
™em
.
k
, i‹m.
v
, i‹m.
height
);

77 
p
 +ğ
™em
.
log_®loc_size
;

80 * 
node_group_buf
 = 
	`®igÃd_®loc
(8, 
group_¡©e_
[
s
].
node_®loc_size
);

81 
p
 = 
node_group_buf
;

82 
ušt64_t
 
log_·ddr
 = 
log_group_·ddr
.
	`dump
();

83 auto& 
™em
 : 
put_group_
[
s
]) {

84 autØ
node
 = 
MemNode
::
	`In™OnBuf
(
p
, 
™em
.
k
, 0, i‹m.
v
, 
log_·ddr
, i‹m.
height
);

85 
nodes_
[
s
].
	`push_back
(
node
);

86 
log_·ddr
 +ğ
™em
.
log_®loc_size
;

87 
p
 +ğ
™em
.
node_®loc_size
;

90 
db_
->
	`PutMªy
(
group_kv_size_
[
s
], 
nodes_
);

92 
	`şwb
(
log_group_buf
, 
group_¡©e_
[
s
].
log_®loc_size
);

93 
	`_mm_sãnû
();

95 
put_group_
[
s
].
	`ş—r
();

96 
log_·ddrs_
[
s
].
	`ş—r
();

97 
nodes_
[
s
].
	`ş—r
();

98 
	`mem£t
(&(
group_¡©e_
[
s
]), 0, (
GroupS‹
));

99 
	}
}

101 
šlše
 
	gDBCl›Á
::
	$RªdomHeight
() {

102 cÚ¡ 
kB¿nchšg
 = 4;

103 
height
 = 1;

104 
height
 < 
kMaxHeight
 && ((
ºd_
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

105 
height
++;

107  
height
;

108 
	}
}

110 
šlše
 
	gDBCl›Á
::
	$KeySh¬d
(cÚ¡ 
Key
& 
key
) {

111  
key
.
	`key_num
(è% 
kNumSh¬ds
;

112 
	}
}

	@db_client_test.cc

1 
	~<io¡»am
>

3 
	~"li¡db/li¡db.h
"

4 
	~"li¡db/db_ş›Á.h
"

6 
	$maš
() {

7 
Li¡DB
* 
db
 = 
Ãw
 
	`Li¡DB
();

8 
db
->
	`In™
();

9 
DBCl›Á
* 
ş›Á
 = 
Ãw
 
	`DBCl›Á
(
db
, 0, 0);

11 
ş›Á
->
	`Put
(10, 10);

12 
ş›Á
->
	`Put
(1, 1);

13 
ş›Á
->
	`Put
(5, 5);

15 
ušt64_t
 
v®_»ad
;

16 
ş›Á
->
	`G‘
(10, &
v®_»ad
);

17 
¡d
::
cout
 << *(
PmemPŒ
::
Decode
<
ušt64_t
>(
v®_»ad
)è<< std::
’dl
;

18 
ş›Á
->
	`G‘
(1, &
v®_»ad
);

19 
¡d
::
cout
 << *(
PmemPŒ
::
Decode
<
ušt64_t
>(
v®_»ad
)è<< std::
’dl
;

20 
ş›Á
->
	`G‘
(5, &
v®_»ad
);

21 
¡d
::
cout
 << *(
PmemPŒ
::
Decode
<
ušt64_t
>(
v®_»ad
)è<< std::
’dl
;

24 
	}
}

	@env.h

1 #iâdeà
LISTDB_ENV_H_


2 
	#LISTDB_ENV_H_


	)

4 şas 
	cEnv
 {

5 
	mpublic
:

7 
	eIOPriÜ™y
 {

8 
IO_LOW
 = 0,

9 
	mIO_MID
 = 1,

10 
	mIO_HIGH
 = 2,

11 
	mIO_USER
 = 3,

12 
	mIO_TOTAL
 = 4

	@index/braided_pmem_skiplist.h

1 #iâdeà
LISTDB_INDEX_BRAIDED_PMEM_SKIPLIST_H_


2 
	#LISTDB_INDEX_BRAIDED_PMEM_SKIPLIST_H_


	)

4 
	~<x86šŒš.h
>

6 
	~<m­
>

8 
	~<libpmemobj++/make_³rsi¡’t_¬¿y_©omic.hµ
>

10 
	~"li¡db/pmem/pmem.h
"

11 
	~"li¡db/pmem/pmem_±r.h
"

12 
	~"li¡db/cÜe/pmem_log.h
"

14 şas 
	cB¿idedPmemSkLi¡
 {

15 
	mpublic
:

16 
	sNode
 {

17 
Key
 
key
;

18 
ušt64_t
 
	mg
;

19 
ušt64_t
 
	mv®ue
;

20 
ušt64_t
 
	mÃxt
[1];

22 
height
(ècÚ¡ {  
	mg
 & 0xf; }

24 
ušt32_t
 
l0_id
(ècÚ¡ {  (
	mg
 >> 32); }

27 
B¿idedPmemSkLi¡
(
´im¬y_»giÚ_poŞ_id
);

29 
BšdA»Ç
(
poŞ_id
, 
PmemLog
* 
¬’a
);

31 
BšdH—d
(cÚ¡ 
poŞ_id
, * 
h—d_addr
);

33 
In™
();

35 
In£¹
(
PmemPŒ
 
node_·ddr
);

37 
FšdPos™iÚ
(
poŞ_id
, 
Node
* 
node
, Node* 
´eds
[], 
ušt64_t
 
succs
[]);

39 
PmemPŒ
 
Lookup
(cÚ¡ 
Key
& 
key
, 
poŞ_id
);

41 
PrštDebugSÿn
();

43 
Node
* 
	$h—d
(è{  
h—d_
[
´im¬y_»giÚ_poŞ_id_
]; 
	}
}

45 
Node
* 
	$h—d
(
poŞ_id
è{  
h—d_
[poŞ_id]; 
	}
}

47 
	$´im¬y_poŞ_id
(è{  
´im¬y_»giÚ_poŞ_id_
; 
	}
}

49 
PmemPŒ
 
	$h—d_·ddr
(è{  
	`PmemPŒ
(
´im¬y_»giÚ_poŞ_id_
, (*è
h—d_
[´im¬y_»giÚ_poŞ_id_]); 
	}
}

51 
	gpmem
::
obj
::
³rsi¡’t_±r
<[]> 
	$p_h—d
(cÚ¡ 
poŞ_id
è{  
p_h—d_
[poŞ_id]; 
	}
}

53 
	g´iv©e
:

54 cÚ¡ 
´im¬y_»giÚ_poŞ_id_
;

55 
	g¡d
::
m­
<, 
	gPmemLog
*> 
	g¬’a_
;

56 
	g¡d
::
m­
<, 
	gNode
*> 
	gh—d_
;

57 
	g¡d
::
m­
<, 
	gpmem
::
obj
::
³rsi¡’t_±r
<[]>> 
p_h—d_
;

60 
	gB¿idedPmemSkLi¡
::
	$B¿idedPmemSkLi¡
(cÚ¡ 
´im¬y_»giÚ_poŞ_id
)

61 : 
	$´im¬y_»giÚ_poŞ_id_
(
´im¬y_»giÚ_poŞ_id
è{ 
	}
}

63 
B¿idedPmemSkLi¡
::
	$BšdA»Ç
(cÚ¡ 
poŞ_id
, 
PmemLog
* 
¬’a
) {

64 
¬’a_
.
	`em¶aû
(
poŞ_id
, 
¬’a
);

65 
	}
}

67 
	gB¿idedPmemSkLi¡
::
	$BšdH—d
(cÚ¡ 
poŞ_id
, * 
h—d_addr
) {

68 
h—d_
.
	`em¶aû
(
poŞ_id
, (
Node
*è
h—d_addr
);

69 
	}
}

71 
	gB¿idedPmemSkLi¡
::
	$In™
() {

72 auto& 
™
 : 
¬’a_
) {

73 
poŞ_id
 = 
™
.
fœ¡
;

74 
size_t
 
h—d_size
 = (
Node
è+ (
kMaxHeight
 - 1è* (
ušt64_t
);

76 autØ
h—d_·ddr
 = 
¬’a_
[
poŞ_id
]->
	`AÎoÿ‹
(
h—d_size
);

77 
Node
* 
h—d
 = (Node*è
h—d_·ddr
.
	`g‘
();

79 autØ
poŞ
 = 
™
.
£cÚd
->
	`poŞ
();

80 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
pmem_h—d_buf
;

81 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
pmem_h—d_buf
, 
h—d_size
);

82 
p_h—d_
[
poŞ_id
] = 
pmem_h—d_buf
;

83 
Node
* 
h—d
 = (Node*è
pmem_h—d_buf
.
	`g‘
();

85 
h—d
->
key
 = 0;

86 
h—d
->
g
 = 
kMaxHeight
;

87 
	`mem£t
(&
h—d
->
Ãxt
[0], 0, 
kMaxHeight
 * (
ušt64_t
));

88 
h—d_
.
	`em¶aû
(
poŞ_id
, 
h—d
);

90 
	}
}

92 
	gB¿idedPmemSkLi¡
::
	$In£¹
(
PmemPŒ
 
node_·ddr
) {

93 
poŞ_id
 = 
node_·ddr
.
	`poŞ_id
();

94 
Node
* 
node
 = (Node*è
node_·ddr
.
	`g‘
();

95 
height
 = 
node
->
	`height
();

97 
Node
* 
´eds
[
kMaxHeight
];

98 
ušt64_t
 
succs
[
kMaxHeight
];

100 
Œue
) {

101 
´eds
[
kMaxHeight
 - 1] = 
h—d_
[
poŞ_id
];

102 
	`FšdPos™iÚ
(
poŞ_id
, 
node
, 
´eds
, 
succs
);

106 
i
 = 0; i < 
height
; i++) {

107 
	`_mm_¡»am_pi
((
__m64
*è&
node
->
Ãxt
[
i
], (__m64è
succs
[i]);

111 
i
 = 0; i < 
height
; i++) {

112 
node
->
Ãxt
[
i
] = 
succs
[i];

119 ià(!
¡d
::
	`©omic_com·»_exchªge_¡rÚg
((¡d::
©omic
<
ušt64_t
>*è&
´eds
[0]->
Ãxt
[0], &
succs
[0],

120 
node_·ddr
.
	`dump
())) {

124 
i
 = 1; i < 
height
; i++) {

125 
Œue
) {

126 ià(!
¡d
::
	`©omic_com·»_exchªge_¡rÚg
((¡d::
©omic
<
ušt64_t
>*è&
´eds
[
i
]->
Ãxt
[i], &
succs
[i],

127 
node_·ddr
.
	`dump
())) {

128 
´eds
[
kMaxHeight
 - 1] = 
h—d_
[
poŞ_id
];

129 
	`FšdPos™iÚ
(
poŞ_id
, 
node
, 
´eds
, 
succs
);

142 
	}
}

144 
	gB¿idedPmemSkLi¡
::
	$FšdPos™iÚ
(cÚ¡ 
poŞ_id
, 
Node
* 
node
, Node* 
´eds
[], 
ušt64_t
 
succs
[]) {

146 
Node
* 
´ed
 = 
´eds
[
kMaxHeight
 - 1];

147 
ušt64_t
 
cu¼_·ddr_dump
;

148 
Node
* 
cu¼
;

149 
height
 = 
´ed
->
	`height
();

152 
i
 = 
height
 - 1; i >= 1; i--) {

153 
Œue
) {

154 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[
i
];

155 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

156 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(
node
->key) < 0) {

157 
´ed
 = 
cu¼
;

162 
´eds
[
i
] = 
´ed
;

163 
succs
[
i
] = 
cu¼_·ddr_dump
;

167 ià(
´ed
 =ğ
h—d_
[
poŞ_id
]) {

168 
´ed
 = 
h—d_
[
´im¬y_»giÚ_poŞ_id_
];

170 
Œue
) {

171 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[0];

172 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

173 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(
node
->key) < 0) {

174 
´ed
 = 
cu¼
;

179 
´eds
[0] = 
´ed
;

180 
succs
[0] = 
cu¼_·ddr_dump
;

181 
	}
}

183 
PmemPŒ
 
	gB¿idedPmemSkLi¡
::
	$Lookup
(cÚ¡ 
Key
& 
key
, cÚ¡ 
poŞ_id
) {

184 
Node
* 
´ed
 = 
h—d_
[
poŞ_id
];

185 
ušt64_t
 
cu¼_·ddr_dump
;

186 
Node
* 
cu¼
;

187 
height
 = 
´ed
->
	`height
();

190 
i
 = 
height
 - 1; i >= 1; i--) {

191 
Œue
) {

192 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[
i
];

193 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

194 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(key) < 0) {

195 
´ed
 = 
cu¼
;

203 ià(
´ed
 =ğ
h—d_
[
poŞ_id
]) {

204 
´ed
 = 
h—d_
[
´im¬y_»giÚ_poŞ_id_
];

206 
Œue
) {

207 
cu¼_·ddr_dump
 = 
´ed
->
Ãxt
[0];

208 
cu¼
 = (
Node
*è((
PmemPŒ
*è&
cu¼_·ddr_dump
)->
	`g‘
();

209 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(key) < 0) {

210 
´ed
 = 
cu¼
;

216  
cu¼_·ddr_dump
;

217 
	}
}

219 
	gB¿idedPmemSkLi¡
::
	$PrštDebugSÿn
() {

228 
	}
}

	@index/braided_pmem_skiplist_test.cc

1 
	~<s¡»am
>

2 
	~<f¡»am
>

4 
	~<ex³rim’l/fesy¡em
>

6 
	~"li¡db/commÚ.h
"

7 
	~"li¡db/cÜe/pmem_log.h
"

8 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

9 
	~"li¡db/ut/¿ndom.h
"

11 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

13 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_bË
[
kNumRegiÚs
];

14 
	gpoŞ_id_bË
[
kNumRegiÚs
];

16 
	$In™PoŞS‘
() {

18 
i
 = 0; i < 
kNumRegiÚs
; i++) {

19 
¡d
::
¡ršg¡»am
 
pss
;

20 
pss
 << "/pmem" << 
i
 << "/wkim/pmem_skiplist_test";

21 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

22 
fs
::
	`»move_®l
(
·th
);

23 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

25 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

26 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

27 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

28 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

29 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

30 
¡rm
.
	`şo£
();

32 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

33 
poŞ_bË
[
i
] = 
Pmem
::
poŞ
<
pmem_log_roÙ
>(
id
);

34 
poŞ_id_bË
[
i
] = 
id
;

36 
	}
}

38 
	$In£¹AndLookupSšgËEËm’t
() {

39 
	`In™PoŞS‘
();

40 autØ
¦
 = 
Ãw
 
	`B¿idedPmemSkLi¡
(
poŞ_id_bË
[0]);

41 
PmemLog
* 
¬’a
[
kNumRegiÚs
];

42 
i
 = 0; i < 
kNumRegiÚs
; i++) {

43 
¬’a
[
i
] = 
Ãw
 
	`PmemLog
(
poŞ_id_bË
[i], 0);

44 
¦
->
	`BšdA»Ç
(
i
, 
¬’a
[i]);

46 
¦
->
	`In™
();

48 
Rªdom
 
	`ºd
(1);

49 cÚ¡ 
kB¿nchšg
 = 4;

50 
height
 = 1;

51 
height
 < 
kMaxHeight
 && ((
ºd
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

52 
height
++;

54 
usšg
 
PNode
 = 
B¿idedPmemSkLi¡
::
Node
;

55 
size_t
 
node_size
 = (
PNode
è+ (
height
 - 1) * 8;

56 autØ
node_·ddr
 = 
¬’a
[0]->
	`AÎoÿ‹
(
node_size
);

57 
PNode
* 
node
 = (PNode*è
node_·ddr
.
	`g‘
();

58 
node
->
key
 = 5;

59 
node
->
g
 = 
height
;

60 
node
->
v®ue
 = 10;

62 
	`´štf
("Insert KV = { %lu, %lu }\n", 5ul, 10ul);

63 
¦
->
	`In£¹
(
node_·ddr
);

64 
	`´štf
("Lookup key = %lu\n", 5ul);

65 autØ
found_·ddr
 = 
¦
->
	`Lookup
(5, 0);

66 
PNode
* 
found
 = (PNode*è
found_·ddr
.
	`g‘
();

67 
	`´štf
("v®uğ%lu\n", 
found
->
v®ue
);

69 
d–‘e
 
¦
;

70 
i
 = 0; i < 
kNumRegiÚs
; i++) {

71 
d–‘e
 
¬’a
[
i
];

73 
	}
}

75 
	$maš
() {

76 
	`In£¹AndLookupSšgËEËm’t
();

78 
	}
}

	@index/index.h

1 #iâdeà
LISTDB_INDEX_INDEX_H_


2 
	#LISTDB_INDEX_INDEX_H_


	)

4 
	~"li¡db/commÚ.h
"

6 şas 
	cIndex
 {

7 
	mpublic
:

8 
vœtu®
 
š£¹
(cÚ¡ 
Key
& 
key
) = 0;

	@index/lockfree_pskiplist_brdb.cc

1 
	~"ds/lockä“_pskli¡.h
"

3 
	~<b™£t
>

4 
	~<Ãw
>

5 
	~<¡ack
>

6 
	~<¡dlib.h
>

7 
	~<th»ad
>

8 
	~<numa.h
>

10 
	~"commÚ.h
"

11 
	~"ds/lockä“_skli¡.h
"

13 
	glockä“_pskli¡
::
	$lockä“_pskli¡
(
PMEMobjpoŞ
* 
pİs
[]) {

14 
i
 = 0; i < 
kNumRegiÚs
; i++) {

15 
pİ_
[
i
] = 
pİs
[i];

17 
	}
}

19 
	glockä“_pskli¡
::
	$š™
() {

20 
	`TOID
(
B¿idedSkLi¡Ba£
è
ba£
;

21 
	`POBJ_ZALLOC
(
pİ_
[
kPrim¬yRegiÚ
], &
ba£
, 
B¿idedSkLi¡Ba£
, (BraidedSkipListBase));

22 
i
 = 0; i < 
kNumRegiÚs
; i++) {

23 autØ
h—d_key
 = 
Node
::
	`h—d_key
();

24 
size_t
 
®loc_size
 = 
Node
::
	`compu‹_®loc_size
(
h—d_key
, 
kMaxHeight
);

25 
	`TOID
(è
h—d_buf
;

26 
	`POBJ_ALLOC
(
pİ_
[
i
], &
h—d_buf
, , 
®loc_size
, 
NULL
, NULL);

27 
h—d_
[
i
] = 
Node
::
	`š™_node
(
	`D_RW
(
h—d_buf
), 
h—d_key
, 0xffffffffffffffff, 0, 
kMaxHeight
);

28 
	`pmemobj_³rsi¡
(
pİ_
[
i
], 
	`D_RW
(
h—d_buf
), 
®loc_size
);

29 
	`D_RW
(
ba£
)->
h—d
[
i
] = 
h—d_buf
;

31 
	`pmemobj_³rsi¡
(
pİ_
[
kPrim¬yRegiÚ
], 
	`D_RW
(
ba£
), (
B¿idedSkLi¡Ba£
));

32 
	}
}

34 
	glockä“_pskli¡
::
lßd
(
TOID
(
B¿idedSkLi¡Ba£
)& 
ba£
) {

35 
i
 = 0; 
	gi
 < 
	gkNumRegiÚs
; i++) {

36 
	gh—d_
[
i
] = (
Node
*è
D_RW
(D_RW(
ba£
)->
h—d
[i]);

38 
	gba£_
 = 
ba£
;

39 
	g¡d
::
©omic_th»ad_ãnû
(
¡d
::
memÜy_Üd”_»Ëa£
);

42 
	$TOID
(
B¿idedSkLi¡Ba£
è
lockä“_pskli¡
::
	$ba£
() {

43  
ba£_
;

44 
	}
}

46 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$Ãw_node
(
Th»adD©a
* 
td
, cÚ¡ 
r
, cÚ¡ 
Key
& 
key
, cÚ¡ 
ušt64_t
 
v®ue
, 
height
) {

47 ià(
height
 == 0) {

48 
height
 = 1;

49 cÚ¡ 
kB¿nchšg
 = 4;

50 cÚ¡ 
bb
 = (
kB¿nchšg
 > (è
kNumRegiÚs
) ? kBranching / kNumRegions : 1;

51 ià(
height
 < 
kMaxHeight
 && ((
td
->
ºd
.
	`Next
(è% 
bb
) == 0)) {

52 
height
++;

53 
height
 < 
kMaxHeight
 && ((
td
->
ºd
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

54 
height
++;

58 
size_t
 
·Îoc_size
 = 
Node
::
	`compu‹_®loc_size
(
key
, 
height
);

59 
	`TOID
(è
pbuf
;

60 
	`POBJ_ALLOC
(
pİ_
[
r
], &
pbuf
, , 
·Îoc_size
, 
NULL
, NULL);

61 
Node
* 
Ãw_node
 = Node::
	`š™_node
(
	`D_RW
(
pbuf
), 
key
, 0x1, 
v®ue
, 
height
);

62 
Ãw_node
->
Ãxt
[0].
	`¡Üe
(0);

63 
	`pmemobj_³rsi¡
(
pİ_
[
r
], 
Ãw_node
->
	`d©a
(),‚ew_node->
	`®loc_size
());

64  
Ãw_node
;

65 
	}
}

67 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$š£¹
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
r
, 
Node
* cÚ¡ 
node
, Node* 
´ed
, 
boŞ
 
³rsi¡
) {

68 ià(
´ed
 =ğ
NULL
) {

69 
´ed
 = 
h—d_
[
r
];

71 
ušt64_t
 
node_off£t
 = (
ušŒ_t
è
node
 - (ušŒ_tè
pİ_
[
r
];

72 
ušt64_t
 
node_moff
 = (
node_off£t
 << 16è| (
št16_t
è
r
;

73 
	`as£¹
(
node
 =ğ
	`moff_to_±r
(
node_moff
));

74 
Node
* 
´eds
[
kMaxHeight
];

75 
ušt64_t
 
succs
[
kMaxHeight
];

76 
Œue
) {

77 
	`fšd_pos™iÚ
(
td
, 
r
, 
node
, 
´eds
, 
succs
, 
´ed
);

78 
l
 = 1;† < 
node
->
height
;†++) {

79 
node
->
Ãxt
[
l
].
	`¡Üe
(
succs
[l]);

81 
node
->
Ãxt
[0].
	`¡Üe
(
succs
[0]);

82 ià(
³rsi¡
) {

83 
	`pmemobj_³rsi¡
(
pİ_
[
r
], 
node
->
Ãxt
,‚ode->
height
 * 8);

85 ià(!
´eds
[0]->
Ãxt
[0].
	`com·»_exchªge_¡rÚg
(
succs
[0], 
node_moff
)) {

86 
´ed
 = 
´eds
[
kMaxHeight
 - 1];

89 ià(
³rsi¡
) {

90 
bÙtom_´ed_»giÚ
 = (
´eds
[0] =ğ
h—d_
[
kPrim¬yRegiÚ
]è? kPrim¬yRegiÚ : 
r
;

91 
	`pmemobj_³rsi¡
(
pİ_
[
bÙtom_´ed_»giÚ
], 
´eds
[0]->
Ãxt
, 8);

94 
l
 = 1;† < 
node
->
height
;†++) {

95 
Œue
) {

96 ià(!
´eds
[
l
]->
Ãxt
[l].
	`com·»_exchªge_¡rÚg
(
succs
[l], 
node_off£t
)) {

97 
	`fšd_pos™iÚ
(
td
, 
r
, 
node
, 
´eds
, 
succs
,…»ds[
kMaxHeight
 - 1], 
l
);

105  
´eds
[
kMaxHeight
 - 1];

106 
	}
}

108 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$fšd
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
r
, cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
) {

109 ià(
´ed
 =ğ
NULL
) {

110 
´ed
 = 
h—d_
[
r
];

112 
ušt64_t
 
cu¼_off£t
;

113 
Node
* 
cu¼
;

114 
h
 = 
´ed
->
height
;

115 
ü
;

116 
l
 = 
h
 - 1;† >= 1;†--) {

117 
Œue
) {

118 
cu¼_off£t
 = 
´ed
->
Ãxt
[
l
].
	`lßd
();

119 
cu¼
 = (
Node
*è
	`off£t_to_±r
(
r
, 
cu¼_off£t
);

120 ià((
ü
 = 
	`cmp_
(
cu¼
, 
key
)) < 0) {

122 
´ed
 = 
cu¼
;

128 ià(
´ed
 =ğ
h—d_
[
r
] &&„ !ğ
kPrim¬yRegiÚ
) {

129 
´ed
 = 
h—d_
[
kPrim¬yRegiÚ
];

131  
	`fšd_b¿ided
(
td
, 
key
, 
´ed
);

133 
	}
}

135 
	glockä“_pskli¡
::
	$m”ge_WAL
(
Th»adD©a
* 
td
, cÚ¡ 
rmask
, 
lockä“_skli¡
* 
Ùh”
) {

136 
¡d
::
b™£t
<
kMaxNumRegiÚs
> 
	`bs
(
rmask
);

137 
Node
* 
´ed
[
kMaxNumRegiÚs
];

138 
i
 = 0; i < 
kNumRegiÚs
; i++) {

139 
´ed
[
i
] = 
h—d_
[i];

141 
mem_Node
* 
o
 = 
Ùh”
->
	`h—d
()->
Ãxt
[0].
	`lßd
();

142 
o
) {

145 
height
 = 
	`¿ndom_height
(
td
->
ºd
);

146 
št16_t
 
r
 = 0xfffà& 
o
->
log_moff
;

147 ià(
o
->
	`ty³
(è=ğ
kTy³V®ue
 && 
bs
.
	`‹¡
(
r
)) {

148 
size_t
 
·Îoc_size
 = 
Node
::
	`compu‹_®loc_size
(
o
->
	`key
(), 
height
);

149 
	`TOID
(è
pbuf
;

150 
	`POBJ_ALLOC
(
pİ_
[
r
], &
pbuf
, , 
·Îoc_size
, 
NULL
, NULL);

151 
Node
* 
Ãw_node
 = Node::
	`š™_node
(
	`D_RW
(
pbuf
), 
o
->
	`key
(), o->
	`g
(), o->
	`v®ue
(), 
height
);

152 
Ãw_node
->
Ãxt
[0].
	`¡Üe
(0);

153 
	`pmemobj_³rsi¡
(
pİ_
[
r
], 
Ãw_node
->
	`d©a
(),‚ew_node->
	`®loc_size
());

155 
´ed
[
r
] = 
	`š£¹
(
td
,„, 
Ãw_node
,…»d[r], 
Œue
);

156 #iâdeà
BR_STRING_KV


157 
	`ht_add
(
o
->
	`key
(), o->
	`v®ue
());

159 
	`ht_add
((
ušt64_t
è
	`D_RW
(
pbuf
), 
o
->
	`v®ue
());

161 
td
->
mem_com·ùiÚ_út
++;

163 
o
 = o->
Ãxt
[0].
	`lßd
();

165 
	}
}

167 
	glockä“_pskli¡
::
	$m”ge_IUL
(
Th»adD©a
* 
td
, cÚ¡ 
rmask
, 
lockä“_skli¡
* 
Ùh”
) {

168 
¡d
::
b™£t
<
kMaxNumRegiÚs
> 
	`bs
(
rmask
);

169 
Node
* 
´ed
[
kNumRegiÚs
];

170 
i
 = 0; i < 
kNumRegiÚs
; i++) {

171 
´ed
[
i
] = 
h—d_
[i];

173 
mem_Node
* 
o
 = 
Ùh”
->
	`h—d
()->
Ãxt
[0].
	`lßd
();

174 
o
) {

175 
št16_t
 
r
 = 0xfffà& 
o
->
log_moff
;

176 ià(
o
->
	`ty³
(è=ğ
kTy³V®ue
 && 
bs
.
	`‹¡
(
r
)) {

177 
ušt64_t
 
log_off£t
 = 
o
->
log_moff
 >> 16;

178 * 
node_buf
 = (*è
	`off£t_to_±r
(
r
, 
log_off£t
);

179 
Node
* 
Ãw_node
 = Node::
	`lßd_node
(
node_buf
);

195 
´ed
[
r
] = 
	`š£¹
(
td
,„, 
Ãw_node
,…»d[r], 
çl£
);

196 #iâdeà
BR_STRING_KV


203 
	`ht_add
(
o
->
	`key
(), o->
	`v®ue
());

205 
	`ht_add
((
ušt64_t
è
node_buf
, 
o
->
	`v®ue
());

207 
td
->
mem_com·ùiÚ_út
++;

208 } iàĞ
Œue
 && 
o
->
	`ty³
(è=ğ
kTy³ShÜtcut
 && 
bs
.
	`‹¡
(
r
)) {

209 
ušt64_t
 
log_off£t
 = 
o
->
log_moff
 >> 16;

210 * 
node_buf
 = (*è
	`off£t_to_±r
(
r
, 
log_off£t
);

211 
Node
* 
Ãw_node
 = Node::
	`lßd_node
(
node_buf
);

212 
´ed
[
r
] = 
	`š£¹
(
td
,„, 
Ãw_node
,…»d[r], 
çl£
);

226 
o
 = o->
Ãxt
[0].
	`lßd
();

228 
	}
}

230 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$h—d
(cÚ¡ 
r
) {

231  
h—d_
[
r
];

232 
	}
}

235 
	glockä“_pskli¡
::
	$z³r_com·ùiÚ
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
rmask
, cÚ¡ 
low”_Ëv–
, 
lockä“_pskli¡
* 
low”
) {

236 
Node
* 
Êode
;

237 
Node
* 
unode
[
kMaxNumRegiÚs
];

238 
Node
* 
´eds
[
kMaxHeight
];

239 
ušt64_t
 
succs
[
kMaxHeight
];

240 
št16_t
 
¼
;

241 
¡d
::
deque
<
zc_™em
> 
™em_¡ack
;

243 
¡d
::
b™£t
<
kMaxNumRegiÚs
> 
	`bs
(
rmask
);

244 
Êode
 = 
low”
->
	`h—d
(
kPrim¬yRegiÚ
);

245 
	`as£¹
(
Êode
 !ğ
NULL
);

247 
Êode
 = (
Node
*è
low”
->
	`moff_to_±r
Önode->
Ãxt
[0].
	`lßd
(), 
¼
);

248 } 
Êode
 && !
bs
.
	`‹¡
(
¼
));

250 
i
 = 0; i < 
kNumRegiÚs
; i++) {

251 ià(
bs
.
	`‹¡
(
i
)) {

252 
unode
[
i
] = 
h—d_
[i];

254 
unode
[
i
] = 
NULL
;

258 
Êode
) {

259 iàĞ
Œue
 || 
Êode
->
	`ty³
(è!ğ
kTy³ShÜtcut
) {

260 
	`as£¹
(
Êode
->
	`key
() != 0);

261 
	`fšd_pos™iÚ
(
td
, 
¼
, 
Êode
, 
´eds
, 
succs
, 
unode
[rr]);

262 
™em_¡ack
.
	`em¶aû_back
(
¼
, 
Êode
, 
´eds
, 
succs
);

264 
unode
[
¼
] = 
´eds
[
kMaxHeight
 - 1];

267 
Êode
 = (
Node
*è
low”
->
	`moff_to_±r
Önode->
Ãxt
[0].
	`lßd
(), 
¼
);

268 } 
Êode
 && !
bs
.
	`‹¡
(
¼
));

271 !
™em_¡ack
.
	`em±y
()) {

272 auto& 
z
 = 
™em_¡ack
.
	`back
();

273 
Œue
) {

274 
ušt64_t
 
Üi_moff
 = 
z
.
node
->
Ãxt
[0].
	`lßd
();

275 
Node
* 
Üi_succ
 = (Node*è
	`moff_to_±r
(
Üi_moff
);

276 
ušt64_t
 
ÿnd_moff
 = 
z
.
succs
[0];

277 
Node
* 
ÿnd_succ
 = (Node*è
	`moff_to_±r
(
ÿnd_moff
);

278 
ušt64_t
 
ex³ùed_succ_moff
;

279 ià(
Üi_succ
 =ğ
NULL
 || 
	`cmp_
(
ÿnd_succ
, ori_succ) < 0) {

280 
z
.
node
->
Ãxt
[0].
	`¡Üe
(
ÿnd_moff
);

282 
ex³ùed_succ_moff
 = 
ÿnd_moff
;

284 
ex³ùed_succ_moff
 = 
Üi_moff
;

286 
ušt64_t
 
z_off£t
 = (
ušŒ_t
è
z
.
node
 - (ušŒ_tè
pİ_
[z.
»giÚ
];

287 
ušt64_t
 
z_moff
 = (
z_off£t
 << 16è| (
št16_t
è
z
.
»giÚ
;

288 ià(!
z
.
´eds
[0]->
Ãxt
[0].
	`com·»_exchªge_¡rÚg
(
ex³ùed_succ_moff
, 
z_moff
)) {

290 
	`fšd_pos™iÚ
(
td
, 
z
.
»giÚ
, z.
node
, z.
´eds
, z.
succs
, z.´eds[
kMaxHeight
-1]);

299 
h
 = 1; h < 
z
.
node
->
height
; h++) {

300 
Œue
) {

301 
ušt64_t
 
Üi_off£t
 = 
z
.
node
->
Ãxt
[
h
].
	`lßd
();

302 
Node
* 
Üi_succ
 = (Node*è
	`off£t_to_±r
(
z
.
»giÚ
, 
Üi_off£t
);

303 
ušt64_t
 
ÿnd_off£t
 = 
z
.
succs
[
h
];

304 
Node
* 
ÿnd_succ
 = (Node*è
	`off£t_to_±r
(
z
.
»giÚ
, 
ÿnd_off£t
);

305 
ušt64_t
 
ex³ùed_succ_off£t
;

306 ià(
Üi_succ
 =ğ
NULL
 || 
	`cmp_
(
ÿnd_succ
, ori_succ) < 0) {

307 
z
.
node
->
Ãxt
[
h
].
	`¡Üe
(
ÿnd_off£t
);

309 
ex³ùed_succ_off£t
 = 
ÿnd_off£t
;

311 
ex³ùed_succ_off£t
 = 
Üi_off£t
;

313 
ušt64_t
 
z_off£t
 = (
ušŒ_t
è
z
.
node
 - (ušŒ_tè
pİ_
[z.
»giÚ
];

314 ià(!
z
.
´eds
[
h
]->
Ãxt
[h].
	`com·»_exchªge_¡rÚg
(
ex³ùed_succ_off£t
, 
z_off£t
)) {

315 
	`fšd_pos™iÚ
(
td
, 
z
.
»giÚ
, z.
node
, z.
´eds
, z.
succs
, z.´eds[
kMaxHeight
 - 1], 
h
);

323 
td
->
pmem_com·ùiÚ_út
[
low”_Ëv–
]++;

324 
™em_¡ack
.
	`pİ_back
();

326 
	}
}

328 
	glockä“_pskli¡
::
	$log_¡ruùu»d_com·ùiÚ
(
Th»adD©a
* 
td
, cÚ¡ 
rmask
, cÚ¡ 
low”_Ëv–
, 
lockä“_pskli¡
* 
low”
) {

329 
Node
* 
´ed
[
kMaxNumRegiÚs
];

330 
i
 = 0; i < 
kNumRegiÚs
; i++) {

331 
´ed
[
i
] = 
h—d_
[i];

333 autØ
™
 = 
low”
->
	`Ãw_»giÚ_™”©Ü
(
rmask
);

334 
™
->
	`v®id
()) {

335 
Node
* 
Êode
 = 
™
->
	`node
();

336 ià(
Êode
->
	`ty³
(è!ğ
kTy³ShÜtcut
) {

337 
r
 = 
™
->
	`»giÚ
();

338 
height
 = 
	`¿ndom_height
(
td
->
ºd
);

339 
	`TOID
(è
Ãw_node_buf
;

340 
size_t
 
®loc_size
 = 
Node
::
	`compu‹_®loc_size
(
Êode
->
	`key
(), 
height
);

341 
	`POBJ_ALLOC
(
pİ_
[
r
], &
Ãw_node_buf
, , 
®loc_size
, 
NULL
, NULL);

342 
Node
* 
Ãw_node
 = Node::
	`š™_node
(
	`D_RW
(
Ãw_node_buf
), 
Êode
->
	`key
(),†node->
	`g
(),†node->
	`v®ue
(), 
height
);

343 
	`pmemobj_³rsi¡
(
pİ_
[
r
], 
	`D_RW
(
Ãw_node_buf
), 
®loc_size
 - (
height
-1)*8);

344 
´ed
[
r
] = 
	`š£¹
(
td
,„, 
Ãw_node
,…»d[r], 
Œue
);

345 
td
->
pmem_com·ùiÚ_út
[
low”_Ëv–
]++;

347 
™
->
	`Ãxt
();

349 
	}
}

382 
	glockä“_pskli¡
::
	$fšd_pos™iÚ
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
r
, 
Node
* 
node
, Node* 
´eds
[], 
ušt64_t
 
succs
[], Node* 
´ed
, cÚ¡ 
mš_h
) {

383 ià(
´ed
 =ğ
NULL
) {

384 
´ed
 = 
h—d_
[
r
];

386 
ušt64_t
 
cu¼_off£t
;

387 
Node
* 
cu¼
;

388 
h
 = 
´ed
->
height
;

389 
l
;

390 
l
 = 
h
 - 1;† >ğ
¡d
::
	`max
(1, 
mš_h
);†--) {

391 
Œue
) {

393 
cu¼_off£t
 = 
´ed
->
Ãxt
[
l
].
	`lßd
();

394 
cu¼
 = (
Node
*è
	`off£t_to_±r
(
r
, 
cu¼_off£t
);

395 ià(
	`cmp_
(
cu¼
, 
node
) < 0) {

396 
´ed
 = 
cu¼
;

402 
´eds
[
l
] = 
´ed
;

403 
succs
[
l
] = 
cu¼_off£t
;

405 ià(
l
 == 0) {

406 ià(
´ed
 =ğ
h—d_
[
r
] &&„ !ğ
kPrim¬yRegiÚ
) {

407 
´ed
 = 
h—d_
[
kPrim¬yRegiÚ
];

409 
	`fšd_pos™iÚ_b¿ided
(
td
, 
node
, 
´eds
, 
succs
, 
´ed
);

411 
	}
}

413 
	glockä“_pskli¡
::
	$fšd_pos™iÚ_b¿ided
(
Th»adD©a
* cÚ¡ 
td
, 
Node
* 
node
, Node* 
´eds
[], 
ušt64_t
 
succs
[], Node* 
´ed
) {

414 
	`as£¹
(
´ed
 !ğ
NULL
);

415 
ušt64_t
 
cu¼_moff
;

416 
Node
* 
cu¼
;

417 
Œue
) {

418 
cu¼_moff
 = 
´ed
->
Ãxt
[0].
	`lßd
();

419 
cu¼
 = (
Node
*è
	`moff_to_±r
(
cu¼_moff
);

420 ià(
	`cmp_
(
cu¼
, 
node
) < 0) {

421 
´ed
 = 
cu¼
;

427 
´eds
[0] = 
´ed
;

428 
succs
[0] = 
cu¼_moff
;

429 
	}
}

431 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$fšd_b¿ided
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
) {

432 
	`as£¹
(
´ed
 !ğ
NULL
);

433 
ušt64_t
 
cu¼_moff
;

434 
Node
* 
cu¼
;

435 
ü
 = -1;

436 
Œue
) {

437 
cu¼_moff
 = 
´ed
->
Ãxt
[0].
	`lßd
();

438 
cu¼
 = (
Node
*è
	`moff_to_±r
(
cu¼_moff
);

439 ià((
ü
 = 
	`cmp_
(
cu¼
, 
key
)) < 0) {

441 
´ed
 = 
cu¼
;

446  (
ü
 =ğ0è? 
cu¼
 : 
NULL
;

447 
	}
}

449 * 
	glockä“_pskli¡
::
	$off£t_to_±r
(cÚ¡ 
r
, cÚ¡ 
ušt64_t
 
off£t
) {

450 ià(
off£t
) {

451  (*è((
ušŒ_t
è
pİ_
[
r
] + 
off£t
);

453  
NULL
;

455 
	}
}

457 * 
	glockä“_pskli¡
::
	$moff_to_±r
(cÚ¡ 
ušt64_t
 
moff
) {

458 
št16_t
 
r
 = 0xfffà& 
moff
;

459 
ušt64_t
 
off£t
 = 
moff
 >> 16;

460 ià(
off£t
) {

461  (*è((
ušŒ_t
è
pİ_
[
r
] + 
off£t
);

463  
NULL
;

465 
	}
}

467 * 
	glockä“_pskli¡
::
	$moff_to_±r
(cÚ¡ 
ušt64_t
 
moff
, 
št16_t
& 
r
) {

468 
r
 = 0xfffà& 
moff
;

469 
ušt64_t
 
off£t
 = 
moff
 >> 16;

470 ià(
off£t
) {

471  (*è((
ušŒ_t
è
pİ_
[
r
] + 
off£t
);

473  
NULL
;

475 
	}
}

477 
	glockä“_pskli¡
::
	$¿ndom_height
(
Rªdom
& 
ºd
) {

479 cÚ¡ 
kB¿nchšg
 = 4;

480 cÚ¡ 
bb
 = (
kB¿nchšg
 > (è
kNumRegiÚs
) ? kBranching / kNumRegions : 1;

481 
height
 = 1;

482 ià(
height
 < 
kMaxHeight
 && ((
ºd
.
	`Next
(è% 
bb
) == 0)) {

483 
height
++;

484 
height
 < 
kMaxHeight
 && ((
ºd
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

485 
height
++;

488  
height
;

489 
	}
}

491 
	g¡d
::
sh¬ed_±r
<
PRegiÚI‹¿tÜ
> 
lockä“_pskli¡
::
	$Ãw_»giÚ_™”©Ü
(cÚ¡ 
rmask
) {

492 autØ
™
 = 
¡d
::
make_sh¬ed
<
PRegiÚI‹¿tÜ
>(
this
, 
rmask
);

493  
™
;

494 
	}
}

496 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$g‘_node_by_off£t
(cÚ¡ 
»giÚ
, cÚ¡ 
ušt64_t
 
off£t
) {

497  (
Node
*è
	`off£t_to_±r
(
»giÚ
, 
off£t
);

498 
	}
}

500 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$g‘_node_by_moff
(cÚ¡ 
ušt64_t
 
moff
) {

501  (
Node
*è
	`moff_to_±r
(
moff
);

502 
	}
}

504 
	glockä“_pskli¡
::
	$debug_sÿn
() {

505 
út
 = 0;

507 
Node
* 
´ed
 = 
	`h—d
(
kPrim¬yRegiÚ
);

508 
	`årštf
(
¡dout
, "{HEAD[0] @%p}", 
´ed
);

509 
Œue
) {

510 
št16_t
 
r
;

513 
Node
* 
cu¼
 = (Node*è
	`moff_to_±r
(
´ed
->
Ãxt
[0].
	`lßd
(), 
r
);

516 ià(
cu¼
) {

517 
út
++;

518 
	`årštf
(
¡dout
, "->{r:%d| KEY INFO NOT IMPLEMENTED |h:%d @%p}", 
r
, 
cu¼
->
height
, curr);

520 
´ed
 = 
cu¼
;

525 
	`årštf
(
¡dout
, "\Âode_út: %d\n", 
út
);

526 
	}
}

528 
	gPRegiÚI‹¿tÜ
::
	$PRegiÚI‹¿tÜ
(
lockä“_pskli¡
* cÚ¡ 
skli¡
, cÚ¡ 
rmask
è: 
	`skli¡_
(skli¡), 
	$rbs_
(
rmask
) {

529 
Node
* 
node
 = 
skli¡_
->
	`h—d
(
kPrim¬yRegiÚ
);

530 
	`as£¹
(
node
 !ğ
NULL
);

531 
node_
 = 
node
;

532 
	`Ãxt
();

533 
	}
}

535 
boŞ
 
	gPRegiÚI‹¿tÜ
::
	$v®id
() {

536  
node_
 !ğ
NULL
;

537 
	}
}

539 
	gPRegiÚI‹¿tÜ
::
	$Ãxt
() {

540 
Node
* 
node
 = 
node_
;

541 
št16_t
 
node_»giÚ
;

543 
node
 = (
Node
*è
skli¡_
->
	`moff_to_±r
Òode->
Ãxt
[0].
	`lßd
(), 
node_»giÚ
);

544 } 
node
 && !
rbs_
.
	`‹¡
(
node_»giÚ
));

545 
r_
 = 
node_»giÚ
;

546 
node_
 = 
node
;

547 
	}
}

549 
	gPRegiÚI‹¿tÜ
::
Node
* 
PRegiÚI‹¿tÜ
::
	$node
() {

550  
node_
;

551 
	}
}

553 
	gPRegiÚI‹¿tÜ
::
	$»giÚ
() {

554  
r_
;

555 
	}
}

562 
	gÿsc_pskli¡_™”©Ü
::
	$ÿsc_pskli¡_™”©Ü
(cÚ¡ 
»giÚ
, 
lockä“_pskli¡
* cÚ¡ 
skli¡
)

563 : 
	`r_
(
»giÚ
), 
	$skli¡_
(
skli¡
) {

565 
node_
 = 
NULL
;

566 
shÜtcut_
 = 
NULL
;

568 
	}
}

570 
	gÿsc_pskli¡_™”©Ü
::
	$£ek
(cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
) {

571 ià(
´ed
 =ğ
NULL
) {

572 
´ed
 = 
skli¡_
->
h—d_
[
r_
];

574 
ušt64_t
 
cu¼_off£t
;

575 
Node
* 
cu¼
 = 
NULL
;

576 
h
 = 
´ed
->
height
;

577 
l
 = 
h
 - 1;† >= 1;†--) {

578 
Œue
) {

579 
cu¼_off£t
 = 
´ed
->
Ãxt
[
l
].
	`lßd
();

580 
cu¼
 = (
Node
*è
skli¡_
->
	`off£t_to_±r
(
r_
, 
cu¼_off£t
);

581 ià(
skli¡_
->
	`cmp_
(
cu¼
, 
key
) < 0) {

582 
´ed
 = 
cu¼
;

583 ià(
´ed
->
	`ty³
(è=ğ
kTy³ShÜtcut
) {

586 
shÜtcut_
 = (
Node
*è
skli¡_
->
	`moff_to_±r
(
´ed
->
	`v®ue
());

593 ià(
´ed
 =ğ
skli¡_
->
h—d_
[
r_
] &&„_ !ğ
kPrim¬yRegiÚ
) {

594 
´ed
 = 
skli¡_
->
h—d_
[
kPrim¬yRegiÚ
];

596  
	`£ek_b¿ided
(
key
, 
´ed
);

597 
	}
}

599 
	gÿsc_pskli¡_™”©Ü
::
	$£ek_b¿ided
(cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
) {

600 
	`as£¹
(
´ed
 !ğ
NULL
);

601 
ušt64_t
 
cu¼_moff
;

602 
Node
* 
cu¼
;

603 
ü
 = 1;

604 
Œue
) {

605 
cu¼_moff
 = 
´ed
->
Ãxt
[0].
	`lßd
();

606 
cu¼
 = (
Node
*è
skli¡_
->
	`moff_to_±r
(
cu¼_moff
);

607 ià((
ü
 = 
skli¡_
->
	`cmp_
(
cu¼
, 
key
)) < 0) {

608 
´ed
 = 
cu¼
;

613 
cmp_
 = 
ü
;

615 
node_
 = 
cu¼
;

616 
	}
}

618 
	gÿsc_pskli¡_™”©Ü
::
	$Ãxt
() {

619 
Node
* 
´ed
 = 
node_
;

620 
Node
* 
cu¼
 = (Node*è
skli¡_
->
	`moff_to_±r
(
´ed
->
Ãxt
[0].
	`lßd
());

621 
cmp_
 = 1;

622 
node_
 = 
cu¼
;

623 
	}
}

625 
boŞ
 
	gÿsc_pskli¡_™”©Ü
::
	$v®id
() const {

626  (
node_
 !ğ
NULL
);

627 
	}
}

629 
	gÿsc_pskli¡_™”©Ü
::
	$cmp
() {

630  
cmp_
;

631 
	}
}

636 
	gÿsc_pskli¡_™”©Ü
::
Node
* 
ÿsc_pskli¡_™”©Ü
::
	$node
() {

637  
node_
;

638 
	}
}

640 cÚ¡ 
	gÿsc_pskli¡_™”©Ü
::
Node
* 
ÿsc_pskli¡_™”©Ü
::
	$shÜtcut
() {

641  
shÜtcut_
;

642 
	}
}

647 
	glockä“_pskli¡
::
Node
* 
lockä“_pskli¡
::
	$g‘_shÜtcut
(cÚ¡ 
Node
* 
node
) {

649  (
Node
*è
	`moff_to_±r
(
node
->
shÜtcut_moff
);

650 
	}
}

652 
	gÿsc_pskli¡_™”©Ü
::
	$ÿsc_pskli¡_™”©Ü
(
lockä“_pskli¡
* cÚ¡ 
skli¡
, cÚ¡ 
»giÚ
)

653 : 
	`skli¡_
(
skli¡
), 
	$r_
(
»giÚ
) {

654 
´ed_
 = 
NULL
;

655 
node_
 = 
NULL
;

656 
shÜtcut_
 = 
NULL
;

657 
´ed_a_off£t_
 = 0;

658 
	}
}

660 
	gÿsc_pskli¡_™”©Ü
::
	$£ek
(cÚ¡ 
Key
& 
key
, 
Node
* 
´ed
) {

661 ià(
´ed
 =ğ
NULL
) {

662 
´ed
 = 
skli¡_
->
h—d_
[
r_
];

664 
ušt64_t
 
cu¼_off£t
;

665 
Node
* 
cu¼
 = 
NULL
;

666 
h
 = 
´ed
->
height
;

667 
l
 = 
h
 - 1;† >= 1;†--) {

668 
Œue
) {

669 
cu¼_off£t
 = 
´ed
->
Ãxt
[
l
].
	`lßd
();

670 
cu¼
 = (
Node
*è
skli¡_
->
	`off£t_to_±r
(
r_
, 
cu¼_off£t
);

671 ià(
skli¡_
->
	`cmp_
(
cu¼
, 
key
) < 0) {

672 ià×utØ
sc
 = 
skli¡_
->
	`g‘_shÜtcut
(
cu¼
)) {

673 
shÜtcut_
 = 
sc
;

675 
´ed
 = 
cu¼
;

682 
´ed_
 = 
´ed
;

683  
	`£ek_b¿ided
(
key
, 
´ed
);

684 
	}
}

686 
	gÿsc_pskli¡_™”©Ü
::
	$£ek_two
(cÚ¡ 
Key
& 
key
, 
Node
* 
´ed
, cÚ¡ Key& 
key_a
) {

687 ià(
´ed
 =ğ
NULL
) {

688 
´ed
 = 
skli¡_
->
h—d_
[
r_
];

690 
ušt64_t
 
cu¼_off£t
;

691 
Node
* 
cu¼
 = 
NULL
;

692 
h
 = 
´ed
->
height
;

694 
boŞ
 
ü—‹_shÜtcut
 = 
Œue
;

695 
l
 = 
h
 - 1;† >= 1;†--) {

696 
Œue
) {

697 
cu¼_off£t
 = 
´ed
->
Ãxt
[
l
].
	`lßd
();

698 
cu¼
 = (
Node
*è
skli¡_
->
	`off£t_to_±r
(
r_
, 
cu¼_off£t
);

699 ià(
ü—‹_shÜtcut
 && 
l
 >ğ
kMaxHeight
 - 6 ) {

700 ià(
skli¡_
->
	`cmp_
(
cu¼
, 
key_a
) < 0) {

701 
´ed_a_off£t_
 = 
cu¼_off£t
;

704 ià(
skli¡_
->
	`cmp_
(
cu¼
, 
key
) < 0) {

705 ià×utØ
sc
 = 
skli¡_
->
	`g‘_shÜtcut
(
cu¼
)) {

706 
shÜtcut_
 = 
sc
;

708 
´ed
 = 
cu¼
;

714 
´ed_
 = 
´ed
;

715  
	`£ek_b¿ided
(
key
, 
´ed
);

716 
	}
}

718 
	gÿsc_pskli¡_™”©Ü
::
	$£ek_b¿ided
(cÚ¡ 
Key
& 
key
, 
Node
* 
´ed
) {

719 
	`as£¹
(
´ed
 !ğ
NULL
);

720 
ušt64_t
 
cu¼_moff
;

721 
Node
* 
cu¼
;

722 
ü
 = 1;

723 
Œue
) {

724 
cu¼_moff
 = 
´ed
->
Ãxt
[0].
	`lßd
();

725 
cu¼
 = (
Node
*è
skli¡_
->
	`moff_to_±r
(
cu¼_moff
);

726 ià((
ü
 = 
skli¡_
->
	`cmp_
(
cu¼
, 
key
)) < 0) {

727 
´ed
 = 
cu¼
;

732 
cmp_
 = 
ü
;

733 
node_
 = 
cu¼
;

734 
	}
}

736 
boŞ
 
	gÿsc_pskli¡_™”©Ü
::
	$is_»ady_Ãw_shÜtcut
() {

737  (
´ed_a_off£t_
 != 0);

738 
	}
}

740 
ušt64_t
 
	gÿsc_pskli¡_™”©Ü
::
	$´ed_a_moff
() {

741  (
´ed_a_off£t_
<<16 | 
r_
);

742 
	}
}

744 
boŞ
 
	gÿsc_pskli¡_™”©Ü
::
	$v®id
() {

745  (
node_
 !ğ
NULL
);

746 
	}
}

748 
	gÿsc_pskli¡_™”©Ü
::
	$cmp
() {

749  
cmp_
;

750 
	}
}

752 
	gÿsc_pskli¡_™”©Ü
::
Node
* 
ÿsc_pskli¡_™”©Ü
::
	$´ed
() {

753  
´ed_
;

754 
	}
}

755 
	gÿsc_pskli¡_™”©Ü
::
Node
* 
ÿsc_pskli¡_™”©Ü
::
	$node
() {

756  
node_
;

757 
	}
}

759 
	gÿsc_pskli¡_™”©Ü
::
Node
* 
ÿsc_pskli¡_™”©Ü
::
	$shÜtcut
() {

760  
shÜtcut_
;

761 
	}
}

	@index/lockfree_pskiplist_brdb.h

1 #´agm¨
Úû


3 
	~<b™£t
>

4 
	~<memÜy
>

6 
	~<libpmemobj.h
>

8 
	~"pmem.h
"

9 
	~"commÚ.h
"

10 
	~"ds/lockä“_skli¡.h
"

11 
	~"ds/nodes.h
"

13 
şass
 
	gPRegiÚI‹¿tÜ
;

15 şas 
	clockä“_pskli¡
 {

16 
ä›nd
 
şass
 
	mPRegiÚI‹¿tÜ
;

17 
ä›nd
 
şass
 
	mÿsc_pskli¡_™”©Ü
;

18 
	mpublic
:

19 #iâdeà
BR_STRING_KV


20 
ušt64_t
 
	tKey
;

21 
UINT64_²ode
 
	tNode
;

22 
UINT64_pcmp
 
	tNodeCmp
;

23 
UINT64_node
 
	tmem_Node
;

25 
	m¡d
::
	t¡ršg_v›w
 
	tKey
;

26 
VARSTR_²ode
 
	tNode
;

27 
VARSTR_pcmp
 
	tNodeCmp
;

28 
VARSTR_node
 
	tmem_Node
;

31 
	szc_™em
 {

32 
	m»giÚ
;

33 
Node
* 
	mnode
;

34 
Node
* 
	m´eds
[
kMaxHeight
];

35 
ušt64_t
 
	msuccs
[
kMaxHeight
];

36 
zc_™em
(cÚ¡ 
r
, 
Node
* 
node_š
, Node* 
´eds_š
[], 
ušt64_t
 
succs_š
[]) {

37 
	m»giÚ
 = 
r
;

38 
	mnode
 = 
node_š
;

39 
memıy
((*è
´eds
, (*è
´eds_š
, 
kMaxHeight
 * (
Node
*));

40 
memıy
((*è
succs
, (*è
succs_š
, 
kMaxHeight
 * (
ušt64_t
));

44 
	gpublic
:

45 
lockä“_pskli¡
(
PMEMobjpoŞ
* 
pİs
[]);

46 
š™
();

47 
lßd
(
TOID
(
B¿idedSkLi¡Ba£
)& 
ba£
);

48 
	$TOID
(
B¿idedSkLi¡Ba£
è
	`ba£
();

49 
Node
* 
	`Ãw_node
(
Th»adD©a
* 
td
, cÚ¡ 
r
, cÚ¡ 
Key
& 
key
, cÚ¡ 
ušt64_t
 
v®ue
, 
height
 = 0);

51 
Node
* 
	`š£¹
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
r
, Node* cÚ¡ 
node
, Node* 
´ed
 = 
NULL
, 
boŞ
 
³rsi¡
 = 
Œue
);

53 
Node
* 
	`fšd
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
r
, cÚ¡ 
Key
& 
key
, cÚ¡ Node* 
´ed
 = 
NULL
);

54 
	`m”ge_WAL
(
Th»adD©a
* 
td
, cÚ¡ 
rmask
, 
lockä“_skli¡
* 
Ùh”
);

55 
	`m”ge_IUL
(
Th»adD©a
* 
td
, cÚ¡ 
rmask
, 
lockä“_skli¡
* 
Ùh”
);

56 
Node
* 
	`h—d
(cÚ¡ 
r
);

57 
	`z³r_com·ùiÚ
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
rmask
, cÚ¡ 
low”_Ëv–
, 
lockä“_pskli¡
* 
low”
);

58 
	`log_¡ruùu»d_com·ùiÚ
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
rmask
, cÚ¡ 
low”_Ëv–
, 
lockä“_pskli¡
* 
low”
);

60 
¡d
::
sh¬ed_±r
<
PRegiÚI‹¿tÜ
> 
	`Ãw_»giÚ_™”©Ü
(cÚ¡ 
rmask
);

62 
Node
* 
	`g‘_node_by_off£t
(cÚ¡ 
»giÚ
, cÚ¡ 
ušt64_t
 
off£t
);

63 
Node
* 
	`g‘_node_by_moff
(cÚ¡ 
ušt64_t
 
moff
);

65 
	`debug_sÿn
();

67 
public
:

68 
	`fšd_pos™iÚ
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
r
, 
Node
* 
node
, Node* 
´eds
[],

69 
ušt64_t
 
succs
[], 
Node
* 
´ed
 = 
NULL
, cÚ¡ 
mš_h
 = 0);

70 
	`fšd_pos™iÚ_b¿ided
(
Th»adD©a
* cÚ¡ 
td
, 
Node
* 
node
, Node* 
´eds
[], 
ušt64_t
 
succs
[], Node* 
´ed
 = 
NULL
);

71 
Node
* 
	`fšd_b¿ided
(
Th»adD©a
* cÚ¡ 
td
, cÚ¡ 
Key
& 
key
, cÚ¡ Node* 
´ed
);

72 * 
	`off£t_to_±r
(cÚ¡ 
r
, cÚ¡ 
ušt64_t
 
off£t
);

73 * 
	`moff_to_±r
(cÚ¡ 
ušt64_t
 
moff
);

74 * 
	`moff_to_±r
(cÚ¡ 
ušt64_t
 
moff
, 
št16_t
& 
r
);

75 
	`¿ndom_height
(
Rªdom
& 
ºd
);

77 
Node
* 
	`g‘_shÜtcut
(cÚ¡ Node* 
node
);

80 
public
:

81 
NodeCmp
 
cmp_
;

82 
Node
* 
h—d_
[
kMaxNumRegiÚs
];

83 
PMEMobjpoŞ
* 
pİ_
[
kMaxNumRegiÚs
];

84 
	$TOID
(
B¿idedSkLi¡Ba£
è
ba£_
;

85 
	}
};

87 şas 
	cPRegiÚI‹¿tÜ
 {

88 
usšg
 
	mNode
 = 
lockä“_pskli¡
::
Node
;

89 
	mpublic
:

90 
PRegiÚI‹¿tÜ
(
lockä“_pskli¡
* cÚ¡ 
skli¡
, cÚ¡ 
rmask
);

91 
boŞ
 
v®id
();

92 
Ãxt
();

93 
Node
* 
node
();

94 
»giÚ
();

95 
	m´iv©e
:

96 
lockä“_pskli¡
* cÚ¡ 
skli¡_
;

98 
	m¡d
::
b™£t
<
kMaxNumRegiÚs
> 
rbs_
;

99 
	mr_
;

100 
Node
* 
	mnode_
;

104 şas 
	cÿsc_pskli¡_™”©Ü
 {

105 
	mpublic
:

106 
usšg
 
Key
 = 
lockä“_pskli¡
::Key;

107 
usšg
 
	mNode
 = 
lockä“_pskli¡
::
Node
;

108 
usšg
 
	mNodeCmp
 = 
lockä“_skli¡
::
NodeCmp
;

110 
ÿsc_pskli¡_™”©Ü
(cÚ¡ 
»giÚ
, 
lockä“_pskli¡
* cÚ¡ 
skli¡
);

111 
£ek
(cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
 = 
NULL
);

113 
£ek_b¿ided
(cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
);

116 
Ãxt
();

117 
boŞ
 
	$v®id
() const;

118 
	`cmp
();

120 
Node
* 
	`node
();

121 cÚ¡ 
Node
* 
	`shÜtcut
();

123 
public
:

124 cÚ¡ 
r_
;

125 
lockä“_pskli¡
* cÚ¡ 
skli¡_
;

127 
Node
* 
node_
;

128 
cmp_
;

129 cÚ¡ 
Node
* 
shÜtcut_
;

135 şas 
	cÿsc_pskli¡_™”©Ü
 {

136 
public
:

137 
usšg
 
Key
 = 
lockä“_pskli¡
::Key;

138 
usšg
 
Node
 = 
lockä“_pskli¡
::Node;

139 
usšg
 
NodeCmp
 = 
lockä“_skli¡
::NodeCmp;

141 
	`ÿsc_pskli¡_™”©Ü
(
lockä“_pskli¡
* cÚ¡ 
skli¡
, cÚ¡ 
»giÚ
);

142 
	`£ek
(cÚ¡ 
Key
& 
key
, 
Node
* 
´ed
 = 
NULL
);

143 
	`£ek_two
(cÚ¡ 
Key
& 
key
, 
Node
* 
´ed
, cÚ¡ Key& 
key_a
);

144 
	`£ek_b¿ided
(cÚ¡ 
Key
& 
key
, 
Node
* 
´ed
);

145 
boŞ
 
	`is_»ady_Ãw_shÜtcut
();

146 
ušt64_t
 
	`´ed_a_moff
();

147 
boŞ
 
	`v®id
();

148 
	`cmp
();

149 
Node
* 
	`´ed
();

150 
Node
* 
	`node
();

151 
Node
* 
	`shÜtcut
();

153 
´iv©e
:

154 
lockä“_pskli¡
* cÚ¡ 
skli¡_
;

155 cÚ¡ 
r_
;

156 
Node
* 
´ed_
;

157 
Node
* 
node_
;

158 
cmp_
;

159 
Node
* 
shÜtcut_
;

160 
ušt64_t
 
´ed_a_off£t_
;

	@index/lockfree_skiplist.h

1 #iâdeà
LISTDB_INDEX_LOCKFREE_SKIPLIST_H_


2 
	#LISTDB_INDEX_LOCKFREE_SKIPLIST_H_


	)

4 
	~<ÿs£¹
>

5 
	~<c¡ršg
>

7 
	~<x86šŒš.h
>

9 
	~"li¡db/commÚ.h
"

10 
	~"li¡db/lib/memÜy.h
"

11 
	~"li¡db/pmem/pmem_±r.h
"

13 şas 
	clockä“_skli¡
 {

14 
	mpublic
:

15 
	sNode
 {

16 
Key
 
key
;

17 
ušt64_t
 
	mg
;

18 
ušt64_t
 
	mv®ue
;

20 
	m¡d
::
©omic
<
Node
*> 
Ãxt
[1];

22 #iâdeà
LISTDB_STRING_KEY


23 
Key
 
h—d_key
() {  0ULL; }

25 
Key
 
h—d_key
() {  Key(); }

28 
size_t
 
compu‹_®loc_size
(cÚ¡ 
Key
& 
key
, cÚ¡ 
height
) {

29  
®igÃd_size
(8, (
Node
è+ (
height
-1)*8);

32 
Node
* 
š™_node
(* 
buf
, cÚ¡ 
Key
& 
key_
,

33 cÚ¡ 
ušt64_t
 
£q_Üd”
, cÚ¡ 
V®ueTy³
 
ty³
, cÚ¡ 
height
,

34 cÚ¡ 
ušt64_t
 
v®ue_
,

35 
boŞ
 
š™_Ãxt_¬r
 = 
Œue
) {

36 
Node
* 
node
 = (Node*è
buf
;

37 
	mnode
->
	mkey
 = 
key_
;

38 
	mnode
->
	mg
 = (
£q_Üd”
 << 8è| (
ty³
 << 4è| (
height
 & 0xf);

39 
	mnode
->
	mv®ue
 = 
v®ue_
;

40 ià(
	mš™_Ãxt_¬r
) {

41 
mem£t
(
node
->
Ãxt
, 0, 
height
 * 8);

43  
	mnode
;

46 
height
(ècÚ¡ {  
	mg
 & 0xf; }

47 
size_t
 
®loc_size
(ècÚ¡ {  (
	mNode
è+ (
height
() - 1) * 8; }

48 
ušt8_t
 
ty³
(ècÚ¡ {  
V®ueTy³
((
g
 & 0xf0) >> 4); }

49 * 
d©a
(ècÚ¡ {  (*è
	mthis
; }

52 
lockä“_skli¡
();

54 
Node
* 
In£¹
(Node* cÚ¡ 
node
, Node* 
´ed
 = 
NULL
);

56 
Node
* 
fšd
(cÚ¡ 
Key
& 
key
, cÚ¡ Node* 
´ed
 = 
NULL
);

57 
Node
* 
Lookup
(cÚ¡ 
Key
& 
key
);

58 
Node
* 
h—d
();

60 
	g´iv©e
:

61 
fšd_pos™iÚ
(
Node
* 
node
, Node* 
´eds
[], Node* 
succs
[], Node* 
´ed
 = 
NULL
, cÚ¡ 
mš_h
 = 0);

63 
	gpublic
:

64 
Node
* 
h—d_
;

67 
	glockä“_skli¡
::
Node
* 
lockä“_skli¡
::
	$In£¹
(
Node
* cÚ¡ 
node
, Node* 
´ed
) {

68 ià(
´ed
 =ğ
NULL
) {

69 
´ed
 = 
h—d_
;

71 
Node
* 
´eds
[
kMaxHeight
];

72 
Node
* 
succs
[
kMaxHeight
];

74 
Œue
) {

75 
	`fšd_pos™iÚ
(
node
, 
´eds
, 
succs
, 
´ed
);

82 
l
 = 0;† < 
node
->
	`height
();†++) {

83 
node
->
Ãxt
[
l
].
	`¡Üe
(
succs
[l], 
¡d
::
memÜy_Üd”_»Ïxed
);

86 ià(!
´eds
[0]->
Ãxt
[0].
	`com·»_exchªge_¡rÚg
(
succs
[0], 
node
))

89 
´ed
 = 
´eds
[
kMaxHeight
 - 1];

92 
l
 = 1;† < 
node
->
	`height
();†++) {

93 
Œue
) {

96 ià(
´eds
[
l
]->
Ãxt
[l].
	`com·»_exchªge_¡rÚg
(
succs
[l], 
node
))

101 
	`fšd_pos™iÚ
(
node
, 
´eds
, 
succs
, 
´ed
, 
l
);

106  
´eds
[
kMaxHeight
 - 1];

107 
	}
}

109 
	glockä“_skli¡
::
Node
* 
lockä“_skli¡
::
	$Lookup
(cÚ¡ 
Key
& 
key
) {

110 
Node
* 
´ed
 = 
h—d_
;

111 
Node
* 
cu¼
 = 
nuÎ±r
;

112 
h
 = 
´ed
->
	`height
();

113 
l
 = 
h
 - 1;† >= 0;†--) {

114 
Œue
) {

116 
cu¼
 = 
´ed
->
Ãxt
[
l
].
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

118 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(key) < 0) {

119 
´ed
 = 
cu¼
;

125  
cu¼
;

126 
	}
}

128 
	glockä“_skli¡
::
	$lockä“_skli¡
() {

129 autØ
h—d_key
 = 
Node
::
	`h—d_key
();

130 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
	`compu‹_®loc_size
(
h—d_key
, 
kMaxHeight
);

131 * 
buf
 = 
	`®igÃd_®loc
(8, 
®loc_size
);

133 
h—d_
 = 
Node
::
	`š™_node
((*è
buf
, 
h—d_key
, 0x00ffffffffffffff, 
	`V®ueTy³
(0xf), 
kMaxHeight
, 0);

134 
h—d_
->
v®ue
 = 
	`PmemPŒ
(-1, (
ušt64_t
è0).
	`dump
();

135 
¡d
::
	`©omic_th»ad_ãnû
(¡d::
memÜy_Üd”_»Ëa£
);

136 
	}
}

141 
šlše
 
	$cİy_d©a_256
(* 
d¡
, cÚ¡ * 
¤c
, 
size_t
 
size
) {

142 
	`as£¹
(
size
 % 32 == 0);

143 
size
) {

144 
	`_mm256_¡Üe_si256
 ((
__m256i
*)
d¡
, 
	`_mm256_lßd_si256
((__m256˜cÚ¡*)
¤c
));

145 
¤c
 += 32;

146 
d¡
 += 32;

147 
size
 -= 32;

149 
	}
}

151 
šlše
 
	$cİy_d©a_128
(* 
d¡
, cÚ¡ * 
¤c
, 
size_t
 
size
) {

152 
	`as£¹
(
size
 % 16 == 0);

153 
size
) {

154 
	`_mm_¡Üe_si128
 ((
__m128i
*)
d¡
, 
	`_mm_lßd_si128
((__m128˜cÚ¡*)
¤c
));

155 
¤c
 += 16;

156 
d¡
 += 16;

157 
size
 -= 16;

159 
	}
}

161 
	glockä“_skli¡
::
Node
* 
lockä“_skli¡
::
	$fšd
(cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
) {

162 ià(
´ed
 =ğ
NULL
) {

163 
´ed
 = 
h—d_
;

165 
Node
* 
cu¼
;

166 
h
 = 
´ed
->
	`height
();

167 
ü
;

168 
l
 = 
h
 - 1;† >= 0;†--) {

169 
Œue
) {

171 
cu¼
 = 
´ed
->
Ãxt
[
l
].
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

173 ià(
cu¼
 && (
ü
 = cu¼->
key
.
	`Com·»
(key)) < 0) {

174 
´ed
 = 
cu¼
;

180  (
ü
 =ğ0è? 
cu¼
 : 
NULL
;

181 
	}
}

183 
	glockä“_skli¡
::
Node
* 
lockä“_skli¡
::
	$h—d
() {

184  
h—d_
;

185 
	}
}

187 
	glockä“_skli¡
::
	$fšd_pos™iÚ
(
Node
* 
node
, Node* 
´eds
[], Node* 
succs
[], Node* 
´ed
, cÚ¡ 
mš_h
) {

188 ià(
´ed
 =ğ
NULL
) {

189 
´ed
 = 
h—d_
;

191 
Node
* 
cu¼
;

192 
h
 = 
´ed
->
	`height
();

193 
l
 = 
h
 - 1;† >ğ
mš_h
;†--) {

194 
Œue
) {

195 
cu¼
 = 
´ed
->
Ãxt
[
l
].
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

197 ià(
cu¼
 && cu¼->
key
.
	`Com·»
(
node
->key) < 0) {

198 
´ed
 = 
cu¼
;

203 
´eds
[
l
] = 
´ed
;

204 
succs
[
l
] = 
cu¼
;

206 
	}
}

	@index/simple_hash_table.h

1 #iâdeà
LISTDB_INDEX_SIMPLE_HASH_TABLE_H_


2 
	#LISTDB_INDEX_SIMPLE_HASH_TABLE_H_


	)

4 
	~"li¡db/commÚ.h
"

5 
	~"li¡db/lib/hash.h
"

7 şas 
	cSim¶eHashTabË
 {

8 
	mpublic
:

9 
	sBuck‘
 {

10 
ušt64_t
 
v”siÚ
;

11 
ušt64_t
 
	mkey
;

12 
ušt64_t
 
	mv®ue
;

15 
Sim¶eHashTabË
(
size_t
 
size
);

17 
Buck‘
* 
	$©
(cÚ¡ 
i
è{  &(
buck‘s_
[i]); 
	}
}

19 
Add
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

21 
boŞ
 
G‘
(cÚ¡ 
Key
& 
key
, 
V®ue
* 
v®ue_out
);

23 
	g´iv©e
:

24 cÚ¡ 
size_t
 
size_
;

25 
Buck‘
* 
	gbuck‘s_
;

28 
	gSim¶eHashTabË
::
	$Sim¶eHashTabË
(
size_t
 
size
è: 
	$size_
(
size
) {

29 
buck‘s_
 = 
Ãw
 
Buck‘
[
size
];

30 
	}
}

32 
	gSim¶eHashTabË
::
	$Add
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

34 
ušt32_t
 
idx
 = 
	`ht_murmur3
(
key
);

35 
ušt32_t
 
idx2
 = 
	`ht_sha1
(
key
);

36 auto& 
buckt
 = 
buck‘s_
[
idx
];

37 auto& 
buckt2
 = 
buck‘s_
[
idx2
];

38 
ušt64_t
 
´ev_v”
 = 
¡d
::
	`©omic_lßd
((¡d::
©omic
<ušt64_t>*è&
buckt
.
v”siÚ
);

39 
ušt64_t
 
´ev_v”2
 = 
¡d
::
	`©omic_lßd
((¡d::
©omic
<ušt64_t>*è&
buckt2
.
v”siÚ
);

40 ià(
´ev_v”
 > 
´ev_v”2
) {

41 !
¡d
::
	`©omic_com·»_exchªge_w—k
((¡d::
©omic
<
ušt64_t
>*è&
buckt2
.
v”siÚ
, &
´ev_v”2
, 0UL)) ;

42 #iâdeà
LISTDB_STRING_KEY


43 
buckt2
.
key
 = key;

45 
buckt2
.
key
 = (
ušt64_t
èkey.
	`d©a
();

47 
buckt2
.
v®ue
 = value;

48 
¡d
::
	`©omic_¡Üe
((¡d::
©omic
<
ušt64_t
>*è&
buckt2
.
v”siÚ
, 
´ev_v”2
 + 1);

50 !
¡d
::
	`©omic_com·»_exchªge_w—k
((¡d::
©omic
<
ušt64_t
>*è&
buckt
.
v”siÚ
, &
´ev_v”
, 0UL)) ;

51 #iâdeà
LISTDB_STRING_KEY


52 
buckt
.
key
 = key;

54 
buckt
.
key
 = (
ušt64_t
èkey.
	`d©a
();

56 
buckt
.
v®ue
 = value;

57 
¡d
::
	`©omic_¡Üe
((¡d::
©omic
<
ušt64_t
>*è&
buckt
.
v”siÚ
, 
´ev_v”
 + 1);

59 
	}
}

61 
boŞ
 
	gSim¶eHashTabË
::
	$G‘
(cÚ¡ 
Key
& 
key
, 
V®ue
* 
v®ue_out
) {

62 
ušt64_t
 
k
;

63 
ušt64_t
 
v
;

64 
ušt64_t
 
k2
;

65 
ušt64_t
 
v2
;

66 
ušt32_t
 
idx
 = 
	`ht_murmur3
(
key
);

67 
ušt32_t
 
idx2
 = 
	`ht_sha1
(
key
);

68 auto& 
buckt
 = 
buck‘s_
[
idx
];

69 auto& 
buckt2
 = 
buck‘s_
[
idx2
];

70 
ušt64_t
 
´ev_v”
;

71 
ušt64_t
 
´ev_v”2
;

72 
Œue
) {

74 
´ev_v”
 = 
buckt
.
v”siÚ
;

75 ià(
´ev_v”
 == 0) ;

76 
k
 = 
buckt
.
key
;

77 
v
 = 
buckt
.
v®ue
;

80 ià(
´ev_v”
 !ğ
buckt
.
v”siÚ
) ;

83 ià(
buckt
.
v”siÚ
 > 1) {

84 #iâdeà
LISTDB_STRING_KEY


85 
boŞ
 
key_cmp
 = (
k
 =ğ
key
);

87 
boŞ
 
key_cmp
 = (
	`¡ºcmp
((*è
k
, 
key
.
	`d©a
(), 
kSŒšgKeyL’gth
) == 0);

89 ià(
key_cmp
) {

90 ià(
v®ue_out
) {

91 *
v®ue_out
 = 
v
;

93  
Œue
;

96 
Œue
) {

98 
´ev_v”2
 = 
buckt2
.
v”siÚ
;

99 ià(
´ev_v”2
 == 0) ;

100 
k2
 = 
buckt2
.
key
;

101 
v2
 = 
buckt2
.
v®ue
;

104 ià(
´ev_v”2
 !ğ
buckt2
.
v”siÚ
) ;

107 ià(
buckt2
.
v”siÚ
 > 1) {

108 #iâdeà
LISTDB_STRING_KEY


109 
boŞ
 
key_cmp
 = (
k2
 =ğ
key
);

111 
boŞ
 
key_cmp
 = (
	`¡ºcmp
((*è
k2
, 
key
.
	`d©a
(), 
kSŒšgKeyL’gth
) == 0);

113 ià(
key_cmp
) {

114 ià(
v®ue_out
) {

115 *
v®ue_out
 = 
v2
;

117  
Œue
;

120  
çl£
;

121 
	}
}

	@index/skiplist_single_thread.h

1 #iâdeà
LISTDB_INDEX_SKIPLIST_H_


2 
	#LISTDB_INDEX_SKIPLIST_H_


	)

4 şas 
	cSkLi¡
 {

5 
	mpublic
:

6 
	sNode
 {

7 
Key
 
k
;

8 
ušt64_t
 
	mt
;

9 
ušt64_t
 
	mv
;

10 
ušt64_t
 
	mlog_moff
;

11 
	mheight
;

12 
Node
* 
	mÃxt
[1];

14 
ušt64_t
 
h—d_key
() {  0ULL; }

16 
size_t
 
compu‹_®loc_size
(cÚ¡ 
Key
& 
key
, cÚ¡ 
height
) {

17  
®igÃd_size
(8, (
Node
è+ (
height
-1)*8);

20 
Node
* 
š™_node
(* 
buf
, cÚ¡ 
Key
& 
key
,

21 cÚ¡ 
ušt64_t
 
g
, cÚ¡ ušt64_ˆ
v®ue
,

22 cÚ¡ 
height
, 
boŞ
 
š™_Ãxt_¬r
 = 
Œue
) {

23 
Node
* 
node
 = (Node*è
buf
;

24 
	mnode
->
	mk
 = 
key
;

25 
	mnode
->
	mt
 = 
g
;

26 
	mnode
->
	mv
 = 
v®ue
;

27 
	mnode
->
	mheight
 = 
height
;

28 ià(
	mš™_Ãxt_¬r
) {

29 
mem£t
(
node
->
Ãxt
, 0, 
height
 * 8);

31  
	mnode
;

34 
size_t
 
®loc_size
(ècÚ¡ {  (
	mNode
è+ (
	mheight
-1)*8; }

35 
Key
 
key
(ècÚ¡ {  
	mk
; }

36 
ušt64_t
 
g
(ècÚ¡ {  
	mt
; }

37 
ušt8_t
 
ty³
(ècÚ¡ {  
V®ueTy³
(
t
 & 0xff); }

38 
ušt64_t
 
v®ue
(ècÚ¡ {  
	mv
; }

39 * 
d©a
(ècÚ¡ {  (*è
	mthis
; }

42 
SkLi¡
();

44 
Node
* 
š£¹
(Node* cÚ¡ 
node
, Node* 
´ed
 = 
NULL
);

46 
Node
* 
fšd
(cÚ¡ 
Key
& 
key
, cÚ¡ Node* 
´ed
 = 
NULL
);

47 
Node
* 
h—d
();

49 
	g´iv©e
:

50 
fšd_pos™iÚ
(
Node
* 
node
, Node* 
´eds
[], Node* 
succs
[], Node* 
´ed
 = 
NULL
, cÚ¡ 
mš_h
 = 0);

52 
	gpublic
:

53 
Node
* 
h—d_
;

56 
	gSkLi¡
::
	$SkLi¡
() {

57 autØ
h—d_key
 = 
Node
::
	`h—d_key
();

58 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
	`compu‹_®loc_size
(
h—d_key
, 
kMaxHeight
);

59 * 
buf
 = 
	`®igÃd_®loc
(8, 
®loc_size
);

61 
h—d_
 = 
Node
::
	`š™_node
((*è
buf
, 
h—d_key
, 0xffffffffffffffff, 0, 
kMaxHeight
);

62 
h—d_
->
log_moff
 = 0x000000000000ffff;

63 
	}
}

65 
	gSkLi¡
::
Node
* 
SkLi¡
::
	$š£¹
(
Node
* cÚ¡ 
node
, Node* 
´ed
) {

66 ià(
´ed
 =ğ
NULL
) {

67 
´ed
 = 
h—d_
;

69 
Node
* 
´eds
[
kMaxHeight
];

70 
Node
* 
succs
[
kMaxHeight
];

71 
	`fšd_pos™iÚ
(
node
, 
´eds
, 
succs
, 
´ed
);

72 
l
 = 0;† < 
node
->
height
;†++) {

73 
node
->
Ãxt
[
l
] = 
succs
[l];

75 
l
 = 0;† < 
node
->
height
;†++) {

76 
´eds
[
l
]->
Ãxt
[l] = 
node
;

78  
´eds
[
kMaxHeight
 - 1];

79 
	}
}

81 
	gSkLi¡
::
Node
* 
SkLi¡
::
	$fšd
(cÚ¡ 
Key
& 
key
, cÚ¡ 
Node
* 
´ed
) {

82 ià(
´ed
 =ğ
NULL
) {

83 
´ed
 = 
h—d_
;

85 
Node
* 
cu¼
;

86 
h
 = 
´ed
->
height
;

87 
ü
;

88 
l
 = 
h
 - 1;† >= 0;†--) {

89 
Œue
) {

90 
cu¼
 = 
´ed
->
Ãxt
[
l
];

91 ià((
ü
 = 
cu¼
->
k
.
	`Com·»
(
key
)) < 0) {

92 
´ed
 = 
cu¼
;

98  (
ü
 =ğ0è? 
cu¼
 : 
NULL
;

99 
	}
}

101 
	gSkLi¡
::
Node
* 
SkLi¡
::
	$h—d
() {

102  
h—d_
;

103 
	}
}

105 
	gSkLi¡
::
	$fšd_pos™iÚ
(
Node
* 
node
, Node* 
´eds
[], Node* 
succs
[], Node* 
´ed
, cÚ¡ 
mš_h
) {

106 ià(
´ed
 =ğ
NULL
) {

107 
´ed
 = 
h—d_
;

109 
Node
* 
cu¼
;

110 
h
 = 
´ed
->
height
;

111 
l
 = 
h
 - 1;† >ğ
mš_h
;†--) {

112 
Œue
) {

113 
cu¼
 = 
´ed
->
Ãxt
[
l
];

114 ià(
cu¼
 && cu¼->
k
.
	`Com·»
(
node
->k) < 0) {

115 
´ed
 = 
cu¼
;

120 
´eds
[
l
] = 
´ed
;

121 
succs
[
l
] = 
cu¼
;

123 
	}
}

	@lib/arena.h

1 #iâdeà
ARENA_H_


2 
	#ARENA_H_


	)

4 
	~<©omic
>

5 
	~<mu‹x
>

7 şas 
	cA»Ç
 {

8 
	sBlock
 {

9 
	m¡d
::
©omic
<
size_t
> 
p
;

10 
	m¡d
::
©omic
<
Block
*> 
Ãxt
;

11 
	md©a
[1];

12 
Block
(è: 
p
(0), 
Ãxt
(
NULL
) { }

14 
	gpublic
:

15 
	$A»Ç
(cÚ¡ 
size_t
 
block_size
è: 
	`h—d_
(
NULL
), 
	`cu¼_
(NULL), 
	$block_size_
(
block_size
è{ 
	}
}

16 ~
	$A»Ç
() {

17 
Block
* 
b
 = 
h—d_
;

18 
b
) {

19 autØ
nb
 = 
b
->
Ãxt
.
	`lßd
();

20 
d–‘e
 
b
;

21 
b
 = 
nb
;

23 
	}
}

25 * 
	$®loÿ‹
(cÚ¡ 
size_t
 
size
) {

26 * 
»t
;

27 
Block
* 
nb
 = 
NULL
;

28 
size_t
 
befÜe
;

30 
mod
 = 
size
 & 7;

31 
¦İ
 = (
mod
 == 0) ? 0 : 8 - mod;

32 
size_t
 
asize
 = 
size
 + 
¦İ
;

34 autØ
block
 = 
cu¼_
.
	`lßd
();

35 
Œue
) {

36 ià(
block
) {

37 ià((
befÜe
 = 
block
->
p
.
	`ãtch_add
(
asize
)è<ğ
block_size_
 -‡size) {

40 
block
 = block->
Ãxt
.
	`lßd
();

44 
nb
 = 
	`Ãw_block
();

45 
nb
->
p
.
	`¡Üe
(
asize
);

46 
nb
->
Ãxt
.
	`¡Üe
(
NULL
);

47 
block
 = 
nb
;

48 
befÜe
 = 0;

53 ià(
nb
) {

54 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`gu¬d
(
mu_
);

55 ià(!
h—d_
) {

56 
h—d_
 = 
nb
;

57 
cu¼_
.
	`¡Üe
(
nb
);

59 
Block
* 
´ed
 = 
h—d_
;

60 
Œue
) {

61 
Block
* 
²
 = 
´ed
->
Ãxt
.
	`lßd
();

62 ià(
²
) {

63 
´ed
 = 
²
;

68 
´ed
->
Ãxt
.
	`¡Üe
(
nb
);

70 
Block
* 
cu¼
 = 
cu¼_
.
	`lßd
();

71 
cu¼
->
p
 >ğ
block_size_
) {

72 
cu¼_
.
	`¡Üe
(
cu¼
->
Ãxt
);

73 
cu¼
 = 
cu¼_
.
	`lßd
();

77 
»t
 = 
block
->
d©a
 + 
befÜe
;

78  
»t
;

79 
	}
}

81 
	g´iv©e
:

82 
Block
* 
	$Ãw_block
() {

83 * 
buf
 = 
	`®igÃd_®loc
(8, (
Block
è+ (
block_size_
 - 1));

84  (
Block
*è
buf
;

85 
	}
}

87 
	g´iv©e
:

88 
Block
* 
h—d_
;

89 
	g¡d
::
©omic
<
Block
*> 
cu¼_
;

90 cÚ¡ 
size_t
 
	gblock_size_
;

91 
	g¡d
::
mu‹x
 
mu_
;

	@lib/hash.h

1 #iâdeà
LISTDB_LIB_HASH_H_


2 
	#LISTDB_LIB_HASH_H_


	)

4 
	~"li¡db/commÚ.h
"

5 
	~"li¡db/lib/murmur3.h
"

6 
	~"li¡db/lib/sha1.h
"

10 
šlše
 
ušt32_t
 
	$ht_murmur3
(cÚ¡ 
Key
& 
key
) {

11 
ušt32_t
 
h
;

12 cÚ¡ 
ušt32_t
 
£ed
 = 0xcafeb0ba;

13 #iâdeà
LISTDB_STRING_KEY


14 
	`MurmurHash3_x86_32
(&
key
, (
ušt64_t
), 
£ed
, (*è&
h
);

16 
	`MurmurHash3_x86_32
(
key
.
	`d©a
(), 
kSŒšgKeyL’gth
, 
£ed
, (*è&
h
);

19  
h
 % 
kHTSize
;

20 
	}
}

22 
šlše
 
ušt32_t
 
	$ht_sha1
(cÚ¡ 
Key
& 
key
) {

23 
»suÉ
[21];

24 #iâdeà
LISTDB_STRING_KEY


25 
	`SHA1
(
»suÉ
, (*è&
key
, 8);

27 
	`SHA1
(
»suÉ
, 
key
.
	`d©a
(), 
kSŒšgKeyL’gth
);

30  *
»š‹½»t_ÿ¡
<
ušt32_t
*>(
»suÉ
è% 
kHTSize
;

31 
	}
}

	@lib/memory.h

1 #iâdeà
LISTDB_LIB_MEMORY_H_


2 
	#LISTDB_LIB_MEMORY_H_


	)

4 
šlše
 
size_t
 
	$®igÃd_size
(cÚ¡ 
size_t
 
®ign
, cÚ¡ size_ˆ
size
) {

5 
mod
 = 
size
 % 
®ign
;

6  (
mod
 =ğ0è? 
size
 : siz+ (
®ign
 - mod);

7 
	}
}

9 
šlše
 
	$şwb
(cÚ¡ *
addr
, cÚ¡ 
size_t
 
size
) {

10 * 
a
 = (*è
addr
;

11 
s
 = 
size
;

12 
s
 > 0) {

13 
asm
 volatile(".byte 0x66; xsaveopt %0" : "+m" \

14 (*(vŞ©*)(
a
)));

15 
a
 += 64;

16 
s
 -= 64;

18 
	}
}

	@lib/murmur3.cc

10 
	~"li¡db/lib/murmur3.h
"

15 #ifdeà
__GNUC__


16 
	#FORCE_INLINE
 
	`__©Œibu‹__
((
®ways_šlše
)è
šlše


	)

18 
	#FORCE_INLINE
 
šlše


	)

21 
FORCE_INLINE
 
ušt32_t
 
	$rÙl32
 ( 
ušt32_t
 
x
, 
št8_t
 
r
 )

23  (
x
 << 
r
) | (x >> (32 -„));

24 
	}
}

26 
FORCE_INLINE
 
ušt64_t
 
	$rÙl64
 ( 
ušt64_t
 
x
, 
št8_t
 
r
 )

28  (
x
 << 
r
) | (x >> (64 -„));

29 
	}
}

31 
	#ROTL32
(
x
,
y
è
	`rÙl32
(x,y)

	)

32 
	#ROTL64
(
x
,
y
è
	`rÙl64
(x,y)

	)

34 
	#BIG_CONSTANT
(
x
è(x##
LLU
)

	)

40 
	#g‘block
(
p
, 
i
èÕ[i])

	)

45 
FORCE_INLINE
 
ušt32_t
 
	$fmix32
 ( 
ušt32_t
 
h
 )

47 
h
 ^= h >> 16;

48 
h
 *= 0x85ebca6b;

49 
h
 ^= h >> 13;

50 
h
 *= 0xc2b2ae35;

51 
h
 ^= h >> 16;

53  
h
;

54 
	}
}

58 
FORCE_INLINE
 
ušt64_t
 
	$fmix64
 ( 
ušt64_t
 
k
 )

60 
k
 ^= k >> 33;

61 
k
 *ğ
	`BIG_CONSTANT
(0xff51afd7ed558ccd);

62 
k
 ^= k >> 33;

63 
k
 *ğ
	`BIG_CONSTANT
(0xc4ceb9fe1a85ec53);

64 
k
 ^= k >> 33;

66  
k
;

67 
	}
}

71 
	$MurmurHash3_x86_32
 ( cÚ¡ * 
key
, 
Ën
,

72 
ušt32_t
 
£ed
, * 
out
 )

74 cÚ¡ 
ušt8_t
 * 
d©a
 = (cÚ¡ ušt8_t*)
key
;

75 cÚ¡ 
nblocks
 = 
Ën
 / 4;

76 
i
;

78 
ušt32_t
 
h1
 = 
£ed
;

80 
ušt32_t
 
c1
 = 0xcc9e2d51;

81 
ušt32_t
 
c2
 = 0x1b873593;

86 cÚ¡ 
ušt32_t
 * 
blocks
 = (cÚ¡ ušt32_ˆ*)(
d©a
 + 
nblocks
*4);

88 
i
 = -
nblocks
; i; i++)

90 
ušt32_t
 
k1
 = 
	`g‘block
(
blocks
,
i
);

92 
k1
 *ğ
c1
;

93 
k1
 = 
	`ROTL32
(k1,15);

94 
k1
 *ğ
c2
;

96 
h1
 ^ğ
k1
;

97 
h1
 = 
	`ROTL32
(h1,13);

98 
h1
 = h1*5+0xe6546b64;

104 cÚ¡ 
ušt8_t
 * 

 = (cÚ¡ ušt8_t*)(
d©a
 + 
nblocks
*4);

106 
ušt32_t
 
k1
 = 0;

108 
Ën
 & 3)

110 3: 
k1
 ^ğ

[2] << 16;

111 2: 
k1
 ^ğ

[1] << 8;

112 1: 
k1
 ^ğ

[0];

113 
k1
 *ğ
c1
; k1 = 
	`ROTL32
(k1,15); k1 *ğ
c2
; 
h1
 ^= k1;

119 
h1
 ^ğ
Ën
;

121 
h1
 = 
	`fmix32
(h1);

123 *(
ušt32_t
*)
out
 = 
h1
;

124 
	}
}

128 
	$MurmurHash3_x86_128
 ( cÚ¡ * 
key
, cÚ¡ 
Ën
,

129 
ušt32_t
 
£ed
, * 
out
 )

131 cÚ¡ 
ušt8_t
 * 
d©a
 = (cÚ¡ ušt8_t*)
key
;

132 cÚ¡ 
nblocks
 = 
Ën
 / 16;

133 
i
;

135 
ušt32_t
 
h1
 = 
£ed
;

136 
ušt32_t
 
h2
 = 
£ed
;

137 
ušt32_t
 
h3
 = 
£ed
;

138 
ušt32_t
 
h4
 = 
£ed
;

140 
ušt32_t
 
c1
 = 0x239b961b;

141 
ušt32_t
 
c2
 = 0xab0e9789;

142 
ušt32_t
 
c3
 = 0x38b34ae5;

143 
ušt32_t
 
c4
 = 0xa1e38b93;

148 cÚ¡ 
ušt32_t
 * 
blocks
 = (cÚ¡ ušt32_ˆ*)(
d©a
 + 
nblocks
*16);

150 
i
 = -
nblocks
; i; i++)

152 
ušt32_t
 
k1
 = 
	`g‘block
(
blocks
,
i
*4+0);

153 
ušt32_t
 
k2
 = 
	`g‘block
(
blocks
,
i
*4+1);

154 
ušt32_t
 
k3
 = 
	`g‘block
(
blocks
,
i
*4+2);

155 
ušt32_t
 
k4
 = 
	`g‘block
(
blocks
,
i
*4+3);

157 
k1
 *ğ
c1
; k1 = 
	`ROTL32
(k1,15); k1 *ğ
c2
; 
h1
 ^= k1;

159 
h1
 = 
	`ROTL32
(h1,19); h1 +ğ
h2
; h1 = h1*5+0x561ccd1b;

161 
k2
 *ğ
c2
; k2 = 
	`ROTL32
(k2,16); k2 *ğ
c3
; 
h2
 ^= k2;

163 
h2
 = 
	`ROTL32
(h2,17); h2 +ğ
h3
; h2 = h2*5+0x0bcaa747;

165 
k3
 *ğ
c3
; k3 = 
	`ROTL32
(k3,17); k3 *ğ
c4
; 
h3
 ^= k3;

167 
h3
 = 
	`ROTL32
(h3,15); h3 +ğ
h4
; h3 = h3*5+0x96cd1c35;

169 
k4
 *ğ
c4
; k4 = 
	`ROTL32
(k4,18); k4 *ğ
c1
; 
h4
 ^= k4;

171 
h4
 = 
	`ROTL32
(h4,13); h4 +ğ
h1
; h4 = h4*5+0x32ac3b17;

177 cÚ¡ 
ušt8_t
 * 

 = (cÚ¡ ušt8_t*)(
d©a
 + 
nblocks
*16);

179 
ušt32_t
 
k1
 = 0;

180 
ušt32_t
 
k2
 = 0;

181 
ušt32_t
 
k3
 = 0;

182 
ušt32_t
 
k4
 = 0;

184 
Ën
 & 15)

186 15: 
k4
 ^ğ

[14] << 16;

187 14: 
k4
 ^ğ

[13] << 8;

188 13: 
k4
 ^ğ

[12] << 0;

189 
k4
 *ğ
c4
; k4 = 
	`ROTL32
(k4,18); k4 *ğ
c1
; 
h4
 ^= k4;

191 12: 
k3
 ^ğ

[11] << 24;

192 11: 
k3
 ^ğ

[10] << 16;

193 10: 
k3
 ^ğ

[ 9] << 8;

194 9: 
k3
 ^ğ

[ 8] << 0;

195 
k3
 *ğ
c3
; k3 = 
	`ROTL32
(k3,17); k3 *ğ
c4
; 
h3
 ^= k3;

197 8: 
k2
 ^ğ

[ 7] << 24;

198 7: 
k2
 ^ğ

[ 6] << 16;

199 6: 
k2
 ^ğ

[ 5] << 8;

200 5: 
k2
 ^ğ

[ 4] << 0;

201 
k2
 *ğ
c2
; k2 = 
	`ROTL32
(k2,16); k2 *ğ
c3
; 
h2
 ^= k2;

203 4: 
k1
 ^ğ

[ 3] << 24;

204 3: 
k1
 ^ğ

[ 2] << 16;

205 2: 
k1
 ^ğ

[ 1] << 8;

206 1: 
k1
 ^ğ

[ 0] << 0;

207 
k1
 *ğ
c1
; k1 = 
	`ROTL32
(k1,15); k1 *ğ
c2
; 
h1
 ^= k1;

213 
h1
 ^ğ
Ën
; 
h2
 ^ğËn; 
h3
 ^ğËn; 
h4
 ^=†en;

215 
h1
 +ğ
h2
; h1 +ğ
h3
; h1 +ğ
h4
;

216 
h2
 +ğ
h1
; 
h3
 +ğh1; 
h4
 += h1;

218 
h1
 = 
	`fmix32
(h1);

219 
h2
 = 
	`fmix32
(h2);

220 
h3
 = 
	`fmix32
(h3);

221 
h4
 = 
	`fmix32
(h4);

223 
h1
 +ğ
h2
; h1 +ğ
h3
; h1 +ğ
h4
;

224 
h2
 +ğ
h1
; 
h3
 +ğh1; 
h4
 += h1;

226 ((
ušt32_t
*)
out
)[0] = 
h1
;

227 ((
ušt32_t
*)
out
)[1] = 
h2
;

228 ((
ušt32_t
*)
out
)[2] = 
h3
;

229 ((
ušt32_t
*)
out
)[3] = 
h4
;

230 
	}
}

234 
	$MurmurHash3_x64_128
 ( cÚ¡ * 
key
, cÚ¡ 
Ën
,

235 cÚ¡ 
ušt32_t
 
£ed
, * 
out
 )

237 cÚ¡ 
ušt8_t
 * 
d©a
 = (cÚ¡ ušt8_t*)
key
;

238 cÚ¡ 
nblocks
 = 
Ën
 / 16;

239 
i
;

241 
ušt64_t
 
h1
 = 
£ed
;

242 
ušt64_t
 
h2
 = 
£ed
;

244 
ušt64_t
 
c1
 = 
	`BIG_CONSTANT
(0x87c37b91114253d5);

245 
ušt64_t
 
c2
 = 
	`BIG_CONSTANT
(0x4cf5ad432745937f);

250 cÚ¡ 
ušt64_t
 * 
blocks
 = (cÚ¡ ušt64_ˆ*)(
d©a
);

252 
i
 = 0; i < 
nblocks
; i++)

254 
ušt64_t
 
k1
 = 
	`g‘block
(
blocks
,
i
*2+0);

255 
ušt64_t
 
k2
 = 
	`g‘block
(
blocks
,
i
*2+1);

257 
k1
 *ğ
c1
; k1 = 
	`ROTL64
(k1,31); k1 *ğ
c2
; 
h1
 ^= k1;

259 
h1
 = 
	`ROTL64
(h1,27); h1 +ğ
h2
; h1 = h1*5+0x52dce729;

261 
k2
 *ğ
c2
; k2 = 
	`ROTL64
(k2,33); k2 *ğ
c1
; 
h2
 ^= k2;

263 
h2
 = 
	`ROTL64
(h2,31); h2 +ğ
h1
; h2 = h2*5+0x38495ab5;

269 cÚ¡ 
ušt8_t
 * 

 = (cÚ¡ ušt8_t*)(
d©a
 + 
nblocks
*16);

271 
ušt64_t
 
k1
 = 0;

272 
ušt64_t
 
k2
 = 0;

274 
Ën
 & 15)

276 15: 
k2
 ^ğ(
ušt64_t
)(

[14]) << 48;

277 14: 
k2
 ^ğ(
ušt64_t
)(

[13]) << 40;

278 13: 
k2
 ^ğ(
ušt64_t
)(

[12]) << 32;

279 12: 
k2
 ^ğ(
ušt64_t
)(

[11]) << 24;

280 11: 
k2
 ^ğ(
ušt64_t
)(

[10]) << 16;

281 10: 
k2
 ^ğ(
ušt64_t
)(

[ 9]) << 8;

282 9: 
k2
 ^ğ(
ušt64_t
)(

[ 8]) << 0;

283 
k2
 *ğ
c2
; k2 = 
	`ROTL64
(k2,33); k2 *ğ
c1
; 
h2
 ^= k2;

285 8: 
k1
 ^ğ(
ušt64_t
)(

[ 7]) << 56;

286 7: 
k1
 ^ğ(
ušt64_t
)(

[ 6]) << 48;

287 6: 
k1
 ^ğ(
ušt64_t
)(

[ 5]) << 40;

288 5: 
k1
 ^ğ(
ušt64_t
)(

[ 4]) << 32;

289 4: 
k1
 ^ğ(
ušt64_t
)(

[ 3]) << 24;

290 3: 
k1
 ^ğ(
ušt64_t
)(

[ 2]) << 16;

291 2: 
k1
 ^ğ(
ušt64_t
)(

[ 1]) << 8;

292 1: 
k1
 ^ğ(
ušt64_t
)(

[ 0]) << 0;

293 
k1
 *ğ
c1
; k1 = 
	`ROTL64
(k1,31); k1 *ğ
c2
; 
h1
 ^= k1;

299 
h1
 ^ğ
Ën
; 
h2
 ^=†en;

301 
h1
 +ğ
h2
;

302 
h2
 +ğ
h1
;

304 
h1
 = 
	`fmix64
(h1);

305 
h2
 = 
	`fmix64
(h2);

307 
h1
 +ğ
h2
;

308 
h2
 +ğ
h1
;

310 ((
ušt64_t
*)
out
)[0] = 
h1
;

311 ((
ušt64_t
*)
out
)[1] = 
h2
;

312 
	}
}

	@lib/murmur3.h

6 #iâdeà
_MURMURHASH3_H_


7 
	#_MURMURHASH3_H_


	)

9 
	~<¡dšt.h
>

11 #ifdeà
__ılu¥lus


17 
MurmurHash3_x86_32
 (cÚ¡ *
key
, 
Ën
, 
ušt32_t
 
£ed
, *
out
);

19 
MurmurHash3_x86_128
(cÚ¡ *
key
, 
Ën
, 
ušt32_t
 
£ed
, *
out
);

21 
MurmurHash3_x64_128
(cÚ¡ *
key
, 
Ën
, 
ušt32_t
 
£ed
, *
out
);

25 #ifdeà
__ılu¥lus


	@lib/numa.h

1 #iâdeà
LISTDB_LIB_NUMA_H_


2 
	#LISTDB_LIB_NUMA_H_


	)

4 
	~<ÿs£¹
>

5 
	~<m­
>

6 
	~<¡ršg
>

7 
	~<veùÜ
>

9 
	~<numa.h
>

11 şas 
	cNuma
 {

12 
	mpublic
:

13 
In™
();

14 
	$num_ıus
(è{  
num_ıus_
; }

15 
šlše
 
	`CpuSequ’ûRR
(cÚ¡ 
id
);

17 
´iv©e
:

18 
šlše
 
num_ıus_
;

19 
šlše
 
num_sock‘s_
;

20 
šlše
 
num_ıus_³r_sock‘_
;

21 
šlše
 
¡d
::
m­
<, std::
veùÜ
<>> 
bË_
;

22 
šlše
 
boŞ
 
is_š™Ÿlized_
 = 
çl£
;

23 
	}
};

25 
	gNuma
::
	$In™
() {

26 
bË_
.
	`ş—r
();

27 
num_ıus_
 = 
	`numa_num_cÚfigu»d_ıus
();

28 
num_sock‘s_
 = 
	`numa_num_cÚfigu»d_nodes
();

29 
i
 = 0; i < 
num_ıus_
; i++) {

30 
sock‘
 = 
	`numa_node_of_ıu
(
i
);

31 
bË_
[
sock‘
].
	`push_back
(
i
);

33 
num_ıus_³r_sock‘_
 = 
bË_
[0].
	`size
();

34 
is_š™Ÿlized_
 = 
Œue
;

35 
	}
}

37 
	gNuma
::
	$CpuSequ’ûRR
(cÚ¡ 
num
) {

38 
	`as£¹
(
is_š™Ÿlized_
 =ğ
Œue
);

39 cÚ¡ 
sock‘
 = 
num
 % 
num_sock‘s_
;

40 cÚ¡ 
£q_š_sock‘
 = 
num
 / 
num_sock‘s_
;

41  
bË_
[
sock‘
][
£q_š_sock‘
];

42 
	}
}

	@lib/numa_test.cc

1 
	~<io¡»am
>

3 
	~"li¡db/lib/numa.h
"

5 
	$maš
() {

6 
Numa
::
	`In™
();

7 
i
 = 0; i < 
Numa
::
	`num_ıus
(); i++) {

8 
¡d
::
cout
 << "num=" << 
i
 << ", cpu=" << 
Numa
::
	`CpuSequ’ûRR
(iè<< std::
’dl
;

11 
	}
}

	@lib/sha1.cc

18 
	#SHA1HANDSOFF


	)

20 
	~<¡dio.h
>

21 
	~<¡ršg.h
>

24 
	~<¡dšt.h
>

26 
	~"li¡db/lib/sha1.h
"

29 
	#rŞ
(
v®ue
, 
b™s
è(((v®ueè<< (b™s)è| ((v®ueè>> (32 - (b™s))))

	)

33 #ià
BYTE_ORDER
 =ğ
LITTLE_ENDIAN


34 
	#blk0
(
i
è(
block
->
l
[i] = (
	`rŞ
(block->l[i],24)&0xFF00FF00) \

35 |(
	`rŞ
(
block
->
l
[
i
],8)&0x00FF00FF))

	)

36 #–ià
BYTE_ORDER
 =ğ
BIG_ENDIAN


37 
	#blk0
(
i
è
block
->
l
[i]

	)

41 
	#blk
(
i
è(
block
->
l
[i&15] = 
	`rŞ
(block->l[(i+13)&15]^block->l[(i+8)&15] \

42 ^
block
->
l
[(
i
+2)&15]^block->l[i&15],1))

	)

45 
	#R0
(
v
,
w
,
x
,
y
,
z
,
i
èz+=((w&(x^y))^y)+
	`blk0
(i)+0x5A827999+
	`rŞ
(v,5);wôŞ(w,30);

	)

46 
	#R1
(
v
,
w
,
x
,
y
,
z
,
i
èz+=((w&(x^y))^y)+
	`blk
(i)+0x5A827999+
	`rŞ
(v,5);wôŞ(w,30);

	)

47 
	#R2
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(w^x^y)+
	`blk
(i)+0x6ED9EBA1+
	`rŞ
(v,5);wôŞ(w,30);

	)

48 
	#R3
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(((w|x)&y)|(w&x))+
	`blk
(i)+0x8F1BBCDC+
	`rŞ
(v,5);wôŞ(w,30);

	)

49 
	#R4
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(w^x^y)+
	`blk
(i)+0xCA62C1D6+
	`rŞ
(v,5);wôŞ(w,30);

	)

54 
	$SHA1T¿nsfÜm
(

55 
ušt32_t
 
¡©e
[5],

56 cÚ¡ 
bufãr
[64]

59 
ušt32_t
 
a
, 
b
, 
c
, 
d
, 
e
;

63 
c
[64];

64 
ušt32_t
 
l
[16];

65 } 
	tCHAR64LONG16
;

67 #ifdeà
SHA1HANDSOFF


68 
CHAR64LONG16
 
block
[1];

70 
	`memıy
(
block
, 
bufãr
, 64);

77 
CHAR64LONG16
 *
block
 = (cÚ¡ CHAR64LONG16 *è
bufãr
;

80 
a
 = 
¡©e
[0];

81 
b
 = 
¡©e
[1];

82 
c
 = 
¡©e
[2];

83 
d
 = 
¡©e
[3];

84 
e
 = 
¡©e
[4];

86 
	`R0
(
a
, 
b
, 
c
, 
d
, 
e
, 0);

87 
	`R0
(
e
, 
a
, 
b
, 
c
, 
d
, 1);

88 
	`R0
(
d
, 
e
, 
a
, 
b
, 
c
, 2);

89 
	`R0
(
c
, 
d
, 
e
, 
a
, 
b
, 3);

90 
	`R0
(
b
, 
c
, 
d
, 
e
, 
a
, 4);

91 
	`R0
(
a
, 
b
, 
c
, 
d
, 
e
, 5);

92 
	`R0
(
e
, 
a
, 
b
, 
c
, 
d
, 6);

93 
	`R0
(
d
, 
e
, 
a
, 
b
, 
c
, 7);

94 
	`R0
(
c
, 
d
, 
e
, 
a
, 
b
, 8);

95 
	`R0
(
b
, 
c
, 
d
, 
e
, 
a
, 9);

96 
	`R0
(
a
, 
b
, 
c
, 
d
, 
e
, 10);

97 
	`R0
(
e
, 
a
, 
b
, 
c
, 
d
, 11);

98 
	`R0
(
d
, 
e
, 
a
, 
b
, 
c
, 12);

99 
	`R0
(
c
, 
d
, 
e
, 
a
, 
b
, 13);

100 
	`R0
(
b
, 
c
, 
d
, 
e
, 
a
, 14);

101 
	`R0
(
a
, 
b
, 
c
, 
d
, 
e
, 15);

102 
	`R1
(
e
, 
a
, 
b
, 
c
, 
d
, 16);

103 
	`R1
(
d
, 
e
, 
a
, 
b
, 
c
, 17);

104 
	`R1
(
c
, 
d
, 
e
, 
a
, 
b
, 18);

105 
	`R1
(
b
, 
c
, 
d
, 
e
, 
a
, 19);

106 
	`R2
(
a
, 
b
, 
c
, 
d
, 
e
, 20);

107 
	`R2
(
e
, 
a
, 
b
, 
c
, 
d
, 21);

108 
	`R2
(
d
, 
e
, 
a
, 
b
, 
c
, 22);

109 
	`R2
(
c
, 
d
, 
e
, 
a
, 
b
, 23);

110 
	`R2
(
b
, 
c
, 
d
, 
e
, 
a
, 24);

111 
	`R2
(
a
, 
b
, 
c
, 
d
, 
e
, 25);

112 
	`R2
(
e
, 
a
, 
b
, 
c
, 
d
, 26);

113 
	`R2
(
d
, 
e
, 
a
, 
b
, 
c
, 27);

114 
	`R2
(
c
, 
d
, 
e
, 
a
, 
b
, 28);

115 
	`R2
(
b
, 
c
, 
d
, 
e
, 
a
, 29);

116 
	`R2
(
a
, 
b
, 
c
, 
d
, 
e
, 30);

117 
	`R2
(
e
, 
a
, 
b
, 
c
, 
d
, 31);

118 
	`R2
(
d
, 
e
, 
a
, 
b
, 
c
, 32);

119 
	`R2
(
c
, 
d
, 
e
, 
a
, 
b
, 33);

120 
	`R2
(
b
, 
c
, 
d
, 
e
, 
a
, 34);

121 
	`R2
(
a
, 
b
, 
c
, 
d
, 
e
, 35);

122 
	`R2
(
e
, 
a
, 
b
, 
c
, 
d
, 36);

123 
	`R2
(
d
, 
e
, 
a
, 
b
, 
c
, 37);

124 
	`R2
(
c
, 
d
, 
e
, 
a
, 
b
, 38);

125 
	`R2
(
b
, 
c
, 
d
, 
e
, 
a
, 39);

126 
	`R3
(
a
, 
b
, 
c
, 
d
, 
e
, 40);

127 
	`R3
(
e
, 
a
, 
b
, 
c
, 
d
, 41);

128 
	`R3
(
d
, 
e
, 
a
, 
b
, 
c
, 42);

129 
	`R3
(
c
, 
d
, 
e
, 
a
, 
b
, 43);

130 
	`R3
(
b
, 
c
, 
d
, 
e
, 
a
, 44);

131 
	`R3
(
a
, 
b
, 
c
, 
d
, 
e
, 45);

132 
	`R3
(
e
, 
a
, 
b
, 
c
, 
d
, 46);

133 
	`R3
(
d
, 
e
, 
a
, 
b
, 
c
, 47);

134 
	`R3
(
c
, 
d
, 
e
, 
a
, 
b
, 48);

135 
	`R3
(
b
, 
c
, 
d
, 
e
, 
a
, 49);

136 
	`R3
(
a
, 
b
, 
c
, 
d
, 
e
, 50);

137 
	`R3
(
e
, 
a
, 
b
, 
c
, 
d
, 51);

138 
	`R3
(
d
, 
e
, 
a
, 
b
, 
c
, 52);

139 
	`R3
(
c
, 
d
, 
e
, 
a
, 
b
, 53);

140 
	`R3
(
b
, 
c
, 
d
, 
e
, 
a
, 54);

141 
	`R3
(
a
, 
b
, 
c
, 
d
, 
e
, 55);

142 
	`R3
(
e
, 
a
, 
b
, 
c
, 
d
, 56);

143 
	`R3
(
d
, 
e
, 
a
, 
b
, 
c
, 57);

144 
	`R3
(
c
, 
d
, 
e
, 
a
, 
b
, 58);

145 
	`R3
(
b
, 
c
, 
d
, 
e
, 
a
, 59);

146 
	`R4
(
a
, 
b
, 
c
, 
d
, 
e
, 60);

147 
	`R4
(
e
, 
a
, 
b
, 
c
, 
d
, 61);

148 
	`R4
(
d
, 
e
, 
a
, 
b
, 
c
, 62);

149 
	`R4
(
c
, 
d
, 
e
, 
a
, 
b
, 63);

150 
	`R4
(
b
, 
c
, 
d
, 
e
, 
a
, 64);

151 
	`R4
(
a
, 
b
, 
c
, 
d
, 
e
, 65);

152 
	`R4
(
e
, 
a
, 
b
, 
c
, 
d
, 66);

153 
	`R4
(
d
, 
e
, 
a
, 
b
, 
c
, 67);

154 
	`R4
(
c
, 
d
, 
e
, 
a
, 
b
, 68);

155 
	`R4
(
b
, 
c
, 
d
, 
e
, 
a
, 69);

156 
	`R4
(
a
, 
b
, 
c
, 
d
, 
e
, 70);

157 
	`R4
(
e
, 
a
, 
b
, 
c
, 
d
, 71);

158 
	`R4
(
d
, 
e
, 
a
, 
b
, 
c
, 72);

159 
	`R4
(
c
, 
d
, 
e
, 
a
, 
b
, 73);

160 
	`R4
(
b
, 
c
, 
d
, 
e
, 
a
, 74);

161 
	`R4
(
a
, 
b
, 
c
, 
d
, 
e
, 75);

162 
	`R4
(
e
, 
a
, 
b
, 
c
, 
d
, 76);

163 
	`R4
(
d
, 
e
, 
a
, 
b
, 
c
, 77);

164 
	`R4
(
c
, 
d
, 
e
, 
a
, 
b
, 78);

165 
	`R4
(
b
, 
c
, 
d
, 
e
, 
a
, 79);

167 
¡©e
[0] +ğ
a
;

168 
¡©e
[1] +ğ
b
;

169 
¡©e
[2] +ğ
c
;

170 
¡©e
[3] +ğ
d
;

171 
¡©e
[4] +ğ
e
;

173 
a
 = 
b
 = 
c
 = 
d
 = 
e
 = 0;

174 #ifdeà
SHA1HANDSOFF


175 
	`mem£t
(
block
, '\0', (block));

177 
	}
}

182 
	$SHA1In™
(

183 
SHA1_CTX
 * 
cÚ‹xt


187 
cÚ‹xt
->
¡©e
[0] = 0x67452301;

188 
cÚ‹xt
->
¡©e
[1] = 0xEFCDAB89;

189 
cÚ‹xt
->
¡©e
[2] = 0x98BADCFE;

190 
cÚ‹xt
->
¡©e
[3] = 0x10325476;

191 
cÚ‹xt
->
¡©e
[4] = 0xC3D2E1F0;

192 
cÚ‹xt
->
couÁ
[0] = context->count[1] = 0;

193 
	}
}

198 
	$SHA1Upd©e
(

199 
SHA1_CTX
 * 
cÚ‹xt
,

200 cÚ¡ *
d©a
,

201 
ušt32_t
 
Ën


204 
ušt32_t
 
i
;

206 
ušt32_t
 
j
;

208 
j
 = 
cÚ‹xt
->
couÁ
[0];

209 ià((
cÚ‹xt
->
couÁ
[0] +ğ
Ën
 << 3è< 
j
)

210 
cÚ‹xt
->
couÁ
[1]++;

211 
cÚ‹xt
->
couÁ
[1] +ğ(
Ën
 >> 29);

212 
j
 = (j >> 3) & 63;

213 ià((
j
 + 
Ën
) > 63)

215 
	`memıy
(&
cÚ‹xt
->
bufãr
[
j
], 
d©a
, (
i
 = 64 - j));

216 
	`SHA1T¿nsfÜm
(
cÚ‹xt
->
¡©e
, cÚ‹xt->
bufãr
);

217 ; 
i
 + 63 < 
Ën
; i += 64)

219 
	`SHA1T¿nsfÜm
(
cÚ‹xt
->
¡©e
, &
d©a
[
i
]);

221 
j
 = 0;

224 
i
 = 0;

225 
	`memıy
(&
cÚ‹xt
->
bufãr
[
j
], &
d©a
[
i
], 
Ën
 - i);

226 
	}
}

231 
	$SHA1Fš®
(

232 
dige¡
[20],

233 
SHA1_CTX
 * 
cÚ‹xt


236 
i
;

238 
fš®couÁ
[8];

240 
c
;

248 *
fı
 = &
fš®couÁ
[8];

250 
i
 = 0; i < 2; i++)

252 
ušt32_t
 
t
 = 
cÚ‹xt
->
couÁ
[
i
];

254 
j
;

256 
j
 = 0; j < 4; 
t
 >>= 8, j++)

257 *--
fı
 = (è
t
}

259 
i
 = 0; i < 8; i++)

261 
fš®couÁ
[
i
] = (è((
cÚ‹xt
->
couÁ
[(i >= 4 ? 0 : 1)] >> ((3 - (i & 3)) * 8)) & 255);

264 
c
 = 0200;

265 
	`SHA1Upd©e
(
cÚ‹xt
, &
c
, 1);

266 (
cÚ‹xt
->
couÁ
[0] & 504) != 448)

268 
c
 = 0000;

269 
	`SHA1Upd©e
(
cÚ‹xt
, &
c
, 1);

271 
	`SHA1Upd©e
(
cÚ‹xt
, 
fš®couÁ
, 8);

272 
i
 = 0; i < 20; i++)

274 
dige¡
[
i
] = ()

275 ((
cÚ‹xt
->
¡©e
[
i
 >> 2] >> ((3 - (i & 3)) * 8)) & 255);

278 
	`mem£t
(
cÚ‹xt
, '\0', (*context));

279 
	`mem£t
(&
fš®couÁ
, '\0', (finalcount));

280 
	}
}

282 
	$SHA1
(

283 *
hash_out
,

284 cÚ¡ *
¡r
,

285 
Ën
)

287 
SHA1_CTX
 
ùx
;

288 
ii
;

290 
	`SHA1In™
(&
ùx
);

291 
ii
=0; ii<(è
Ën
; ii+=1)

292 
	`SHA1Upd©e
(&
ùx
, (cÚ¡ *)
¡r
 + 
ii
, 1);

293 
	`SHA1Fš®
((*)
hash_out
, &
ùx
);

294 
	}
}

	@lib/sha1.h

1 #iâdeà
SHA1_H


2 
	#SHA1_H


	)

10 
	~"¡dšt.h
"

14 
ušt32_t
 
	m¡©e
[5];

15 
ušt32_t
 
	mcouÁ
[2];

16 
	mbufãr
[64];

17 } 
	tSHA1_CTX
;

19 
SHA1T¿nsfÜm
(

20 
ušt32_t
 
¡©e
[5],

21 cÚ¡ 
bufãr
[64]

24 
SHA1In™
(

25 
SHA1_CTX
 * 
cÚ‹xt


28 
SHA1Upd©e
(

29 
SHA1_CTX
 * 
cÚ‹xt
,

30 cÚ¡ *
d©a
,

31 
ušt32_t
 
Ën


34 
SHA1Fš®
(

35 
dige¡
[20],

36 
SHA1_CTX
 * 
cÚ‹xt


39 
SHA1
(

40 *
hash_out
,

41 cÚ¡ *
¡r
,

42 
Ën
);

	@lib/singleton.h

1 #iâdeà
LISTDB_LIB_SINGLETON_H_


2 
	#LISTDB_LIB_SINGLETON_H_


	)

4 
	~<ÿs£¹
>

6 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

7 şas 
	cSšgËtÚ
 {

8 
	mpublic
:

9 
SšgËtÚ
(cÚ¡ SšgËtÚ<
T
>&èğ
d–‘e
;

10 
	mSšgËtÚ
& 
	mİ”©Ü
=(cÚ¡ 
SšgËtÚ
<
T
>&èğ
d–‘e
;

11 
	$SšgËtÚ
() {

12 
	`as£¹
(!
msSšgËtÚ
);

13 
msSšgËtÚ
 = 
¡©ic_ÿ¡
<
T
*>(
this
);

15 ~
	$SšgËtÚ
() {

16 
	`as£¹
(
msSšgËtÚ
);

17 
msSšgËtÚ
 = 0;

18 
	}
}

19 
	gT
& 
	$g‘SšgËtÚ
() {

20 
	`as£¹
(
msSšgËtÚ
);

21  (*
msSšgËtÚ
);

22 
	}
}

23 
	g´Ùeùed
:

24 
T
* 
msSšgËtÚ
;

	@lib/string_key.h

1 #iâdeà
LISTDB_LIB_STRING_KEY_H_


2 
	#LISTDB_LIB_STRING_KEY_H_


	)

4 
	~<¡ršg
>

5 
	~<¡ršg_v›w
>

7 şas 
	cSŒšgKey
 {

8 
	mpublic
:

9 
SŒšgKey
(cÚ¡ 
¡d
::
¡ršg
& 
key
);

11 
size_t
 
	$size
() const;

12 
	$Com·»
(cÚ¡ 
SŒšgKey
& 
Ùh”
) const;

14 
´iv©e
:

15 
d©a_
[1];

	@listdb.cc

1 
	~"li¡db/li¡db.h
"

	@listdb.h

1 #iâdeà
LISTDB_LISTDB_H_


2 
	#LISTDB_LISTDB_H_


	)

4 
	~<deque
>

5 
	~<f¡»am
>

6 
	~<iomª
>

7 
	~<io¡»am
>

8 
	~<queue
>

9 
	~<s¡»am
>

10 
	~<¡ack
>

11 
	~<th»ad
>

12 
	~<unÜd”ed_m­
>

14 
	~<ex³rim’l/fesy¡em
>

16 
	~<libpmemobj++/³xû±iÚs.hµ
>

17 
	~<numa.h
>

19 
	~"li¡db/commÚ.h
"

20 #ifdeà
LISTDB_L1_LRU


21 
	~"li¡db/cÜe/Ìu_skli¡.h
"

23 #ifdeà
LISTDB_SKIPLIST_CACHE


24 
	~"li¡db/cÜe/skli¡_ÿche.h
"

26 
	~"li¡db/cÜe/pmem_blob.h
"

27 
	~"li¡db/cÜe/pmem_log.h
"

28 
	~"li¡db/cÜe/¡©ic_hashbË_ÿche.h
"

29 
	~"li¡db/cÜe/doubË_hashšg_ÿche.h
"

30 
	~"li¡db/cÜe/lš—r_´obšg_hashbË_ÿche.h
"

31 
	~"li¡db/cÜe/pmem_db.h
"

32 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

33 
	~"li¡db/šdex/lockä“_skli¡.h
"

34 
	~"li¡db/šdex/sim¶e_hash_bË.h
"

35 
	~"li¡db/lsm/Ëv–_li¡.h
"

36 
	~"li¡db/lsm/membË_li¡.h
"

37 
	~"li¡db/lsm/pmembË.h
"

38 
	~"li¡db/lsm/pmembË_li¡.h
"

39 
	~"li¡db/ut/şock.h
"

40 
	~"li¡db/ut/¿ndom.h
"

41 
	~"li¡db/ut/»pÜ‹r.h
"

42 
	~"li¡db/ut/»pÜ‹r_ş›Á.h
"

44 
	#L0_COMPACTION_ON_IDLE


	)

45 
	#L0_COMPACTION_YIELD


	)

48 #ifdeà
REPORT_BACKGROUND_WORKS


49 
	#INIT_REPORTER_CLIENT
‡utØ
»pÜ‹r_ş›Á
 = 
Ãw
 
	`R•Ü‹rCl›Á
(
»pÜ‹r_
)

	)

50 
	#REPORT_FLUSH_OPS
(
x
è
»pÜ‹r_ş›Á
->
	`R•ÜtFšishedOps
(
R•Ü‹r
::
OpTy³
::
kFlush
, x)

	)

51 
	#REPORT_COMPACTION_OPS
(
x
è
»pÜ‹r_ş›Á
->
	`R•ÜtFšishedOps
(
R•Ü‹r
::
OpTy³
::
kCom·ùiÚ
, x)

	)

52 
	#REPORT_DONE
 
d–‘e
 
»pÜ‹r_ş›Á


	)

54 
	#INIT_REPORTER_CLIENT


	)

55 
	#REPORT_FLUSH_OPS
(
x
)

	)

56 
	#REPORT_COMPACTION_OPS
(
x
)

	)

57 
	#REPORT_DONE


	)

64 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

66 şas 
	cLi¡DB
 {

67 
	mpublic
:

68 
usšg
 
MemNode
 = 
lockä“_skli¡
::
Node
;

69 
usšg
 
	mPmemNode
 = 
B¿idedPmemSkLi¡
::
Node
;

71 
	sTask
 {

72 
TaskTy³
 
	mty³
;

73 
	msh¬d
;

76 
	gMemTabËFlushTask
 : 
Task
 {

77 
MemTabË
* 
imm
;

78 
MemTabËLi¡
* 
	gmembË_li¡
;

81 
	gL0Com·ùiÚTask
 : 
Task
 {

82 
PmemTabË
* 
l0
;

83 
MemTabËLi¡
* 
	gmembË_li¡
;

86 
	$®igÇs
(64è
Com·ùiÚWÜk”D©a
 {

87 
id
;

88 
boŞ
 
¡İ
;

89 
Rªdom
 
ºd
 = 
	`Rªdom
(0);

90 
¡d
::
queue
<
Task
*> 
q
;

91 
¡d
::
mu‹x
 
mu
;

92 
¡d
::
cÚd™iÚ_v¬ŸbË
 
cv
;

93 
Task
* 
cu¼’t_sk
;

94 
ušt64_t
 
æush_út
 = 0;

95 
ušt64_t
 
æush_time_u£c
 = 0;

98 
	}
};

100 şas 
	cS”viûStus
 {

101 
	gkAùive
,

102 
	gkStİ
,

105 ~
Li¡DB
();

107 
In™
();

109 
O³n
();

111 
Clo£
();

115 
Wa™FÜSbËS‹
();

117 
R•Ü‹r
* 
G‘OrC»©eR•Ü‹r
(cÚ¡ 
¡d
::
¡ršg
& 
âame
);

120 
MemTabË
* 
G‘Wr™abËMemTabË
(
size_t
 
kv_size
, 
sh¬d
);

122 
MemTabË
* 
G‘MemTabË
(
sh¬d
);

124 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


125 
Sim¶eHashTabË
* 
G‘HashTabË
(
sh¬d
);

126 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


127 
SticHashTabËCache
* 
G‘HashTabË
(
sh¬d
);

128 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


129 
DoubËHashšgCache
* 
G‘HashTabË
(
sh¬d
);

130 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


131 
Lš—rProbšgHashTabËCache
* 
G‘HashTabË
(
sh¬d
);

134 
TabËLi¡
* 
G‘TabËLi¡
(
Ëv–
, 
sh¬d
);

136 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

137 
T
* 
G‘TabËLi¡
(
Ëv–
, 
sh¬d
);

139 
PmemLog
* 
	$log
(
»giÚ
, 
sh¬d
è{  
log_
[»giÚ][sh¬d]; 
	}
}

141 #ifdeà
LISTDB_WISCKEY


142 
PmemBlob
* 
	$v®ue_blob
(cÚ¡ 
»giÚ
, cÚ¡ 
sh¬d
è{  
v®ue_blob_
[»giÚ][sh¬d]; 
	}
}

145 
	$poŞ_id_to_»giÚ
(cÚ¡ 
poŞ_id
è{  
poŞ_id_to_»giÚ_
[poŞ_id]; 
	}
}

147 
	$l0_poŞ_id
(cÚ¡ 
»giÚ
è{  
l0_poŞ_id_
[»giÚ]; 
	}
}

149 
	$l1_poŞ_id
(cÚ¡ 
»giÚ
è{  
l1_poŞ_id_
[»giÚ]; 
	}
}

152 
S‘L0Com·ùiÚScheduËrStus
(cÚ¡ 
S”viûStus
& 
¡©us
);

154 
BackgroundTh»adLoİ
();

156 
Com·ùiÚWÜk”Th»adLoİ
(
Com·ùiÚWÜk”D©a
* 
td
);

158 
FlushMemTabË
(
MemTabËFlushTask
* 
sk
, 
Com·ùiÚWÜk”D©a
* 
td
);

160 
FlushMemTabËWAL
(
MemTabËFlushTask
* 
sk
, 
Com·ùiÚWÜk”D©a
* 
td
);

162 
FlushMemTabËToL1WAL
(
MemTabËFlushTask
* 
sk
, 
Com·ùiÚWÜk”D©a
* 
td
);

164 
Mªu®FlushMemTabË
(
sh¬d
);

166 
Z³rCom·ùiÚL0
(
Com·ùiÚWÜk”D©a
* 
td
, 
L0Com·ùiÚTask
* 
sk
);

168 
L0Com·ùiÚCİyOnWr™e
(
L0Com·ùiÚTask
* 
sk
);

171 
PrštDebugLsmS‹
(
sh¬d
);

173 
G‘StSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, std::¡ršg* 
buf
);

175 #ifdeà
LISTDB_L1_LRU


176 
	g¡d
::
veùÜ
<
¡d
::
·œ
<
ušt64_t
, 
	gušt64_t
>>& 
	$sÜ‹d_¬r
(
r
, 
s
è{  
sÜ‹d_¬r_
[r][s]; 
	}
}

177 
LruSkLi¡
* 
	$Ìu_ÿche
(
s
, 
r
è{  
ÿche_
[s][r]; 
	}
}

179 
size_t
 
	$tÙ®_sÜ‹d_¬r_size
() {

180 
size_t
 
tÙ®_size
 = 0;

181 auto& 
rs
 : 
sÜ‹d_¬r_
) {

182 auto& 
ss
 : 
rs
) {

183 
tÙ®_size
 +ğ
ss
.
	`size
() * 16;

186  
tÙ®_size
;

187 
	}
}

189 #ifdeà
LISTDB_SKIPLIST_CACHE


190 
SkLi¡CacheR•
* 
	$skli¡_ÿche
(
s
, 
r
è{  
ÿche_
[s][r]; 
	}
}

193 
	g´iv©e
:

194 #ifdeà
LISTDB_WISCKEY


195 
PmemBlob
* 
v®ue_blob_
[
kNumRegiÚs
][
kNumSh¬ds
];

197 
PmemLog
* 
	glog_
[
kNumRegiÚs
][
kNumSh¬ds
];

198 
PmemLog
* 
	gl0_¬’a_
[
kNumRegiÚs
][
kNumSh¬ds
];

199 
PmemLog
* 
	gl1_¬’a_
[
kNumRegiÚs
][
kNumSh¬ds
];

200 
Lev–Li¡
* 
	gÎ_
[
kNumSh¬ds
];

202 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


203 
Sim¶eHashTabË
* 
	ghash_bË_
[
kNumSh¬ds
];

204 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


205 
SticHashTabËCache
* 
	ghash_bË_
[
kNumSh¬ds
];

206 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


207 
DoubËHashšgCache
* 
	ghash_bË_
[
kNumSh¬ds
];

208 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


209 
Lš—rProbšgHashTabËCache
* 
	ghash_bË_
[
kNumSh¬ds
];

212 
	g¡d
::
unÜd”ed_m­
<, > 
	gpoŞ_id_to_»giÚ_
;

213 
	g¡d
::
unÜd”ed_m­
<, > 
	glog_poŞ_id_
;

214 
	g¡d
::
unÜd”ed_m­
<, > 
	gl0_poŞ_id_
;

215 
	g¡d
::
unÜd”ed_m­
<, > 
	gl1_poŞ_id_
;

221 
	g¡d
::
deque
<
Task
*> 
wÜk_»que¡_queue_
;

222 
	g¡d
::
deque
<
Task
*> 
wÜk_com¶‘iÚ_queue_
;

223 
	g¡d
::
mu‹x
 
wq_mu_
;

224 
	g¡d
::
cÚd™iÚ_v¬ŸbË
 
wq_cv_
;

226 
	g¡d
::
th»ad
 
bg_th»ad_
;

227 
boŞ
 
	g¡İ_
 = 
çl£
;

228 
S”viûStus
 
	gl0_com·ùiÚ_scheduËr_¡©us_
 = S”viûStus::
kAùive
;

230 
Com·ùiÚWÜk”D©a
 
	gwÜk”_d©a_
[
kNumWÜk”s
];

231 
	g¡d
::
th»ad
 
wÜk”_th»ads_
[
kNumWÜk”s
];

233 #ifdeà
LISTDB_L1_LRU


234 
	g¡d
::
veùÜ
<
¡d
::
·œ
<
ušt64_t
, 
	gušt64_t
>> 
	gsÜ‹d_¬r_
[
kNumRegiÚs
][
kNumSh¬ds
];

235 
LruSkLi¡
* 
	gÿche_
[
kNumSh¬ds
][
kNumRegiÚs
];

238 #ifdeà
LISTDB_SKIPLIST_CACHE


239 
SkLi¡CacheR•
* 
	gÿche_
[
kNumSh¬ds
][
kNumRegiÚs
];

242 
	g¡d
::
©omic
<
R•Ü‹r
*> 
»pÜ‹r_
;

243 
	g¡d
::
mu‹x
 
mu_
;

247 
	gLi¡DB
::~
	$Li¡DB
() {

248 
	`årštf
(
¡dout
, "D \n");

249 
	`Clo£
();

250 
	}
}

252 
	gLi¡DB
::
	$In™
() {

253 
¡d
::
¡ršg
 
db_·th
 = "/pmem/wkim/listdb";

254 
fs
::
	`»move_®l
(
db_·th
);

255 
roÙ_poŞ_id
 = 
Pmem
::
BšdPoŞ
<
pmem_db
>(
db_·th
, "", 8*1024*1024);

257 ià(
roÙ_poŞ_id
 != 0) {

258 
¡d
::
û¼
 << "roÙ_poŞ_id mu¡ bz”Ø(cu¼’t: " << 
roÙ_poŞ_id
 << ")\n";

259 
	`ex™
(1);

261 autØ
db_poŞ
 = 
Pmem
::
poŞ
<
pmem_db
>(
roÙ_poŞ_id
);

262 autØ
db_roÙ
 = 
db_poŞ
.
	`roÙ
();

263 
i
 = 0; i < 
kNumSh¬ds
; i++) {

264 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_db_sh¬d
> 
p_sh¬d_mªiã¡
;

265 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_db_sh¬d
>(
db_poŞ
, 
p_sh¬d_mªiã¡
);

266 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
> 
p_l0_mªiã¡
;

267 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_l0_šfo
>(
db_poŞ
, 
p_l0_mªiã¡
);

268 
p_sh¬d_mªiã¡
->
l0_li¡_h—d
 = 
p_l0_mªiã¡
;

269 
db_roÙ
->
sh¬d
[
i
] = 
p_sh¬d_mªiã¡
;

274 
i
 = 0; i < 
kNumRegiÚs
; i++) {

275 
¡d
::
¡ršg¡»am
 
pss
;

276 
pss
 << "/pmem" << 
i
 << "/wkim/listdb_log";

277 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

278 
fs
::
	`»move_®l
(
·th
);

279 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

281 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

282 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

283 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

284 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

285 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

286 
¡rm
.
	`şo£
();

288 
poŞ_id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

289 
poŞ_id_to_»giÚ_
[
poŞ_id
] = 
i
;

290 
log_poŞ_id_
[
i
] = 
poŞ_id
;

291 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
poŞ_id
);

293 
j
 = 0; j < 
kNumSh¬ds
; j++) {

294 
log_
[
i
][
j
] = 
Ãw
 
	`PmemLog
(
poŞ_id
, j);

297 #iâdeà
LISTDB_WAL


299 
i
 = 0; i < 
kNumRegiÚs
; i++) {

300 
l0_poŞ_id_
[
i
] = 
log_poŞ_id_
[i];

301 
j
 = 0; j < 
kNumSh¬ds
; j++) {

302 
l0_¬’a_
[
i
][
j
] = 
log_
[i][j];

306 #ià
LISTDB_FLUSH_MEMTABLE_TO_L1
 == 1

307 
i
 = 0; i < 
kNumRegiÚs
; i++) {

308 
l0_poŞ_id_
[
i
] = 
log_poŞ_id_
[i];

309 
j
 = 0; j < 
kNumSh¬ds
; j++) {

310 
l0_¬’a_
[
i
][
j
] = 
log_
[i][j];

315 
i
 = 0; i < 
kNumRegiÚs
; i++) {

316 
¡d
::
¡ršg¡»am
 
pss
;

317 
pss
 << "/pmem" << 
i
 << "/wkim/listdb_nonunified_l0";

318 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

319 
fs
::
	`»move_®l
(
·th
);

320 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

322 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

323 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

324 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

325 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

326 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

327 
¡rm
.
	`şo£
();

329 
poŞ_id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_blob_roÙ
>(
poŞ£t
, "");

330 
poŞ_id_to_»giÚ_
[
poŞ_id
] = 
i
;

331 
l0_poŞ_id_
[
i
] = 
poŞ_id
;

332 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_blob_roÙ
>(
poŞ_id
);

334 
j
 = 0; j < 
kNumSh¬ds
; j++) {

335 
l0_¬’a_
[
i
][
j
] = 
Ãw
 
	`PmemLog
(
poŞ_id
, j);

341 #ifdeà
LISTDB_WISCKEY


342 
i
 = 0; i < 
kNumRegiÚs
; i++) {

343 
¡d
::
¡ršg¡»am
 
pss
;

344 
pss
 << "/pmem" << 
i
 << "/wkim/listdb_value";

345 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

346 
fs
::
	`»move_®l
(
·th
);

347 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

349 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

350 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

351 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

352 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

353 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

354 
¡rm
.
	`şo£
();

356 
poŞ_id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_blob_roÙ
>(
poŞ£t
, "");

357 
poŞ_id_to_»giÚ_
[
poŞ_id
] = 
i
;

358 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_blob_roÙ
>(
poŞ_id
);

360 
j
 = 0; j < 
kNumSh¬ds
; j++) {

361 
v®ue_blob_
[
i
][
j
] = 
Ãw
 
	`PmemBlob
(
poŞ_id
, j);

366 #ifdeà
L1_COW


368 
i
 = 0; i < 
kNumRegiÚs
; i++) {

369 
¡d
::
¡ršg¡»am
 
pss
;

370 
pss
 << "/pmem" << 
i
 << "/wkim/listdb_l1";

371 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

372 
fs
::
	`»move_®l
(
·th
);

373 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

375 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

376 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

377 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

378 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

379 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

380 
¡rm
.
	`şo£
();

382 
poŞ_id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

383 
poŞ_id_to_»giÚ_
[
poŞ_id
] = 
i
;

384 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
poŞ_id
);

386 
j
 = 0; j < 
kNumSh¬ds
; j++) {

387 
l1_¬’a_
[
i
][
j
] = 
Ãw
 
	`PmemLog
(
poŞ_id
, j);

391 
i
 = 0; i < 
kNumRegiÚs
; i++) {

392 
j
 = 0; j < 
kNumSh¬ds
; j++) {

393 
l1_¬’a_
[
i
][
j
] = 
l0_¬’a_
[i][j];

397 
i
 = 0; i < 
kNumRegiÚs
; i++) {

398 
l1_poŞ_id_
[
i
] = 
l1_¬’a_
[i][0]->
	`poŞ_id
();

401 
i
 = 0; i < 
kNumSh¬ds
; i++) {

402 
Î_
[
i
] = 
Ãw
 
	`Lev–Li¡
();

405 autØ

 = 
Ãw
 
	`MemTabËLi¡
(
kMemTabËC­ac™y
 / 
kNumSh¬ds
, 
i
);

406 

->
	`BšdEnqueueFunùiÚ
([&,l, 
i
](
MemTabË
* 
mem
) {

408 autØ
sk
 = 
Ãw
 
	`MemTabËFlushTask
();

409 
sk
->
ty³
 = 
TaskTy³
::
kMemTabËFlush
;

410 
sk
->
sh¬d
 = 
i
;

411 
sk
->
imm
 = 
mem
;

412 
sk
->
membË_li¡
 = 

;

413 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
wq_mu_
);

414 
wÜk_»que¡_queue_
.
	`push_back
(
sk
);

415 
lk
.
	`uÆock
();

416 
wq_cv_
.
	`nÙify_Úe
();

418 
j
 = 0; j < 
kNumRegiÚs
; j++) {

419 

->
	`BšdA»Ç
(
j
, 
l0_¬’a_
[j][
i
]);

421 
Î_
[
i
]->
	`S‘TabËLi¡
(0, 

);

426 autØ

 = 
Ãw
 
	`PmemTabËLi¡
(
¡d
::
num”ic_lim™s
<
size_t
>::
	`max
(), 
l1_¬’a_
[0][0]->
	`poŞ_id
());

427 
j
 = 0; j < 
kNumRegiÚs
; j++) {

428 

->
	`BšdA»Ç
(
l1_¬’a_
[
j
][
i
]->
	`poŞ_id
(),†1_arena_[j][i]);

430 
Î_
[
i
]->
	`S‘TabËLi¡
(1, 

);

435 
i
 = 0; i < 
kNumSh¬ds
; i++) {

436 autØ
l1_
 = 
Î_
[
i
]->
	`G‘TabËLi¡
(1);

438 [[
maybe_unu£d
]]‡utØ
l1_bË
 = (
PmemTabË
*è
l1_
->
	`G‘FrÚt
();

442 #ifdeà
LISTDB_L1_LRU


443 
i
 = 0; i < 
kNumSh¬ds
; i++) {

444 
j
 = 0; j < 
kNumRegiÚs
; j++) {

445 
ÿche_
[
i
][
j
] = 
Ãw
 
	`LruSkLi¡
(100000000);

449 #ifdeà
LISTDB_SKIPLIST_CACHE


450 
i
 = 0; i < 
kNumSh¬ds
; i++) {

451 
j
 = 0; j < 
kNumRegiÚs
; j++) {

452 
ÿche_
[
i
][
j
] = 
Ãw
 
	`SkLi¡CacheR•
(
l1_¬’a_
[j][i]->
	`poŞ_id
(), 
kSkLi¡CacheC­ac™y
 / 
kNumSh¬ds
 / 
kNumRegiÚs
);

457 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


458 
i
 = 0; i < 1; i++) {

459 
hash_bË_
[
i
] = 
Ãw
 
	`Sim¶eHashTabË
(
kHTSize
);

460 
size_t
 
j
 = 0; j < 
kHTSize
; j++) {

461 
hash_bË_
[
i
]->
	`©
(
j
)->
v”siÚ
 = 1UL;

464 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


465 
i
 = 0; i < 
kNumSh¬ds
; i++) {

466 
hash_bË_
[
i
] = 
Ãw
 
	`SticHashTabËCache
(
kHTSize
 / 
kNumSh¬ds
, i);

468 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


469 
i
 = 0; i < 
kNumSh¬ds
; i++) {

470 
hash_bË_
[
i
] = 
Ãw
 
	`DoubËHashšgCache
(
kHTSize
 / 
kNumSh¬ds
, i);

472 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


473 
i
 = 0; i < 
kNumSh¬ds
; i++) {

474 
hash_bË_
[
i
] = 
Ãw
 
	`Lš—rProbšgHashTabËCache
(
kHTSize
 / 
kNumSh¬ds
, i);

478 
bg_th»ad_
 = 
¡d
::
	`th»ad
(¡d::
	`bšd
(&
Li¡DB
::
BackgroundTh»adLoİ
, 
this
));

480 
i
 = 0; i < 
kNumWÜk”s
; i++) {

481 
wÜk”_d©a_
[
i
].
id
 = i;

482 
wÜk”_d©a_
[
i
].
¡İ
 = 
çl£
;

483 
wÜk”_th»ads_
[
i
] = 
¡d
::
	`th»ad
(¡d::
	`bšd
(&
Li¡DB
::
Com·ùiÚWÜk”Th»adLoİ
, 
this
, &
wÜk”_d©a_
[i]));

491 
	}
}

493 
	gLi¡DB
::
	$O³n
() {

494 
	`´štf
("list db open started\n");

495 
¡d
::
¡ršg
 
db_·th
 = "/pmem/wkim/listdb";

496 
roÙ_poŞ_id
 = 
Pmem
::
BšdPoŞ
<
pmem_db
>(
db_·th
, "", 64*1024*1024);

497 ià(
roÙ_poŞ_id
 != 0) {

498 
¡d
::
û¼
 << "roÙ_poŞ_id mu¡ bz”Ø(cu¼’t: " << 
roÙ_poŞ_id
 << ")\n";

499 
	`ex™
(1);

501 autØ
db_poŞ
 = 
Pmem
::
poŞ
<
pmem_db
>(
roÙ_poŞ_id
);

502 autØ
db_roÙ
 = 
db_poŞ
.
	`roÙ
();

505 
i
 = 0; i < 
kNumRegiÚs
; i++) {

506 
¡d
::
¡ršg¡»am
 
pss
;

507 
pss
 << "/pmem" << 
i
 << "/wkim/listdb_log";

508 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

509 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

511 
poŞ_id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

512 
poŞ_id_to_»giÚ_
[
poŞ_id
] = 
i
;

514 
l0_poŞ_id_
[
i
] = 
poŞ_id
;

516 
j
 = 0; j < 
kNumSh¬ds
; j++) {

517 
log_
[
i
][
j
] = 
Ãw
 
	`PmemLog
(
poŞ_id
, j);

520 #iâdeà
LISTDB_WAL


522 
i
 = 0; i < 
kNumRegiÚs
; i++) {

523 
l0_poŞ_id_
[
i
] = 
log_poŞ_id_
[i];

524 
j
 = 0; j < 
kNumSh¬ds
; j++) {

525 
l0_¬’a_
[
i
][
j
] = 
log_
[i][j];

529 
¡d
::
û¼
 << "O³n(èfÜ LISTDB_WAL i nÙ im¶em’‹d." << std:
’dl
;

530 
	`ex™
(1);

533 #ifdeà
LISTDB_WISCKEY


534 
i
 = 0; i < 
kNumRegiÚs
; i++) {

535 
¡d
::
¡ršg¡»am
 
pss
;

536 
pss
 << "/pmem" << 
i
 << "/wkim/listdb_value";

537 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

538 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

540 
poŞ_id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_blob_roÙ
>(
poŞ£t
, "");

541 
poŞ_id_to_»giÚ_
[
poŞ_id
] = 
i
;

542 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_blob_roÙ
>(
poŞ_id
);

544 
j
 = 0; j < 
kNumSh¬ds
; j++) {

545 
v®ue_blob_
[
i
][
j
] = 
Ãw
 
	`PmemBlob
(
poŞ_id
, j);

550 #ifdeà
L1_COW


551 
¡d
::
û¼
 << "O³n(èfÜ L0 CoW com·ùiÚ i nÙ im¶em’‹d." << std:
’dl
;

552 
	`ex™
(1);

554 
i
 = 0; i < 
kNumRegiÚs
; i++) {

555 
j
 = 0; j < 
kNumSh¬ds
; j++) {

556 
l1_¬’a_
[
i
][
j
] = 
l0_¬’a_
[i][j];

560 
i
 = 0; i < 
kNumRegiÚs
; i++) {

561 
l1_poŞ_id_
[
i
] = 
l1_¬’a_
[i][0]->
	`poŞ_id
();

564 
i
 = 0; i < 
kNumSh¬ds
; i++) {

565 
Î_
[
i
] = 
Ãw
 
	`Lev–Li¡
();

568 autØ

 = 
Ãw
 
	`MemTabËLi¡
(
kMemTabËC­ac™y
 / 
kNumSh¬ds
, 
i
);

569 

->
	`BšdEnqueueFunùiÚ
([&,l, 
i
](
MemTabË
* 
mem
) {

571 autØ
sk
 = 
Ãw
 
	`MemTabËFlushTask
();

572 
sk
->
ty³
 = 
TaskTy³
::
kMemTabËFlush
;

573 
sk
->
sh¬d
 = 
i
;

574 
sk
->
imm
 = 
mem
;

575 
sk
->
membË_li¡
 = 

;

576 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
wq_mu_
);

577 
wÜk_»que¡_queue_
.
	`push_back
(
sk
);

578 
lk
.
	`uÆock
();

579 
wq_cv_
.
	`nÙify_Úe
();

581 
j
 = 0; j < 
kNumRegiÚs
; j++) {

582 

->
	`BšdA»Ç
(
j
, 
l0_¬’a_
[j][
i
]);

584 
Î_
[
i
]->
	`S‘TabËLi¡
(0, 

);

589 autØ

 = 
Ãw
 
	`PmemTabËLi¡
(
¡d
::
num”ic_lim™s
<
size_t
>::
	`max
(), 
l1_¬’a_
[0][0]->
	`poŞ_id
());

590 
j
 = 0; j < 
kNumRegiÚs
; j++) {

591 

->
	`BšdA»Ç
(
l1_¬’a_
[
j
][
i
]->
	`poŞ_id
(),†1_arena_[j][i]);

593 
Î_
[
i
]->
	`S‘TabËLi¡
(1, 

);

597 
¡d
::
©omic
<> 
membË_»cov”y_út_tÙ®
 = 0;

598 
¡d
::
©omic
<> 
l0_»cov”y_út_tÙ®
 = 0;

599 
¡d
::
©omic
<> 
l0_³rsi¡ed_út_tÙ®
 = 0;

600 
¡d
::
©omic
<> 
m”ge_dÚe_út_tÙ®
 = 0;

601 
¡d
::
©omic
<> 
l1_»cov”y_út_tÙ®
 = 0;

602 
¡d
::
©omic
<
size_t
> 
mem_š£¹_út_tÙ®
 = 0;

603 
¡d
::
©omic
<
size_t
> 
l0_š£¹_út_tÙ®
 = 0;

605 autØ
»cov”y_begš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

615 
¡d
::
veùÜ
<¡d::
th»ad
> 
»cov”y_wÜk”s
;

616 cÚ¡ 
kNumRecov”yTh»ads
 = 
kNumSh¬ds
;

617 
wid
 = 0; wid < 
kNumRecov”yTh»ads
; wid++) {

618 
»cov”y_wÜk”s
.
	`push_back
(
¡d
::
	`th»ad
([&, 
wid
] {

619 
membË_»cov”y_út
 = 0;

620 
l0_»cov”y_út
 = 0;

621 
l0_³rsi¡ed_út
 = 0;

622 
m”ge_dÚe_út
 = 0;

623 
l1_»cov”y_út
 = 0;

624 
size_t
 
mem_š£¹_út
 = 0;

625 
size_t
 
l0_š£¹_út
 = 0;

626 
sh¬d_begš
 = (
kNumSh¬ds
 / 
kNumRecov”yTh»ads
è* 
wid
;

627 
sh¬d_’d
 = (
kNumSh¬ds
 / 
kNumRecov”yTh»ads
è* (
wid
 + 1);

628 
i
 = 
sh¬d_begš
 ; i < 
sh¬d_’d
; i++) {

629 autØ
sh¬d
 = 
db_roÙ
->sh¬d[
i
];

632 autØ
l1_šfo
 = 
sh¬d
->l1_info;

633 ià(
l1_šfo
) {

634 
l1_»cov”y_út
++;

636 autØ
l1_skli¡
 = 
Ãw
 
	`B¿idedPmemSkLi¡
(
l1_¬’a_
[0][0]->
	`poŞ_id
());

637 
j
 = 0; j < 
kNumRegiÚs
; j++) {

638 
poŞ_id
 = 
l1_poŞ_id_
[
j
];

639 
l1_skli¡
->
	`BšdA»Ç
(
poŞ_id
, 
l1_¬’a_
[
j
][
i
]);

640 
l1_skli¡
->
	`BšdH—d
(
poŞ_id
, (*è
l1_šfo
->
h—d
[
j
].
	`g‘
());

642 autØ
l1_bË
 = 
Ãw
 
	`PmemTabË
(
¡d
::
num”ic_lim™s
<
size_t
>::
	`max
(), 
l1_skli¡
);

644 autØ
l1_
 = 
Î_
[
i
]->
	`G‘TabËLi¡
(1);

645 
l1_
->
	`S‘FrÚt
(
l1_bË
);

648 autØ
membË_li¡
 = 
G‘TabËLi¡
<
MemTabËLi¡
>(0, 
i
);

651 autØ
´ed_l0_šfo
 = 
sh¬d
->
l0_li¡_h—d
;

652 autØ
cu¼_l0_šfo
 = 
´ed_l0_šfo
->
Ãxt
;

653 
¡d
::
deque
<
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
>> 
l0_mªiã¡s
;

654 
ušt64_t
 
mš_l0_id
 = 
¡d
::
num”ic_lim™s
<ušt64_t>::
	`max
();

655 
cu¼_l0_šfo
) {

656 ià(
cu¼_l0_šfo
->
¡©us
 =ğ
Lev–0Stus
::
kM”geDÚe
) {

657 
m”ge_dÚe_út
++;

658 
j
 = 0; j < 
kNumRegiÚs
; j++) {

659 
size_t
 
h—d_node_size
 = (
PmemNode
è+ (
kMaxHeight
 - 1è* (
ušt64_t
);

660 
pmem
::
obj
::
d–‘e_³rsi¡’t_©omic
<[]>(
cu¼_l0_šfo
->
h—d
[
j
], 
h—d_node_size
);

662 autØ
succ_l0_šfo
 = 
cu¼_l0_šfo
->
Ãxt
;

664 
´ed_l0_šfo
->
Ãxt
 = 
succ_l0_šfo
;

665 
pmem
::
obj
::
d–‘e_³rsi¡’t_©omic
<
pmem_l0_šfo
>(
cu¼_l0_šfo
);

666 
cu¼_l0_šfo
 = 
succ_l0_šfo
;

669 
mš_l0_id
 = 
cu¼_l0_šfo
->
id
;

670 
l0_mªiã¡s
.
	`push_äÚt
(
cu¼_l0_šfo
);

671 
cu¼_l0_šfo
 = cu¼_l0_šfo->
Ãxt
;

675 
¡d
::
deque
<
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
>> 
log_blocks
[
kNumRegiÚs
];

676 
j
 = 0; j < 
kNumRegiÚs
; j++) {

678 autØ
poŞ
 = 
log_
[
j
][
i
]->
	`poŞ
();

679 autØ
log_sh¬d
 = 
poŞ
.
	`roÙ
()->
sh¬d
[
i
];

683 autØ
cu¼_block
 = 
log_sh¬d
->
h—d
;

684 
cu¼_block
) {

685 
PmemNode
* 
fœ¡_»cÜd
 = (PmemNode*è
cu¼_block
->
d©a
;

686 
log_blocks
[
j
].
	`push_äÚt
(
cu¼_block
);

687 ià(
fœ¡_»cÜd
->
	`l0_id
(è< 
mš_l0_id
) {

690 
cu¼_block
 = cu¼_block->
Ãxt
;

694 
	sLogCursÜ
 {

695 * 
d©a
 = 
nuÎ±r
;

696 
ušt64_t
 
off£t
 = 0;

697 
¡d
::
deque
<
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_log_block
>>::
™”©Ü
 
block_™”
;

700 * 
	`p
(è{  
d©a
 + 
off£t
; }

701 } 
cursÜ
[
kNumRegiÚs
];

702 
j
 = 0; j < 
kNumRegiÚs
; j++) {

703 
cursÜ
[
j
].
block_™”
 = 
log_blocks
[j].
	`begš
();

704 
cursÜ
[
j
].
d©a
 = (*(cursÜ[j].
block_™”
))->data;

707 
¡d
::
deque
<
TabË
*> 
bËs
;

709 auto& 
l0
 : 
l0_mªiã¡s
) {

711 autØ
l0_skli¡
 = 
Ãw
 
	`B¿idedPmemSkLi¡
(
l0_¬’a_
[0][0]->
	`poŞ_id
());

712 
j
 = 0; j < 
kNumRegiÚs
; j++) {

713 
poŞ_id
 = 
l0_¬’a_
[
j
][
i
]->
	`poŞ_id
();

714 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
poŞ_id
];

715 
l0_skli¡
->
	`BšdA»Ç
(
poŞ_id
, 
l0_¬’a_
[
j
][
i
]);

716 
l0_skli¡
->
	`BšdH—d
(
poŞ_id
, (*è
l0
->
h—d
[
»giÚ
].
	`g‘
());

719 ià(
l0
->
¡©us
 =ğ
Lev–0Stus
::
kM”geIn™Ÿ‹d
) {

720 
	`årštf
(
¡dout
, "Level0Status::kMergeInitiated.\n");

721 
	`ex™
(1);

723 } ià(
l0
->
¡©us
 =ğ
Lev–0Stus
::
kP”si¡ed
) {

724 
l0_³rsi¡ed_út
++;

725 autØ
l0_bË
 = 
Ãw
 
	`PmemTabË
(
kMemTabËC­ac™y
, 
l0_skli¡
);

726 
l0_bË
->
	`S‘Size
(
kMemTabËC­ac™y
);

728 
bËs
.
	`push_back
((
TabË
*è
l0_bË
);

729 } ià(
l0
->
¡©us
 =ğ
Lev–0Stus
::
kFuÎ
) {

730 
l0_»cov”y_út
++;

732 
j
 = 0; j < 
kNumRegiÚs
; j++) {

733 
poŞ_id
 = 
log_
[
j
][
i
]->
	`poŞ_id
();

734 autØ
p_h—d
 = 
l0_skli¡
->
	`h—d
(
poŞ_id
);

735 
k
 = 0; k < 
kMaxHeight
; k++) {

736 
p_h—d
->
Ãxt
[
k
] = 0;

741 
j
 = 0; j < 
kNumRegiÚs
; j++) {

742 
poŞ_id
 = 
log_
[
j
][
i
]->
	`poŞ_id
();

743 autØ
poŞ
 = 
log_
[
j
][
i
]->
	`poŞ
();

746 
boŞ
 
cu¼’t_bË_dÚe
 = 
çl£
;

747 
cursÜ
[
j
].
block_™”
 !ğ
log_blocks
[j].
	`’d
()) {

748 
cursÜ
[
j
].
off£t
 < 
kPmemLogBlockSize
 - 7) {

749 * 
p
 = 
cursÜ
[
j
].
	`p
();

750 
PmemNode
* 
p_node
 = (PmemNode*è
p
;

751 ià(!
p_node
->
key
.
	`V®id
()) {

755 ià(
p_node
->
	`l0_id
(è> 
l0
->
id
) {

756 
cu¼’t_bË_dÚe
 = 
Œue
;

759 ià(
p_node
->
	`l0_id
(è=ğ
l0
->
id
) {

761 
PmemPŒ
 
	`node_·ddr
(
poŞ_id
, (
ušt64_t
è((
ušŒ_t
è
p
 - (ušŒ_tè
poŞ
.
	`hªdË
()));

762 
l0_skli¡
->
	`In£¹
(
node_·ddr
);

763 
l0_š£¹_út
++;

765 
height
 = 
p_node
->
	`height
();

766 
size_t
 
iul_’Œy_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

767 
cursÜ
[
j
].
off£t
 +ğ
iul_’Œy_size
;

769 ià(
cu¼’t_bË_dÚe
) {

772 ++
cursÜ
[
j
].
block_™”
;

773 ià(
cursÜ
[
j
].
block_™”
 !ğ
log_blocks
[j].
	`’d
()) {

774 
cursÜ
[
j
].
d©a
 = (*(cursÜ[j].
block_™”
))->data;

775 
cursÜ
[
j
].
off£t
 = 0;

780 autØ
l0_bË
 = 
Ãw
 
	`PmemTabË
(
kMemTabËC­ac™y
, 
l0_skli¡
);

781 
l0_bË
->
	`S‘Size
(
kMemTabËC­ac™y
);

783 
bËs
.
	`push_back
((
TabË
*è
l0_bË
);

784 } ià(
l0
->
¡©us
 =ğ
Lev–0Stus
::
kIn™Ÿlized
) {

785 
membË_»cov”y_út
++;

787 
j
 = 0; j < 
kNumRegiÚs
; j++) {

788 
poŞ_id
 = 
log_
[
j
][
i
]->
	`poŞ_id
();

789 autØ
p_h—d
 = 
l0_skli¡
->
	`h—d
(
poŞ_id
);

790 
k
 = 0; k < 
kMaxHeight
; k++) {

791 
p_h—d
->
Ãxt
[
k
] = 0;

796 autØ
membË
 = 
Ãw
 
	`MemTabË
(
kMemTabËC­ac™y
);

797 
membË
->
	`S‘L0SkLi¡
(
l0_skli¡
);

798 autØ
skli¡
 = 
membË
->
	`skli¡
();

799 
size_t
 
kv_size_tÙ®
 = 0;

802 
j
 = 0; j < 
kNumRegiÚs
; j++) {

803 
poŞ_id
 = 
log_
[
j
][
i
]->
	`poŞ_id
();

804 autØ
poŞ
 = 
log_
[
j
][
i
]->
	`poŞ
();

807 
boŞ
 
cu¼’t_bË_dÚe
 = 
çl£
;

808 
cursÜ
[
j
].
block_™”
 !ğ
log_blocks
[j].
	`’d
()) {

809 
cursÜ
[
j
].
off£t
 < 
kPmemLogBlockSize
 - 7) {

810 * 
p
 = 
cursÜ
[
j
].
	`p
();

811 
PmemNode
* 
p_node
 = (PmemNode*è
p
;

812 ià(!
p_node
->
key
.
	`V®id
()) {

816 ià(
p_node
->
	`l0_id
(è> 
l0
->
id
) {

817 
cu¼’t_bË_dÚe
 = 
Œue
;

820 
height
 = 
p_node
->
	`height
();

821 ià(
p_node
->
	`l0_id
(è=ğ
l0
->
id
) {

823 
PmemPŒ
 
	`log_·ddr
(
poŞ_id
, (
ušt64_t
è((
ušŒ_t
è
p
 - (ušŒ_tè
poŞ
.
	`hªdË
()));

826 
MemNode
* 
node
 = (MemNode*è
	`m®loc
((MemNodeè+ (
height
 - 1è* (
ušt64_t
));

827 
node
->
key
 = 
p_node
->key;

828 
node
->
g
 = 
height
;

829 
node
->
v®ue
 = 
log_·ddr
.
	`dump
();

830 
	`mem£t
((*è&
node
->
Ãxt
[0], 0, 
height
 * (
ušt64_t
));

832 
kv_size_tÙ®
 +ğ
node
->
key
.
	`size
(è+ (
V®ue
);

834 
skli¡
->
	`In£¹
(
node
);

835 
mem_š£¹_út
++;

837 
size_t
 
iul_’Œy_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

838 
cursÜ
[
j
].
off£t
 +ğ
iul_’Œy_size
;

840 ià(
cu¼’t_bË_dÚe
) {

843 ++
cursÜ
[
j
].
block_™”
;

844 ià(
cursÜ
[
j
].
block_™”
 !ğ
log_blocks
[j].
	`’d
()) {

845 
cursÜ
[
j
].
d©a
 = (*(cursÜ[j].
block_™”
))->data;

846 
cursÜ
[
j
].
off£t
 = 0;

850 
membË
->
	`S‘Size
(
kv_size_tÙ®
);

852 
bËs
.
	`push_back
((
TabË
*è
membË
);

854 
¡d
::
û¼
 << "Unknown L0 status.\n";

855 
	`ex™
(1);

862 
size_t
 
i
 = 0; i < 
bËs
.
	`size
(); i++) {

863 ià(
i
 > 0) {

864 
bËs
[
i
]->
	`S‘Next
(tables[i - 1]);

866 
membË_li¡
->
	`PushFrÚt
(
bËs
[
i
]);

871 
membË_»cov”y_út_tÙ®
.
	`ãtch_add
(
membË_»cov”y_út
);

872 
l0_»cov”y_út_tÙ®
.
	`ãtch_add
(
l0_»cov”y_út
);

873 
l0_³rsi¡ed_út_tÙ®
.
	`ãtch_add
(
l0_³rsi¡ed_út
);

874 
m”ge_dÚe_út_tÙ®
.
	`ãtch_add
(
m”ge_dÚe_út
);

875 
l1_»cov”y_út_tÙ®
.
	`ãtch_add
(
l1_»cov”y_út
);

876 
mem_š£¹_út_tÙ®
.
	`ãtch_add
(
mem_š£¹_út
);

877 
l0_š£¹_út_tÙ®
.
	`ãtch_add
(
l0_š£¹_út
);

880 auto& 
rw
 : 
»cov”y_wÜk”s
) {

881 ià(
rw
.
	`jošabË
()èrw.
	`još
();

883 autØ
»cov”y_’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

884 
¡d
::
chrÚo
::
du¿tiÚ
<> 
»cov”y_du¿tiÚ
 = 
»cov”y_’d_
 - 
»cov”y_begš_
;

885 
	`årštf
(
¡dout
, "»cov”yim: %.3là£c\n", 
»cov”y_du¿tiÚ
.
	`couÁ
());

886 
	`årštf
(
¡dout
, "recovery count:\n");

887 
	`årštf
(
¡dout
, " - membË: %d\n", 
membË_»cov”y_út_tÙ®
.
	`lßd
());

888 
	`årštf
(
¡dout
, " -†0: %d\n", 
l0_»cov”y_út_tÙ®
.
	`lßd
());

889 
	`årštf
(
¡dout
, " -…”si¡ed†0: %d\n", 
l0_³rsi¡ed_út_tÙ®
.
	`lßd
());

890 
	`årštf
(
¡dout
, " -†1: %d\n", 
l1_»cov”y_út_tÙ®
.
	`lßd
());

891 
	`årštf
(
¡dout
, " - m”ged†0: %d\n", 
m”ge_dÚe_út_tÙ®
.
	`lßd
());

892 
	`årštf
(
¡dout
, "mem in£¹ cÁ: %zu\n", 
mem_š£¹_út_tÙ®
.
	`lßd
());

893 
	`årštf
(
¡dout
, "†0 in£¹ cÁ: %zu\n", 
l0_š£¹_út_tÙ®
.
	`lßd
());

894 
	}
}

896 
	gLi¡DB
::
	$Clo£
() {

897 
¡İ_
 = 
Œue
;

898 ià(
bg_th»ad_
.
	`jošabË
()) {

899 
bg_th»ad_
.
	`još
();

902 
i
 = 0; i < 
kNumWÜk”s
; i++) {

903 
wÜk”_d©a_
[
i
].
¡İ
 = 
Œue
;

904 
wÜk”_d©a_
[
i
].
cv
.
	`nÙify_Úe
();

905 ià(
wÜk”_th»ads_
[
i
].
	`jošabË
()) {

906 
wÜk”_th»ads_
[
i
].
	`još
();

911 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
mu_
);

912 autØ
»pÜ‹r
 = 
»pÜ‹r_
.
	`lßd
();

913 ià(
»pÜ‹r
 !ğ
nuÎ±r
) {

914 
d–‘e
 
»pÜ‹r_
;

919 
i
 = 0; i < 
kNumSh¬ds
; i++) {

920 
j
 = 0; j < 
kNumRegiÚs
; j++) {

921 
d–‘e
 
log_
[
j
][
i
];

925 
Pmem
::
	`CË¬
();

926 
	}
}

928 
	gLi¡DB
::
	$Wa™FÜSbËS‹
() {

931 
	}
}

933 
R•Ü‹r
* 
	gLi¡DB
::
	$G‘OrC»©eR•Ü‹r
(cÚ¡ 
¡d
::
¡ršg
& 
âame
) {

934 autØ
rv
 = 
»pÜ‹r_
.
	`lßd
();

935 ià(
rv
 =ğ
nuÎ±r
) {

936 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

937 
rv
 = 
»pÜ‹r_
.
	`lßd
();

938 ià(
rv
 =ğ
nuÎ±r
) {

939 
rv
 = 
Ãw
 
	`R•Ü‹r
(
âame
);

940 
»pÜ‹r_
.
	`¡Üe
(
rv
);

943  
rv
;

944 
	}
}

946 
	gLi¡DB
::
	$S‘L0Com·ùiÚScheduËrStus
(cÚ¡ 
S”viûStus
& 
¡©us
) {

947 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`gu¬d
(
wq_mu_
);

948 
l0_com·ùiÚ_scheduËr_¡©us_
 = 
¡©us
;

949 
	}
}

951 
	gLi¡DB
::
	$BackgroundTh»adLoİ
() {

953 
	`numa_run_Ú_node
(0);

955 cÚ¡ 
kWÜk”QueueD•th
 = 2;

956 
¡d
::
veùÜ
<> 
	`num_assigÃd_sks
(
kNumWÜk”s
);

957 
¡d
::
unÜd”ed_m­
<
Task
*, > 
sk_to_wÜk”
;

958 
¡d
::
deque
<
Task
*> 
membË_æush_»que¡s
;

959 
¡d
::
deque
<
Task
*> 
l0_com·ùiÚ_»que¡s
;

960 
¡d
::
veùÜ
<> 
	`l0_com·ùiÚ_¡©e
(
kNumSh¬ds
);

961 
	sReqCompCouÁ”
 {

962 
size_t
 
»q_út
 = 0;

963 
size_t
 
comp_út
 = 0;

965 
¡d
::
m­
<
TaskTy³
, 
ReqCompCouÁ”
> 
»q_comp_út
;

966 
»q_comp_út
.
	`em¶aû
(
TaskTy³
::
kMemTabËFlush
, 
	`ReqCompCouÁ”
());

968 
Œue
) {

969 
¡d
::
deque
<
Task
*> 
Ãw_wÜk_»que¡s
;

970 
¡d
::
deque
<
Task
*> 
wÜk_com¶‘iÚs
;

971 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
wq_mu_
);

972 
boŞ
 
scheduË_l0_com·ùiÚ
;

973 
wq_cv_
.
	`wa™_fÜ
(
lk
, 
¡d
::
chrÚo
::
	`£cÚds
(1), [&]{

975  !
wÜk_»que¡_queue_
.
	`em±y
(è|| !
membË_æush_»que¡s
.empty();

977 
Ãw_wÜk_»que¡s
.
	`sw­
(
wÜk_»que¡_queue_
);

978 
wÜk_com¶‘iÚs
.
	`sw­
(
wÜk_com¶‘iÚ_queue_
);

979 
scheduË_l0_com·ùiÚ
 = (
l0_com·ùiÚ_scheduËr_¡©us_
 =ğ
S”viûStus
::
kAùive
);

980 
lk
.
	`uÆock
();

982 auto& 
sk
 : 
wÜk_com¶‘iÚs
) {

983 autØ
™
 = 
sk_to_wÜk”
.
	`fšd
(
sk
);

984 
wÜk”_id
 = 
™
->
£cÚd
;

985 
sk_to_wÜk”
.
	`”a£
(
™
);

986 ià(
sk
->
ty³
 =ğ
TaskTy³
::
kL0Com·ùiÚ
) {

987 
l0_com·ùiÚ_¡©e
[
sk
->
sh¬d
] = 0;

989 
num_assigÃd_sks
[
wÜk”_id
]--;

990 
»q_comp_út
[
sk
->
ty³
].
comp_út
++;

991 
d–‘e
 
sk
;

994 auto& 
sk
 : 
Ãw_wÜk_»que¡s
) {

995 ià(
sk
->
ty³
 =ğ
TaskTy³
::
kMemTabËFlush
) {

996 
membË_æush_»que¡s
.
	`push_back
(
sk
);

998 
	`årštf
(
¡dout
, "unknowÀsk„eque¡: %d\n", (è
sk
->
ty³
);

999 
	`ex™
(1);

1001 
»q_comp_út
[
sk
->
ty³
].
»q_út
++;

1003 ià(
scheduË_l0_com·ùiÚ
) {

1004 
i
 = 0; i < 
kNumSh¬ds
; i++) {

1005 ià(
l0_com·ùiÚ_¡©e
[
i
] == 0) {

1006 autØ

 = 
Î_
[
i
]->
	`G‘TabËLi¡
(0);

1007 autØ
bË
 = 

->
	`G‘FrÚt
();

1008 
Œue
) {

1009 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

1010 ià(
Ãxt_bË
) {

1011 
bË
 = 
Ãxt_bË
;

1016 ià(
bË
->
	`ty³
(è=ğ
TabËTy³
::
kPmemTabË
) {

1017 autØ
sk
 = 
Ãw
 
	`L0Com·ùiÚTask
();

1018 
sk
->
ty³
 = 
TaskTy³
::
kL0Com·ùiÚ
;

1019 
sk
->
sh¬d
 = 
i
;

1020 
sk
->
l0
 = (
PmemTabË
*è
bË
;

1021 
sk
->
membË_li¡
 = (
MemTabËLi¡
*è

;

1022 
l0_com·ùiÚ_¡©e
[
i
] = 1;

1023 
l0_com·ùiÚ_»que¡s
.
	`push_back
(
sk
);

1024 
»q_comp_út
[
sk
->
ty³
].
»q_út
++;

1030 
¡d
::
veùÜ
<
Com·ùiÚWÜk”D©a
*> 
avaabË_wÜk”s
;

1031 
i
 = 0; i < 
kNumWÜk”s
; i++) {

1032 ià(
num_assigÃd_sks
[
i
] < 
kWÜk”QueueD•th
) {

1033 
avaabË_wÜk”s
.
	`push_back
(&
wÜk”_d©a_
[
i
]);

1037 ià(!
membË_æush_»que¡s
.
	`em±y
()) {

1038 !
avaabË_wÜk”s
.
	`em±y
(è&& !
membË_æush_»que¡s
.empty()) {

1039 
¡d
::
	`sÜt
(
avaabË_wÜk”s
.
	`begš
(),‡vaabË_wÜk”s.
	`’d
(), [&]×uto& 
a
,‡uto& 
b
) {

1040  
num_assigÃd_sks
[
a
->
id
] >‚um_assigÃd_sks[
b
->id];

1042 auto& 
wÜk”
 = 
avaabË_wÜk”s
.
	`back
();

1043 auto& 
sk
 = 
membË_æush_»que¡s
.
	`äÚt
();

1044 
membË_æush_»que¡s
.
	`pİ_äÚt
();

1045 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`wlk
(
wÜk”
->
mu
);

1046 
wÜk”
->
q
.
	`push
(
sk
);

1047 
wlk
.
	`uÆock
();

1048 
wÜk”
->
cv
.
	`nÙify_Úe
();

1049 
sk_to_wÜk”
[
sk
] = 
wÜk”
->
id
;

1050 
num_assigÃd_sks
[
wÜk”
->
id
]++;

1051 ià(
num_assigÃd_sks
[
wÜk”
->
id
] >ğ
kWÜk”QueueD•th
) {

1052 
avaabË_wÜk”s
.
	`pİ_back
();

1055 #ifdeà
L0_COMPACTION_ON_IDLE


1066 #iâdeà
LISTDB_NO_L0_COMPACTION


1067 !
avaabË_wÜk”s
.
	`em±y
(è&& !
l0_com·ùiÚ_»que¡s
.empty()) {

1068 
¡d
::
	`sÜt
(
avaabË_wÜk”s
.
	`begš
(),‡vaabË_wÜk”s.
	`’d
(), [&]×uto& 
a
,‡uto& 
b
) {

1069  
num_assigÃd_sks
[
a
->
id
] >‚um_assigÃd_sks[
b
->id];

1071 auto& 
wÜk”
 = 
avaabË_wÜk”s
.
	`back
();

1072 auto& 
sk
 = 
l0_com·ùiÚ_»que¡s
.
	`äÚt
();

1073 
l0_com·ùiÚ_»que¡s
.
	`pİ_äÚt
();

1075 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`wlk
(
wÜk”
->
mu
);

1076 
wÜk”
->
q
.
	`push
(
sk
);

1077 
wlk
.
	`uÆock
();

1078 
wÜk”
->
cv
.
	`nÙify_Úe
();

1080 
sk_to_wÜk”
[
sk
] = 
wÜk”
->
id
;

1081 
num_assigÃd_sks
[
wÜk”
->
id
]++;

1082 
l0_com·ùiÚ_¡©e
[
sk
->
sh¬d
] = 2;

1083 ià(
num_assigÃd_sks
[
wÜk”
->
id
] >ğ
kWÜk”QueueD•th
) {

1084 
avaabË_wÜk”s
.
	`pİ_back
();

1089 ià(
¡İ_
) {

1090 
	`årštf
(
¡dout
, "bghreaderminating\n");

1094 
	}
}

1096 
	gLi¡DB
::
	$Com·ùiÚWÜk”Th»adLoİ
(
Com·ùiÚWÜk”D©a
* 
td
) {

1097 
td
->
ºd
.
	`Re£t
(Ñd->
id
 + 1) * (td->id + 1));

1098 
Œue
) {

1099 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
td
->
mu
);

1100 
td
->
cv
.
	`wa™
(
lk
, [&]{ d->
¡İ
 || !td->
q
.
	`em±y
(); });

1101 ià(
td
->
¡İ
) {

1104 autØ
sk
 = 
td
->
q
.
	`äÚt
();

1105 
td
->
q
.
	`pİ
();

1106 
td
->
cu¼’t_sk
 = 
sk
;

1107 
lk
.
	`uÆock
();

1109 ià(
sk
->
ty³
 =ğ
TaskTy³
::
kMemTabËFlush
) {

1110 #iâdeà
LISTDB_WAL


1111 
	`FlushMemTabË
((
MemTabËFlushTask
*è
sk
, 
td
);

1113 
	`FlushMemTabËWAL
((
MemTabËFlushTask
*è
sk
, 
td
);

1115 
td
->
cu¼’t_sk
 = 
nuÎ±r
;

1116 } ià(
sk
->
ty³
 =ğ
TaskTy³
::
kL0Com·ùiÚ
) {

1117 
	`Z³rCom·ùiÚL0
(
td
, (
L0Com·ùiÚTask
*è
sk
);

1119 
td
->
cu¼’t_sk
 = 
nuÎ±r
;

1121 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`bg_lk
(
wq_mu_
);

1122 
wÜk_com¶‘iÚ_queue_
.
	`push_back
(
sk
);

1123 
bg_lk
.
	`uÆock
();

1124 
wq_cv_
.
	`nÙify_Úe
();

1126 
	}
}

1134 
šlše
 
MemTabË
* 
	gLi¡DB
::
	$G‘Wr™abËMemTabË
(
size_t
 
kv_size
, 
sh¬d
) {

1135 autØ

 = 
Î_
[
sh¬d
]->
	`G‘TabËLi¡
(0);

1136 autØ
mem
 = 

->
	`G‘MubË
(
kv_size
);

1137  (
MemTabË
*è
mem
;

1138 
	}
}

1140 
šlše
 
MemTabË
* 
	gLi¡DB
::
	$G‘MemTabË
(
sh¬d
) {

1141 autØ

 = 
Î_
[
sh¬d
]->
	`G‘TabËLi¡
(0);

1142 autØ
mem
 = 

->
	`G‘FrÚt
();

1143  (
MemTabË
*è
mem
;

1144 
	}
}

1146 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


1147 
šlše
 
Sim¶eHashTabË
* 
	gLi¡DB
::
	$G‘HashTabË
(
sh¬d
) {

1149  
hash_bË_
[0];

1150 
	}
}

1151 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


1152 
šlše
 
SticHashTabËCache
* 
	gLi¡DB
::
	$G‘HashTabË
(
sh¬d
) {

1153  
hash_bË_
[
sh¬d
];

1154 
	}
}

1155 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


1156 
šlše
 
DoubËHashšgCache
* 
	gLi¡DB
::
	$G‘HashTabË
(
sh¬d
) {

1157  
hash_bË_
[
sh¬d
];

1158 
	}
}

1159 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


1160 
šlše
 
Lš—rProbšgHashTabËCache
* 
	gLi¡DB
::
	$G‘HashTabË
(
sh¬d
) {

1161  
hash_bË_
[
sh¬d
];

1162 
	}
}

1165 
šlše
 
TabËLi¡
* 
	gLi¡DB
::
	$G‘TabËLi¡
(
Ëv–
, 
sh¬d
) {

1166 autØ

 = 
Î_
[
sh¬d
]->
	`G‘TabËLi¡
(
Ëv–
);

1167  

;

1168 
	}
}

1170 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1171 
šlše
 
T
* 
	gLi¡DB
::
	$G‘TabËLi¡
(
Ëv–
, 
sh¬d
) {

1172 autØ

 = 
Î_
[
sh¬d
]->
	`G‘TabËLi¡
(
Ëv–
);

1173  (
T
*è

;

1174 
	}
}

1176 
	gLi¡DB
::
	$FlushMemTabË
(
MemTabËFlushTask
* 
sk
, 
Com·ùiÚWÜk”D©a
* 
td
) {

1177 #ià
LISTDB_FLUSH_MEMTABLE_TO_L1
 == 1

1178 
	`årštf
(
¡dout
, "FlushMemTableToL1 is‚ot implemented for IUL.\n");

1179 
	`abÜt
();

1181 ià(
sk
->
sh¬d
 =ğ0è
	`årštf
(
¡dout
, "FlushMemTabË: %p\n",ask->
imm
);

1183 
sk
->
imm
->
	`w_RefCouÁ
() > 0) {

1189 
B¿idedPmemSkLi¡
* 
l0_skli¡
 = 
Ãw
 
	`B¿idedPmemSkLi¡
();

1190 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1191 auto& 
¬’a
 = 
log_
[
i
][
sk
->
sh¬d
];

1192 
l0_skli¡
->
	`BšdA»Ç
(
¬’a
->
	`poŞ_id
(),‡rena);

1194 
l0_skli¡
->
	`In™
();

1196 autØ
l0_skli¡
 = 
sk
->
imm
->
	`l0_skli¡
();

1199 autØ
skli¡
 = 
sk
->
imm
->
	`skli¡
();

1200 autØ
mem_node
 = 
skli¡
->
	`h—d
();

1201 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1203 
usšg
 
Node
 = 
PmemNode
;

1204 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

1205 
Node
* 
´ed
;

1206 
´ed
 = 
l0_skli¡
->
	`h—d
(
l0_¬’a_
[0][0]->
	`poŞ_id
());

1207 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1208 
poŞ_id
 = 
l0_¬’a_
[
i
][0]->
	`poŞ_id
();

1209 
j
 = 1; j < 
kMaxHeight
; j++) {

1210 
´eds
[
i
][
j
] = 
l0_skli¡
->
	`h—d
(
poŞ_id
);

1214 #ifdeà
LISTDB_L0_CACHE


1215 autØ
hash_bË
 = 
	`G‘HashTabË
(
sk
->
sh¬d
);

1218 
ušt64_t
 
æush_út
 = 0;

1219 
ušt64_t
 
begš_miüos
 = 
Clock
::
	`NowMiüos
();

1220 
INIT_REPORTER_CLIENT
;

1221 
mem_node
) {

1223 #ifdeà
GROUP_LOGGING


1224 ((
¡d
::
©omic
<
ušt64_t
>*è&
mem_node
->
v®ue
)->
	`lßd
(¡d::
memÜy_Üd”_»Ïxed
) == 0) ;

1226 
poŞ_id
 = ((
PmemPŒ
*è&
mem_node
->
v®ue
)->
	`poŞ_id
();

1227 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
poŞ_id
];

1228 
Node
* 
node
 = ((
PmemPŒ
*è&
mem_node
->
v®ue
)->
g‘
<Node>();

1229 
height
 = 
node
->
	`height
();

1230 
i
 = 1; i < 
height
; i++) {

1232 
´eds
[
»giÚ
][
i
]->
Ãxt
[i] = 
mem_node
->
v®ue
;

1233 
´eds
[
»giÚ
][
i
] = ((
PmemPŒ
*è&Õ»ds[»giÚ][i]->
Ãxt
[i]))->
g‘
<
Node
>();

1235 
´ed
->
Ãxt
[0] = 
mem_node
->
v®ue
;

1236 
´ed
 = ((
PmemPŒ
*è&Õ»d->
Ãxt
[0]))->
g‘
<
Node
>();

1238 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


1239 
hash_bË
->
	`Add
(
mem_node
->
key
, mem_node->
v®ue
);

1240 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


1241 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1242 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


1243 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1244 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


1245 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1248 
	`REPORT_FLUSH_OPS
(1);

1249 
æush_út
++;

1252 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1254 
REPORT_DONE
;

1255 
ušt64_t
 
’d_miüos
 = 
Clock
::
	`NowMiüos
();

1256 
td
->
æush_út
 += flush_cnt;

1257 
td
->
æush_time_u£c
 +ğ(
’d_miüos
 - 
begš_miüos
);

1259 
PmemTabË
* 
l0_bË
 = 
Ãw
 
	`PmemTabË
(
kMemTabËC­ac™y
, 
l0_skli¡
);

1260 
l0_bË
->
	`S‘Mªiã¡
(
sk
->
imm
->
	`l0_mªiã¡
());

1261 
sk
->
imm
->
	`S‘P”si¡’tTabË
((
TabË
*è
l0_bË
);

1264 
sk
->
membË_li¡
->
	`CËªUpFlushedImmubËs
();

1265 
	}
}

1267 
	gLi¡DB
::
	$FlushMemTabËToL1WAL
(
MemTabËFlushTask
* 
sk
, 
Com·ùiÚWÜk”D©a
* 
td
) {

1268 ià(
sk
->
sh¬d
 =ğ0è
	`årštf
(
¡dout
, "MemTable -> L1\n");

1270 
sk
->
imm
->
	`w_RefCouÁ
() > 0) {

1274 autØ
l1_
 = 
Î_
[
sk
->
sh¬d
]->
	`G‘TabËLi¡
(1);

1275 autØ
l1_bË
 = (
PmemTabË
*è
l1_
->
	`G‘FrÚt
();

1276 autØ
l1_skli¡
 = 
l1_bË
->
	`skli¡
();

1278 autØ
skli¡
 = 
sk
->
imm
->
	`skli¡
();

1279 autØ
mem_node
 = 
skli¡
->
	`h—d
();

1280 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1282 
usšg
 
Node
 = 
PmemNode
;

1283 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

1284 
ušt64_t
 
succs
[
kNumRegiÚs
][
kMaxHeight
];

1287 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1288 
poŞ_id
 = 
l1_¬’a_
[
i
][0]->
	`poŞ_id
();

1289 
j
 = 0; j < 
kMaxHeight
; j++) {

1290 
´eds
[
i
][
j
] = 
l1_skli¡
->
	`h—d
(
poŞ_id
);

1291 
succs
[
i
][
j
] = 0;

1295 
ušt64_t
 
æush_út
 = 0;

1296 
ušt64_t
 
begš_miüos
 = 
Clock
::
	`NowMiüos
();

1297 
INIT_REPORTER_CLIENT
;

1298 
mem_node
) {

1299 
mem_v®ue_poŞ_id
 = ((
PmemPŒ
*è&
mem_node
->
v®ue
)->
	`poŞ_id
();

1300 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
mem_v®ue_poŞ_id
];

1304 autØ
ºd
 = 
Rªdom
::
	`G‘TLSIn¡ªû
();

1305 cÚ¡ 
kB¿nchšg
 = 4;

1306 
height
 = 1;

1307 
height
 < 
kMaxHeight
 && ((
ºd
->
	`Next
(è% 
kB¿nchšg
) == 0)) {

1308 
height
++;

1312 
PmemPŒ
 
cu¼_·ddr
 = 
´eds
[
»giÚ
][
height
 - 1]->
Ãxt
[height - 1];

1313 
i
 = 
height
 - 1; i > 0; i--) {

1314 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1315 
cu¼
) {

1316 ià(
cu¼
->
key
.
	`Com·»
(
mem_node
->key) < 0) {

1317 
´eds
[
»giÚ
][
i
] = 
cu¼
;

1318 
cu¼_·ddr
 = 
cu¼
->
Ãxt
[
i
];

1319 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1324 
succs
[
»giÚ
][
i
] = 
cu¼_·ddr
.
	`dump
();

1327 
PmemPŒ
 
cu¼_·ddr
 = 
´eds
[0][0]->
Ãxt
[0];

1328 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1329 
cu¼
) {

1330 ià(
cu¼
->
key
.
	`Com·»
(
mem_node
->key) < 0) {

1331 
´eds
[0][0] = 
cu¼
;

1332 
cu¼_·ddr
 = 
cu¼
->
Ãxt
[0];

1333 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1338 
succs
[0][0] = 
cu¼_·ddr
.
	`dump
();

1342 
size_t
 
node_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

1343 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
mem_v®ue_poŞ_id
);

1344 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
p_buf
;

1345 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
p_buf
, 
node_size
);

1346 
Node
* 
node
 = (
PmemNode
*è
p_buf
.
	`g‘
();

1347 
PmemPŒ
 
node_·ddr
 = 
	`PmemPŒ
(
mem_v®ue_poŞ_id
, ((
ušŒ_t
è
node
 - (ušŒ_tè
poŞ
.
	`hªdË
()));

1348 
node
->
g
 = 
height
;

1349 
node
->
v®ue
 = 
mem_node
->value;

1350 
node
->
Ãxt
[0] = 
succs
[0][0];

1351 
i
 = 1; i < 
height
; i++) {

1352 
node
->
Ãxt
[
i
] = 
succs
[
»giÚ
][i];

1354 
node
->
key
 = 
mem_node
->key;

1355 
	`şwb
(
node
, 
node_size
);

1356 
	`_mm_sãnû
();

1357 
´eds
[0][0]->
Ãxt
[0] = 
node_·ddr
.
	`dump
();

1358 
	`şwb
(&(
´eds
[0][0]->
Ãxt
[0]), 8);

1359 
	`_mm_sãnû
();

1360 
i
 = 1 ;˜< 
height
; i++) {

1361 
´eds
[
»giÚ
][
i
]->
Ãxt
[i] = 
node_·ddr
.
	`dump
();

1364 autØ
ºd
 = 
Rªdom
::
	`G‘TLSIn¡ªû
();

1365 cÚ¡ 
kB¿nchšg
 = 4;

1366 
height
 = 1;

1367 
height
 < 
kMaxHeight
 && ((
ºd
->
	`Next
(è% 
kB¿nchšg
) == 0)) {

1368 
height
++;

1370 
size_t
 
node_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

1371 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
mem_v®ue_poŞ_id
);

1372 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
p_buf
;

1373 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
p_buf
, 
node_size
);

1374 
Node
* 
node
 = (
PmemNode
*è
p_buf
.
	`g‘
();

1375 
PmemPŒ
 
node_·ddr
 = 
	`PmemPŒ
(
mem_v®ue_poŞ_id
, ((
ušŒ_t
è
node
 - (ušŒ_tè
poŞ
.
	`hªdË
()));

1376 
node
->
g
 = 
height
;

1377 
node
->
v®ue
 = 
mem_node
->value;

1378 
	`_mm_sãnû
();

1379 
node
->
key
 = 
mem_node
->key;

1380 
	`şwb
(
node
, (
PmemNode
è- (
ušt64_t
));

1381 
l1_skli¡
->
	`In£¹
(
node_·ddr
);

1383 
	`REPORT_FLUSH_OPS
(1);

1384 
æush_út
++;

1387 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1389 
REPORT_DONE
;

1390 
ušt64_t
 
’d_miüos
 = 
Clock
::
	`NowMiüos
();

1391 
td
->
æush_út
 += flush_cnt;

1392 
td
->
æush_time_u£c
 +ğ(
’d_miüos
 - 
begš_miüos
);

1394 
sk
->
imm
->
	`S‘P”si¡’tTabË
((
TabË
*è
l1_bË
);

1397 
sk
->
membË_li¡
->
	`CËªUpFlushedImmubËs
();

1398 
	}
}

1400 
	gLi¡DB
::
	$FlushMemTabËWAL
(
MemTabËFlushTask
* 
sk
, 
Com·ùiÚWÜk”D©a
* 
td
) {

1401 #ià
LISTDB_FLUSH_MEMTABLE_TO_L1
 == 1

1402  
	`FlushMemTabËToL1WAL
(
sk
, 
td
);

1404 ià(
sk
->
sh¬d
 =ğ0è
	`årštf
(
¡dout
, "FlushMemTabË: %p\n",ask->
imm
);

1406 
sk
->
imm
->
	`w_RefCouÁ
() > 0) {

1411 autØ
l0_skli¡
 = 
sk
->
imm
->
	`l0_skli¡
();

1413 autØ
skli¡
 = 
sk
->
imm
->
	`skli¡
();

1414 autØ
mem_node
 = 
skli¡
->
	`h—d
();

1415 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1417 
usšg
 
Node
 = 
PmemNode
;

1418 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

1419 
Node
* 
´ed
;

1420 
´ed
 = 
l0_skli¡
->
	`h—d
(
l0_¬’a_
[0][0]->
	`poŞ_id
());

1421 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1422 
poŞ_id
 = 
l0_¬’a_
[
i
][0]->
	`poŞ_id
();

1423 
j
 = 1; j < 
kMaxHeight
; j++) {

1424 
´eds
[
i
][
j
] = 
l0_skli¡
->
	`h—d
(
poŞ_id
);

1428 #ifdeà
LISTDB_L0_CACHE


1429 autØ
hash_bË
 = 
	`G‘HashTabË
(
sk
->
sh¬d
);

1432 
ušt64_t
 
æush_út
 = 0;

1433 
ušt64_t
 
begš_miüos
 = 
Clock
::
	`NowMiüos
();

1434 
INIT_REPORTER_CLIENT
;

1435 
mem_node
) {

1437 #ifdeà
GROUP_LOGGING


1438 ((
¡d
::
©omic
<
ušt64_t
>*è&
mem_node
->
v®ue
)->
	`lßd
(¡d::
memÜy_Üd”_»Ïxed
) == 0) ;

1440 
mem_v®ue_poŞ_id
 = ((
PmemPŒ
*è&
mem_node
->
v®ue
)->
	`poŞ_id
();

1441 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
mem_v®ue_poŞ_id
];

1443 autØ
ºd
 = 
Rªdom
::
	`G‘TLSIn¡ªû
();

1445 #ià
	`defšed
(
LISTDB_L1_LRU
è|| defšed(
LISTDB_SKIPLIST_CACHE
)

1446 cÚ¡ 
kB¿nchšg
 = 2;

1448 cÚ¡ 
kB¿nchšg
 = 4;

1450 
height
 = 1;

1451 ià(
ºd
->
	`Next
(è% 
¡d
::
max
<>(1, (
kB¿nchšg
 / 
kNumRegiÚs
)) == 0) {

1452 
height
++;

1453 
height
 < 
kMaxHeight
 && ((
ºd
->
	`Next
(è% 
kB¿nchšg
) == 0)) {

1454 
height
++;

1458 
size_t
 
node_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

1461 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
mem_v®ue_poŞ_id
);

1462 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
p_buf
;

1463 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
p_buf
, 
node_size
);

1464 
Node
* 
node
 = (
PmemNode
*è
p_buf
.
	`g‘
();

1465 
PmemPŒ
 
node_·ddr
 = 
	`PmemPŒ
(
mem_v®ue_poŞ_id
, ((
ušŒ_t
è
node
 - (ušŒ_tè
poŞ
.
	`hªdË
()));

1467 
node
->
g
 = 
height
;

1468 
node
->
v®ue
 = 
mem_node
->value;

1469 
	`_mm_sãnû
();

1470 
node
->
key
 = 
mem_node
->key;

1471 
	`şwb
(
node
, (
PmemNode
è- (
ušt64_t
));

1473 
´ed
->
Ãxt
[0] = 
node_·ddr
.
	`dump
();

1474 
	`_mm_sãnû
();

1475 
	`şwb
(&
´ed
->
Ãxt
[0], 8);

1476 
i
 = 1; i < 
height
; i++) {

1478 
´eds
[
»giÚ
][
i
]->
Ãxt
[i] = 
node_·ddr
.
	`dump
();

1479 
´eds
[
»giÚ
][
i
] = ((
PmemPŒ
*è&Õ»ds[»giÚ][i]->
Ãxt
[i]))->
g‘
<
Node
>();

1481 
´ed
 = ((
PmemPŒ
*è&Õ»d->
Ãxt
[0]))->
g‘
<
Node
>();

1483 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


1484 
hash_bË
->
	`Add
(
mem_node
->
key
, mem_node->
v®ue
);

1485 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


1486 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1487 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


1488 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1489 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


1490 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1493 
	`REPORT_FLUSH_OPS
(1);

1494 
æush_út
++;

1497 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1499 
REPORT_DONE
;

1500 
ušt64_t
 
’d_miüos
 = 
Clock
::
	`NowMiüos
();

1501 
td
->
æush_út
 += flush_cnt;

1502 
td
->
æush_time_u£c
 +ğ(
’d_miüos
 - 
begš_miüos
);

1504 
PmemTabË
* 
l0_bË
 = 
Ãw
 
	`PmemTabË
(
kMemTabËC­ac™y
, 
l0_skli¡
);

1505 
l0_bË
->
	`S‘Mªiã¡
(
sk
->
imm
->
	`l0_mªiã¡
());

1506 
sk
->
imm
->
	`S‘P”si¡’tTabË
((
TabË
*è
l0_bË
);

1509 
sk
->
membË_li¡
->
	`CËªUpFlushedImmubËs
();

1510 
	}
}

1512 
	gLi¡DB
::
	$Mªu®FlushMemTabË
(
sh¬d
) {

1513 #iâdeà
LISTDB_WAL


1514 autØ

 = 
»š‹½»t_ÿ¡
<
MemTabËLi¡
*>(
Î_
[
sh¬d
]->
	`G‘TabËLi¡
(0));

1516 autØ
bË
 = 

->
	`G‘FrÚt
();

1517 autØ
bË2
 = 
bË
->
	`Next
();

1519 ià(
bË
->
	`ty³
(è!ğ
TabËTy³
::
kMemTabË
 || (
bË2
 !ğ
nuÎ±r
 &&abË2->ty³(è!ğTabËTy³::
kPmemTabË
)) {

1520 
	`årštf
(
¡dout
, "ManualFlushMemTable failed\n");

1524 

->
	`C»©eNewFrÚt
();

1527 autØ
l0_skli¡
 = 
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`l0_skli¡
();

1529 autØ
skli¡
 = 
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`skli¡
();

1530 autØ
mem_node
 = 
skli¡
->
	`h—d
();

1531 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1533 
usšg
 
Node
 = 
PmemNode
;

1534 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

1535 
Node
* 
´ed
;

1536 
´ed
 = 
l0_skli¡
->
	`h—d
(
l0_¬’a_
[0][0]->
	`poŞ_id
());

1537 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1538 
poŞ_id
 = 
l0_¬’a_
[
i
][0]->
	`poŞ_id
();

1539 
j
 = 1; j < 
kMaxHeight
; j++) {

1540 
´eds
[
i
][
j
] = 
l0_skli¡
->
	`h—d
(
poŞ_id
);

1544 #ifdeà
LISTDB_L0_CACHE


1545 autØ
hash_bË
 = 
	`G‘HashTabË
(
sh¬d
);

1548 
INIT_REPORTER_CLIENT
;

1549 
mem_node
) {

1550 #ifdeà
GROUP_LOGGING


1551 ((
¡d
::
©omic
<
ušt64_t
>*è&
mem_node
->
v®ue
)->
	`lßd
(¡d::
memÜy_Üd”_»Ïxed
) == 0) ;

1553 
poŞ_id
 = ((
PmemPŒ
*è&
mem_node
->
v®ue
)->
	`poŞ_id
();

1554 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
poŞ_id
];

1555 
Node
* 
node
 = ((
PmemPŒ
*è&
mem_node
->
v®ue
)->
g‘
<Node>();

1556 
height
 = 
node
->
	`height
();

1557 
i
 = 1; i < 
height
; i++) {

1558 
´eds
[
»giÚ
][
i
]->
Ãxt
[i] = 
mem_node
->
v®ue
;

1559 
´eds
[
»giÚ
][
i
] = ((
PmemPŒ
*è&Õ»ds[»giÚ][i]->
Ãxt
[i]))->
g‘
<
Node
>();

1561 
´ed
->
Ãxt
[0] = 
mem_node
->
v®ue
;

1562 
´ed
 = ((
PmemPŒ
*è&Õ»d->
Ãxt
[0]))->
g‘
<
Node
>();

1564 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


1565 
hash_bË
->
	`Add
(
mem_node
->
key
, mem_node->
v®ue
);

1566 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


1567 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1568 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


1569 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1570 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


1571 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1574 
	`REPORT_FLUSH_OPS
(1);

1577 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1579 
REPORT_DONE
;

1581 
PmemTabË
* 
l0_bË
 = 
Ãw
 
	`PmemTabË
(
kMemTabËC­ac™y
, 
l0_skli¡
);

1582 
l0_bË
->
	`S‘Mªiã¡
(
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`l0_mªiã¡
());

1583 
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`S‘P”si¡’tTabË
((
TabË
*è
l0_bË
);

1585 

->
	`CËªUpFlushedImmubËs
();

1588 autØ

 = 
»š‹½»t_ÿ¡
<
MemTabËLi¡
*>(
Î_
[
sh¬d
]->
	`G‘TabËLi¡
(0));

1590 autØ
bË
 = 

->
	`G‘FrÚt
();

1591 autØ
bË2
 = 
bË
->
	`Next
();

1593 ià(
bË
->
	`ty³
(è!ğ
TabËTy³
::
kMemTabË
 || (
bË2
 !ğ
nuÎ±r
 &&abË2->ty³(è!ğTabËTy³::
kPmemTabË
)) {

1594 
	`årštf
(
¡dout
, "ManualFlushMemTable failed\n");

1598 

->
	`NewFrÚt
();

1601 autØ
l0_skli¡
 = 
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`l0_skli¡
();

1603 autØ
skli¡
 = 
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`skli¡
();

1604 autØ
mem_node
 = 
skli¡
->
	`h—d
();

1605 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1607 
usšg
 
Node
 = 
PmemNode
;

1608 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

1609 
Node
* 
´ed
;

1610 
´ed
 = 
l0_skli¡
->
	`h—d
(
l0_¬’a_
[0][0]->
	`poŞ_id
());

1611 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1612 
poŞ_id
 = 
l0_¬’a_
[
i
][0]->
	`poŞ_id
();

1613 
j
 = 1; j < 
kMaxHeight
; j++) {

1614 
´eds
[
i
][
j
] = 
l0_skli¡
->
	`h—d
(
poŞ_id
);

1618 #ifdeà
LISTDB_L0_CACHE


1619 autØ
hash_bË
 = 
	`G‘HashTabË
(
sh¬d
);

1622 
INIT_REPORTER_CLIENT
;

1623 
mem_node
) {

1624 #ifdeà
GROUP_LOGGING


1625 ((
¡d
::
©omic
<
ušt64_t
>*è&
mem_node
->
v®ue
)->
	`lßd
(¡d::
memÜy_Üd”_»Ïxed
) == 0) ;

1627 
mem_v®ue_poŞ_id
 = ((
PmemPŒ
*è&
mem_node
->
v®ue
)->
	`poŞ_id
();

1628 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
mem_v®ue_poŞ_id
];

1630 autØ
ºd
 = 
Rªdom
::
	`G‘TLSIn¡ªû
();

1632 #ià
	`defšed
(
LISTDB_L1_LRU
è|| defšed(
LISTDB_SKIPLIST_CACHE
)

1633 cÚ¡ 
kB¿nchšg
 = 2;

1635 cÚ¡ 
kB¿nchšg
 = 4;

1637 
height
 = 1;

1638 ià(
ºd
->
	`Next
(è% 
¡d
::
max
<>(1, (
kB¿nchšg
 / 
kNumRegiÚs
)) == 0) {

1639 
height
++;

1640 
height
 < 
kMaxHeight
 && ((
ºd
->
	`Next
(è% 
kB¿nchšg
) == 0)) {

1641 
height
++;

1645 
size_t
 
node_size
 = (
PmemNode
è+ (
height
 - 1è* (
ušt64_t
);

1648 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
mem_v®ue_poŞ_id
);

1649 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
p_buf
;

1650 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
p_buf
, 
node_size
);

1651 
Node
* 
node
 = (
PmemNode
*è
p_buf
.
	`g‘
();

1652 
PmemPŒ
 
node_·ddr
 = 
	`PmemPŒ
(
mem_v®ue_poŞ_id
, ((
ušŒ_t
è
node
 - (ušŒ_tè
poŞ
.
	`hªdË
()));

1654 
node
->
g
 = 
height
;

1655 
node
->
v®ue
 = 
mem_node
->value;

1656 
	`_mm_sãnû
();

1657 
node
->
key
 = 
mem_node
->key;

1658 
	`şwb
(
node
, (
PmemNode
è- (
ušt64_t
));

1660 
´ed
->
Ãxt
[0] = 
node_·ddr
.
	`dump
();

1661 
	`_mm_sãnû
();

1662 
	`şwb
(&
´ed
->
Ãxt
[0], 8);

1663 
i
 = 1; i < 
height
; i++) {

1664 
´eds
[
»giÚ
][
i
]->
Ãxt
[i] = 
node_·ddr
.
	`dump
();

1665 
´eds
[
»giÚ
][
i
] = ((
PmemPŒ
*è&Õ»ds[»giÚ][i]->
Ãxt
[i]))->
g‘
<
Node
>();

1667 
´ed
 = ((
PmemPŒ
*è&Õ»d->
Ãxt
[0]))->
g‘
<
Node
>();

1669 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


1670 
hash_bË
->
	`Add
(
mem_node
->
key
, mem_node->
v®ue
);

1671 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


1672 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1673 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


1674 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1675 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_LINEAR_PROBING


1676 
hash_bË
->
	`In£¹
(
mem_node
->
key
, 
node
);

1679 
	`REPORT_FLUSH_OPS
(1);

1682 
mem_node
 = mem_node->
Ãxt
[0].
	`lßd
(
MO_RELAXED
);

1684 
REPORT_DONE
;

1686 
PmemTabË
* 
l0_bË
 = 
Ãw
 
	`PmemTabË
(
kMemTabËC­ac™y
, 
l0_skli¡
);

1687 
l0_bË
->
	`S‘Mªiã¡
(
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`l0_mªiã¡
());

1688 
»š‹½»t_ÿ¡
<
MemTabË
*>(
bË
)->
	`S‘P”si¡’tTabË
((
TabË
*è
l0_bË
);

1690 

->
	`CËªUpFlushedImmubËs
();

1692 
	}
}

1694 
	gLi¡DB
::
	$Z³rCom·ùiÚL0
(
Com·ùiÚWÜk”D©a
* 
td
, 
L0Com·ùiÚTask
* 
sk
) {

1695 autØ
l0_mªiã¡
 = 
sk
->
l0
->
mªiã¡
<
pmem_l0_šfo
>();

1696 
l0_mªiã¡
->
¡©us
 = 
Lev–0Stus
::
kM”geIn™Ÿ‹d
;

1699 ià(
sk
->
sh¬d
 =ğ0è
	`årštf
(
¡dout
, "L0 compaction\n");

1700 
usšg
 
Node
 = 
PmemNode
;

1701 autØ
l0_skli¡
 = 
sk
->
l0
->
	`skli¡
();

1703 autØ
l1_
 = 
Î_
[
sk
->
sh¬d
]->
	`G‘TabËLi¡
(1);

1704 ià(
l1_
->
	`IsEm±y
()) {

1705 autØ
l1_bË
 = 
Ãw
 
	`PmemTabË
(
¡d
::
num”ic_lim™s
<
size_t
>::
	`max
(), 
l0_skli¡
);

1706 
l1_
->
	`S‘FrÚt
(
l1_bË
);

1707 autØ
bË
 = 
sk
->
membË_li¡
->
	`G‘FrÚt
();

1708 
Œue
) {

1709 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

1710 ià(
Ãxt_bË
) {

1711 ià(
Ãxt_bË
 =ğ(
TabË
*è
sk
->
l0
) {

1712 
bË
->
	`S‘Next
(
nuÎ±r
);

1715 
bË
 = 
Ãxt_bË
;

1722 autØ
l1_skli¡
 = ((
PmemTabË
*è
l1_
->
	`G‘FrÚt
())->
	`skli¡
();

1724 
	sZ³rI‹m
 {

1725 
PmemPŒ
 
node_·ddr
;

1726 
Node
* 
´eds
[
kMaxHeight
];

1727 
ušt64_t
 
succs
[
kMaxHeight
];

1730 
¡d
::
¡ack
<
Z³rI‹m
*> 
z¡ack
;

1731 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

1732 
ušt64_t
 
succs
[
kNumRegiÚs
][
kMaxHeight
];

1733 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1734 
poŞ_id
 = 
l1_¬’a_
[
i
][0]->
	`poŞ_id
();

1735 
j
 = 0; j < 
kMaxHeight
; j++) {

1736 
´eds
[
i
][
j
] = 
l1_skli¡
->
	`h—d
(
poŞ_id
);

1737 
succs
[
i
][
j
] = 0;

1741 
PmemPŒ
 
node_·ddr
 = 
l0_skli¡
->
	`h—d_·ddr
();

1744 
Œue
) {

1745 
¡d
::
this_th»ad
::
	`y›ld
();

1746 autØ
l0_node
 = 
node_·ddr
.
g‘
<
Node
>();

1747 ià(
l0_node
 =ğ
nuÎ±r
) {

1750 
poŞ_id
 = 
node_·ddr
.
	`poŞ_id
();

1751 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
poŞ_id
];

1752 
height
 = 
l0_node
->
	`height
();

1753 
PmemPŒ
 
cu¼_·ddr
 = 
´eds
[
»giÚ
][
height
 - 1]->
Ãxt
[height - 1];

1754 
i
 = 
height
 - 1; i > 0; i--) {

1755 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1756 
cu¼
) {

1757 ià(
cu¼
->
key
.
	`Com·»
(
l0_node
->key) < 0) {

1758 
´eds
[
»giÚ
][
i
] = 
cu¼
;

1759 
cu¼_·ddr
 = 
cu¼
->
Ãxt
[
i
];

1760 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1765 
succs
[
»giÚ
][
i
] = 
cu¼_·ddr
.
	`dump
();

1768 
PmemPŒ
 
cu¼_·ddr
 = 
´eds
[0][0]->
Ãxt
[0];

1769 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1770 
cu¼
) {

1771 ià(
cu¼
->
key
.
	`Com·»
(
l0_node
->key) < 0) {

1772 
´eds
[0][0] = 
cu¼
;

1773 
cu¼_·ddr
 = 
cu¼
->
Ãxt
[0];

1774 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1779 
succs
[0][0] = 
cu¼_·ddr
.
	`dump
();

1781 autØ
z
 = 
Ãw
 
	`Z³rI‹m
();

1782 
z
->
node_·ddr
 =‚ode_paddr;

1783 
z
->
´eds
[0] =…reds[0][0];

1784 
i
 = 1; i < 
kMaxHeight
; i++) {

1785 
z
->
´eds
[
i
] =…»ds[
»giÚ
][i];

1787 
z
->
succs
[0] = succs[0][0];

1788 
i
 = 1; i < 
kMaxHeight
; i++) {

1789 
z
->
succs
[
i
] = succs[
»giÚ
][i];

1791 
z¡ack
.
	`push
(
z
);

1792 
node_·ddr
 = 
l0_node
->
Ãxt
[0];

1800 !
z¡ack
.
	`em±y
()) {

1801 
¡d
::
this_th»ad
::
	`y›ld
();

1802 auto& 
z
 = 
z¡ack
.
	`tİ
();

1803 autØ
l0_node
 = 
z
->
node_·ddr
.
g‘
<
Node
>();

1819 autØ
l0_succ
 = ((
PmemPŒ
*è&(
l0_node
->
Ãxt
[0]))->
g‘
<
Node
>();

1820 autØ
l1_succ
 = ((
PmemPŒ
*è&(
z
->
succs
[0]))->
g‘
<
Node
>();

1821 ià(
l0_succ
 =ğ
nuÎ±r
 || (
l1_succ
 &&†1_succ->
key
.
	`Com·»
(l0_succ->key) < 0)) {

1822 
l0_node
->
Ãxt
[0] = 
z
->
succs
[0];

1824 
z
->
´eds
[0]->
Ãxt
[0] = z->
node_·ddr
.
	`dump
();

1826 
i
 = 1; i < 
l0_node
->
	`height
(); i++) {

1827 autØ
l0_succ
 = ((
PmemPŒ
*è&(
l0_node
->
Ãxt
[
i
]))->
g‘
<
Node
>();

1828 autØ
l1_succ
 = ((
PmemPŒ
*è&(
z
->
succs
[
i
]))->
g‘
<
Node
>();

1829 ià(
l0_succ
 =ğ
nuÎ±r
 || (
l1_succ
 &&†1_succ->
key
.
	`Com·»
(l0_succ->key) < 0)) {

1830 
l0_node
->
Ãxt
[
i
] = 
z
->
succs
[i];

1832 
z
->
´eds
[
i
]->
Ãxt
[i] = z->
node_·ddr
.
	`dump
();

1834 
z¡ack
.
	`pİ
();

1835 
d–‘e
 
z
;

1839 autØ
bË
 = 
sk
->
membË_li¡
->
	`G‘FrÚt
();

1840 
Œue
) {

1841 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

1842 ià(
Ãxt_bË
) {

1843 ià(
Ãxt_bË
 =ğ(
TabË
*è
sk
->
l0
) {

1844 
bË
->
	`S‘Next
(
nuÎ±r
);

1847 
bË
 = 
Ãxt_bË
;

1854 ià(
sk
->
sh¬d
 =ğ0è
	`årštf
(
¡dout
, "L0 compaction\n");

1855 
usšg
 
Node
 = 
PmemNode
;

1856 autØ
l0_skli¡
 = 
sk
->
l0
->
	`skli¡
();

1858 autØ
l1_
 = 
Î_
[
sk
->
sh¬d
]->
	`G‘TabËLi¡
(1);

1859 ià(
l1_
->
	`IsEm±y
()) {

1861 autØ
l1_bË
 = 
Ãw
 
	`PmemTabË
(
¡d
::
num”ic_lim™s
<
size_t
>::
	`max
(), 
l0_skli¡
);

1864 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_l1_šfo
> 
l1_mªiã¡
;

1865 autØ
db_poŞ
 = 
Pmem
::
poŞ
<
pmem_db
>(0);

1866 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_l1_šfo
>(
db_poŞ
, 
l1_mªiã¡
);

1867 autØ
db_roÙ
 = 
db_poŞ
.
	`roÙ
();

1868 autØ
sh¬d_mªiã¡
 = 
db_roÙ
->
sh¬d
[
sk
->shard];

1870 
B¿idedPmemSkLi¡
* 
l1_skli¡
 = 
Ãw
 
	`B¿idedPmemSkLi¡
(
l1_¬’a_
[0][0]->
	`poŞ_id
());

1871 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1872 
l1_skli¡
->
	`BšdA»Ç
(
l1_poŞ_id_
[
i
], 
l1_¬’a_
[i][
sk
->
sh¬d
]);

1874 
l1_skli¡
->
	`In™
();

1875 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1876 autØ
p_h—d
 = 
l1_skli¡
->
	`p_h—d
(
l1_poŞ_id_
[
i
]);

1877 
PmemNode
* 
h—d
 = (PmemNode*è
p_h—d
.
	`g‘
();

1878 
PmemNode
* 
l0_h—d
 = 
l0_skli¡
->
	`h—d
(
l0_poŞ_id_
[
i
]);

1879 
h
 = 0; h < 
h—d
->
	`height
(); h++) {

1880 
h—d
->
Ãxt
[
h
] = 
l0_h—d
->next[h];

1882 
l1_mªiã¡
->
h—d
[
i
] = 
p_h—d
;

1884 
sh¬d_mªiã¡
->
l1_šfo
 = 
l1_mªiã¡
;

1885 autØ
l1_bË
 = 
Ãw
 
	`PmemTabË
(
¡d
::
num”ic_lim™s
<
size_t
>::
	`max
(), 
l1_skli¡
);

1887 
l1_
->
	`S‘FrÚt
(
l1_bË
);

1888 autØ
bË
 = 
sk
->
membË_li¡
->
	`G‘FrÚt
();

1889 
Œue
) {

1890 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

1891 ià(
Ãxt_bË
) {

1892 ià(
Ãxt_bË
 =ğ(
TabË
*è
sk
->
l0
) {

1893 
bË
->
	`S‘Next
(
nuÎ±r
);

1896 
bË
 = 
Ãxt_bË
;

1902 
l0_mªiã¡
->
¡©us
 = 
Lev–0Stus
::
kM”geDÚe
;

1906 autØ
l1_skli¡
 = ((
PmemTabË
*è
l1_
->
	`G‘FrÚt
())->
	`skli¡
();

1908 
	sZ³rI‹m
 {

1909 
PmemPŒ
 
node_·ddr
;

1910 
Node
* 
´eds
[
kMaxHeight
];

1913 
¡d
::
¡ack
<
Z³rI‹m
*> 
z¡ack
;

1914 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

1915 
i
 = 0; i < 
kNumRegiÚs
; i++) {

1916 
poŞ_id
 = 
l1_¬’a_
[
i
][0]->
	`poŞ_id
();

1917 
j
 = 0; j < 
kMaxHeight
; j++) {

1918 
´eds
[
i
][
j
] = 
l1_skli¡
->
	`h—d
(
poŞ_id
);

1922 
PmemPŒ
 
node_·ddr
 = 
l0_skli¡
->
	`h—d_·ddr
();

1925 
Œue
) {

1926 #ifdeà
L0_COMPACTION_YIELD


1927 
¡d
::
this_th»ad
::
	`y›ld
();

1929 autØ
l0_node
 = 
node_·ddr
.
g‘
<
Node
>();

1930 ià(
l0_node
 =ğ
nuÎ±r
) {

1933 
poŞ_id
 = 
node_·ddr
.
	`poŞ_id
();

1934 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
poŞ_id
];

1935 
height
 = 
l0_node
->
	`height
();

1936 
Node
* 
´ed
 = 
´eds
[
»giÚ
][
height
 - 1];

1937 
i
 = 
height
 - 1; i > 0; i--) {

1938 
PmemPŒ
 
cu¼_·ddr
 = 
´ed
->
Ãxt
[
i
];

1939 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1940 
cu¼
) {

1941 ià(
cu¼
->
key
.
	`Com·»
(
l0_node
->key) < 0) {

1942 
´ed
 = 
cu¼
;

1943 
cu¼_·ddr
 = 
´ed
->
Ãxt
[
i
];

1944 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1949 
´eds
[
»giÚ
][
i
] = 
´ed
;

1952 
PmemPŒ
 
cu¼_·ddr
 = 
´eds
[0][0]->
Ãxt
[0];

1953 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1954 
cu¼
) {

1955 ià(
cu¼
->
key
.
	`Com·»
(
l0_node
->key) < 0) {

1956 
´eds
[0][0] = 
cu¼
;

1957 
cu¼_·ddr
 = 
cu¼
->
Ãxt
[0];

1958 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

1964 autØ
z
 = 
Ãw
 
	`Z³rI‹m
();

1965 
z
->
node_·ddr
 =‚ode_paddr;

1966 
z
->
´eds
[0] =…reds[0][0];

1967 
i
 = 1; i < 
kMaxHeight
; i++) {

1968 
z
->
´eds
[
i
] =…»ds[
»giÚ
][i];

1970 
z¡ack
.
	`push
(
z
);

1971 
node_·ddr
 = 
l0_node
->
Ãxt
[0];

1979 
INIT_REPORTER_CLIENT
;

1980 !
z¡ack
.
	`em±y
()) {

1981 #ifdeà
L0_COMPACTION_YIELD


1982 
¡d
::
this_th»ad
::
	`y›ld
();

1984 auto& 
z
 = 
z¡ack
.
	`tİ
();

1985 autØ
l0_node
 = 
z
->
node_·ddr
.
g‘
<
Node
>();

1987 
l0_node
->
Ãxt
[0] = 
z
->
´eds
[0]->next[0];

1988 
	`şwb
(&
l0_node
->
Ãxt
[0], 8);

1989 
	`_mm_sãnû
();

1990 
z
->
´eds
[0]->
Ãxt
[0] = z->
node_·ddr
.
	`dump
();

1991 
	`şwb
(&
z
->
´eds
[0]->
Ãxt
[0], 8);

1992 
	`_mm_sãnû
();

1997 
i
 = 1; i < 
l0_node
->
	`height
(); i++) {

1998 
l0_node
->
Ãxt
[
i
] = 
z
->
´eds
[i]->next[i];

1999 
z
->
´eds
[
i
]->
Ãxt
[i] = z->
node_·ddr
.
	`dump
();

2001 #ifdeà
LISTDB_L1_LRU


2002 ià(
l0_node
->
	`height
(è>ğ
kMaxHeight
 - (
kNumCachedLev–s
 - 1)) {

2003 
»giÚ
 = 
z
->
node_·ddr
.
	`poŞ_id
();

2007 
Ìu_height
 = 1;

2008 
Ìu_height
 < 
kLruMaxHeight
 && 
td
->
ºd
.
	`Next
() % 2== 0) {

2009 
Ìu_height
++;

2011 
ÿche_
[
sk
->
sh¬d
][
»giÚ
]->
	`In£¹
(
l0_node
->
key
, 
z
->
node_·ddr
.
	`dump
(), 
Ìu_height
);

2015 #ifdeà
LISTDB_SKIPLIST_CACHE


2016 ià(
l0_node
->
	`height
(è>ğ
kSkLi¡CacheMšPmemHeight
) {

2017 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
z
->
node_·ddr
.
	`poŞ_id
()];

2018 
ÿche_
[
sk
->
sh¬d
][
»giÚ
]->
	`In£¹
(
l0_node
);

2021 
	`REPORT_COMPACTION_OPS
(1);

2022 
z¡ack
.
	`pİ
();

2023 
d–‘e
 
z
;

2025 
REPORT_DONE
;

2027 #ifdeà
LISTDB_L1_LRU


2028 
usšg
 
MyTy³1
 = 
¡d
::
·œ
<
ušt64_t
, uint64_t>;

2029 
i
 = 0; i < 
kNumRegiÚs
; i++) {

2030 
¡d
::
	`sÜt
(
sÜ‹d_¬r_
[
i
][
sk
->
sh¬d
].
	`begš
(), sÜ‹d_¬r_[i][sk->sh¬d].
	`’d
(),

2031 [&](cÚ¡ 
MyTy³1
 &
a
, cÚ¡ MyTy³1 &
b
è{ ‡.
fœ¡
 > b.first; });

2036 
l0_mªiã¡
->
¡©us
 = 
Lev–0Stus
::
kM”geDÚe
;

2041 autØ
bË
 = 
sk
->
membË_li¡
->
	`G‘FrÚt
();

2042 
Œue
) {

2043 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

2044 ià(
Ãxt_bË
) {

2045 ià(
Ãxt_bË
 =ğ(
TabË
*è
sk
->
l0
) {

2046 
bË
->
	`S‘Next
(
nuÎ±r
);

2049 
bË
 = 
Ãxt_bË
;

2057 ià(
sk
->
sh¬d
 =ğ0è
	`årštf
(
¡dout
, "L0 compaction\n");

2059 
usšg
 
Node
 = 
PmemNode
;

2060 autØ
l0_skli¡
 = 
sk
->
l0
->
	`skli¡
();

2062 autØ
l1_
 = 
Î_
[
sk
->
sh¬d
]->
	`G‘TabËLi¡
(1);

2063 ià(
l1_
->
	`IsEm±y
()) {

2064 autØ
l1_bË
 = 
Ãw
 
	`PmemTabË
(
¡d
::
num”ic_lim™s
<
size_t
>::
	`max
(), 
l0_skli¡
);

2065 
l1_
->
	`S‘FrÚt
(
l1_bË
);

2066 autØ
bË
 = 
sk
->
membË_li¡
->
	`G‘FrÚt
();

2067 
Œue
) {

2068 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

2069 ià(
Ãxt_bË
) {

2070 ià(
Ãxt_bË
 =ğ(
TabË
*è
sk
->
l0
) {

2071 
bË
->
	`S‘Next
(
nuÎ±r
);

2074 
bË
 = 
Ãxt_bË
;

2081 autØ
l1_skli¡
 = ((
PmemTabË
*è
l1_
->
	`G‘FrÚt
())->
	`skli¡
();

2083 
PmemPŒ
 
node_·ddr
 = 
l0_skli¡
->
	`h—d_·ddr
();

2085 
¡d
::
¡ack
<
PmemPŒ
> 
n¡ack
;

2088 
Œue
) {

2089 autØ
l0_node
 = 
node_·ddr
.
g‘
<
Node
>();

2090 ià(
l0_node
 =ğ
nuÎ±r
) {

2094 
n¡ack
.
	`push
(
node_·ddr
);

2095 
node_·ddr
 = 
l0_node
->
Ãxt
[0];

2099 !
n¡ack
.
	`em±y
()) {

2100 auto& 
l0_·ddr
 = 
n¡ack
.
	`tİ
();

2103 
l1_skli¡
->
	`In£¹
(
l0_·ddr
);

2105 
n¡ack
.
	`pİ
();

2109 autØ
bË
 = 
sk
->
membË_li¡
->
	`G‘FrÚt
();

2110 
Œue
) {

2111 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

2112 ià(
Ãxt_bË
) {

2113 ià(
Ãxt_bË
 =ğ(
TabË
*è
sk
->
l0
) {

2114 
bË
->
	`S‘Next
(
nuÎ±r
);

2117 
bË
 = 
Ãxt_bË
;

2124 
	}
}

2126 
	gLi¡DB
::
	$L0Com·ùiÚCİyOnWr™e
(
L0Com·ùiÚTask
* 
sk
) {

2127 ià(
sk
->
sh¬d
 =ğ0è
	`årštf
(
¡dout
, "L0 compaction\n");

2129 
usšg
 
Node
 = 
PmemNode
;

2130 autØ
l0_skli¡
 = 
sk
->
l0
->
	`skli¡
();

2132 autØ
l1_
 = 
Î_
[
sk
->
sh¬d
]->
	`G‘TabËLi¡
(1);

2133 autØ
l1_skli¡
 = ((
PmemTabË
*è
l1_
->
	`G‘FrÚt
())->
	`skli¡
();

2135 
Node
* 
´eds
[
kNumRegiÚs
][
kMaxHeight
];

2136 
ušt64_t
 
succs
[
kNumRegiÚs
][
kMaxHeight
];

2137 
i
 = 0; i < 
kNumRegiÚs
; i++) {

2138 
poŞ_id
 = 
l1_¬’a_
[
i
][0]->
	`poŞ_id
();

2139 
j
 = 0; j < 
kMaxHeight
; j++) {

2140 
´eds
[
i
][
j
] = 
l1_skli¡
->
	`h—d
(
poŞ_id
);

2141 
succs
[
i
][
j
] = 0;

2145 
PmemPŒ
 
node_·ddr
 = 
l0_skli¡
->
	`h—d_·ddr
();

2147 
INIT_REPORTER_CLIENT
;

2148 
Œue
) {

2149 #ifdeà
L0_COMPACTION_YIELD


2150 
¡d
::
this_th»ad
::
	`y›ld
();

2152 autØ
l0_node
 = 
node_·ddr
.
g‘
<
Node
>();

2153 ià(
l0_node
 =ğ
nuÎ±r
) {

2157 
poŞ_id
 = 
node_·ddr
.
	`poŞ_id
();

2158 
»giÚ
 = 
poŞ_id_to_»giÚ_
[
poŞ_id
];

2159 
height
 = 
l0_node
->
	`height
();

2160 
PmemPŒ
 
cu¼_·ddr
 = 
´eds
[
»giÚ
][
height
 - 1]->
Ãxt
[height - 1];

2161 
i
 = 
height
 - 1; i > 0; i--) {

2162 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

2163 
cu¼
) {

2164 ià(
cu¼
->
key
.
	`Com·»
(
l0_node
->key) < 0) {

2165 
´eds
[
»giÚ
][
i
] = 
cu¼
;

2166 
cu¼_·ddr
 = 
cu¼
->
Ãxt
[
i
];

2167 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

2172 
succs
[
»giÚ
][
i
] = 
cu¼_·ddr
.
	`dump
();

2175 
PmemPŒ
 
cu¼_·ddr
 = 
´eds
[0][0]->
Ãxt
[0];

2176 autØ
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

2177 
cu¼
) {

2178 ià(
cu¼
->
key
.
	`Com·»
(
l0_node
->key) < 0) {

2179 
´eds
[0][0] = 
cu¼
;

2180 
cu¼_·ddr
 = 
cu¼
->
Ãxt
[0];

2181 
cu¼
 = 
cu¼_·ddr
.
g‘
<
Node
>();

2186 
succs
[0][0] = 
cu¼_·ddr
.
	`dump
();

2189 
size_t
 
node_size
 = (
PmemNode
è+ (
height
 - 1) * 8;

2190 autØ
l1_node_·ddr
 = 
l1_¬’a_
[
»giÚ
][
sk
->
sh¬d
]->
	`AÎoÿ‹
(
node_size
);

2191 autØ
l1_node
 = 
l1_node_·ddr
.
g‘
<
Node
>();

2192 
l1_node
->
key
 = 
l0_node
->key;

2193 
l1_node
->
g
 = 
l0_node
->tag;

2194 
l1_node
->
v®ue
 = 
l0_node
->value;

2195 
l1_node
->
Ãxt
[0] = 
succs
[0][0];

2196 
i
 = 1; i < 
height
; i++) {

2197 
l1_node
->
Ãxt
[
i
] = 
succs
[
»giÚ
][i];

2199 
	`şwb
(
l1_node
, 
node_size
);

2200 
	`_mm_sãnû
();

2201 
´eds
[0][0]->
Ãxt
[0] = 
l1_node_·ddr
.
	`dump
();

2202 
i
 = 1 ;˜< 
height
; i++) {

2203 
´eds
[
»giÚ
][
i
]->
Ãxt
[i] = 
l1_node_·ddr
.
	`dump
();

2206 
	`REPORT_COMPACTION_OPS
(1);

2208 
node_·ddr
 = 
l0_node
->
Ãxt
[0];

2210 
REPORT_DONE
;

2214 autØ
bË
 = 
sk
->
membË_li¡
->
	`G‘FrÚt
();

2215 
Œue
) {

2216 autØ
Ãxt_bË
 = 
bË
->
	`Next
();

2217 ià(
Ãxt_bË
) {

2218 ià(
Ãxt_bË
 =ğ(
TabË
*è
sk
->
l0
) {

2219 
bË
->
	`S‘Next
(
nuÎ±r
);

2222 
bË
 = 
Ãxt_bË
;

2227 
	}
}

2229 
	gLi¡DB
::
	$PrštDebugLsmS‹
(
sh¬d
) {

2230 autØ

 = 
	`G‘TabËLi¡
(0, 
sh¬d
);

2231 autØ
bË
 = 

->
	`G‘FrÚt
();

2232 
mem_út
 = 0;

2233 
l0_út
 = 0;

2234 
bË
) {

2235 ià(
bË
->
	`ty³
(è=ğ
TabËTy³
::
kMemTabË
) {

2236 
mem_út
++;

2237 } ià(
bË
->
	`ty³
(è=ğ
TabËTy³
::
kPmemTabË
) {

2238 
l0_út
++;

2240 
bË
 =abË->
	`Next
();

2243 
	`årštf
(
¡dout
, "mem: %d, L0: %d\n", 
mem_út
, 
l0_út
);

2244 
	}
}

2246 
	gLi¡DB
::
	$G‘StSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, std::¡ršg* 
buf
) {

2247 
rv
 = 0;

2248 
¡d
::
¡ršg¡»am
 
ss
;

2249 ià(
Çme
 == "l1_cache_size") {

2250 #ifdeà
LISTDB_SKIPLIST_CACHE


2251 
size_t
 
sum
 = 0;

2252 
size_t
 
max
 = 0;

2253 
i
 = 0; i < 
kNumSh¬ds
; i++) {

2254 
size_t
 
sh¬d_size
 = 0;

2255 
j
 = 0; j < 
kNumRegiÚs
; j++) {

2256 
sh¬d_size
 +ğ
ÿche_
[
i
][
j
]->
	`AcquœeLßdSize
();

2258 
max
 = 
¡d
::max<
size_t
>(max, 
sh¬d_size
);

2259 
sum
 +ğ
sh¬d_size
;

2261 
ss
 << 
Çme
 << ": " << 
sum
 << " (³¸sh¬d max: " << 
max
 << ")";

2263 
rv
 = 1;

2265 } ià(
Çme
 == "flush_stats") {

2266 
i
 = 0; i < 
kNumWÜk”s
; i++) {

2267 
ss
 << "wÜk” " << 
i
 << ": flush_úˆğ" << 
wÜk”_d©a_
[i].
æush_út
 << " flush_time_u£øğ" << wÜk”_d©a_[i].
æush_time_u£c
 << 
¡d
::
’dl
;

2270 
ss
 << "UnknowÀÇme: " << 
Çme
;

2271 
rv
 = 1;

2273 
buf
->
	`assign
(
¡d
::
	`move
(
ss
.
	`¡r
()));

2274  
rv
;

2275 
	}
}

	@lsm/dram_layered_pmemtable.h

1 #iâdeà
LISTDB_LSM_DRAM_LAYERED_PMEMTABLE_H_


2 
	#LISTDB_LSM_DRAM_LAYERED_PMEMTABLE_H_


	)

4 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

5 
	~"li¡db/šdex/lockä“_skli¡.h
"

6 
	~"li¡db/lsm/bË.h
"

8 şas 
	cD¿mLay”edPmemTabË
 : 
public
 
TabË
 {

9 
public
:

10 
usšg
 
Node
 = 
B¿idedPmemSkLi¡
::Node;

11 
usšg
 
	mD¿mNode
 = 
lockä“_skli¡
::
Node
;

13 
D¿mLay”edPmemTabË
(cÚ¡ 
size_t
 
bË_ÿ·c™y
, 
B¿idedPmemSkLi¡
* 
skli¡
);

15 
	m´iv©e
:

16 
B¿idedPmemSkLi¡
* 
skli¡_
;

17 
lockä“_skli¡
* 
	mÿche_
;

	@lsm/level.cc

1 
	~"li¡db/lsm/Ëv–.h
"

	@lsm/level.h

1 #iâdeà
LISTDB_LSM_LEVEL_H_


2 
	#LISTDB_LSM_LEVEL_H_


	)

4 
	~"li¡db/commÚ.h
"

5 
	~"li¡db/lsm/bË.h
"

6 
	~"li¡db/lsm/bË_li¡.h
"

19 
	g‹m¶©e
 <
şass
 
	gT
>

20 şas 
	cLev–
 {

21 
	mpublic
:

22 
vœtu®
 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) = 0;

23 
vœtu®
 
boŞ
 
G‘
(cÚ¡ 
Key
& 
key
) = 0;

26 
	m´Ùeùed
:

27 
TabËLi¡
<
T
>* 
bËs_
;

28 
	mLev–
<
	mT
>* 
	mÃxt_
;

31 
şass
 
	gTİLev–
 : 
public
 
Lev–
<
MemTabËSM­
> {

32 
public
:

37 
vœtu®
 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

	@lsm/level_list.cc

1 
	~"li¡db/lsm/Ëv–_li¡.h
"

	@lsm/level_list.h

1 #iâdeà
LISTDB_LSM_LEVEL_LIST_H_


2 
	#LISTDB_LSM_LEVEL_LIST_H_


	)

4 
	~"li¡db/commÚ.h
"

6 
	~"li¡db/lsm/bË_li¡.h
"

19 şas 
	cSim¶eLev–Li¡
 {

20 
	mpublic
:

21 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

22 
boŞ
 
G‘
(cÚ¡ 
Key
& 
key
, * cÚ¡ 
v®ue_hªdË
);

25 
	m´iv©e
:

30 şas 
	cLev–Li¡
 {

31 
	mpublic
:

32 
S‘TabËLi¡
(cÚ¡ 
Ëv–
, 
TabËLi¡
* 

);

34 
TabËLi¡
* 
G‘TabËLi¡
(cÚ¡ 
Ëv–
);

36 
	m‹m¶©e
 <
ty³Çme
 
	mT
>

37 
T
* 
G‘TabËLi¡
(cÚ¡ 
Ëv–
);

39 
	m´iv©e
:

40 
TabËLi¡
* 
bË_li¡s_
[
kNumLev–s
];

43 
šlše
 
	gLev–Li¡
::
	$S‘TabËLi¡
(cÚ¡ 
Ëv–
, 
TabËLi¡
* 

) {

44 
bË_li¡s_
[
Ëv–
] = 

;

45 
	}
}

47 
šlše
 
TabËLi¡
* 
	gLev–Li¡
::
	$G‘TabËLi¡
(cÚ¡ 
Ëv–
) {

48  
bË_li¡s_
[
Ëv–
];

49 
	}
}

51 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

52 
šlše
 
T
* 
	gLev–Li¡
::
	$G‘TabËLi¡
(cÚ¡ 
Ëv–
) {

53  (
T
*è
	`G‘TabËLi¡
(
Ëv–
);

54 
	}
}

	@lsm/memtable.h

1 #iâdeà
LISTDB_LSM_MEMTABLE_H_


2 
	#LISTDB_LSM_MEMTABLE_H_


	)

4 
	~<c¡dio
>

6 
	~"li¡db/šdex/lockä“_skli¡.h
"

7 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

8 
	~"li¡db/lsm/bË.h
"

10 şas 
	cMemTabË
 : 
public
 
TabË
 {

11 
public
:

12 
usšg
 
Node
 = 
lockä“_skli¡
::Node;

14 
MemTabË
(cÚ¡ 
size_t
 
bË_ÿ·c™y
);

15 ~
MemTabË
();

17 
vœtu®
 * 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
è
ov”ride
;

19 
vœtu®
 
boŞ
 
	$G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
è
ov”ride
;

21 
boŞ
 
	$IsFlushed
(è{  (
l0_
 !ğ
nuÎ±r
); }

23 
	$S‘P”si¡’tTabË
(
TabË
* 
pmembË
è{ 
l0_
 =…membË; 
	}
}

25 
TabË
* 
	$P”si¡’tTabË
(è{  
l0_
; 
	}
}

27 
lockä“_skli¡
* 
	$skli¡
(è{  
skli¡_
; 
	}
}

29 
B¿idedPmemSkLi¡
* 
	$l0_skli¡
(è{  
l0_skli¡_
; 
	}
}

31 
	$S‘L0SkLi¡
(
B¿idedPmemSkLi¡
* 
l0_skli¡
è{ 
l0_skli¡_
 =†0_skli¡; 
	}
}

33 
S‘L0Mªiã¡
(
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
> 
l0_mªiã¡
è{ 
l0_mªiã¡_
 =†0_manifest; }

35 
	gpmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
> 
	$l0_mªiã¡
(è{  
l0_mªiã¡_
; 
	}
}

37 
ušt64_t
 
	$l0_id
(ècÚ¡ {  
l0_mªiã¡_
->
id
; 
	}
}

39 
	g´iv©e
:

40 
lockä“_skli¡
* 
skli¡_
;

41 
B¿idedPmemSkLi¡
* 
	gl0_skli¡_
 = 
nuÎ±r
;

43 
TabË
* 
	gl0_
 = 
nuÎ±r
;

44 
	gpmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
> 
l0_mªiã¡_
 = 
nuÎ±r
;

47 
	gMemTabË
::
	$MemTabË
(cÚ¡ 
size_t
 
bË_ÿ·c™y
è: 
	$TabË
(
bË_ÿ·c™y
, 
TabËTy³
::
kMemTabË
) {

48 
skli¡_
 = 
Ãw
 
	`lockä“_skli¡
();

49 
	}
}

51 
	gMemTabË
::~
	$MemTabË
() {

52 
d–‘e
 
skli¡_
;

53 
	}
}

55 * 
	gMemTabË
::
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

56 
	`årštf
(
¡dout
, "Not impl!!!!„eturning NULL\n");

57  
nuÎ±r
;

58 
	}
}

60 
boŞ
 
	gMemTabË
::
	$G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
) {

61 
	`årštf
(
¡dout
, "Not impl!!!! DO NOTHING!\n");

62  
çl£
;

63 
	}
}

	@lsm/memtable_list.h

1 #iâdeà
LISTDB_LSM_MEMTABLE_LIST_H_


2 
	#LISTDB_LSM_MEMTABLE_LIST_H_


	)

4 
	~<cÚd™iÚ_v¬ŸbË
>

5 
	~<funùiÚ®
>

7 
	~"li¡db/lsm/bË_li¡.h
"

8 
	~"li¡db/lsm/membË.h
"

10 şas 
	cMemTabËLi¡
 : 
public
 
TabËLi¡
 {

11 
public
:

12 
MemTabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
, cÚ¡ 
sh¬d_id
);

14 
BšdEnqueueFunùiÚ
(
¡d
::
funùiÚ
<(
MemTabË
*)> 
’queue_â
);

16 
BšdA»Ç
(
»giÚ
, 
PmemLog
* 
¬’a
);

18 
CËªUpFlushedImmubËs
();

20 
C»©eNewFrÚt
();

22 
	m´Ùeùed
:

23 
vœtu®
 
TabË
* 
	$NewMubË
(
size_t
 
bË_ÿ·c™y
, 
TabË
* 
Ãxt_bË
è
ov”ride
;

25 
vœtu®
 
	$EnqueueCom·ùiÚ
(
TabË
* 
bË
è
ov”ride
;

27 cÚ¡ 
sh¬d_id_
;

28 cÚ¡ 
max_num_membËs_
 = 
kMaxNumMemTabËs
;

29 
num_membËs_
 = 0;

30 
¡d
::
funùiÚ
<(
MemTabË
*)> 
’queue_â_
;

32 
PmemLog
* 
¬’a_
[
kNumRegiÚs
];

34 
¡d
::
mu‹x
 
mu_
;

35 
¡d
::
cÚd™iÚ_v¬ŸbË
 
cv_
;

38 
MemTabËLi¡
::
	$MemTabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
, cÚ¡ 
sh¬d_id
)

39 : 
	`TabËLi¡
(
bË_ÿ·c™y
), 
	$sh¬d_id_
(
sh¬d_id
è{ 
	}
}

41 
	gMemTabËLi¡
::
BšdEnqueueFunùiÚ
(
¡d
::
funùiÚ
<(
MemTabË
*)> 
’queue_â
) {

42 
’queue_â_
 = 
’queue_â
;

45 
	gMemTabËLi¡
::
	$BšdA»Ç
(
»giÚ
, 
PmemLog
* 
¬’a
) {

46 
¬’a_
[
»giÚ
] = 
¬’a
;

47 
	}
}

49 
šlše
 
TabË
* 
	gMemTabËLi¡
::
	$NewMubË
(
size_t
 
bË_ÿ·c™y
, 
TabË
* 
Ãxt_bË
) {

50 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

51 
cv_
.
	`wa™
(
lk
, [&]{

52 ià(
num_membËs_
 < 
max_num_membËs_
) {

53  
Œue
;

55 
	`årštf
(
¡dout
, "Stall\n");

56  
çl£
;

59 
num_membËs_
++;

60 
lk
.
	`uÆock
();

61 
MemTabË
* 
Ãw_bË
 = 
Ãw
 
	`MemTabË
(
bË_ÿ·c™y
);

64 ià(
Ãxt_bË
) {

65 autØ
Ãxt_membË
 = (
MemTabË
*è
Ãxt_bË
;

66 autØ
Ãxt_l0_mªiã¡
 = 
Ãxt_membË
->
	`l0_mªiã¡
();

67 
Ãxt_l0_mªiã¡
->
¡©us
 = 
Lev–0Stus
::
kFuÎ
;

72 
pmem
::
obj
::
³rsi¡’t_±r
<
pmem_l0_šfo
> 
l0_mªiã¡
;

73 autØ
db_poŞ
 = 
Pmem
::
poŞ
<
pmem_db
>(0);

74 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
pmem_l0_šfo
>(
db_poŞ
, 
l0_mªiã¡
);

75 autØ
db_roÙ
 = 
db_poŞ
.
	`roÙ
();

76 autØ
sh¬d_mªiã¡
 = 
db_roÙ
->
sh¬d
[
sh¬d_id_
];

77 
l0_mªiã¡
->
id
 = 
sh¬d_mªiã¡
->
l0_út
++;

78 
l0_mªiã¡
->
¡©us
 = 
Lev–0Stus
::
kIn™Ÿlized
;

79 
B¿idedPmemSkLi¡
* 
l0_skli¡
 = 
Ãw
 
	`B¿idedPmemSkLi¡
(
¬’a_
[0]->
	`poŞ_id
());

80 
i
 = 0; i < 
kNumRegiÚs
; i++) {

81 
l0_skli¡
->
	`BšdA»Ç
(
¬’a_
[
i
]->
	`poŞ_id
(),‡rena_[i]);

83 
l0_skli¡
->
	`In™
();

84 
i
 = 0; i < 
kNumRegiÚs
; i++) {

85 
poŞ_id
 = 
¬’a_
[
i
]->
	`poŞ_id
();

86 
l0_mªiã¡
->
h—d
[
i
] = 
l0_skli¡
->
	`p_h—d
(
poŞ_id
);

88 
l0_mªiã¡
->
Ãxt
 = 
sh¬d_mªiã¡
->
l0_li¡_h—d
->next;

89 
sh¬d_mªiã¡
->
l0_li¡_h—d
->
Ãxt
 = 
l0_mªiã¡
;

90 
Ãw_bË
->
	`S‘L0SkLi¡
(
l0_skli¡
);

91 
Ãw_bË
->
	`S‘L0Mªiã¡
(
l0_mªiã¡
);

92 
Ãw_bË
->
	`S‘Next
(
Ãxt_bË
);

93  
Ãw_bË
;

94 
	}
}

96 
šlše
 
	gMemTabËLi¡
::
	$EnqueueCom·ùiÚ
(
TabË
* 
bË
) {

98 
	`’queue_â_
((
MemTabË
*è
bË
);

99 
	}
}

101 
	gMemTabËLi¡
::
	$CËªUpFlushedImmubËs
() {

102 #ià
LISTDB_FLUSH_MEMTABLE_TO_L1
 == 1

103 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

104 
num_membËs_
--;

105 
cv_
.
	`nÙify_Úe
();

107 autØ
cu¼
 = 
	`G‘FrÚt
();

108 
¡d
::
veùÜ
<
TabË
*> 
bËs
;

109 
cu¼
) {

110 
bËs
.
	`push_back
(
cu¼
);

111 
cu¼
 = cu¼->
	`Next
();

113 
æushed_út
 = 0;

116 
MemTabË
* 
´ed
 = 
nuÎ±r
;

117 
i
 = 
bËs
.
	`size
() - 1; i >= 1; i--) {

118 ià(
bËs
[
i
]->
	`ty³
(è=ğ
TabËTy³
::
kMemTabË
) {

119 
MemTabË
* 
imm
 = (MemTabË*è
bËs
[
i
];

120 ià(
imm
->
	`IsFlushed
()) {

122 autØ
pmem
 = (
TabË
*è
imm
->
	`P”si¡’tTabË
();

123 ià(
imm
->
	`Next
()) {

124 ià(
imm
->
	`Next
()->
	`ty³
(è=ğ
TabËTy³
::
kPmemTabË
) {

125 
pmem
->
	`S‘Next
(
imm
->
	`Next
());

128 
´ed
 = (
MemTabË
*è
bËs
[
i
 - 1];

129 
´ed
->
	`S‘Next
(
pmem
);

131 
æushed_út
++;

146 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

147 
num_membËs_
 -ğ
æushed_út
;

148 
lk
.
	`uÆock
();

149 
cv_
.
	`nÙify_Úe
();

151 
	}
}

153 
	gMemTabËLi¡
::
	$C»©eNewFrÚt
() {

154 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

155 autØ
bË
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

156 autØ
Ãw_bË
 = 
	`NewMubË
(
bË_ÿ·c™y_
, 
bË
);

157 
äÚt_
.
	`¡Üe
(
Ãw_bË
, 
MO_RELAXED
);

158 
lk
.
	`uÆock
();

159 
	}
}

	@lsm/pmemtable.h

1 #iâdeà
LISTDB_LSM_PMEMTABLE_H_


2 
	#LISTDB_LSM_PMEMTABLE_H_


	)

4 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

5 
	~"li¡db/lsm/bË.h
"

7 şas 
	cPmemTabË
 : 
public
 
TabË
 {

8 
public
:

9 
usšg
 
Node
 = 
B¿idedPmemSkLi¡
::Node;

11 
PmemTabË
(cÚ¡ 
size_t
 
bË_ÿ·c™y
, 
B¿idedPmemSkLi¡
* 
skli¡
);

13 
vœtu®
 * 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
è
ov”ride
;

15 
vœtu®
 
boŞ
 
	$G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
è
ov”ride
;

17 
B¿idedPmemSkLi¡
* 
	$skli¡
(è{  
skli¡_
; }

19 
	$S‘Mªiã¡
(
pmem
::
obj
::
³rsi¡’t_±r_ba£
 
mªiã¡
è{ 
mªiã¡_
 = mªiã¡; 
	}
}

21 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

22 
	gpmem
::
obj
::
³rsi¡’t_±r
<
T
> 
	$mªiã¡
(è{  
mªiã¡_
.
	`¿w
(); 
	}
}

24 
	g´iv©e
:

25 
B¿idedPmemSkLi¡
* 
skli¡_
;

26 
	gpmem
::
obj
::
³rsi¡’t_±r_ba£
 
mªiã¡_
;

29 
	gPmemTabË
::
	$PmemTabË
(cÚ¡ 
size_t
 
bË_ÿ·c™y
, 
B¿idedPmemSkLi¡
* 
skli¡
)

30 : 
	`TabË
(
bË_ÿ·c™y
, 
TabËTy³
::
kPmemTabË
), 
	$skli¡_
(
skli¡
) {

31 
	}
}

33 * 
	gPmemTabË
::
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

34 
	`årštf
(
¡dout
, "Not impl!!!!„eturning NULL\n");

35  
nuÎ±r
;

36 
	}
}

38 
boŞ
 
	gPmemTabË
::
	$G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
) {

39 
	`årštf
(
¡dout
, "Not impl!!!! DO NOTHING!\n");

40  
çl£
;

41 
	}
}

	@lsm/pmemtable_list.h

1 #iâdeà
LISTDB_LSM_PMEMTABLE_LIST_H_


2 
	#LISTDB_LSM_PMEMTABLE_LIST_H_


	)

4 
	~"li¡db/lsm/bË_li¡.h
"

5 
	~"li¡db/lsm/pmembË.h
"

7 şas 
	cPmemTabËLi¡
 : 
public
 
TabËLi¡
 {

8 
public
:

9 
PmemTabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
, cÚ¡ 
´im¬y_»giÚ_poŞ_id
);

11 
BšdA»Ç
(
poŞ_id
, 
PmemLog
* 
¬’a
);

13 
	m´Ùeùed
:

14 
vœtu®
 
TabË
* 
	$NewMubË
(
size_t
 
bË_ÿ·c™y
, 
TabË
* 
Ãxt_bË
è
ov”ride
;

16 cÚ¡ 
´im¬y_»giÚ_poŞ_id_
;

17 
¡d
::
m­
<, 
PmemLog
*> 
¬’a_
;

20 
PmemTabËLi¡
::
	$PmemTabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
, cÚ¡ 
´im¬y_»giÚ_poŞ_id
)

21 : 
	`TabËLi¡
(
bË_ÿ·c™y
), 
	$´im¬y_»giÚ_poŞ_id_
(
´im¬y_»giÚ_poŞ_id
è{ 
	}
}

23 
	gPmemTabËLi¡
::
	$BšdA»Ç
(cÚ¡ 
poŞ_id
, 
PmemLog
* 
¬’a
) {

24 
¬’a_
.
	`em¶aû
(
poŞ_id
, 
¬’a
);

25 
	}
}

27 
šlše
 
TabË
* 
	gPmemTabËLi¡
::
	$NewMubË
(
size_t
 
bË_ÿ·c™y
, 
TabË
* 
Ãxt_bË
) {

29 autØ
skli¡
 = 
Ãw
 
	`B¿idedPmemSkLi¡
(
´im¬y_»giÚ_poŞ_id_
);

30 auto& 
™
 : 
¬’a_
) {

31 
skli¡
->
	`BšdA»Ç
(
™
.
fœ¡
, it.
£cÚd
);

33 
skli¡
->
	`In™
();

34 
PmemTabË
* 
Ãw_bË
 = 
Ãw
 
	`PmemTabË
(
bË_ÿ·c™y
, 
skli¡
);

35 
Ãw_bË
->
	`S‘Next
(
Ãxt_bË
);

36  
Ãw_bË
;

37 
	}
}

	@lsm/table.cc

1 
	~"li¡db/lsm/bË.h
"

	@lsm/table.h

1 #iâdeà
LISTDB_LSM_TABLE_H_


2 
	#LISTDB_LSM_TABLE_H_


	)

4 
	~<©omic
>

5 
	~<m­
>

7 
	~"li¡db/commÚ.h
"

9 şas 
	cTabË
 {

10 
	mpublic
:

11 
TabË
(cÚ¡ 
size_t
 
ÿ·c™y
, 
TabËTy³
 
ty³
);

13 
vœtu®
 * 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) = 0;

15 
vœtu®
 
boŞ
 
G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
) = 0;

17 
TabËTy³
 
	$ty³
(è{  
ty³_
; }

21 
	`S‘Next
(
TabË
* 
Ãxt
, cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
 = std::
memÜy_Üd”_£q_c¡
);

23 
TabË
* 
	`Next
(cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
 = std::
memÜy_Üd”_£q_c¡
);

25 
	`w_Ref
(cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
 = std::
memÜy_Üd”_£q_c¡
);

27 
	`w_UnRef
(cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
 = std::
memÜy_Üd”_£q_c¡
);

29 
boŞ
 
	`HasRoom
(cÚ¡ 
size_t
 
size
, cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
 = std::
memÜy_Üd”_£q_c¡
);

31 
št64_t
 
	$w_RefCouÁ
 (è{  
wr™”_»f_út_
 - 
wr™”_uÄef_út_
; 
	}
}

33 
	$S‘Size
(cÚ¡ 
size_t
 
size
è{ 
size_
.
	`¡Üe
(size); 
	}
}

41 
	g´Ùeùed
:

42 cÚ¡ 
size_t
 
ÿ·c™y_
;

43 
TabËTy³
 
	gty³_
;

44 
	g¡d
::
©omic
<
št64_t
> 
wr™”_»f_út_
 = 0;

45 
	g¡d
::
©omic
<
size_t
> 
size_
;

46 
	g¡d
::
©omic
<
št64_t
> 
wr™”_uÄef_út_
 = 0;

47 
	g¡d
::
©omic
<
TabË
*> 
Ãxt_
;

51 
	gTabË
::
	$TabË
(cÚ¡ 
size_t
 
ÿ·c™y
, 
TabËTy³
 
ty³
è: 
	`ÿ·c™y_
(ÿ·c™y), 
	`ty³_
Ñy³), 
	`size_
(0), 
	$Ãxt_
(
nuÎ±r
è{ 
	}
}

53 
šlše
 
	gTabË
::
	$S‘Next
(
TabË
* 
Ãxt
, cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
) {

54 
Ãxt_
.
	`¡Üe
(
Ãxt
, 
mo
);

55 
	}
}

57 
šlše
 
TabË
* 
	gTabË
::
	$Next
(cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
) {

58  
Ãxt_
.
	`lßd
(
mo
);

59 
	}
}

62 
šlše
 
	gTabË
::
	$w_Ref
(cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
) {

63 
wr™”_»f_út_
.
	`ãtch_add
(1, 
mo
);

64 
	}
}

66 
šlše
 
	gTabË
::
	$w_UnRef
(cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
) {

67 
wr™”_uÄef_út_
.
	`ãtch_add
(1, 
mo
);

68 
	}
}

70 
šlše
 
boŞ
 
	gTabË
::
	$HasRoom
(cÚ¡ 
size_t
 
size
, cÚ¡ 
¡d
::
memÜy_Üd”
 
mo
) {

71 cÚ¡ 
size_t
 
befÜe
 = 
size_
.
	`ãtch_add
(
size
, 
mo
);

72  (
befÜe
 + 
size
 <ğ
ÿ·c™y_
);

73 
	}
}

	@lsm/table_list.h

1 #iâdeà
LISTDB_LSM_TABLE_LIST_H_


2 
	#LISTDB_LSM_TABLE_LIST_H_


	)

4 
	~<©omic
>

5 
	~<mu‹x
>

7 
	~"li¡db/commÚ.h
"

8 
	~"li¡db/lsm/bË.h
"

11 şas 
	cTabËLi¡
 {

12 
	mpublic
:

13 
TabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
);

15 * 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

17 
boŞ
 
G‘
(cÚ¡ 
Key
&);

19 
boŞ
 
IsEm±y
();

21 
S‘FrÚt
(
TabË
* 
bË
);

23 
PushFrÚt
(
TabË
* 
bË
);

25 
TabË
* 
G‘FrÚt
();

27 
TabË
* 
G‘MubË
(cÚ¡ 
size_t
 
size
);

29 
	m´Ùeùed
:

30 
vœtu®
 
TabË
* 
NewMubË
(
size_t
 
bË_ÿ·c™y
, TabË* 
Ãxt_bË
) = 0;

32 
vœtu®
 
	$EnqueueCom·ùiÚ
(
TabË
* 
bË
) { ; };

34 cÚ¡ 
size_t
 
bË_ÿ·c™y_
;

35 
¡d
::
mu‹x
 
š™_mu_
;

36 
¡d
::
©omic
<
TabË
*> 
äÚt_
;

37 
	}
};

39 
	gTabËLi¡
::
	$TabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
è: 
	`bË_ÿ·c™y_
ÑabË_ÿ·c™y), 
	$äÚt_
(
nuÎ±r
è{ 
	}
}

41 * 
	gTabËLi¡
::
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

42 cÚ¡ 
size_t
 
kv_size
 = 
key
.
	`size
() + 8;

43 autØ
bË
 = 
	`G‘MubË
(
kv_size
);

44 autØ
»t
 = 
bË
->
	`Put
(
key
, 
v®ue
);

45 
bË
->
	`w_UnRef
();

46  
»t
;

47 
	}
}

49 
	gTabËLi¡
::
	$S‘FrÚt
(
TabË
* 
bË
) {

50 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

51 
äÚt_
.
	`¡Üe
(
bË
);

52 
	}
}

54 
	gTabËLi¡
::
	$PushFrÚt
(
TabË
* 
bË
) {

55 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

56 autØ
äÚt_Şd
 = 
äÚt_
.
	`lßd
();

57 
bË
->
	`S‘Next
(
äÚt_Şd
);

58 
äÚt_
.
	`¡Üe
(
bË
);

59 
	}
}

61 
boŞ
 
	gTabËLi¡
::
	$G‘
(cÚ¡ 
Key
& 
key
) {

62 autØ
bË
 = 
	`G‘FrÚt
();

63 
bË
) {

64 ià(
bË
->
	`G‘
(
key
, 
nuÎ±r
)) {

65  
Œue
;

67 
bË
 =abË->
	`Next
();

69  
çl£
;

70 
	}
}

72 
šlše
 
boŞ
 
	gTabËLi¡
::
	$IsEm±y
() {

73 autØ
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

74  
»t
 =ğ
nuÎ±r
;

75 
	}
}

77 
TabË
* 
	gTabËLi¡
::
	$G‘FrÚt
() {

78 
TabË
* 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

79 ià(
»t
 =ğ
nuÎ±r
) {

80 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

81 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

82 ià(
»t
 =ğ
nuÎ±r
) {

83 
»t
 = 
	`NewMubË
(
bË_ÿ·c™y_
, 
nuÎ±r
);

84 
äÚt_
.
	`¡Üe
(
»t
, 
MO_RELAXED
);

87  
»t
;

88 
	}
}

90 
TabË
* 
	gTabËLi¡
::
	$G‘MubË
(cÚ¡ 
size_t
 
size
) {

91 autØ
bË
 = 
	`G‘FrÚt
();

92 
bË
->
	`w_Ref
(
MO_RELAXED
);

93 ià(!
bË
->
	`HasRoom
(
size
)) {

94 
bË
->
	`w_UnRef
(
MO_RELAXED
);

96 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

97 
bË
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

98 
bË
->
	`w_Ref
(
MO_RELAXED
);

99 ià(!
bË
->
	`HasRoom
(
size
)) {

100 
bË
->
	`w_UnRef
(
MO_RELAXED
);

101 autØ
Ãw_bË
 = 
	`NewMubË
(
bË_ÿ·c™y_
, 
bË
);

102 
Ãw_bË
->
	`HasRoom
(
size
);

103 
Ãw_bË
->
	`w_Ref
(
MO_RELAXED
);

104 
äÚt_
.
	`¡Üe
(
Ãw_bË
, 
MO_RELAXED
);

105 
lk
.
	`uÆock
();

106 
	`EnqueueCom·ùiÚ
(
bË
);

107 
bË
 = 
Ãw_bË
;

111  
bË
;

112 
	}
}

115 
	g‹m¶©e
 <
şass
 
	gT
>

116 şas 
	cTabËLi¡
 {

117 
	mpublic
:

118 
TabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
);

119 * 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

120 
boŞ
 
G‘
(cÚ¡ 
Key
&);

122 
PrštDebug
();

126 
	m´Ùeùed
:

127 
T
* 
G‘FrÚt
();

128 
T
* 
G‘MubË
(cÚ¡ 
size_t
 
size
);

130 cÚ¡ 
size_t
 
	mbË_ÿ·c™y_
;

131 
	m¡d
::
mu‹x
 
š™_mu_
;

132 
	m¡d
::
©omic
<
T
*> 
äÚt_
;

135 
	g‹m¶©e
 <
şass
 
	gT
>

136 
	gTabËLi¡
<
	gT
>::
	$TabËLi¡
(cÚ¡ 
size_t
 
bË_ÿ·c™y
)

137 : 
	`bË_ÿ·c™y_
(
bË_ÿ·c™y
),

138 
	$äÚt_
(
nuÎ±r
) {

139 
	}
}

141 
	g‹m¶©e
 <
şass
 
	gT
>

142 * 
	gTabËLi¡
<
	gT
>::
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

143 cÚ¡ 
size_t
 
kv_size
 = 
key
.
	`size
() + 8;

144 
T
* 
bË
 = 
	`G‘MubË
(
kv_size
);

145 autØ
»t
 = 
bË
->
	`Put
(
key
, 
v®ue
);

146 
bË
->
	`w_UnRef
();

147  
»t
;

148 
	}
}

150 
	g‹m¶©e
 <
şass
 
	gT
>

151 
boŞ
 
	gTabËLi¡
<
	gT
>::
	$G‘
(cÚ¡ 
Key
& 
key
) {

152 
T
* 
bË
 = 
	`G‘FrÚt
();

153 
bË
) {

154 ià(
bË
->
	`G‘
(
key
, 
nuÎ±r
)) {

155  
Œue
;

157 
bË
 = (
T
*èbË->
	`Next
();

159  
çl£
;

160 
	}
}

162 
	g‹m¶©e
 <
şass
 
	gT
>

163 
	gTabËLi¡
<
	gT
>::
	$PrštDebug
() {

164 
T
* 
cu¼
 = 
äÚt_
.
	`lßd
();

165 
cu¼
 !ğ
nuÎ±r
) {

166 
	`årštf
(
¡d”r
, "[%p]->", 
cu¼
);

167 
cu¼
 = (
T
*ècu¼->
	`Next
(
MO_RELAXED
);

169 
	`årštf
(
¡d”r
, "\n");

170 
	}
}

172 
	g‹m¶©e
 <
şass
 
	gT
>

173 
T
* 
	gTabËLi¡
<
	gT
>::
	$G‘FrÚt
() {

174 
T
* 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

175 ià(
»t
 =ğ
nuÎ±r
) {

176 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

177 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

178 ià(
»t
 =ğ
nuÎ±r
) {

179 
»t
 = 
NewMubË
<
T
>(
nuÎ±r
, 
bË_ÿ·c™y_
);

180 
äÚt_
.
	`¡Üe
(
»t
, 
MO_RELAXED
);

183  
»t
;

184 
	}
}

186 
	g‹m¶©e
 <
şass
 
	gT
>

187 
T
* 
	gTabËLi¡
<
	gT
>::
	$G‘MubË
(cÚ¡ 
size_t
 
size
) {

188 
T
* 
»t
 = 
	`G‘FrÚt
();

189 
»t
->
	`w_Ref
(
MO_RELAXED
);

190 ià(!
»t
->
	`HasRoom
(
size
)) {

192 
»t
->
	`w_UnRef
(
MO_RELAXED
);

194 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

195 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

196 
»t
->
	`w_Ref
(
MO_RELAXED
);

197 ià(!
»t
->
	`HasRoom
(
size
)) {

199 
»t
->
	`w_UnRef
(
MO_RELAXED
);

200 
»t
 = 
NewMubË
<
T
>Ô‘, 
bË_ÿ·c™y_
);

202 
»t
->
	`w_Ref
(
MO_RELAXED
);

203 
äÚt_
.
	`¡Üe
(
»t
, 
MO_RELAXED
);

207  
»t
;

208 
	}
}

212 şas 
	cTabËLi¡V2
 {

213 
	mpublic
:

214 
usšg
 
T
 = 
TabËV2
;

216 
TabËLi¡V2
(cÚ¡ 
size_t
 
bË_ÿ·c™y
);

217 * 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

218 
boŞ
 
G‘
(cÚ¡ 
Key
&);

220 
PrštDebug
();

224 
	m´Ùeùed
:

225 
T
* 
G‘FrÚt
();

226 
T
* 
G‘MubË
(cÚ¡ 
size_t
 
size
);

228 cÚ¡ 
size_t
 
	mbË_ÿ·c™y_
;

229 
	m¡d
::
mu‹x
 
š™_mu_
;

230 
	m¡d
::
©omic
<
T
*> 
äÚt_
;

233 
	gTabËLi¡V2
::
	$TabËLi¡V2
(cÚ¡ 
size_t
 
bË_ÿ·c™y
)

234 : 
	`bË_ÿ·c™y_
(
bË_ÿ·c™y
),

235 
	$äÚt_
(
nuÎ±r
) {

236 
	}
}

238 * 
	gTabËLi¡V2
::
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

239 cÚ¡ 
size_t
 
kv_size
 = 
key
.
	`size
() + 8;

240 
T
* 
bË
 = 
	`G‘MubË
(
kv_size
);

241 autØ
»t
 = 
bË
->
	`Put
(
key
, 
v®ue
);

242 
bË
->
	`w_UnRef
();

243  
»t
;

244 
	}
}

246 
boŞ
 
	gTabËLi¡V2
::
	$G‘
(cÚ¡ 
Key
& 
key
) {

247 
T
* 
bË
 = 
	`G‘FrÚt
();

248 
bË
) {

249 ià(
bË
->
	`G‘
(
key
, 
nuÎ±r
)) {

250  
Œue
;

252 
bË
 = (
T
*èbË->
	`Next
();

254  
çl£
;

255 
	}
}

257 
	gTabËLi¡V2
::
	$PrštDebug
() {

258 
T
* 
cu¼
 = 
äÚt_
.
	`lßd
();

259 
cu¼
 !ğ
nuÎ±r
) {

260 
	`årštf
(
¡d”r
, "[%p]->", 
cu¼
);

261 
cu¼
 = (
T
*ècu¼->
	`Next
(
MO_RELAXED
);

263 
	`årštf
(
¡d”r
, "\n");

264 
	}
}

266 
T
* 
	gTabËLi¡V2
::
	$G‘FrÚt
() {

267 
T
* 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

268 ià(
»t
 =ğ
nuÎ±r
) {

269 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

270 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

271 ià(
»t
 =ğ
nuÎ±r
) {

272 
»t
 = 
NewMubË
<
T
>(
nuÎ±r
, 
bË_ÿ·c™y_
);

273 
äÚt_
.
	`¡Üe
(
»t
, 
MO_RELAXED
);

276  
»t
;

277 
	}
}

279 
T
* 
	gTabËLi¡V2
::
	$G‘MubË
(cÚ¡ 
size_t
 
size
) {

280 
T
* 
»t
 = 
	`G‘FrÚt
();

281 
»t
->
	`w_Ref
(
MO_RELAXED
);

282 ià(!
»t
->
	`HasRoom
(
size
)) {

284 
»t
->
	`w_UnRef
(
MO_RELAXED
);

286 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

287 
»t
 = 
äÚt_
.
	`lßd
(
MO_RELAXED
);

288 
»t
->
	`w_Ref
(
MO_RELAXED
);

289 ià(!
»t
->
	`HasRoom
(
size
)) {

291 
»t
->
	`w_UnRef
(
MO_RELAXED
);

292 
»t
 = 
NewMubË
<
T
>Ô‘, 
bË_ÿ·c™y_
);

294 
»t
->
	`w_Ref
(
MO_RELAXED
);

295 
äÚt_
.
	`¡Üe
(
»t
, 
MO_RELAXED
);

299  
»t
;

300 
	}
}

	@lsm/table_list_test.cc

1 
	~<chrÚo
>

2 
	~<c¡dlib
>

3 
	~<memÜy
>

4 
	~<th»ad
>

5 
	~<veùÜ
>

6 
	~<mu‹x
>

8 
	~"li¡db/commÚ.h
"

9 
	~"li¡db/lsm/bË.h
"

10 
	~"li¡db/lsm/bË_li¡.h
"

11 
	~"li¡db/šdex/lockä“_skli¡.h
"

13 şas 
	cTabËSp
 {

14 
	mpublic
:

15 
	$TabËSp
(cÚ¡ 
size_t
 
c
è: 
	`ÿ·c™y_
(c), 
	`size_
(0), 
	$Ãxt_
(
nuÎ±r
) { }

16 * 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
è{ 
bË_
.
	`em¶aû
(key, v®ue);  
nuÎ±r
; 
	}
}

17 
S‘Next
(
¡d
::
sh¬ed_±r
<
TabËSp
> 
Ãxt
è{ 
Ãxt_
 =‚ext; }

18 
	g¡d
::
sh¬ed_±r
<
TabËSp
> 
	$Next
() {

19  
Ãxt_
;

20 
	}
}

21 
boŞ
 
	$HasRoom
(cÚ¡ 
size_t
 
size
) {

22 cÚ¡ 
size_t
 
befÜe
 = 
size_
.
	`ãtch_add
(
size
);

23  (
befÜe
 + 
size
 <ğ
ÿ·c™y_
);

24 
	}
}

25 
	g´iv©e
:

26 cÚ¡ 
size_t
 
ÿ·c™y_
;

27 
	g¡d
::
©omic
<
size_t
> 
size_
;

28 
	g¡d
::
sh¬ed_±r
<
TabËSp
> 
Ãxt_
;

29 
	g¡d
::
m­
<
Key
, 
	gV®ue
> 
	gbË_
;

32 
	g‹m¶©e
 <
şass
 
	gT
>

33 şas 
	cTabËLi¡Sh¬edMu‹x
 {

34 
	mpublic
:

35 
	$TabËLi¡Sh¬edMu‹x
(cÚ¡ 
size_t
 
bË_ÿ·c™y
è: 
	`bË_ÿ·c™y_
ÑabË_ÿ·c™y), 
	$äÚt_
(
nuÎ±r
) {

37 * 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

38 cÚ¡ 
size_t
 
kv_size
 = 
key
.
	`size
() + 8;

39 autØ
bË
 = 
	`G‘MubË
(
kv_size
);

40 
bË
->
	`Put
(
key
, 
v®ue
);

41  
nuÎ±r
;

42 
	}
}

43 
	$PrštDebug
() {

44 autØ
cu¼
 = 
äÚt_
;

45 
cu¼
 !ğ
nuÎ±r
) {

46 
	`årštf
(
¡d”r
, "[%p]->", 
cu¼
.
	`g‘
());

48 
cu¼
 = cu¼->
	`Next
();

50 
	`årštf
(
¡d”r
, "\n");

51 
	}
}

53 
	g´iv©e
:

54 
¡d
::
sh¬ed_±r
<
T
> 
	$G‘FrÚt
() {

55 autØ
»t
 = 
äÚt_
;

56 ià(
»t
 =ğ
nuÎ±r
) {

57 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

58 
»t
 = 
äÚt_
;

59 ià(
»t
 =ğ
nuÎ±r
) {

60 
»t
 = 
¡d
::
make_sh¬ed
<
T
>(
bË_ÿ·c™y_
);

61 
äÚt_
 = 
»t
;

64  
»t
;

65 
	}
}

66 
	g¡d
::
sh¬ed_±r
<
T
> 
	$G‘MubË
(cÚ¡ 
size_t
 
size
) {

67 autØ
»t
 = 
	`G‘FrÚt
();

68 ià(!
»t
->
	`HasRoom
(
size
)) {

69 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
š™_mu_
);

70 
»t
 = 
äÚt_
;

71 ià(!
»t
->
	`HasRoom
(
size
)) {

72 autØ
Ãw_bË
 = 
¡d
::
make_sh¬ed
<
T
>(
bË_ÿ·c™y_
);

73 
Ãw_bË
->
	`S‘Next
(
»t
);

74 
»t
 = 
Ãw_bË
;

75 
äÚt_
 = 
»t
;

78  
»t
;

79 
	}
}

81 cÚ¡ 
size_t
 
	gbË_ÿ·c™y_
;

82 
	g¡d
::
mu‹x
 
š™_mu_
;

83 
	g¡d
::
sh¬ed_±r
<
T
> 
äÚt_
;

86 şas 
	cRªdom
 {

87 
	m´iv©e
:

88 
ušt32_t
 
£ed_
;

89 
	mpublic
:

90 
ex¶ic™
 
	$Rªdom
(
ušt32_t
 
s
è: 
	$£ed_
(
s
 & 0x7fffffffu) {

92 ià(
£ed_
 == 0 || seed_ == 2147483647L) {

93 
£ed_
 = 1;

96 
ušt32_t
 
	$Next
() {

97 cÚ¡ 
ušt32_t
 
M
 = 2147483647L;

98 cÚ¡ 
ušt64_t
 
A
 = 16807;

105 
ušt64_t
 
´oduù
 = 
£ed_
 * 
A
;

108 
£ed_
 = 
¡©ic_ÿ¡
<
ušt32_t
>((
´oduù
 >> 31è+ (´oduù & 
M
));

112 ià(
£ed_
 > 
M
) {

113 
£ed_
 -ğ
M
;

115  
£ed_
;

116 
	}
}

119 
ušt32_t
 
	$UnifÜm
(
n
è{  
	`Next
(è%‚; 
	}
}

123 
boŞ
 
	$OÃIn
(
n
è{  (
	`Next
(è%‚è=ğ0; 
	}
}

128 
ušt32_t
 
	$Skewed
(
max_log
) {

129  
	`UnifÜm
(1 << UnifÜm(
max_log
 + 1));

130 
	}
}

133 
th»ad_loÿl
 
Rªdom
 
kRªd
(0);

135 şas 
	cMemTabËLockF»eSkLi¡
 : 
public
 
TabË
 {

136 
public
:

137 
usšg
 
Node
 = 
lockä“_skli¡
::Node;

138 
	$MemTabËLockF»eSkLi¡
(cÚ¡ 
size_t
 
c
è: 
	$TabË
(
c
) { }

139 
vœtu®
 * 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

141 cÚ¡ 
kB¿nchšg
 = 4;

142 
height
 = 1;

143 
height
 < 
kMaxHeight
 && ((
kRªd
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

144 
height
++;

147 cÚ¡ 
size_t
 
®loc_size
 = 
lockä“_skli¡
::
Node
::
	`compu‹_®loc_size
(
key
, 
height
);

149 * 
buf
 = 
	`m®loc
(
®loc_size
);

150 
Node
* 
node
 = Node::
	`š™_node
((*è
buf
, 
key
, (1uÎ<<8|
kTy³V®ue
), 
v®ue
, 
height
);

151 
node
->
log_moff
 = 0;

153 
bË_
.
	`š£¹
(
node
);

154 
	}
}

155 
vœtu®
 
boŞ
 
	$G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
) {

156  
Œue
;

157 
	}
}

159 
	g´iv©e
:

160 
lockä“_skli¡
 
bË_
;

163 şas 
	cTabËSpSk
 {

164 
	mpublic
:

165 
usšg
 
Node
 = 
lockä“_skli¡
::Node;

166 
	$TabËSpSk
(cÚ¡ 
size_t
 
c
è: 
	`ÿ·c™y_
(c), 
	`size_
(0), 
	$Ãxt_
(
nuÎ±r
) { }

167 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
) {

169 cÚ¡ 
kB¿nchšg
 = 4;

170 
height
 = 1;

171 
height
 < 
kMaxHeight
 && ((
kRªd
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

172 
height
++;

175 cÚ¡ 
size_t
 
®loc_size
 = 
lockä“_skli¡
::
Node
::
	`compu‹_®loc_size
(
key
, 
height
);

177 * 
buf
 = 
	`m®loc
(
®loc_size
);

178 
Node
* 
node
 = Node::
	`š™_node
((*è
buf
, 
key
, (1uÎ<<8|
kTy³V®ue
), 
v®ue
, 
height
);

179 
node
->
log_moff
 = 0;

181 
bË_
.
	`š£¹
(
node
);

182 
	}
}

183 
S‘Next
(
¡d
::
sh¬ed_±r
<
TabËSpSk
> 
Ãxt
è{ 
Ãxt_
 =‚ext; }

184 
	g¡d
::
sh¬ed_±r
<
TabËSpSk
> 
	$Next
() {

185  
Ãxt_
;

186 
	}
}

187 
boŞ
 
	$HasRoom
(cÚ¡ 
size_t
 
size
) {

188 cÚ¡ 
size_t
 
befÜe
 = 
size_
.
	`ãtch_add
(
size
);

189  (
befÜe
 + 
size
 <ğ
ÿ·c™y_
);

190 
	}
}

191 
	g´iv©e
:

192 cÚ¡ 
size_t
 
ÿ·c™y_
;

193 
	g¡d
::
©omic
<
size_t
> 
size_
;

194 
	g¡d
::
sh¬ed_±r
<
TabËSpSk
> 
Ãxt_
;

195 
lockä“_skli¡
 
	gbË_
;

198 
	g‹m¶©e
 <>

199 
MemTabËLockF»eSkLi¡
* 
	gNewMubË
<
	gMemTabËLockF»eSkLi¡
>(MemTabËLockF»eSkLi¡* cÚ¡ 
	g´ev
, cÚ¡ 
size_t
 
	gÿ·c™y
) {

200 
MemTabËLockF»eSkLi¡
* 
	gÃw_bË
 = 
Ãw
 MemTabËLockF»eSkLi¡(
ÿ·c™y
);

201 
	gÃw_bË
->
S‘Next
(
´ev
);

202  
	gÃw_bË
;

205 
	$CÚcu¼’tTe¡
() {

206 cÚ¡ 
size_t
 
num
 = 10*1000*1000;

207 cÚ¡ 
m
 = 80;

208 
	`årštf
(
¡dout
, "*** cu¡om_»fcouÁ” +†ockä“_skli¡: %dh»ad ***\n", 
m
);

209 
TabËLi¡
<
MemTabËLockF»eSkLi¡
> 
	`¦_bËs
(16*
num
/10);

210 autØ
time_begš
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

211 
¡d
::
veùÜ
<¡d::
th»ad
> 
wÜk”s
;

212 
i
 = 0; i < 
m
; i++) {

213 
wÜk”s
.
	`em¶aû_back
([&, 
i
]{

214 
size_t
 
j
 = 
i
 * (
num
/
m
); j < (i+1)*(num/m); j++) {

215 
¦_bËs
.
	`Put
(
j
, j);

219 auto& 
w
 : 
wÜk”s
) {

220 
w
.
	`još
();

222 autØ
du¿tiÚ
 = 
¡d
::
chrÚo
::du¿tiÚ<>(¡d::chrÚo::
¡—dy_şock
::
	`now
(è- 
time_begš
).
	`couÁ
();

223 
	`årštf
(
¡dout
, ": %.3làİs/ %.3là£ø\n", (è
num
 / 
du¿tiÚ
, duration);

224 
¦_bËs
.
	`PrštDebug
();

225 
	}
}

227 
	$CÚcu¼’tTe¡2
() {

228 cÚ¡ 
size_t
 
num
 = 10*1000*1000;

229 cÚ¡ 
m
 = 80;

230 
	`årštf
(
¡dout
, "*** sh¬ed_±¸+†ockä“_skli¡: %dh»ad ***\n", 
m
);

231 
TabËLi¡Sh¬edMu‹x
<
TabËSpSk
> 
	`¦_bËs
(16*
num
/10);

232 autØ
time_begš
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

233 
¡d
::
veùÜ
<¡d::
th»ad
> 
wÜk”s
;

234 
i
 = 0; i < 
m
; i++) {

235 
wÜk”s
.
	`em¶aû_back
([&, 
i
]{

236 
size_t
 
j
 = 
i
 * (
num
/
m
); j < (i+1)*(num/m); j++) {

237 
¦_bËs
.
	`Put
(
j
, j);

241 auto& 
w
 : 
wÜk”s
) {

242 
w
.
	`još
();

244 autØ
du¿tiÚ
 = 
¡d
::
chrÚo
::du¿tiÚ<>(¡d::chrÚo::
¡—dy_şock
::
	`now
(è- 
time_begš
).
	`couÁ
();

245 
	`årštf
(
¡dout
, ": %.3làİs/ %.3là£ø\n", (è
num
 / 
du¿tiÚ
, duration);

246 
¦_bËs
.
	`PrštDebug
();

247 
	}
}

252 şas 
	cMemTabËSM­Mu‹x
 : 
public
 
MemTabËSM­
 {

253 
public
:

254 
	$MemTabËSM­Mu‹x
(cÚ¡ 
size_t
 
c
è: 
	$MemTabËSM­
(
c
) { }

255 
vœtu®
 * 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
è
ov”ride
 {

256 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
wr™e_mu_
);

257 
bË_
.
	`em¶aû
(
key
, 
v®ue
);

258  
nuÎ±r
;

259 
	}
}

260 
	g´iv©e
:

261 
¡d
::
mu‹x
 
wr™e_mu_
;

264 
	g‹m¶©e
 <>

265 
MemTabËSM­Mu‹x
* 
	gNewMubË
<
	gMemTabËSM­Mu‹x
>(MemTabËSM­Mu‹x* cÚ¡ 
	g´ev
, cÚ¡ 
size_t
 
	gÿ·c™y
) {

266 
MemTabËSM­Mu‹x
* 
	gÃw_bË
 = 
Ãw
 MemTabËSM­Mu‹x(
ÿ·c™y
);

267 
	gÃw_bË
->
S‘Next
(
´ev
);

268  
	gÃw_bË
;

271 
	$CÚcu¼’tTe¡3
() {

272 cÚ¡ 
size_t
 
num
 = 10*1000*1000;

273 cÚ¡ 
m
 = 80;

274 
	`årštf
(
¡dout
, "*** cu¡om_»fcouÁ” + std::m­ + mu‹x: %dh»ad ***\n", 
m
);

275 
TabËLi¡
<
MemTabËSM­Mu‹x
> 
	`tbls
(16*
num
/10);

276 autØ
time_begš
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

277 
¡d
::
veùÜ
<¡d::
th»ad
> 
wÜk”s
;

278 
i
 = 0; i < 
m
; i++) {

279 
wÜk”s
.
	`em¶aû_back
([&, 
i
]{

280 
size_t
 
j
 = 
i
 * (
num
/
m
); j < (i+1)*(num/m); j++) {

281 
tbls
.
	`Put
(
j
, j);

285 auto& 
w
 : 
wÜk”s
) {

286 
w
.
	`još
();

288 autØ
du¿tiÚ
 = 
¡d
::
chrÚo
::du¿tiÚ<>(¡d::chrÚo::
¡—dy_şock
::
	`now
(è- 
time_begš
).
	`couÁ
();

289 
	`årštf
(
¡dout
, ": %.3làİs/ %.3là£ø\n", (è
num
 / 
du¿tiÚ
, duration);

290 
tbls
.
	`PrštDebug
();

291 
	}
}

293 
	$maš
() {

294 cÚ¡ 
size_t
 
num
 = 10*1000*1000;

296 
	`årštf
(
¡dout
, "*** custom_refcounter + std::map: SINGLE THREAD ***\n");

297 
TabËLi¡
<
MemTabËSM­
> 
	`my_bËs
(16*
num
/10);

298 autØ
time_begš
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

299 
size_t
 
i
 = 0; i < 
num
; i++) {

300 
my_bËs
.
	`Put
(
i
, i);

302 autØ
du¿tiÚ
 = 
¡d
::
chrÚo
::du¿tiÚ<>(¡d::chrÚo::
¡—dy_şock
::
	`now
(è- 
time_begš
).
	`couÁ
();

303 
	`årštf
(
¡dout
, ": %.3làİs/ %.3là£ø\n", (è
num
 / 
du¿tiÚ
, duration);

304 
my_bËs
.
	`PrštDebug
();

306 
	`årštf
(
¡dout
, "*** shared_ptr + std::map: SINGLE THREAD ***\n");

307 
TabËLi¡Sh¬edMu‹x
<
TabËSp
> 
	`¥_bËs
(16*
num
/10);

308 
time_begš
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

309 
size_t
 
i
 = 0; i < 
num
; i++) {

310 
¥_bËs
.
	`Put
(
i
, i);

312 
du¿tiÚ
 = 
¡d
::
chrÚo
::du¿tiÚ<>(¡d::chrÚo::
¡—dy_şock
::
	`now
(è- 
time_begš
).
	`couÁ
();

313 
	`årštf
(
¡dout
, ": %.3làİs/ %.3là£ø\n", (è
num
 / 
du¿tiÚ
, duration);

314 
¥_bËs
.
	`PrštDebug
();

317 
	`årštf
(
¡dout
, "*** custom_refcounter +†ockfree_skiplist: SINGLE THREAD ***\n");

318 
TabËLi¡
<
MemTabËLockF»eSkLi¡
> 
	`¦_bËs
(16*
num
/10);

319 
time_begš
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

320 
size_t
 
i
 = 0; i < 
num
; i++) {

321 
¦_bËs
.
	`Put
(
i
, i);

323 
du¿tiÚ
 = 
¡d
::
chrÚo
::du¿tiÚ<>(¡d::chrÚo::
¡—dy_şock
::
	`now
(è- 
time_begš
).
	`couÁ
();

324 
	`årštf
(
¡dout
, ": %.3làİs/ %.3là£ø\n", (è
num
 / 
du¿tiÚ
, duration);

325 
¦_bËs
.
	`PrštDebug
();

327 
	`CÚcu¼’tTe¡
();

328 
	`CÚcu¼’tTe¡2
();

329 
	`CÚcu¼’tTe¡3
();

332 
	}
}

	@lsm/table_v2.h

1 #iâdeà
LISTDB_LSM_TABLE_V2_H_


2 
	#LISTDB_LSM_TABLE_V2_H_


	)

4 
	~<©omic
>

6 
	~"li¡db/commÚ.h
"

7 
	~"li¡db/šdex/lockä“_skli¡.h
"

9 
cÚ¡ex´
 
	gkNumCl›Ás
 = 80;

10 
cÚ¡ex´
 
size_t
 
	gkBulkRef
 = 10;

11 
cÚ¡ex´
 
size_t
 
	gkBulkSize
 = 10 * 16;

13 şas 
	cTabËV2
 {

14 
	mpublic
:

15 
TabËV2
(cÚ¡ 
size_t
 
ÿ·c™y
);

17 * 
Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
);

19 
boŞ
 
G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
);

23 
S‘Next
(
TabË
* 
Ãxt
);

25 
TabË
* 
Next
();

27 
w_Ref
(cÚ¡ 
s
);

29 
w_UnRef
(cÚ¡ 
s
);

31 
boŞ
 
HasRoom
(cÚ¡ 
s
, cÚ¡ 
size_t
 
size
);

37 
	m´iv©e
:

38 cÚ¡ 
size_t
 
ÿ·c™y_
;

39 
ušt64_t
 
	msub_»f_
[
kNumCl›Ás
];

42 
ušt64_t
 
	msub_size_»£rved_
[
kNumCl›Ás
];

43 
ušt64_t
 
	msub_size_
[
kNumCl›Ás
];

45 
	m¡d
::
©omic
<
size_t
> 
size_
;

46 
	m¡d
::
©omic
<
TabË
*> 
Ãxt_
;

47 
lockä“_skli¡
 
	mbË_
;

50 
šlše
 
boŞ
 
	$w_Ref
(cÚ¡ 
id
) {

51 
sub_»f_
[
id
]++;

52 
	}
}

54 
šlše
 
	$w_UnRef
(cÚ¡ 
id
) {

55 
sub_»f_
[
id
]--;

56 
	}
}

58 
šlše
 
boŞ
 
	$HasRoom
(cÚ¡ 
id
, cÚ¡ 
size_t
 
size
) {

59 ià(
sub_size_
[
id
] + 
size
 > 
sub_size_»£rved_
[id]) {

60 
size_t
 
befÜe
 = 
size_
.
	`ãtch_add
(
kBulkSize
);

61 ià(
befÜe
 + 
kBulkSize
 > 
ÿ·c™y_
) {

62  
çl£
;

64 
sub_size_»£rved_
[
id
] +ğ
kBulkSize
;

66 
sub_size_
[
id
] +ğ
size
;

67  
Œue
;

68 
	}
}

	@monitoring/histogram.h

10 #´agm¨
Úû


12 
	~<ÿs£¹
>

13 
	~<¡ršg
>

14 
	~<veùÜ
>

15 
	~<m­
>

16 
	~<mu‹x
>

18 
	sHi¡og¿mD©a
 {

19 
	mmedŸn
;

20 
	m³rûÁe95
;

21 
	m³rûÁe99
;

22 
	mav”age
;

23 
	m¡ªd¬d_devŸtiÚ
;

26 
	mmax
 = 0.0;

27 
ušt64_t
 
	mcouÁ
 = 0;

28 
ušt64_t
 
	msum
 = 0;

29 
	mmš
 = 0.0;

32 şas 
	cHi¡og¿mBuck‘M­³r
 {

33 
	mpublic
:

35 
Hi¡og¿mBuck‘M­³r
();

38 
size_t
 
	$IndexFÜV®ue
(
ušt64_t
 
v®ue
) const;

41 
size_t
 
	$Buck‘CouÁ
() const {

42  
buck‘V®ues_
.
	`size
();

45 
ušt64_t
 
	$La¡V®ue
() const {

46  
maxBuck‘V®ue_
;

47 
	}
}

49 
ušt64_t
 
	$Fœ¡V®ue
() const {

50  
mšBuck‘V®ue_
;

51 
	}
}

53 
ušt64_t
 
	$Buck‘Lim™
(cÚ¡ 
size_t
 
buck‘Numb”
) const {

54 
	`as£¹
(
buck‘Numb”
 < 
	`Buck‘CouÁ
());

55  
buck‘V®ues_
[
buck‘Numb”
];

56 
	}
}

58 
	g´iv©e
:

59 
¡d
::
veùÜ
<
ušt64_t
> 
buck‘V®ues_
;

60 
ušt64_t
 
	gmaxBuck‘V®ue_
;

61 
ušt64_t
 
	gmšBuck‘V®ue_
;

64 
	sHi¡og¿mSt
 {

65 
Hi¡og¿mSt
();

66 ~
Hi¡og¿mSt
() {}

68 
Hi¡og¿mSt
(cÚ¡ Hi¡og¿mSt&èğ
d–‘e
;

69 
	mHi¡og¿mSt
& 
	mİ”©Ü
=(cÚ¡ 
Hi¡og¿mSt
&èğ
d–‘e
;

71 
CË¬
();

72 
boŞ
 
Em±y
() const;

73 
Add
(
ušt64_t
 
v®ue
);

74 
M”ge
(cÚ¡ 
Hi¡og¿mSt
& 
Ùh”
);

76 
šlše
 
ušt64_t
 
mš
(ècÚ¡ {  
	mmš_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
); }

77 
šlše
 
ušt64_t
 
max
(ècÚ¡ {  
	mmax_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
); }

78 
šlše
 
ušt64_t
 
num
(ècÚ¡ {  
	mnum_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
); }

79 
šlše
 
ušt64_t
 
sum
(ècÚ¡ {  
	msum_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
); }

80 
šlše
 
ušt64_t
 
sum_squ¬es
() const {

81  
	msum_squ¬es_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

83 
šlše
 
ušt64_t
 
buck‘_©
(
size_t
 
b
) const {

84  
	mbuck‘s_
[
b
].
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

87 
MedŸn
() const;

88 
P”ûÁe
(
p
) const;

89 
Av”age
() const;

90 
Snd¬dDevŸtiÚ
() const;

91 
D©a
(
Hi¡og¿mD©a
* cÚ¡ 
d©a
) const;

92 
	m¡d
::
¡ršg
 
ToSŒšg
() const;

97 
	m¡d
::
©omic_ušt_ç¡64_t
 
mš_
;

98 
	m¡d
::
©omic_ušt_ç¡64_t
 
max_
;

99 
	m¡d
::
©omic_ušt_ç¡64_t
 
num_
;

100 
	m¡d
::
©omic_ušt_ç¡64_t
 
sum_
;

101 
	m¡d
::
©omic_ušt_ç¡64_t
 
sum_squ¬es_
;

102 
	m¡d
::
©omic_ušt_ç¡64_t
 
buck‘s_
[109];

103 cÚ¡ 
ušt64_t
 
	mnum_buck‘s_
;

106 şas 
	cHi¡og¿m
 {

107 
	mpublic
:

108 
	$Hi¡og¿m
() {}

109 
vœtu®
 ~
	$Hi¡og¿m
(è{
	}
};

111 
vœtu®
 
CË¬
() = 0;

112 
vœtu®
 
boŞ
 
	$Em±y
() const = 0;

113 
vœtu®
 
	`Add
(
ušt64_t
 
v®ue
) = 0;

114 
vœtu®
 
	`M”ge
(cÚ¡ 
Hi¡og¿m
&) = 0;

116 
vœtu®
 
¡d
::
¡ršg
 
	$ToSŒšg
() const = 0;

117 
vœtu®
 cÚ¡ * 
	$Name
() const = 0;

118 
vœtu®
 
ušt64_t
 
	$mš
() const = 0;

119 
vœtu®
 
ušt64_t
 
	$max
() const = 0;

120 
vœtu®
 
ušt64_t
 
	$num
() const = 0;

121 
vœtu®
 
	$MedŸn
() const = 0;

122 
vœtu®
 
	$P”ûÁe
(
p
) const = 0;

123 
vœtu®
 
	$Av”age
() const = 0;

124 
vœtu®
 
	$Snd¬dDevŸtiÚ
() const = 0;

125 
vœtu®
 
	$D©a
(
Hi¡og¿mD©a
* cÚ¡ 
d©a
) const = 0;

126 
	}
};

128 şas 
	cHi¡og¿mIm¶
 : 
public
 
Hi¡og¿m
 {

129 
public
:

130 
	$Hi¡og¿mIm¶
(è{ 
	`CË¬
(); }

132 
	`Hi¡og¿mIm¶
(cÚ¡ 
Hi¡og¿mIm¶
&èğ
d–‘e
;

133 
Hi¡og¿mIm¶
& 
İ”©Ü
=(cÚ¡ Hi¡og¿mIm¶&èğ
d–‘e
;

135 
vœtu®
 
	$CË¬
(è
ov”ride
;

136 
vœtu®
 
boŞ
 
	$Em±y
(ècÚ¡ 
ov”ride
;

137 
vœtu®
 
	$Add
(
ušt64_t
 
v®ue
è
ov”ride
;

138 
vœtu®
 
	$M”ge
(cÚ¡ 
Hi¡og¿m
& 
Ùh”
è
ov”ride
;

139 
	`M”ge
(cÚ¡ 
Hi¡og¿mIm¶
& 
Ùh”
);

141 
vœtu®
 
¡d
::
¡ršg
 
	$ToSŒšg
(ècÚ¡ 
ov”ride
;

142 
vœtu®
 cÚ¡ * 
	$Name
(ècÚ¡ 
ov”ride
 {  "Hi¡og¿mIm¶"; 
	}
}

143 
vœtu®
 
ušt64_t
 
	$mš
(ècÚ¡ 
ov”ride
 {  
¡©s_
.
	`mš
(); 
	}
}

144 
vœtu®
 
ušt64_t
 
	$max
(ècÚ¡ 
ov”ride
 {  
¡©s_
.
	`max
(); 
	}
}

145 
vœtu®
 
ušt64_t
 
	$num
(ècÚ¡ 
ov”ride
 {  
¡©s_
.
	`num
(); 
	}
}

146 
vœtu®
 
	$MedŸn
(ècÚ¡ 
ov”ride
;

147 
vœtu®
 
	$P”ûÁe
(
p
ècÚ¡ 
ov”ride
;

148 
vœtu®
 
	$Av”age
(ècÚ¡ 
ov”ride
;

149 
vœtu®
 
	$Snd¬dDevŸtiÚ
(ècÚ¡ 
ov”ride
;

150 
vœtu®
 
	$D©a
(
Hi¡og¿mD©a
* cÚ¡ 
d©a
ècÚ¡ 
ov”ride
;

152 
vœtu®
 ~
	$Hi¡og¿mIm¶
(è{
	}
}

154 
	g´iv©e
:

155 
Hi¡og¿mSt
 
¡©s_
;

156 
	g¡d
::
mu‹x
 
mu‹x_
;

159 
	gHi¡og¿mBuck‘M­³r
::
	$Hi¡og¿mBuck‘M­³r
() {

162 
buck‘V®ues_
 = {1, 2};

163 
buck‘_v®
 = 
¡©ic_ÿ¡
<>(
buck‘V®ues_
.
	`back
());

164 (
buck‘_v®
 = 1.5 * buck‘_v®è<ğ
¡©ic_ÿ¡
<>(
¡d
::
num”ic_lim™s
<
ušt64_t
>::
	`max
())) {

165 
buck‘V®ues_
.
	`push_back
(
¡©ic_ÿ¡
<
ušt64_t
>(
buck‘_v®
));

168 
ušt64_t
 
pow_of_‹n
 = 1;

169 
buck‘V®ues_
.
	`back
() / 10 > 10) {

170 
buck‘V®ues_
.
	`back
() /= 10;

171 
pow_of_‹n
 *= 10;

173 
buck‘V®ues_
.
	`back
(è*ğ
pow_of_‹n
;

175 
maxBuck‘V®ue_
 = 
buck‘V®ues_
.
	`back
();

176 
mšBuck‘V®ue_
 = 
buck‘V®ues_
.
	`äÚt
();

177 
	}
}

179 
size_t
 
	gHi¡og¿mBuck‘M­³r
::
	$IndexFÜV®ue
(cÚ¡ 
ušt64_t
 
v®ue
) const {

180 autØ
beg
 = 
buck‘V®ues_
.
	`begš
();

181 autØ
’d
 = 
buck‘V®ues_
.
	`’d
();

182 ià(
v®ue
 >ğ
maxBuck‘V®ue_
)

183  
’d
 - 
beg
 - 1;

185  
¡d
::
	`low”_bound
(
beg
, 
’d
, 
v®ue
) - beg;

186 
	}
}

188 
	gÇme¥aû
 {

189 cÚ¡ 
Hi¡og¿mBuck‘M­³r
 
	gbuck‘M­³r
;

192 
	gHi¡og¿mSt
::
	$Hi¡og¿mSt
()

193 : 
	`num_buck‘s_
(
buck‘M­³r
.
	$Buck‘CouÁ
()) {

194 
	`as£¹
(
num_buck‘s_
 =ğ(
buck‘s_
) / (*buckets_));

195 
	`CË¬
();

196 
	}
}

198 
	gHi¡og¿mSt
::
	$CË¬
() {

199 
mš_
.
	`¡Üe
(
buck‘M­³r
.
	`La¡V®ue
(), 
¡d
::
memÜy_Üd”_»Ïxed
);

200 
max_
.
	`¡Üe
(0, 
¡d
::
memÜy_Üd”_»Ïxed
);

201 
num_
.
	`¡Üe
(0, 
¡d
::
memÜy_Üd”_»Ïxed
);

202 
sum_
.
	`¡Üe
(0, 
¡d
::
memÜy_Üd”_»Ïxed
);

203 
sum_squ¬es_
.
	`¡Üe
(0, 
¡d
::
memÜy_Üd”_»Ïxed
);

204 
b
 = 0; b < 
num_buck‘s_
; b++) {

205 
buck‘s_
[
b
].
	`¡Üe
(0, 
¡d
::
memÜy_Üd”_»Ïxed
);

207 
	}
};

209 
boŞ
 
	gHi¡og¿mSt
::
	$Em±y
(ècÚ¡ {  
	`num
(è=ğ0; 
	}
}

211 
	gHi¡og¿mSt
::
	$Add
(
ušt64_t
 
v®ue
) {

215 cÚ¡ 
size_t
 
šdex
 = 
buck‘M­³r
.
	`IndexFÜV®ue
(
v®ue
);

216 
	`as£¹
(
šdex
 < 
num_buck‘s_
);

217 
buck‘s_
[
šdex
].
	`¡Üe
(buck‘s_[šdex].
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
) + 1,

218 
¡d
::
memÜy_Üd”_»Ïxed
);

220 
ušt64_t
 
Şd_mš
 = 
	`mš
();

221 ià(
v®ue
 < 
Şd_mš
) {

222 
mš_
.
	`¡Üe
(
v®ue
, 
¡d
::
memÜy_Üd”_»Ïxed
);

225 
ušt64_t
 
Şd_max
 = 
	`max
();

226 ià(
v®ue
 > 
Şd_max
) {

227 
max_
.
	`¡Üe
(
v®ue
, 
¡d
::
memÜy_Üd”_»Ïxed
);

230 
num_
.
	`¡Üe
Òum_.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
) + 1,

231 
¡d
::
memÜy_Üd”_»Ïxed
);

232 
sum_
.
	`¡Üe
(sum_.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
è+ 
v®ue
,

233 
¡d
::
memÜy_Üd”_»Ïxed
);

234 
sum_squ¬es_
.
	`¡Üe
(

235 
sum_squ¬es_
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
è+ 
v®ue
 * value,

236 
¡d
::
memÜy_Üd”_»Ïxed
);

237 
	}
}

239 
	gHi¡og¿mSt
::
	$M”ge
(cÚ¡ 
Hi¡og¿mSt
& 
Ùh”
) {

243 
ušt64_t
 
Şd_mš
 = 
	`mš
();

244 
ušt64_t
 
Ùh”_mš
 = 
Ùh”
.
	`mš
();

245 
Ùh”_mš
 < 
Şd_mš
 &&

246 !
mš_
.
	`com·»_exchªge_w—k
(
Şd_mš
, 
Ùh”_mš
)) {}

248 
ušt64_t
 
Şd_max
 = 
	`max
();

249 
ušt64_t
 
Ùh”_max
 = 
Ùh”
.
	`max
();

250 
Ùh”_max
 > 
Şd_max
 &&

251 !
max_
.
	`com·»_exchªge_w—k
(
Şd_max
, 
Ùh”_max
)) {}

253 
num_
.
	`ãtch_add
(
Ùh”
.
	`num
(), 
¡d
::
memÜy_Üd”_»Ïxed
);

254 
sum_
.
	`ãtch_add
(
Ùh”
.
	`sum
(), 
¡d
::
memÜy_Üd”_»Ïxed
);

255 
sum_squ¬es_
.
	`ãtch_add
(
Ùh”
.
	`sum_squ¬es
(), 
¡d
::
memÜy_Üd”_»Ïxed
);

256 
b
 = 0; b < 
num_buck‘s_
; b++) {

257 
buck‘s_
[
b
].
	`ãtch_add
(
Ùh”
.
	`buck‘_©
(b), 
¡d
::
memÜy_Üd”_»Ïxed
);

259 
	}
}

261 
	gHi¡og¿mSt
::
	$MedŸn
() const {

262  
	`P”ûÁe
(50.0);

263 
	}
}

265 
	gHi¡og¿mSt
::
	$P”ûÁe
(
p
) const {

266 
th»shŞd
 = 
	`num
(è* (
p
 / 100.0);

267 
ušt64_t
 
cumuÏtive_sum
 = 0;

268 
b
 = 0; b < 
num_buck‘s_
; b++) {

269 
ušt64_t
 
buck‘_v®ue
 = 
	`buck‘_©
(
b
);

270 
cumuÏtive_sum
 +ğ
buck‘_v®ue
;

271 ià(
cumuÏtive_sum
 >ğ
th»shŞd
) {

273 
ušt64_t
 
Ëá_pošt
 = (
b
 =ğ0è? 0 : 
buck‘M­³r
.
	`Buck‘Lim™
(b-1);

274 
ušt64_t
 
right_pošt
 = 
buck‘M­³r
.
	`Buck‘Lim™
(
b
);

275 
ušt64_t
 
Ëá_sum
 = 
cumuÏtive_sum
 - 
buck‘_v®ue
;

276 
ušt64_t
 
right_sum
 = 
cumuÏtive_sum
;

277 
pos
 = 0;

278 
ušt64_t
 
right_Ëá_diff
 = 
right_sum
 - 
Ëá_sum
;

279 ià(
right_Ëá_diff
 != 0) {

280 
pos
 = (
th»shŞd
 - 
Ëá_sum
è/ 
right_Ëá_diff
;

282 
r
 = 
Ëá_pošt
 + (
right_pošt
 -†eá_poštè* 
pos
;

283 
ušt64_t
 
cur_mš
 = 
	`mš
();

284 
ušt64_t
 
cur_max
 = 
	`max
();

285 ià(
r
 < 
cur_mš
è¸ğ
¡©ic_ÿ¡
<>(cur_min);

286 ià(
r
 > 
cur_max
è¸ğ
¡©ic_ÿ¡
<>(cur_max);

287  
r
;

290  
¡©ic_ÿ¡
<>(
	`max
());

291 
	}
}

293 
	gHi¡og¿mSt
::
	$Av”age
() const {

294 
ušt64_t
 
cur_num
 = 
	`num
();

295 
ušt64_t
 
cur_sum
 = 
	`sum
();

296 ià(
cur_num
 == 0)  0;

297  
¡©ic_ÿ¡
<>(
cur_sum
è/ stic_ÿ¡<>(
cur_num
);

298 
	}
}

300 
	gHi¡og¿mSt
::
	$Snd¬dDevŸtiÚ
() const {

301 
ušt64_t
 
cur_num
 = 
	`num
();

302 
ušt64_t
 
cur_sum
 = 
	`sum
();

303 
ušt64_t
 
cur_sum_squ¬es
 = 
	`sum_squ¬es
();

304 ià(
cur_num
 == 0)  0;

305 
v¬Ÿnû
 =

306 
¡©ic_ÿ¡
<>(
cur_sum_squ¬es
 * 
cur_num
 - 
cur_sum
 * cur_sum) /

307 
¡©ic_ÿ¡
<>(
cur_num
 * cur_num);

308  
¡d
::
	`sq¹
(
v¬Ÿnû
);

309 
	}
}

310 
	g¡d
::
¡ršg
 
Hi¡og¿mSt
::
	$ToSŒšg
() const {

311 
ušt64_t
 
cur_num
 = 
	`num
();

312 
¡d
::
¡ršg
 
r
;

313 
buf
[1650];

314 
	`¢´štf
(
buf
, (buf),

316 
cur_num
, 
	`Av”age
(), 
	`Snd¬dDevŸtiÚ
());

317 
r
.
	`­³nd
(
buf
);

318 
	`¢´štf
(
buf
, (buf),

320 (
cur_num
 =ğ0 ? 0 : 
	`mš
()), 
	`MedŸn
(), (cur_num =ğ0 ? 0 : 
	`max
()));

321 
r
.
	`­³nd
(
buf
);

322 
	`¢´štf
(
buf
, (buf),

325 
	`P”ûÁe
(50), Percentile(75), Percentile(99), Percentile(99.9),

326 
	`P”ûÁe
(99.99));

327 
r
.
	`­³nd
(
buf
);

328 
r
.
	`­³nd
("------------------------------------------------------\n");

329 ià(
cur_num
 =ğ0è 
r
;

330 cÚ¡ 
muÉ
 = 100.0 / 
cur_num
;

331 
ušt64_t
 
cumuÏtive_sum
 = 0;

332 
b
 = 0; b < 
num_buck‘s_
; b++) {

333 
ušt64_t
 
buck‘_v®ue
 = 
	`buck‘_©
(
b
);

334 ià(
buck‘_v®ue
 <= 0.0) ;

335 
cumuÏtive_sum
 +ğ
buck‘_v®ue
;

336 
	`¢´štf
(
buf
, (buf),

338 (
b
 == 0) ? '[' : '(',

339 (
b
 =ğ0è? 0 : 
buck‘M­³r
.
	`Buck‘Lim™
(b-1),

340 
buck‘M­³r
.
	`Buck‘Lim™
(
b
),

341 
buck‘_v®ue
,

342 (
muÉ
 * 
buck‘_v®ue
),

343 (
muÉ
 * 
cumuÏtive_sum
));

344 
r
.
	`­³nd
(
buf
);

347 
size_t
 
m¬ks
 = 
¡©ic_ÿ¡
<size_t>(
muÉ
 * 
buck‘_v®ue
 / 5 + 0.5);

348 
r
.
	`­³nd
(
m¬ks
, '#');

349 
r
.
	`push_back
('\n');

351  
r
;

352 
	}
}

354 
	gHi¡og¿mSt
::
	$D©a
(
Hi¡og¿mD©a
 * cÚ¡ 
d©a
) const {

355 
	`as£¹
(
d©a
);

356 
d©a
->
medŸn
 = 
	`MedŸn
();

357 
d©a
->
³rûÁe95
 = 
	`P”ûÁe
(95);

358 
d©a
->
³rûÁe99
 = 
	`P”ûÁe
(99);

359 
d©a
->
max
 = 
¡©ic_ÿ¡
<>(
	`max
());

360 
d©a
->
av”age
 = 
	`Av”age
();

361 
d©a
->
¡ªd¬d_devŸtiÚ
 = 
	`Snd¬dDevŸtiÚ
();

362 
d©a
->
couÁ
 = 
	`num
();

363 
d©a
->
sum
 = 
	`sum
();

364 
d©a
->
mš
 = 
¡©ic_ÿ¡
<>(
	`mš
());

365 
	}
}

367 
	gHi¡og¿mIm¶
::
	$CË¬
() {

368 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mu‹x_
);

369 
¡©s_
.
	`CË¬
();

370 
	}
}

372 
boŞ
 
	gHi¡og¿mIm¶
::
	$Em±y
() const {

373  
¡©s_
.
	`Em±y
();

374 
	}
}

376 
	gHi¡og¿mIm¶
::
	$Add
(
ušt64_t
 
v®ue
) {

377 
¡©s_
.
	`Add
(
v®ue
);

378 
	}
}

380 
	gHi¡og¿mIm¶
::
	$M”ge
(cÚ¡ 
Hi¡og¿m
& 
Ùh”
) {

381 ià(
	`¡rcmp
(
	`Name
(), 
Ùh”
.Name()) == 0) {

382 
	`M”ge
(*
¡©ic_ÿ¡
<cÚ¡ 
Hi¡og¿mIm¶
*>(&
Ùh”
));

384 
	}
}

386 
	gHi¡og¿mIm¶
::
	$M”ge
(cÚ¡ 
Hi¡og¿mIm¶
& 
Ùh”
) {

387 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mu‹x_
);

388 
¡©s_
.
	`M”ge
(
Ùh”
.stats_);

389 
	}
}

391 
	gHi¡og¿mIm¶
::
	$MedŸn
() const {

392  
¡©s_
.
	`MedŸn
();

393 
	}
}

395 
	gHi¡og¿mIm¶
::
	$P”ûÁe
(
p
) const {

396  
¡©s_
.
	`P”ûÁe
(
p
);

397 
	}
}

399 
	gHi¡og¿mIm¶
::
	$Av”age
() const {

400  
¡©s_
.
	`Av”age
();

401 
	}
}

403 
	gHi¡og¿mIm¶
::
	$Snd¬dDevŸtiÚ
() const {

404  
¡©s_
.
	`Snd¬dDevŸtiÚ
();

405 
	}
}

407 
	g¡d
::
¡ršg
 
Hi¡og¿mIm¶
::
	$ToSŒšg
() const {

408  
¡©s_
.
	`ToSŒšg
();

409 
	}
}

411 
	gHi¡og¿mIm¶
::
	$D©a
(
Hi¡og¿mD©a
 * cÚ¡ 
d©a
) const {

412 
¡©s_
.
	`D©a
(
d©a
);

413 
	}
}

	@pmem/db_layout.h

1 #iâdeà
LISTDB_PMEM_DB_LAYOUT_H_


2 
	#LISTDB_PMEM_DB_LAYOUT_H_


	)

4 
	~"li¡db/commÚ.h
"

5 
	~"li¡db/pmem/pmem.h
"

	@pmem/pmem.h

1 #iâdeà
LISTDB_PMEM_PMEM_H_


2 
	#LISTDB_PMEM_PMEM_H_


	)

4 
	~<io¡»am
>

5 
	~<veùÜ
>

7 
	~<libpmemobj++/p.hµ
>

8 
	~<libpmemobj++/poŞ.hµ
>

10 şas 
	cPmem
 {

11 
	mpublic
:

12 
‹m¶©e
 <
ty³Çme
 
T
>

13 
BšdPoŞ
(cÚ¡ 
¡d
::
¡ršg
& 
·th
, cÚ¡ std::¡ršg& 
Ïyout
, cÚ¡ 
size_t
 
size
);

15 
BšdPoŞS‘
(cÚ¡ 
¡d
::
¡ršg
& 
·th
, cÚ¡ std::¡ršg& 
Ïyout
);

17 
	m‹m¶©e
 <
ty³Çme
 
	mT
>

18 
BšdPoŞS‘
(cÚ¡ 
¡d
::
¡ršg
& 
·th
, cÚ¡ std::¡ršg& 
Ïyout
);

20 
CË¬
();

22 
	mpmem
::
obj
::
poŞ_ba£
 
	$poŞ
(cÚ¡ 
poŞ_ba£_id
) {

23  *
poŞ_ba£s_
[
poŞ_ba£_id
];

25 
‹m¶©e
 <
ty³Çme
 
T
>

26 
pmem
::
obj
::
poŞ
<
T
> 
	$poŞ
(cÚ¡ 
poŞ_ba£_id
) {

28  *((
pmem
::
obj
::
poŞ
<
T
>*è
poŞ_ba£s_
[
poŞ_ba£_id
]);

29 
	}
}

31 
	g´iv©e
:

32 
šlše
 
¡d
::
veùÜ
<
pmem
::
obj
::
poŞ_ba£
*> 
poŞ_ba£s_
;

35 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

36 
	gPmem
::
	$BšdPoŞ
(cÚ¡ 
¡d
::
¡ršg
& 
·th
, cÚ¡ std::¡ršg& 
Ïyout
, cÚ¡ 
size_t
 
size
) {

37 
pmem
::
obj
::
poŞ
<
T
> 
pİ
;

38 ià(
pmem
::
obj
::
poŞ_ba£
::
	`check
(
·th
, 
Ïyout
) == 1) {

39 
pİ
 = 
pmem
::
obj
::
poŞ
<
T
>::
	`İ’
(
·th
, 
Ïyout
);

41 
pİ
 = 
pmem
::
obj
::
poŞ
<
T
>::
	`ü—‹
(
·th
, 
Ïyout
, 
size
, 0666);

43 autØ
™
 = 
poŞ_ba£s_
.
	`š£¹
ÕoŞ_ba£s_.
	`’d
(), 
Ãw
 
pmem
::
obj
::
poŞ
<
T
>(
pİ
));

44  
¡d
::
	`di¡ªû
(
poŞ_ba£s_
.
	`begš
(), 
™
);

45 
	}
}

47 
	gPmem
::
	$BšdPoŞS‘
(cÚ¡ 
¡d
::
¡ršg
& 
·th
, cÚ¡ std::¡ršg& 
Ïyout
) {

48 
pmem
::
obj
::
poŞ_ba£
 
pİ
;

49 ià(
pmem
::
obj
::
poŞ_ba£
::
	`check
(
·th
, 
Ïyout
) == 1) {

50 
pİ
 = 
pmem
::
obj
::
poŞ_ba£
::
	`İ’
(
·th
, 
Ïyout
);

52 
pİ
 = 
pmem
::
obj
::
poŞ_ba£
::
	`ü—‹
(
·th
, 
Ïyout
, 0, 0666);

54 autØ
™
 = 
poŞ_ba£s_
.
	`š£¹
ÕoŞ_ba£s_.
	`’d
(), 
Ãw
 
pmem
::
obj
::
	`poŞ_ba£
(
pİ
));

55  
¡d
::
	`di¡ªû
(
poŞ_ba£s_
.
	`begš
(), 
™
);

56 
	}
}

58 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

59 
	gPmem
::
	$BšdPoŞS‘
(cÚ¡ 
¡d
::
¡ršg
& 
·th
, cÚ¡ std::¡ršg& 
Ïyout
) {

60 
pmem
::
obj
::
poŞ
<
T
> 
pİ
;

61 ià(
pmem
::
obj
::
poŞ_ba£
::
	`check
(
·th
, 
Ïyout
) == 1) {

62 
pİ
 = 
pmem
::
obj
::
poŞ
<
T
>::
	`İ’
(
·th
, 
Ïyout
);

64 
pİ
 = 
pmem
::
obj
::
poŞ
<
T
>::
	`ü—‹
(
·th
, 
Ïyout
, 0, 0666);

66 autØ
™
 = 
poŞ_ba£s_
.
	`š£¹
ÕoŞ_ba£s_.
	`’d
(), 
Ãw
 
pmem
::
obj
::
poŞ
<
T
>(
pİ
));

67  
¡d
::
	`di¡ªû
(
poŞ_ba£s_
.
	`begš
(), 
™
);

68 
	}
}

70 
	gPmem
::
	$CË¬
() {

71 auto& 
poŞ_ba£
 : 
poŞ_ba£s_
) {

72 
poŞ_ba£
->
	`şo£
();

74 
poŞ_ba£s_
.
	`ş—r
();

75 
	}
}

	@pmem/pmem_arena.h

1 #iâdeà
LISTDB_PMEM_PMEM_ARENA_H_


2 
	#LISTDB_PMEM_PMEM_ARENA_H_


	)

4 
	~<libpmemobj++/make_³rsi¡’t_©omic.hµ
>

5 
	~<libpmemobj++/p.hµ
>

6 
	~<libpmemobj++/³rsi¡’t_±r.hµ
>

7 
	~<libpmemobj++/poŞ.hµ
>

	@pmem/pmem_ptr.h

1 #iâdeà
LISTDB_PMEM_PMEM_PTR_H_


2 
	#LISTDB_PMEM_PMEM_PTR_H_


	)

4 
	~"li¡db/pmem/pmem.h
"

6 şas 
	cPmemPŒ
 {

7 
	mpublic
:

8 
	$PmemPŒ
(è: 
	$d©a_
(0) { }

10 
	`PmemPŒ
(
št16_t
 
poŞ_id
, 
ušt64_t
 
off£t
);

12 
	`PmemPŒ
(
št16_t
 
poŞ_id
, * 
vaddr
);

14 
	`PmemPŒ
(
ušt64_t
 
dump
);

16 * 
	`g‘
();

18 
‹m¶©e
 <
ty³Çme
 
T
>

19 
T
* 
	`g‘
();

21 
ušt64_t
 
	`dump
();

23 
št16_t
 
	`poŞ_id
();

25 
ušt64_t
 
	`off£t
();

27 
ušt64_t
 
	`Encode
(cÚ¡ 
št16_t
 
poŞ_id
, cÚ¡ ušt64_ˆ
off£t
);

29 
‹m¶©e
 <
ty³Çme
 
T
>

30 
T
* 
	`Decode
(cÚ¡ 
ušt64_t
 
dump
);

32 
‹m¶©e
 <
ty³Çme
 
T
>

33 
T
* 
	$Compo£
(
št16_t
 
poŞ_id
, 
ušt64_t
 
off£t
) {

34 ià(
off£t
 == 0) {

35  
nuÎ±r
;

37  (
T
*è((
ušŒ_t
è
Pmem
::
	`poŞ
(
poŞ_id
).
	`hªdË
(è+ 
off£t
);

38 
	}
}

40 
ušt64_t
 
	$Off£tOfVaddr
(
št16_t
 
poŞ_id
, * 
vaddr
) {

41  (
ušŒ_t
è
vaddr
 - (ušŒ_tè
Pmem
::
	`poŞ
(
poŞ_id
).
	`hªdË
();

42 
	}
}

44 
	g´iv©e
:

45 
ušt64_t
 
d©a_
;

48 
	gPmemPŒ
::
	$PmemPŒ
(cÚ¡ 
št16_t
 
poŞ_id
, cÚ¡ 
ušt64_t
 
off£t
è: 
	`d©a_
(
	$Encode
(
poŞ_id
, 
off£t
)è{ 
	}
}

50 
	gPmemPŒ
::
	$PmemPŒ
(
št16_t
 
poŞ_id
, * 
vaddr
) {

51 
ušt64_t
 
off£t
 = (
ušŒ_t
è
vaddr
 - (ušŒ_tè
Pmem
::
	`poŞ
(
poŞ_id
).
	`hªdË
();

52 
d©a_
 = 
	`Encode
(
poŞ_id
, 
off£t
);

53 
	}
}

55 
	gPmemPŒ
::
	$PmemPŒ
(cÚ¡ 
ušt64_t
 
dump
è: 
	$d©a_
(
dump
è{ 
	}
}

57 
šlše
 * 
PmemPŒ
::
	$g‘
() {

58 ià(
d©a_
 == 0) {

59  
nuÎ±r
;

63 cÚ¡ 
ušŒ_t
 
kMask
 = 0x0000ffffffffffff;

64 cÚ¡ 
št16_t
 
poŞ_id
 = (
d©a_
 >> 48);

65 cÚ¡ 
ušt64_t
 
off£t
 = (
d©a_
 & 
kMask
);

66  (*è((
ušŒ_t
è
Pmem
::
	`poŞ
(
poŞ_id
).
	`hªdË
(è+ 
off£t
);

67 
	}
}

69 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

70 
šlše
 
T
* 
	gPmemPŒ
::
	$g‘
() {

71  (
T
*è
	`g‘
();

72 
	}
}

74 
šlše
 
ušt64_t
 
	gPmemPŒ
::
	$dump
() {

75  
d©a_
;

76 
	}
}

78 
šlše
 
št16_t
 
	gPmemPŒ
::
	$poŞ_id
() {

79 
št16_t
 
poŞ_id
 = (
d©a_
 >> 48);

80  
poŞ_id
;

81 
	}
}

83 
šlše
 
ušt64_t
 
	gPmemPŒ
::
	$off£t
() {

84 cÚ¡ 
ušŒ_t
 
kMask
 = 0x0000ffffffffffff;

85 cÚ¡ 
ušt64_t
 
off£t
 = (
d©a_
 & 
kMask
);

86  
off£t
;

87 
	}
}

89 
šlše
 
ušt64_t
 
	gPmemPŒ
::
	$Encode
(cÚ¡ 
št16_t
 
poŞ_id
, cÚ¡ 
ušt64_t
 
off£t
) {

90  ((
ušt64_t
è
poŞ_id
 << 48è| 
off£t
;

91 
	}
}

93 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

94 
šlše
 
T
* 
	gPmemPŒ
::
	$Decode
(cÚ¡ 
ušt64_t
 
dump
) {

95 ià(
dump
 == 0) {

96  
nuÎ±r
;

100 cÚ¡ 
ušŒ_t
 
kMask
 = 0x0000ffffffffffff;

101 cÚ¡ 
št16_t
 
poŞ_id
 = (
dump
 >> 48);

102 cÚ¡ 
ušt64_t
 
off£t
 = (
dump
 & 
kMask
);

103  (
T
*è((
ušŒ_t
è
Pmem
::
	`poŞ
(
poŞ_id
).
	`hªdË
(è+ 
off£t
);

104 
	}
}

	@pmem/pmem_test.cc

1 
	~<io¡»am
>

2 
	~<f¡»am
>

3 
	~<¡dexû±
>

4 
	~<ex³rim’l/fesy¡em
>

6 
	~<libpmemobj++/make_³rsi¡’t_©omic.hµ
>

8 
	~"li¡db/pmem/pmem.h
"

10 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

12 
	#fÜû_šlše
 
	`__©Œibu‹__
((
®ways_šlše
)è
šlše


	)

18 
fÜû_šlše
 

19 
	$şæushİt
(cÚ¡ *
addr
)

21 
asm
 volatile(".byte 0x66; clflush %0" : "+m" \

22 (*(vŞ©*)(
addr
)));

23 
	}
}

24 
fÜû_šlše
 

25 
	$şwb
(cÚ¡ *
addr
)

27 
asm
 volatile(".byte 0x66; xsaveopt %0" : "+m" \

28 (*(vŞ©*)(
addr
)));

29 
	}
}

31 
	$foo
() {

32 
fs
::
	`»move_®l
("/pmem0/wkim/pmem_test2");

33 
fs
::
	`ü—‹_dœeùÜ›s
("/pmem0/wkim/pmem_test2");

35 
¡d
::
f¡»am
 
	`s
("/pmem0/wkim/pmem_‹¡2.£t", 
s
.
out
);

36 
s
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

37 
s
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

38 
s
 << "400G /pmem0/wkim/pmem_‹¡2/" << 
¡d
::
’dl
;

39 
s
.
	`şo£
();

41 
	slog_block
 {

43 
d©a
[64];

46 
	spmem_log
 {

47 
pmem
::
obj
::
³rsi¡’t_±r
<
log_block
> 
h—d
;

50 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log
>("/pmem0/wkim/pmem_test2.set", "");

51 autØ
pİ
 = 
Pmem
::
poŞ
<
pmem_log
>(
id
);

52 autØ
roÙ
 = 
pİ
.
	`roÙ
();

54 
pmem
::
obj
::
³rsi¡’t_±r
<
log_block
> 
block
;

55 
pmem
::
obj
::
make_³rsi¡’t_©omic
<
log_block
>(
pİ
, 
roÙ
->
h—d
);

56 
	}
}

58 
	$maš
() {

59 
fs
::
	`»move_®l
("/pmem0/wkim/pmem_test");

60 
fs
::
	`ü—‹_dœeùÜ›s
("/pmem0/wkim/pmem_test");

62 
¡d
::
f¡»am
 
	`s
("/pmem0/wkim/pmem_‹¡.£t", 
s
.
out
);

63 
s
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

64 
s
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

65 
s
 << "400G /pmem0/wkim/pmem_‹¡/" << 
¡d
::
’dl
;

66 
s
.
	`şo£
();

68 
id
 = 
Pmem
::
	`BšdPoŞS‘
("/pmem0/wkim/pmem_test.set", "");

69 autØ
pİ
 = 
Pmem
::
	`poŞ
(
id
);

71 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
pbuf
;

72 autØ
´oÙ
 = 
	`pmemobj_roÙ
(
pİ
.
	`hªdË
(), 1);

73 
¡d
::
cout
 << (*è((*è
pİ
.
	`hªdË
(è+ 
´oÙ
.
off
è<< std::
’dl
;

74 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
pİ
, 
pbuf
, 13);

75 * 
buf
 = 
pbuf
.
	`g‘
();

76 
ušt64_t
 
off£t
 = 
buf
 - (*è
pİ
.
	`hªdË
();

77 
¡d
::
cout
 << 
pİ
.
	`hªdË
(è<< " " << (*è
buf
 << " " << 
off£t
 << std::
’dl
;

78 
	`¥rštf
(
buf
, "Hello World!");

79 
	`şwb
(
buf
);

80 
pİ
.
	`şo£
();

82 
pİ
 = 
pmem
::
obj
::
poŞ_ba£
::
	`İ’
("/pmem0/wkim/pmem_test.set", "");

83 
buf
 = (*è
pİ
.
	`hªdË
(è+ 
off£t
;

84 
¡d
::
cout
 << 
pİ
.
	`hªdË
(è<< " " << (*è
buf
 << " " << 
off£t
 << std::
’dl
;

85 
¡d
::
cout
 << 
buf
 << std::
’dl
;

87 
	`foo
();

90 
	}
}

	@port/likely.h

10 #´agm¨
Úû


12 #ià
defšed
(
__GNUC__
) && __GNUC__ >= 4

13 
	#LIKELY
(
x
è(
	`__butš_ex³ù
((x), 1))

	)

14 
	#UNLIKELY
(
x
è(
	`__butš_ex³ù
((x), 0))

	)

16 
	#LIKELY
(
x
è(x)

	)

17 
	#UNLIKELY
(
x
è(x)

	)

	@port/port_posix.h

1 #´agm¨
Úû


3 #undeà
PLATFORM_IS_LITTLE_ENDIAN


4 #ià
defšed
(
OS_MACOSX
)

5 
	~<machše/’dŸn.h
>

6 #ià
defšed
(
__DARWIN_LITTLE_ENDIAN
è&& defšed(
__DARWIN_BYTE_ORDER
)

7 
	#PLATFORM_IS_LITTLE_ENDIAN
 \

8 (
__DARWIN_BYTE_ORDER
 =ğ
__DARWIN_LITTLE_ENDIAN
)

	)

10 #–ià
defšed
(
OS_SOLARIS
)

11 
	~<sys/i§_defs.h
>

12 #ifdeà
_LITTLE_ENDIAN


13 
	#PLATFORM_IS_LITTLE_ENDIAN
 
Œue


	)

15 
	#PLATFORM_IS_LITTLE_ENDIAN
 
çl£


	)

17 
	~<®loÿ.h
>

18 #–ià
defšed
(
OS_AIX
)

19 
	~<sys/ty³s.h
>

20 
	~<¬·/Çme£r_com·t.h
>

21 
	#PLATFORM_IS_LITTLE_ENDIAN
 (
BYTE_ORDER
 =ğ
LITTLE_ENDIAN
)

	)

22 
	~<®loÿ.h
>

23 #–ià
defšed
(
OS_FREEBSD
è|| defšed(
OS_OPENBSD
è|| defšed(
OS_NETBSD
) || \

24 
defšed
(
OS_DRAGONFLYBSD
è|| 
	$defšed
(
OS_ANDROID
)

25 
	~<sys/’dŸn.h
>

26 
	~<sys/ty³s.h
>

27 
	#PLATFORM_IS_LITTLE_ENDIAN
 (
_BYTE_ORDER
 =ğ
_LITTLE_ENDIAN
)

	)

29 
	~<’dŸn.h
>

32 #iâdeà
PLATFORM_IS_LITTLE_ENDIAN


33 
	#PLATFORM_IS_LITTLE_ENDIAN
 (
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN
)

	)

36 
Çme¥aû
 
pÜt
 {

38 
cÚ¡ex´
 
boŞ
 
kL™eEndŸn
 = 
PLATFORM_IS_LITTLE_ENDIAN
;

39 #undeà
PLATFORM_IS_LITTLE_ENDIAN


41 
	}
}

	@tools/db_bench.cc

10 #ià!
defšed
(
GFLAGS
)

11 
	~<c¡dio
>

12 
	$maš
() {

13 
	`årštf
(
¡d”r
, "Please install gflagso„un db_bench\n");

15 
	}
}

16 #–ià!
defšed
(
LISTDB_STRING_KEY
è|| !defšed(
LISTDB_WISCKEY
)

17 
	~<c¡dio
>

18 
	$maš
() {

19 
	`årštf
(
¡d”r
, "Please configure cmake with -DSTRING_KEY=ON -DWISCKEY=ONo„un db_bench\n");

21 
	}
}

23 
	~<chrÚo
>

24 
	~<cÚd™iÚ_v¬ŸbË
>

25 
	~<mu‹x
>

26 
	~<s¡»am
>

28 
	~<gæags/gæags.h
>

30 
	~"li¡db/db_ş›Á.h
"

31 
	~"li¡db/’v.h
"

32 
	~"li¡db/li¡db.h
"

33 
	~"li¡db/lib/numa.h
"

34 
	~"li¡db/mÚ™Üšg/hi¡og¿m.h
"

35 
	~"li¡db/pÜt/pÜt_posix.h
"

36 
	~"li¡db/ut/şock.h
"

37 
	~"li¡db/ut/¿ndom.h
"

38 
	~"li¡db/ut/¿‹_lim™”.h
"

40 
usšg
 
	gDB
 = 
Li¡DB
;

42 
DEFINE_¡ršg
(

43 
b’chm¬ks
,

56 
DEFINE_št32
(
wr™e_th»ads
, 0, "write_threads");

58 
DEFINE_št64
(
num
, 1000000, "Number of key/valueso…lace in database");

60 
DEFINE_št64
(
»ads
, -1, "Number of„ead operationso do. "

63 
DEFINE_št64
(
£ed
, 0, "Seed base for„andom‚umber generators. "

66 
DEFINE_št32
(
th»ads
, 1, "Number of concurrenthreadso„un.");

68 
DEFINE_št32
(
du¿tiÚ
, 0, "Time in seconds forhe„andom-opsestso„un."

71 
DEFINE_¡ršg
(
v®ue_size_di¡ributiÚ_ty³
, "fixed",

74 
DEFINE_št32
(
v®ue_size
, 100, "Size ofƒach value in fixed distribution");

75 
	gv®ue_size
 = 100;

77 
DEFINE_št32
(
v®ue_size_mš
, 100, "Min size of„andom value");

79 
DEFINE_št32
(
v®ue_size_max
, 102400, "Max size of„andom value");

81 
DEFINE_št32
(
£ek_Ãxts
, 0,

86 
št64_t
 
	gFLAGS_b©ch_size
 = 1;

89 
DEFINE_št32
(
key_size
, 16, "size ofƒach key");

91 
DEFINE_doubË
(
com´essiÚ_¿tio
, 0.5, "Arrangeo generate valueshat shrink"

94 
DEFINE_doubË
(
»ad_¿ndom_exp_¿nge
, 0.0,

100 
DEFINE_boŞ
(
hi¡og¿m
, 
çl£
, "Print histogram of operationimings");

102 
boŞ
 
	gFLAGS_¡©i¡ics
 = 
çl£
;

105 
DEFINE_št64
(
wr™es
, -1, "Number of write operationso do. If‚egative, do"

108 
DEFINE_doubË
(
sše_a
, 1,

111 
DEFINE_doubË
(
sše_b
, 1,

114 
DEFINE_doubË
(
sše_c
, 0,

117 
DEFINE_doubË
(
sše_d
, 1,

121 
DEFINE_doubË
(
key¿nge_di¡_a
, 0.0,

124 
DEFINE_doubË
(
key¿nge_di¡_b
, 0.0,

127 
DEFINE_doubË
(
key¿nge_di¡_c
, 0.0,

130 
DEFINE_doubË
(
key¿nge_di¡_d
, 0.0,

133 
DEFINE_št64
(
key¿nge_num
, 1,

137 
DEFINE_doubË
(
key_di¡_a
, 0.0,

140 
DEFINE_doubË
(
key_di¡_b
, 0.0,

143 
DEFINE_doubË
(
v®ue_th‘a
, 0.0,

146 
DEFINE_doubË
(
v®ue_k
, 0.0,

149 
DEFINE_doubË
(
v®ue_sigma
, 0.0,

152 
DEFINE_doubË
(
™”_th‘a
, 0.0,

155 
DEFINE_doubË
(
™”_k
, 0.0,

158 
DEFINE_doubË
(
™”_sigma
, 0.0,

161 
DEFINE_doubË
(
mix_g‘_¿tio
, 1.0,

163 
DEFINE_doubË
(
mix_put_¿tio
, 0.0,

165 
DEFINE_doubË
(
mix_£ek_¿tio
, 0.0,

167 
DEFINE_št64
(
mix_max_sÿn_Ën
, 10000, "The max scan†ength of Iterator");

168 
DEFINE_št64
(
mix_max_v®ue_size
, 1024, "The max value size ofhis workload");

169 
DEFINE_doubË
(

170 
sše_mix_¿‹_noi£
, 0.0,

172 
DEFINE_boŞ
(
sše_mix_¿‹
, 
çl£
,

174 
DEFINE_ušt64
(

175 
sše_mix_¿‹_š‹rv®_mli£cÚds
, 10000,

177 
DEFINE_št64
(
mix_acûs£s
, -1,

180 
DEFINE_št32
(
İs_b‘w“n_du¿tiÚ_checks
, 1000,

183 
DEFINE_št64
(
¡©s_š‹rv®
, 0, "Stats‡re„eportedƒvery N operations when "

186 
DEFINE_št64
(
¡©s_š‹rv®_£cÚds
, 0, "Report statsƒvery N seconds. This "

189 
DEFINE_št32
(
¡©s_³r_š‹rv®
, 0, "Reports‡dditional stats…er interval when"

192 
DEFINE_št64
(
»pÜt_š‹rv®_£cÚds
, 0,

196 
DEFINE_¡ršg
(
»pÜt_fe
, "report.csv",

200 
DEFINE_št32
(
th»ad_¡©us_³r_š‹rv®
, 0,

204 
DEFINE_boŞ
(
u£_exi¡šg_db
, 
çl£
, "Ifrue, do‚ot destroyheƒxisting"

208 
	g¡d
::
¡ršg
 
FLAGS_db
 = "/pmem/wkim/listdb";

211 
	gDi¡ributiÚTy³
 : {

212 
kFixed
 = 0,

213 
	gkUnifÜm
,

214 
	gkNÜm®


217 
Di¡ributiÚTy³
 
	gFLAGS_v®ue_size_di¡ributiÚ_ty³_e
 = 
kFixed
;

219 
Di¡ributiÚTy³
 
	$SŒšgToDi¡ributiÚTy³
(cÚ¡ * 
ùy³
) {

220 
	`as£¹
(
ùy³
);

222 ià(!
	`¡rÿ£cmp
(
ùy³
, "fixed"))

223  
kFixed
;

224 ià(!
	`¡rÿ£cmp
(
ùy³
, "uniform"))

225  
kUnifÜm
;

226 ià(!
	`¡rÿ£cmp
(
ùy³
, "normal"))

227  
kNÜm®
;

229 
	`årštf
(
¡dout
, "CªnÙ…¬£ di¡ributiÚy³ '%s'\n", 
ùy³
);

230  
kFixed
;

231 
	}
}

233 şas 
	cBa£Di¡ributiÚ
 {

234 
	mpublic
:

235 
	$Ba£Di¡ributiÚ
(
_mš
, 
_max
)

236 : 
	`mš_v®ue_size_
(
_mš
), 
	$max_v®ue_size_
(
_max
) {}

237 
vœtu®
 ~
	$Ba£Di¡ributiÚ
(è{
	}
}

239 
	$G’”©e
() {

240 autØ
v®
 = 
	`G‘
();

241 ià(
	`N“dTrunÿ‹
()) {

242 
v®
 = 
¡d
::
	`max
(
mš_v®ue_size_
, val);

243 
v®
 = 
¡d
::
	`mš
(
max_v®ue_size_
, val);

245  
v®
;

246 
	}
}

247 
	g´iv©e
:

248 
vœtu®
 
G‘
() = 0;

249 
vœtu®
 
boŞ
 
	$N“dTrunÿ‹
() {

250  
Œue
;

251 
	}
}

252 
	gmš_v®ue_size_
;

253 
	gmax_v®ue_size_
;

256 şas 
	cFixedDi¡ributiÚ
 : 
public
 
Ba£Di¡ributiÚ


258 
public
:

259 
	$FixedDi¡ributiÚ
(
size
) :

260 
	`Ba£Di¡ributiÚ
(
size
, size),

261 
	$size_
(
size
) {}

262 
´iv©e
:

263 
vœtu®
 
	$G‘
(è
ov”ride
 {

264  
size_
;

265 
	}
}

266 
vœtu®
 
boŞ
 
	$N“dTrunÿ‹
(è
ov”ride
 {

267  
çl£
;

268 
	}
}

269 
	gsize_
;

272 
şass
 
	gNÜm®Di¡ributiÚ


273 : 
public
 
Ba£Di¡ributiÚ
,…ubliø
	g¡d
::
nÜm®_di¡ributiÚ
<> {

274 
public
:

275 
NÜm®Di¡ributiÚ
(
_mš
, 
_max
)

276 : 
Ba£Di¡ributiÚ
(
_mš
, 
_max
),

278 
	g¡d
::
nÜm®_di¡ributiÚ
<>(

279 ()(
_mš
 + 
_max
) / 2.0 ,

280 ()(
	g_max
 - 
	g_mš
) / 6.0 ),

281 
g’_
(
rd_
()) {}

283 
	g´iv©e
:

284 
vœtu®
 
G‘
(è
ov”ride
 {

285  
¡©ic_ÿ¡
<>((*
this
)(
g’_
));

287 
	g¡d
::
¿ndom_deviû
 
rd_
;

288 
	g¡d
::
mt19937
 
g’_
;

291 
şass
 
	gUnifÜmDi¡ributiÚ


292 : 
public
 
Ba£Di¡ributiÚ
,

293 
public
 
	g¡d
::
unifÜm_št_di¡ributiÚ
<> {

294 
public
:

295 
UnifÜmDi¡ributiÚ
(
_mš
, 
_max
)

296 : 
Ba£Di¡ributiÚ
(
_mš
, 
_max
),

297 
	g¡d
::
unifÜm_št_di¡ributiÚ
<>(
_mš
, 
	g_max
),

298 
g’_
(
rd_
()) {}

300 
	g´iv©e
:

301 
vœtu®
 
G‘
(è
ov”ride
 {

302  (*
this
)(
g’_
);

304 
vœtu®
 
boŞ
 
N“dTrunÿ‹
(è
	gov”ride
 {

305  
	gçl£
;

307 
	g¡d
::
¿ndom_deviû
 
rd_
;

308 
	g¡d
::
mt19937
 
g’_
;

311 
	$Com´essibËSŒšg
(
Rªdom
* 
ºd
, 
com´es£d_äaùiÚ
,

312 
Ën
, 
¡d
::
¡ršg
* 
d¡
) {

313 
¿w
 = 
¡©ic_ÿ¡
<>(
Ën
 * 
com´es£d_äaùiÚ
);

314 ià(
¿w
 < 1)„aw = 1;

315 
¡d
::
¡ršg
 
¿w_d©a
 = 
ºd
->
	`RªdomSŒšg
(
¿w
);

318 
d¡
->
	`ş—r
();

319 
d¡
->
	`size
(è< ()
Ën
) {

320 
d¡
->
	`­³nd
(
¿w_d©a
);

322 
d¡
->
	`»size
(
Ën
);

323 
	}
}

326 şas 
	cRªdomG’”©Ü
 {

327 
	m´iv©e
:

328 
¡d
::
¡ršg
 
d©a_
;

329 
	mpos_
;

330 
	m¡d
::
unique_±r
<
Ba£Di¡ributiÚ
> 
di¡_
;

332 
	mpublic
:

334 
	$RªdomG’”©Ü
() {

335 autØ
max_v®ue_size
 = 
FLAGS_v®ue_size_max
;

336 
FLAGS_v®ue_size_di¡ributiÚ_ty³_e
) {

337 
kUnifÜm
:

338 
di¡_
.
	`»£t
(
Ãw
 
	`UnifÜmDi¡ributiÚ
(
FLAGS_v®ue_size_mš
,

339 
FLAGS_v®ue_size_max
));

341 
kNÜm®
:

342 
di¡_
.
	`»£t
(
Ãw
 
	`NÜm®Di¡ributiÚ
(
FLAGS_v®ue_size_mš
,

343 
FLAGS_v®ue_size_max
));

345 
kFixed
:

347 
di¡_
.
	`»£t
(
Ãw
 
	`FixedDi¡ributiÚ
(
v®ue_size
));

348 
max_v®ue_size
 = 
v®ue_size
;

353 
Rªdom
 
	`ºd
(301);

354 
¡d
::
¡ršg
 
p›û
;

355 
d©a_
.
	`size
(è< ()
¡d
::
	`max
(1048576, 
max_v®ue_size
)) {

358 
	`Com´essibËSŒšg
(&
ºd
, 
FLAGS_com´essiÚ_¿tio
, 100, &
p›û
);

359 
d©a_
.
	`­³nd
(
p›û
);

361 
pos_
 = 0;

364 
¡d
::
¡ršg_v›w
 
	$G’”©e
(
Ën
) {

365 
	`as£¹
(
Ën
 <ğ
d©a_
.
	`size
());

366 ià(
pos_
 + 
Ën
 > 
d©a_
.
	`size
()) {

367 
pos_
 = 0;

369 
pos_
 +ğ
Ën
;

370  
¡d
::
	`¡ršg_v›w
(
d©a_
.
	`d©a
(è+ 
pos_
 - 
Ën
,†en);

371 
	}
}

373 
	g¡d
::
¡ršg_v›w
 
	$G’”©e
() {

374 autØ
Ën
 = 
di¡_
->
	`G’”©e
();

375  
	`G’”©e
(
Ën
);

376 
	}
}

379 
šlše
 
	$Aµ’dW™hS·û
(
¡d
::
¡ršg
* 
¡r
, cÚ¡ std::
¡ršg_v›w
& 
msg
) {

380 ià(
msg
.
	`em±y
()) ;

381 ià(!
¡r
->
	`em±y
()) {

382 
¡r
->
	`push_back
(' ');

384 
¡r
->
	`­³nd
(
msg
.
	`d©a
(), msg.
	`size
());

385 
	}
}

388 şas 
	cR•Ü‹rAg’t
 {

389 
	mpublic
:

390 
	$R•Ü‹rAg’t
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

391 
ušt64_t
 
»pÜt_š‹rv®_£cs
)

392 : 
	`tÙ®_İs_dÚe_
(0),

393 
	`Ï¡_»pÜt_
(0),

394 
	`»pÜt_š‹rv®_£cs_
(
»pÜt_š‹rv®_£cs
),

395 
	$¡İ_
(
çl£
) {

396 
»pÜt_fe_
.
	`İ’
(
âame
);

397 ià(
»pÜt_fe_
.
	`good
()) {

398 
»pÜt_fe_
 << 
	`H—d”
(è<< 
¡d
::
’dl
;

399 
»pÜt_fe_
.
	`æush
();

401 
	`årštf
(
¡d”r
, "Cª'ˆİ’ %s: %s\n", 
âame
.
	`c_¡r
(), 
¡d
::
	`¡»¼Ü
(
”ºo
));

402 
	`abÜt
();

406 
»pÜtšg_th»ad_
 = 
¡d
::
	`th»ad
([&](è{ 
	`SË•AndR•Üt
(); });

409 ~
	$R•Ü‹rAg’t
() {

411 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu‹x_
);

412 
¡İ_
 = 
Œue
;

413 
¡İ_cv_
.
	`nÙify_®l
();

415 
»pÜtšg_th»ad_
.
	`još
();

416 
»pÜt_fe_
.
	`şo£
();

417 
	}
}

420 
	$R•ÜtFšishedOps
(
št64_t
 
num_İs
) {

421 
tÙ®_İs_dÚe_
.
	`ãtch_add
(
num_İs
);

422 
	}
}

424 
	g´iv©e
:

425 
¡d
::
¡ršg
 
	$H—d”
(ècÚ¡ {  "£cs_–­£d,š‹rv®_qps"; 
	}
}

426 
	$SË•AndR•Üt
() {

427 autØ
time_¡¬‹d
 = 
Clock
::
	`NowMiüos
();

428 
Œue
) {

430 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu‹x_
);

431 ià(
¡İ_
 ||

432 
¡İ_cv_
.
	`wa™_fÜ
(
lk
, 
¡d
::
chrÚo
::
	`£cÚds
(
»pÜt_š‹rv®_£cs_
),

433 [&](è{  
¡İ_
; })) {

439 autØ
tÙ®_İs_dÚe_¢­shÙ
 = 
tÙ®_İs_dÚe_
.
	`lßd
();

441 autØ
£cs_–­£d
 =

442 (
Clock
::
	`NowMiüos
(è- 
time_¡¬‹d
 + 
kMiüosInSecÚd
 / 2) /

443 
kMiüosInSecÚd
;

444 
¡d
::
¡ršg
 
»pÜt
 = std::
	`to_¡ršg
(
£cs_–­£d
) + "," +

445 
¡d
::
	`to_¡ršg
(
tÙ®_İs_dÚe_¢­shÙ
 - 
Ï¡_»pÜt_
) +

447 
»pÜt_fe_
 << 
»pÜt
;

448 
»pÜt_fe_
.
	`æush
();

449 ià(!
»pÜt_fe_
.
	`good
()) {

450 
	`årštf
(
¡d”r
, "Cª'ˆwr™tØ»pÜˆf(%s), stİpšgh»pÜtšg\n", 
¡d
::
	`¡»¼Ü
(
”ºo
));

453 
Ï¡_»pÜt_
 = 
tÙ®_İs_dÚe_¢­shÙ
;

455 
	}
}

457 
cÚ¡ex´
 
ušt64_t
 
	gkMiüosInSecÚd
 = 1000U * 1000U;

458 
	g¡d
::
of¡»am
 
»pÜt_fe_
;

459 
	g¡d
::
©omic
<
št64_t
> 
tÙ®_İs_dÚe_
;

460 
št64_t
 
	gÏ¡_»pÜt_
;

461 cÚ¡ 
ušt64_t
 
	g»pÜt_š‹rv®_£cs_
;

462 
	g¡d
::
th»ad
 
»pÜtšg_th»ad_
;

463 
	g¡d
::
mu‹x
 
mu‹x_
;

465 
	g¡d
::
cÚd™iÚ_v¬ŸbË
 
¡İ_cv_
;

466 
boŞ
 
	g¡İ_
;

469 
	gO³¿tiÚTy³
 : {

470 
kR—d
 = 0,

471 
	gkWr™e
,

472 
	gkD–‘e
,

473 
	gkS“k
,

474 
	gkM”ge
,

475 
	gkUpd©e
,

476 
	gkCom´ess
,

477 
	gkUncom´ess
,

478 
	gkCrc
,

479 
	gkHash
,

480 
	gkOth”s


483 
	g¡d
::
unÜd”ed_m­
<
O³¿tiÚTy³
, std::
¡ršg
, std::
hash
<>>

484 
O³¿tiÚTy³SŒšg
 = {

485 {
kR—d
, "read"},

486 {
kWr™e
, "write"},

487 {
kD–‘e
, "delete"},

488 {
kS“k
, "seek"},

489 {
kM”ge
, "merge"},

490 {
kUpd©e
, "update"},

491 {
kCom´ess
, "compress"},

492 {
kCom´ess
, "uncompress"},

493 {
kCrc
, "crc"},

494 {
kHash
, "hash"},

495 {
kOth”s
, "op"}

498 
şass
 
	gCombšedSts
;

499 şas 
	cSts
 {

500 
	m´iv©e
:

501 
id_
;

502 
ušt64_t
 
	m¡¬t_
 = 0;

503 
ušt64_t
 
	msše_š‹rv®_
;

504 
ušt64_t
 
	mfšish_
;

505 
	m£cÚds_
;

506 
ušt64_t
 
	mdÚe_
;

507 
ušt64_t
 
	mÏ¡_»pÜt_dÚe_
;

508 
ušt64_t
 
	mÃxt_»pÜt_
;

509 
ušt64_t
 
	mby‹s_
;

510 
ušt64_t
 
	mÏ¡_İ_fšish_
;

511 
ušt64_t
 
	mÏ¡_»pÜt_fšish_
;

512 
	m¡d
::
unÜd”ed_m­
<
O³¿tiÚTy³
, std::
sh¬ed_±r
<
Hi¡og¿mIm¶
>,

513 
	m¡d
::
hash
<>> 
hi¡_
;

514 
	m¡d
::
¡ršg
 
mes§ge_
;

515 
boŞ
 
	mexşude_äom_m”ge_
;

516 
R•Ü‹rAg’t
* 
	m»pÜ‹r_ag’t_
;

517 
ä›nd
 
şass
 
	mCombšedSts
;

519 
	mpublic
:

520 
	$Sts
(è{ 
	`S¹
(-1); }

522 
	$S‘R•Ü‹rAg’t
(
R•Ü‹rAg’t
* 
»pÜ‹r_ag’t
) {

523 
»pÜ‹r_ag’t_
 = 
»pÜ‹r_ag’t
;

524 
	}
}

526 
	$S¹
(
id
) {

527 
id_
 = 
id
;

528 
Ãxt_»pÜt_
 = 
FLAGS_¡©s_š‹rv®
 ? FLAGS_stats_interval : 100;

529 
Ï¡_İ_fšish_
 = 
¡¬t_
;

530 
hi¡_
.
	`ş—r
();

531 
dÚe_
 = 0;

532 
Ï¡_»pÜt_dÚe_
 = 0;

533 
by‹s_
 = 0;

534 
£cÚds_
 = 0;

535 
¡¬t_
 = 
Clock
::
	`NowMiüos
();

536 
sše_š‹rv®_
 = 
Clock
::
	`NowMiüos
();

537 
fšish_
 = 
¡¬t_
;

538 
Ï¡_»pÜt_fšish_
 = 
¡¬t_
;

539 
mes§ge_
.
	`ş—r
();

541 
exşude_äom_m”ge_
 = 
çl£
;

542 
	}
}

544 
	$M”ge
(cÚ¡ 
Sts
& 
Ùh”
) {

545 ià(
Ùh”
.
exşude_äom_m”ge_
)

548 autØ
™
 = 
Ùh”
.
hi¡_
.
	`begš
(); iˆ!ğÙh”.hi¡_.
	`’d
(); ++it) {

549 autØ
this_™
 = 
hi¡_
.
	`fšd
(
™
->
fœ¡
);

550 ià(
this_™
 !ğ
hi¡_
.
	`’d
()) {

551 
this_™
->
£cÚd
->
	`M”ge
(*(
Ùh”
.
hi¡_
.
	`©
(
™
->
fœ¡
)));

553 
hi¡_
.
	`š£¹
({ 
™
->
fœ¡
, it->
£cÚd
 });

557 
dÚe_
 +ğ
Ùh”
.done_;

558 
by‹s_
 +ğ
Ùh”
.bytes_;

559 
£cÚds_
 +ğ
Ùh”
.seconds_;

560 ià(
Ùh”
.
¡¬t_
 < start_) start_ = other.start_;

561 ià(
Ùh”
.
fšish_
 > finish_) finish_ = other.finish_;

564 ià(
mes§ge_
.
	`em±y
()èmes§ge_ = 
Ùh”
.message_;

565 
	}
}

567 
	$Stİ
() {

568 
fšish_
 = 
Clock
::
	`NowMiüos
();

569 
£cÚds_
 = (
fšish_
 - 
¡¬t_
) * 1e-6;

570 
	}
}

572 
	$AddMes§ge
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
msg
) {

573 
	`Aµ’dW™hS·û
(&
mes§ge_
, 
msg
);

574 
	}
}

576 
	$S‘Id
(
id
è{ 
id_
 = id; 
	}
}

577 
	$S‘ExşudeFromM”ge
(è{ 
exşude_äom_m”ge_
 = 
Œue
; 
	}
}

580 
	$PrštTh»adStus
() {

581 
¡d
::
veùÜ
<
Th»adStus
> 
th»ad_li¡
;

582 
FLAGS_’v
->
	`G‘Th»adLi¡
(&
th»ad_li¡
);

584 
	`årštf
(
¡d”r
, "\n%18s %10s %12s %20s %13s %45s %12s %s\n",

590 autØ
ts
 : 
th»ad_li¡
) {

591 
	`årštf
(
¡d”r
, "%18lu %10s %12s %20s %13s %45s %12s",

592 
ts
.
th»ad_id
,

593 
Th»adStus
::
	`G‘Th»adTy³Name
(
ts
.
th»ad_ty³
).
	`c_¡r
(),

594 
ts
.
cf_Çme
.
	`c_¡r
(),

595 
Th»adStus
::
	`G‘O³¿tiÚName
(
ts
.
İ”©iÚ_ty³
).
	`c_¡r
(),

596 
Th»adStus
::
	`MiüosToSŒšg
(
ts
.
İ_–­£d_miüos
).
	`c_¡r
(),

597 
Th»adStus
::
	`G‘O³¿tiÚSgeName
(
ts
.
İ”©iÚ_¡age
).
	`c_¡r
(),

598 
Th»adStus
::
	`G‘S‹Name
(
ts
.
¡©e_ty³
).
	`c_¡r
());

600 autØ
İ_´İ”t›s
 = 
Th»adStus
::
	`IÁ”´‘O³¿tiÚPrİ”t›s
(

601 
ts
.
İ”©iÚ_ty³
,s.
İ_´İ”t›s
);

602 cÚ¡‡uto& 
İ_´İ
 : 
İ_´İ”t›s
) {

603 
	`årštf
(
¡d”r
, " % %" 
PRIu64
" |",

604 
İ_´İ
.
fœ¡
.
	`c_¡r
(), op_´İ.
£cÚd
);

606 
	`årštf
(
¡d”r
, "\n");

608 
	}
}

611 
	$Re£tSšeIÁ”v®
(è{ 
sše_š‹rv®_
 = 
Clock
::
	`NowMiüos
(); 
	}
}

613 
ušt64_t
 
	$G‘SšeIÁ”v®
() {

614  
sše_š‹rv®_
;

615 
	}
}

617 
ušt64_t
 
	$G‘S¹
() {

618  
¡¬t_
;

619 
	}
}

621 
	$Re£tLa¡OpTime
() {

623 
Ï¡_İ_fšish_
 = 
Clock
::
	`NowMiüos
();

624 
	}
}

626 
	$FšishedOps
(
DB
* 
db
, 
št64_t
 
num_İs
, 
O³¿tiÚTy³
 
İ_ty³
 = 
kOth”s
) {

627 ià(
»pÜ‹r_ag’t_
) {

628 
»pÜ‹r_ag’t_
->
	`R•ÜtFšishedOps
(
num_İs
);

630 ià(
FLAGS_hi¡og¿m
) {

631 
ušt64_t
 
now
 = 
Clock
::
	`NowMiüos
();

632 
ušt64_t
 
miüos
 = 
now
 - 
Ï¡_İ_fšish_
;

634 ià(
hi¡_
.
	`fšd
(
İ_ty³
è=ğhi¡_.
	`’d
())

636 autØ
hi¡_‹mp
 = 
¡d
::
make_sh¬ed
<
Hi¡og¿mIm¶
>();

637 
hi¡_
.
	`š£¹
({
İ_ty³
, 
¡d
::
	`move
(
hi¡_‹mp
)});

639 
hi¡_
[
İ_ty³
]->
	`Add
(
miüos
);

641 ià(
miüos
 > 20000 && !
FLAGS_¡©s_š‹rv®
) {

642 
	`årštf
(
¡d”r
, "lÚg op: %lu miüos%30s\r", 
miüos
, "");

643 
	`fæush
(
¡d”r
);

645 
Ï¡_İ_fšish_
 = 
now
;

648 
dÚe_
 +ğ
num_İs
;

649 ià(
dÚe_
 >ğ
Ãxt_»pÜt_
) {

650 ià(!
FLAGS_¡©s_š‹rv®
) {

651 ià(
Ãxt_»pÜt_
 < 1000)‚ext_report_ += 100;

652 ià(
Ãxt_»pÜt_
 < 5000)‚ext_report_ += 500;

653 ià(
Ãxt_»pÜt_
 < 10000)‚ext_report_ += 1000;

654 ià(
Ãxt_»pÜt_
 < 50000)‚ext_report_ += 5000;

655 ià(
Ãxt_»pÜt_
 < 100000)‚ext_report_ += 10000;

656 ià(
Ãxt_»pÜt_
 < 500000)‚ext_report_ += 50000;

657 
Ãxt_»pÜt_
 += 100000;

658 
	`årštf
(
¡d”r
, "... fšished %lu ops%30s\r", 
dÚe_
, "");

660 
ušt64_t
 
now
 = 
Clock
::
	`NowMiüos
();

661 
št64_t
 
u£cs_sšû_Ï¡
 = 
now
 - 
Ï¡_»pÜt_fšish_
;

666 ià(
FLAGS_¡©s_š‹rv®_£cÚds
 &&

667 
u£cs_sšû_Ï¡
 < (
FLAGS_¡©s_š‹rv®_£cÚds
 * 1000000)) {

669 
Ãxt_»pÜt_
 +ğ
FLAGS_¡©s_š‹rv®
;

672 
	`årštf
(
¡d”r
,

675 
Clock
::
	`TimeToSŒšg
(
now
 / 1000000).
	`c_¡r
(), 
id_
,

676 
dÚe_
 - 
Ï¡_»pÜt_dÚe_
, done_,

677 (
dÚe_
 - 
Ï¡_»pÜt_dÚe_
è/ (
u£cs_sšû_Ï¡
 / 1000000.0),

678 
dÚe_
 / ((
now
 - 
¡¬t_
) / 1000000.0),

679 (
now
 - 
Ï¡_»pÜt_fšish_
) / 1000000.0,

680 (
now
 - 
¡¬t_
) / 1000000.0);

686 
Ãxt_»pÜt_
 +ğ
FLAGS_¡©s_š‹rv®
;

687 
Ï¡_»pÜt_fšish_
 = 
now
;

688 
Ï¡_»pÜt_dÚe_
 = 
dÚe_
;

694 
	`fæush
(
¡d”r
);

696 
	}
}

698 
	$AddBy‹s
(
št64_t
 
n
) {

699 
by‹s_
 +ğ
n
;

700 
	}
}

702 
	$R•Üt
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
Çme
) {

705 ià(
dÚe_
 < 1) done_ = 1;

707 
¡d
::
¡ršg
 
exŒa
;

708 ià(
by‹s_
 > 0) {

711 
–­£d
 = (
fšish_
 - 
¡¬t_
) * 1e-6;

712 
¿‹
[100];

713 
	`¢´štf
(
¿‹
, (rate), "%6.1f MB/s",

714 (
by‹s_
 / 1048576.0è/ 
–­£d
);

715 
exŒa
 = 
¿‹
;

717 
	`Aµ’dW™hS·û
(&
exŒa
, 
mes§ge_
);

718 
–­£d
 = (
fšish_
 - 
¡¬t_
) * 1e-6;

719 
throughput
 = ()
dÚe_
/
–­£d
;

721 
	`årštf
(
¡dout
, "%-12s : %11.3f micros/op %ld ops/sec;%s%s\n",

722 
Çme
.
	`d©a
(),

723 
£cÚds_
 * 1e6 / 
dÚe_
,

724 ()
throughput
,

725 (
exŒa
.
	`em±y
() ? "" : " "),

726 
exŒa
.
	`c_¡r
());

727 ià(
FLAGS_hi¡og¿m
) {

728 autØ
™
 = 
hi¡_
.
	`begš
(); iˆ!ğhi¡_.
	`’d
(); ++it) {

729 
	`årštf
(
¡dout
, "Microseconds…er %s:\n%s\n",

730 
O³¿tiÚTy³SŒšg
[
™
->
fœ¡
].
	`c_¡r
(),

731 
™
->
£cÚd
->
	`ToSŒšg
().
	`c_¡r
());

734 
	`fæush
(
¡dout
);

735 
	}
}

738 şas 
	cCombšedSts
 {

739 
	mpublic
:

740 
	$AddSts
(cÚ¡ 
Sts
& 
¡©
) {

741 
ušt64_t
 
tÙ®_İs
 = 
¡©
.
dÚe_
;

742 
ušt64_t
 
tÙ®_by‹s_
 = 
¡©
.
by‹s_
;

743 
–­£d
;

745 ià(
tÙ®_İs
 < 1) {

746 
tÙ®_İs
 = 1;

749 
–­£d
 = (
¡©
.
fšish_
 - st.
¡¬t_
) * 1e-6;

750 
throughput_İs_
.
	`em¶aû_back
(
tÙ®_İs
 / 
–­£d
);

752 ià(
tÙ®_by‹s_
 > 0) {

753 
mbs
 = (
tÙ®_by‹s_
 / 1048576.0);

754 
throughput_mbs_
.
	`em¶aû_back
(
mbs
 / 
–­£d
);

758 
	$R•Üt
(cÚ¡ 
¡d
::
¡ršg
& 
b’ch_Çme
) {

759 cÚ¡ * 
Çme
 = 
b’ch_Çme
.
	`c_¡r
();

760 
num_runs
 = 
¡©ic_ÿ¡
<>(
throughput_İs_
.
	`size
());

762 ià(
throughput_mbs_
.
	`size
(è=ğ
throughput_İs_
.size()) {

763 
	`årštf
(
¡dout
,

766 
Çme
, 
num_runs
, 
¡©ic_ÿ¡
<>(
	`C®cAvg
(
throughput_İs_
)),

767 
	`C®cAvg
(
throughput_mbs_
), 
Çme
, 
num_runs
,

768 
¡©ic_ÿ¡
<>(
	`C®cMedŸn
(
throughput_İs_
)),

769 
	`C®cMedŸn
(
throughput_mbs_
));

771 
	`årštf
(
¡dout
,

774 
Çme
, 
num_runs
, 
¡©ic_ÿ¡
<>(
	`C®cAvg
(
throughput_İs_
)),‚ame,

775 
num_runs
, 
¡©ic_ÿ¡
<>(
	`C®cMedŸn
(
throughput_İs_
)));

777 
	}
}

779 
	g´iv©e
:

780 
C®cAvg
(
¡d
::
veùÜ
<> 
d©a
) {

781 
avg
 = 0;

782 
	gx
 : 
d©a
) {

783 
avg
 +ğ
x
;

785 
	gavg
 = 
avg
 / 
d©a
.
size
();

786  
	gavg
;

789 
C®cMedŸn
(
¡d
::
veùÜ
<> 
d©a
) {

790 
as£¹
(
d©a
.
size
() > 0);

791 
	g¡d
::
sÜt
(
d©a
.
begš
(), d©a.
’d
());

793 
size_t
 
	gmid
 = 
d©a
.
size
() / 2;

794 ià(
	gd©a
.
size
() % 2 == 1) {

796  
d©a
[
mid
];

799  (
	gd©a
[
mid
] + data[mid - 1]) / 2;

803 
	g¡d
::
veùÜ
<> 
throughput_İs_
;

804 
	g¡d
::
veùÜ
<> 
throughput_mbs_
;

808 
	sSh¬edS‹
 {

809 
	m¡d
::
mu‹x
 
mu
;

810 
	m¡d
::
cÚd™iÚ_v¬ŸbË
 
cv
;

811 
	mtÙ®
;

812 
	m¡d
::
sh¬ed_±r
<
R©eLim™”
> 
wr™e_¿‹_lim™”
;

813 
	m¡d
::
sh¬ed_±r
<
R©eLim™”
> 
»ad_¿‹_lim™”
;

821 
	mnum_š™Ÿlized
;

822 
	mnum_dÚe
;

823 
boŞ
 
	m¡¬t
;

829 
	sTh»adS‹
 {

830 
	mtid
;

831 
Rªdom64
 
	m¿nd
;

832 
Sts
 
	m¡©s
;

833 
Sh¬edS‹
* 
	msh¬ed
;

834 
DBCl›Á
* 
	mş›Á
;

835 
	m¡d
::
veùÜ
<
¡d
::
·œ
<, 
	mušt64_t
>>* 
	mİ_time_¬r
;

837 
ex¶ic™
 
Th»adS‹
(
šdex
)

838 : 
tid
(
šdex
), 
¿nd
((
FLAGS_£ed
 ? FLAGS_seed : 1000) + index) {}

841 şas 
	cDu¿tiÚ
 {

842 
	mpublic
:

843 
	$Du¿tiÚ
(
ušt64_t
 
max_£cÚds
, 
št64_t
 
max_İs
, iÁ64_ˆ
İs_³r_¡age
 = 0) {

844 
max_£cÚds_
 = 
max_£cÚds
;

845 
max_İs_
ğ
max_İs
;

846 
İs_³r_¡age_
 = (
İs_³r_¡age
 > 0è? ops_³r_¡ag: 
max_İs
;

847 
İs_
 = 0;

848 
¡¬t_©_
 = 
Clock
::
	`NowMiüos
();

851 
št64_t
 
	$G‘Sge
(è{  
¡d
::
	`mš
(
İs_
, 
max_İs_
 - 1è/ 
İs_³r_¡age_
; 
	}
}

853 
boŞ
 
	$DÚe
(
št64_t
 
šüem’t
) {

854 ià(
šüem’t
 <= 0) increment = 1;

855 
İs_
 +ğ
šüem’t
;

857 ià(
max_£cÚds_
) {

859 autØ
g¿nuÏr™y
 = 
FLAGS_İs_b‘w“n_du¿tiÚ_checks
;

860 ià((
İs_
 / 
g¿nuÏr™y
è!ğ((İs_ - 
šüem’t
) / granularity)) {

861 
ušt64_t
 
now
 = 
Clock
::
	`NowMiüos
();

862  ((
now
 - 
¡¬t_©_
è/ 1000000è>ğ
max_£cÚds_
;

864  
çl£
;

867  
İs_
 > 
max_İs_
;

869 
	}
}

871 
	g´iv©e
:

872 
ušt64_t
 
max_£cÚds_
;

873 
št64_t
 
	gmax_İs_
;

874 
št64_t
 
	gİs_³r_¡age_
;

875 
št64_t
 
	gİs_
;

876 
ušt64_t
 
	g¡¬t_©_
;

879 şas 
	cB’chm¬k
 {

880 
	mpublic
:

881 
	$B’chm¬k
()

882 : 
	`db_
(
Ãw
 
	`Li¡DB
()),

883 
	`num_
(
FLAGS_num
),

884 
	`key_size_
(
FLAGS_key_size
),

885 
	`»ads_
(
FLAGS_»ads
 < 0 ? 
FLAGS_num
 : FLAGS_reads),

886 
	`»ad_¿ndom_exp_¿nge_
(0.0),

887 
	`wr™es_
(
FLAGS_wr™es
 < 0 ? 
FLAGS_num
 : FLAGS_writes) {

888 ià(!
FLAGS_u£_exi¡šg_db
) {

889 
db_
->
	`In™
();

891 
	`abÜt
();

895 ià(
key_size_
 > (è
kSŒšgKeyL’gth
) {

896 
	`årštf
(
¡d”r
, "Error!: kStringKeyLength < --key_size\n.");

897 
	`ex™
(1);

901 ~
	$B’chm¬k
() {

902 
	}
}

904 
	g¡d
::
¡ršg_v›w
 
AÎoÿ‹Key
(
¡d
::
unique_±r
<cÚ¡ []>* 
key_gu¬d
) {

905 * 
d©a
 = 
Ãw
 [
key_size_
];

906 cÚ¡ * 
	gcÚ¡_d©a
 = 
d©a
;

907 
	gkey_gu¬d
->
»£t
(
cÚ¡_d©a
);

908  
	g¡d
::
¡ršg_v›w
(
key_gu¬d
->
g‘
(), 
key_size_
);

925 
	$G’”©eKeyFromIÁ
(
ušt64_t
 
v
, 
št64_t
 
num_keys
, 
¡d
::
¡ršg_v›w
* 
key
) {

926 ià(
v
 == 0) v++;

927 * 
¡¬t
 = 
cÚ¡_ÿ¡
<*>(
key
->
	`d©a
());

928 * 
pos
 = 
¡¬t
;

930 
by‹s_to_fl
 = 
¡d
::
	`mš
(
key_size_
 - 
¡©ic_ÿ¡
<>(
pos
 - 
¡¬t
), 8);

931 ià(
pÜt
::
kL™eEndŸn
) {

932 
i
 = 0; i < 
by‹s_to_fl
; ++i) {

933 
pos
[
i
] = (
v
 >> ((
by‹s_to_fl
 - i - 1) << 3)) & 0xFF;

936 
	`memıy
(
pos
, 
¡©ic_ÿ¡
<*>(&
v
), 
by‹s_to_fl
);

938 
pos
 +ğ
by‹s_to_fl
;

939 ià(
key_size_
 > 
pos
 - 
¡¬t
) {

940 
	`mem£t
(
pos
, '0', 
key_size_
 - (po - 
¡¬t
));

942 
	}
}

944 
	$Run
() {

946 
	`PrštH—d”
();

947 
¡d
::
¡ršg¡»am
 
	`b’chm¬k_¡»am
(
FLAGS_b’chm¬ks
);

948 
¡d
::
¡ršg
 
Çme
;

950 
¡d
::
	`g‘lše
(
b’chm¬k_¡»am
, 
Çme
, ',')) {

952 
num_
 = 
FLAGS_num
;

953 
»ads_
 = (
FLAGS_»ads
 < 0 ? 
FLAGS_num
 : FLAGS_reads);

954 
wr™es_
 = (
FLAGS_wr™es
 < 0 ? 
FLAGS_num
 : FLAGS_writes);

955 
v®ue_size
 = 
FLAGS_v®ue_size
;

956 
key_size_
 = 
FLAGS_key_size
;

957 
’Œ›s_³r_b©ch_
 = 
FLAGS_b©ch_size
;

963 
»ad_¿ndom_exp_¿nge_
 = 
FLAGS_»ad_¿ndom_exp_¿nge
;

969 (
B’chm¬k
::*
m‘hod
)(
Th»adS‹
*èğ
nuÎ±r
;

970 (
B’chm¬k
::*
po¡_´oûss_m‘hod
)(èğ
nuÎ±r
;

972 
boŞ
 
äesh_db
 = 
çl£
;

973 
num_th»ads
 = 
FLAGS_th»ads
;

975 
num_»³©
 = 1;

976 
num_w¬mup
 = 0;

977 ià(!
Çme
.
	`em±y
(è&& *Çme.
	`rbegš
() == ']') {

978 autØ
™
 = 
Çme
.
	`fšd
('[');

979 ià(
™
 =ğ
¡d
::
¡ršg
::
Åos
) {

980 
	`årštf
(
¡d”r
, "unknowÀb’chm¬k‡rgum’t '%s'\n", 
Çme
.
	`c_¡r
());

981 
	`E¼ÜEx™
();

983 
¡d
::
¡ršg
 
¬gs
 = 
Çme
.
	`sub¡r
(
™
 + 1);

984 
¬gs
.
	`»size
×rgs.
	`size
() - 1);

985 
Çme
.
	`»size
(
™
);

987 
¡d
::
¡ršg
 
b’ch_¬g
;

988 
¡d
::
¡ršg¡»am
 
	`¬gs_¡»am
(
¬gs
);

989 
¡d
::
	`g‘lše
(
¬gs_¡»am
, 
b’ch_¬g
, '-')) {

990 ià(
b’ch_¬g
.
	`em±y
()) {

993 ià(
b’ch_¬g
[0] == 'X') {

995 
¡d
::
¡ršg
 
num_¡r
 = 
b’ch_¬g
.
	`sub¡r
(1);

996 
num_»³©
 = 
¡d
::
	`¡oi
(
num_¡r
);

997 } ià(
b’ch_¬g
[0] == 'W') {

999 
¡d
::
¡ršg
 
num_¡r
 = 
b’ch_¬g
.
	`sub¡r
(1);

1000 
num_w¬mup
 = 
¡d
::
	`¡oi
(
num_¡r
);

1005 ià(
Çme
 == "fillseq") {

1006 
äesh_db
 = 
Œue
;

1007 
m‘hod
 = &
B’chm¬k
::
Wr™eSeq
;

1008 } ià(
Çme
 == "fillrandom") {

1009 
äesh_db
 = 
Œue
;

1010 
m‘hod
 = &
B’chm¬k
::
Wr™eRªdom
;

1011 } ià(
Çme
 == "fill100K") {

1012 
äesh_db
 = 
Œue
;

1013 
num_
 /= 1000;

1014 
v®ue_size
 = 100 * 1000;

1015 
m‘hod
 = &
B’chm¬k
::
Wr™eRªdom
;

1016 } ià(
Çme
 == "readseq") {

1017 
m‘hod
 = &
B’chm¬k
::
R—dSequ’tŸl
;

1018 } ià(
Çme
 == "readrandom") {

1019 
m‘hod
 = &
B’chm¬k
::
R—dRªdom
;

1020 } ià(
Çme
 == "mixgraph") {

1021 
m‘hod
 = &
B’chm¬k
::
MixG¿ph
;

1022 } ià(
Çme
 == "recoveryaftermixgraph") {

1023 
m‘hod
 = &
B’chm¬k
::
MixG¿ph
;

1024 } ià(
Çme
 == "compact") {

1025 
	`abÜt
();

1027 } ià(
Çme
 == "compactall") {

1028 
	`abÜt
();

1030 } ià(
Çme
 == "compact0") {

1031 
	`abÜt
();

1033 } ià(
Çme
 == "compact1") {

1034 
	`abÜt
();

1036 } ià(
Çme
 == "waitforcompaction") {

1037 
	`abÜt
();

1039 } ià(
Çme
 == "flush") {

1040 
	`Flush
();

1041 } ià(
Çme
 == "stats") {

1042 
	`abÜt
();

1044 } ià(
Çme
 == "resetstats") {

1045 
	`abÜt
();

1047 } ià(
Çme
 == "levelstats") {

1048 
	`abÜt
();

1050 } ià(
Çme
 == "memstats") {

1051 
	`abÜt
();

1059 } ià(
Çme
 == "waitfor10sec") {

1060 
¡d
::
this_th»ad
::
	`¦“p_fÜ
(¡d::
chrÚo
::
	`£cÚds
(10));

1061 } ià(
Çme
 == "waitfor30sec") {

1062 
¡d
::
this_th»ad
::
	`¦“p_fÜ
(¡d::
chrÚo
::
	`£cÚds
(30));

1063 } ià(!
Çme
.
	`em±y
()) {

1064 
	`årštf
(
¡d”r
, "unknowÀb’chm¬k '%s'\n", 
Çme
.
	`c_¡r
());

1065 
	`E¼ÜEx™
();

1068 ià(
äesh_db
) {

1069 ià(
FLAGS_u£_exi¡šg_db
) {

1070 
	`årštf
(
¡dout
, "%-12s : skipped (--use_existing_db isrue)\n",

1071 
Çme
.
	`c_¡r
());

1072 
m‘hod
 = 
nuÎ±r
;

1079 ià(
m‘hod
 !ğ
nuÎ±r
) {

1080 
	`årštf
(
¡dout
, "DB…©h: [%s]\n", 
FLAGS_db
.
	`c_¡r
());

1082 ià(
num_w¬mup
 > 0) {

1083 
	`´štf
("W¬mšg u°b’chm¬k by„uÂšg %dimes\n", 
num_w¬mup
);

1086 
i
 = 0; i < 
num_w¬mup
; i++) {

1087 
	`RunB’chm¬k
(
num_th»ads
, 
Çme
, 
m‘hod
);

1090 ià(
num_»³©
 > 1) {

1091 
	`´štf
("RuÂšg b’chm¬k fÜ %dimes\n", 
num_»³©
);

1094 
CombšedSts
 
combšed_¡©s
;

1095 
i
 = 0; i < 
num_»³©
; i++) {

1096 
Sts
 
¡©s
 = 
	`RunB’chm¬k
(
num_th»ads
, 
Çme
, 
m‘hod
);

1097 
combšed_¡©s
.
	`AddSts
(
¡©s
);

1099 ià(
num_»³©
 > 1) {

1100 
combšed_¡©s
.
	`R•Üt
(
Çme
);

1103 ià(
po¡_´oûss_m‘hod
 !ğ
nuÎ±r
) {

1104 (
this
->*
po¡_´oûss_m‘hod
)();

1108 ià(
FLAGS_¡©i¡ics
) {

1109 
	`abÜt
();

1112 
	}
}

1114 
DB
* 
	$db
(è{  
db_
; 
	}
}

1116 
	g´iv©e
:

1117 
	$li¡db_Put
(
DBCl›Á
* 
ş›Á
, cÚ¡ 
¡d
::
¡ršg_v›w
& 
key
, cÚ¡ std::¡ršg_v›w& 
v®ue
) {

1118 
ş›Á
->
	`PutSŒšgKV
(
key
, 
v®ue
);

1120 
	}
}

1122 
	$li¡db_G‘
(
DBCl›Á
* 
ş›Á
, cÚ¡ 
¡d
::
¡ršg_v›w
& 
key
, std::
¡ršg
* 
v®ue
) {

1123 
ušt64_t
 
v®ue_addr
;

1124 
boŞ
 
»t
 = 
ş›Á
->
	`G‘SŒšgKV
(
key
, &
v®ue_addr
);

1125 ià(
»t
) {

1126 * 
p
 = (*è
v®ue_addr
;

1127 
size_t
 
v®_Ën
 = *((
ušt64_t
*è
p
);

1128 
p
 +ğ(
size_t
);

1129 
v®ue
->
	`assign
(
p
, 
v®_Ën
);

1133 
	}
}

1135 
	$Flush
() {

1136 
¡d
::
this_th»ad
::
	`¦“p_fÜ
(¡d::
chrÚo
::
	`£cÚds
(3));

1137 
i
 = 0; i < 
kNumSh¬ds
; i++) {

1138 
db_
->
	`Mªu®FlushMemTabË
(
i
);

1140 
	}
}

1142 
	$PrštH—d”
() {

1143 
	`PrštEnvœÚm’t
();

1144 
	`årštf
(
¡dout
,

1146 
FLAGS_key_size
);

1147 autØ
avg_v®ue_size
 = 
FLAGS_v®ue_size
;

1148 ià(
FLAGS_v®ue_size_di¡ributiÚ_ty³_e
 =ğ
kFixed
) {

1149 
	`årštf
(
¡dout
, "Values: %d bytesƒach\n",

1150 
avg_v®ue_size
);

1152 
avg_v®ue_size
 = (
FLAGS_v®ue_size_mš
 + 
FLAGS_v®ue_size_max
) / 2;

1153 
	`årštf
(
¡dout
, "Values: %d‡vg bytesƒach\n",

1154 
avg_v®ue_size
);

1155 
	`årštf
(
¡dout
, "Values Distribution: %s (min: %d, max: %d)\n",

1156 
FLAGS_v®ue_size_di¡ributiÚ_ty³
.
	`c_¡r
(),

1157 
FLAGS_v®ue_size_mš
, 
FLAGS_v®ue_size_max
);

1159 
	`årštf
(
¡dout
, "EÁr›s: %lu\n", 
num_
);

1162 
	`årštf
(
¡dout
, "RawSize: %.1f MB (estimated)\n",

1163 ((
¡©ic_ÿ¡
<
št64_t
>(
FLAGS_key_size
 + 
avg_v®ue_size
è* 
num_
)

1165 
	`årštf
(
¡dout
, "FileSize: %.1f MB (estimated)\n",

1166 (((
FLAGS_key_size
 + 
avg_v®ue_size
)

1167 * 
num_
)

1170 
	`årštf
(
¡dout
, "------------------------------------------------\n");

1171 
	}
}

1174 #ià
	$defšed
(
__lšux
)

1175 
¡d
::
¡ršg_v›w
 
	$TrimS·û
(cÚ¡ 
¡d
::
¡ršg_v›w
& 
s
) {

1176 
¡¬t
 = 0;

1177 
¡¬t
 < 
s
.
	`size
(è&& 
	`is¥aû
(s[start])) {

1178 
¡¬t
++;

1180 
lim™
 = 
¡©ic_ÿ¡
<>(
s
.
	`size
());

1181 
lim™
 > 
¡¬t
 && 
	`is¥aû
(
s
[limit-1])) {

1182 
lim™
--;

1184  
¡d
::
	`¡ršg_v›w
(
s
.
	`d©a
(è+ 
¡¬t
, 
lim™
 - start);

1185 
	}
}

1188 
	$PrštEnvœÚm’t
() {

1189 
	`årštf
(
¡d”r
, "ListDB: version %d.%d\n",

1192 #ià
	`defšed
(
__lšux
è|| defšed(
__APPLE__
è|| defšed(
__F»eBSD__
)

1193 
time_t
 
now
 = 
	`time
(
nuÎ±r
);

1194 
buf
[52];

1197 
	`årštf
(
¡d”r
, "Date: %s",

1198 
	`ùime_r
(&
now
, 
buf
));

1200 #ià
	`defšed
(
__lšux
)

1201 
FILE
* 
ıušfo
 = 
	`fİ’
("/proc/cpuinfo", "r");

1202 ià(
ıušfo
 !ğ
nuÎ±r
) {

1203 
lše
[1000];

1204 
num_ıus
 = 0;

1205 
¡d
::
¡ršg
 
ıu_ty³
;

1206 
¡d
::
¡ršg
 
ÿche_size
;

1207 
	`fg‘s
(
lše
, Öše), 
ıušfo
è!ğ
nuÎ±r
) {

1208 cÚ¡ * 
£p
 = 
	`¡rchr
(
lše
, ':');

1209 ià(
£p
 =ğ
nuÎ±r
) {

1212 
¡d
::
¡ršg_v›w
 
key
 = 
	`TrimS·û
(¡d::
	`¡ršg_v›w
(
lše
, 
£p
 - 1 -†ine));

1213 
¡d
::
¡ršg_v›w
 
v®
 = 
	`TrimS·û
(¡d::
	`¡ršg_v›w
(
£p
 + 1));

1214 ià(
key
 == "model‚ame") {

1215 ++
num_ıus
;

1216 
ıu_ty³
 = 
v®
;

1217 } ià(
key
 == "cache size") {

1218 
ÿche_size
 = 
v®
;

1221 
	`fşo£
(
ıušfo
);

1222 
	`årštf
(
¡d”r
, "CPU: %d * %s\n", 
num_ıus
, 
ıu_ty³
.
	`c_¡r
());

1223 
	`årštf
(
¡d”r
, "CPUCache: %s\n", 
ÿche_size
.
	`c_¡r
());

1225 #–ià
	`defšed
(
__APPLE__
)

1226 
ho¡_basic_šfo
 
h
;

1227 
size_t
 
hËn
 = 
HOST_BASIC_INFO_COUNT
;

1228 ià(
	`ho¡_šfo
(
	`mach_ho¡_£lf
(), 
HOST_BASIC_INFO
, (
ho¡_šfo_t
)&
h
,

1229 (
ušt32_t
*)&
hËn
è=ğ
KERN_SUCCESS
) {

1230 
¡d
::
¡ršg
 
ıu_ty³
;

1231 
¡d
::
¡ršg
 
ÿche_size
;

1232 
size_t
 
hÿche_size
;

1233 
hËn
 = (
hÿche_size
);

1234 ià(
	`sysùlbyÇme
("hw.ÿch–šesize", &
hÿche_size
, &
hËn
, 
NULL
, 0) == 0) {

1235 
ÿche_size
 = 
¡d
::
	`to_¡ršg
(
hÿche_size
);

1237 
h
.
ıu_ty³
) {

1238 
CPU_TYPE_X86_64
:

1239 
ıu_ty³
 = "x86_64";

1241 
CPU_TYPE_ARM64
:

1242 
ıu_ty³
 = "arm64";

1247 
	`årštf
(
¡d”r
, "CPU: %d * %s\n", 
h
.
max_ıus
, 
ıu_ty³
.
	`c_¡r
());

1248 
	`årštf
(
¡d”r
, "CPUCache: %s\n", 
ÿche_size
.
	`c_¡r
());

1250 #–ià
	`defšed
(
__F»eBSD__
)

1251 
nıus
;

1252 
size_t
 
Ën
 = (
nıus
);

1253 
mib
[2] = {
CTL_HW
, 
HW_NCPU
};

1254 ià(
	`sysùl
(
mib
, 2, &
nıus
, &
Ën
, 
nuÎ±r
, 0) == 0) {

1255 
ıu_ty³
[16];

1256 
Ën
 = (
ıu_ty³
) - 1;

1257 
mib
[1] = 
HW_MACHINE
;

1258 ià(
	`sysùl
(
mib
, 2, 
ıu_ty³
, &
Ën
, 
nuÎ±r
, 0) == 0) cpu_type[len] = 0;

1260 
	`årštf
(
¡d”r
, "CPU: %d * %s\n", 
nıus
, 
ıu_ty³
);

1265 
	}
}

1267 
	$E¼ÜEx™
() {

1269 
	`ex™
(1);

1270 
	}
}

1272 
	sTh»adArg
 {

1273 
B’chm¬k
* 
	gbm
;

1274 
Sh¬edS‹
* 
	gsh¬ed
;

1275 
Th»adS‹
* 
	gth»ad
;

1276 
size_t
 
	gİ_time_¬r_size
;

1277 (
	gB’chm¬k
::*
m‘hod
)(
Th»adS‹
*);

1280 
	$Th»adBody
(* 
v
) {

1281 
Th»adArg
* 
¬g
 = 
»š‹½»t_ÿ¡
<Th»adArg*>(
v
);

1282 
Sh¬edS‹
* 
sh¬ed
 = 
¬g
->shared;

1283 
Th»adS‹
* 
th»ad
 = 
¬g
->thread;

1285 
id
 = 
th»ad
->
tid
;

1286 
	`S‘Affš™y
(
Numa
::
	`CpuSequ’ûRR
(
id
));

1287 
r
 = 
	`G‘Ch
();

1288 
DBCl›Á
* 
ş›Á
 = 
Ãw
 
	`DBCl›Á
(
¬g
->
bm
->
	`db
(), 
id
, 
r
);

1289 
th»ad
->
ş›Á
 = client;

1291 ià(
¬g
->
İ_time_¬r_size
 > 0) {

1292 
th»ad
->
İ_time_¬r
 = 
Ãw
 
¡d
::
veùÜ
<¡d::
·œ
<, 
ušt64_t
>>();

1293 
th»ad
->
İ_time_¬r
->
	`»£rve
(
¬g
->
İ_time_¬r_size
 + 1);

1297 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
sh¬ed
->
mu
);

1298 
sh¬ed
->
num_š™Ÿlized
++;

1299 ià(
sh¬ed
->
num_š™Ÿlized
 >ğsh¬ed->
tÙ®
) {

1300 
sh¬ed
->
cv
.
	`nÙify_®l
();

1302 
sh¬ed
->
cv
.
	`wa™
(
lk
, [&]{  sh¬ed->
¡¬t
; });

1307 
th»ad
->
¡©s
.
	`S¹
Ñh»ad->
tid
);

1308 (
¬g
->
bm
->*×rg->
m‘hod
))(
th»ad
);

1309 
th»ad
->
¡©s
.
	`Stİ
();

1312 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
sh¬ed
->
mu
);

1313 
sh¬ed
->
num_dÚe
++;

1314 ià(
sh¬ed
->
num_dÚe
 >ğsh¬ed->
tÙ®
) {

1315 
sh¬ed
->
cv
.
	`nÙify_®l
();

1318 
	}
}

1320 
Sts
 
RunB’chm¬k
(
n
, cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

1321 (
B’chm¬k
::*
m‘hod
)(
Th»adS‹
*)) {

1322 ià(
Çme
 =ğ"fÌªdom" && 
FLAGS_wr™e_th»ads
 > 0) {

1323 
n
 = 
FLAGS_wr™e_th»ads
;

1325 
Sh¬edS‹
 
sh¬ed
;

1326 
sh¬ed
.
tÙ®
 = 
n
;

1327 
sh¬ed
.
num_š™Ÿlized
 = 0;

1328 
sh¬ed
.
num_dÚe
 = 0;

1329 
sh¬ed
.
¡¬t
 = 
çl£
;

1331 
¡d
::
unique_±r
<
R•Ü‹rAg’t
> 
»pÜ‹r_ag’t
;

1332 ià(
FLAGS_»pÜt_š‹rv®_£cÚds
 > 0) {

1333 
»pÜ‹r_ag’t
.
	`»£t
(
Ãw
 
	`R•Ü‹rAg’t
(
FLAGS_»pÜt_fe
,

1334 
FLAGS_»pÜt_š‹rv®_£cÚds
));

1337 
Th»adArg
* 
¬g
 = 
Ãw
 Th»adArg[
n
];

1339 
¡d
::
veùÜ
<¡d::
th»ad
> 
th»ads
;

1340 
i
 = 0; i < 
n
; i++) {

1341 
¬g
[
i
].
bm
 = 
this
;

1342 
¬g
[
i
].
m‘hod
 = method;

1343 
¬g
[
i
].
sh¬ed
 = &shared;

1344 
¬g
[
i
].
th»ad
 = 
Ãw
 
	`Th»adS‹
(i);

1345 
¬g
[
i
].
th»ad
->
¡©s
.
	`S‘R•Ü‹rAg’t
(
»pÜ‹r_ag’t
.
	`g‘
());

1346 
¬g
[
i
].
th»ad
->
sh¬ed
 = &shared;

1347 ià(
Çme
 == "mixgraph") {

1348 
¬g
[
i
].
İ_time_¬r_size
 = 
»ads_
;

1350 
¬g
[
i
].
İ_time_¬r_size
 = 0;

1353 
th»ads
.
	`em¶aû_back
(
Th»adBody
, &
¬g
[
i
]);

1356 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
sh¬ed
.
mu
);

1357 
sh¬ed
.
cv
.
	`wa™
(
lk
, [&]{  sh¬ed.
num_š™Ÿlized
 =ğ
n
; });

1359 
sh¬ed
.
¡¬t
 = 
Œue
;

1360 
sh¬ed
.
cv
.
	`nÙify_®l
();

1361 
sh¬ed
.
cv
.
	`wa™
(
lk
, [&]{  sh¬ed.
num_dÚe
 =ğ
n
; });

1362 
lk
.
	`uÆock
();

1364 auto& 
t
 : 
th»ads
è{ iàÑ.
	`jošabË
()èt.
	`još
(); }

1367 ià(
Çme
 == "recoveryaftermixgraph") {

1368 
	`Recov”yAá”MixG¿ph
();

1373 
Sts
 
m”ge_¡©s
;

1374 
i
 = 0; i < 
n
; i++) {

1375 
m”ge_¡©s
.
	`M”ge
(
¬g
[
i
].
th»ad
->
¡©s
);

1377 
m”ge_¡©s
.
	`R•Üt
(
Çme
);

1380 ià(
¬g
[0].
th»ad
->
İ_time_¬r
) {

1381 
fs
::
	`»move_®l
("op_time_output");

1382 
fs
::
	`ü—‹_dœeùÜ›s
("op_time_output");

1383 
¡d
::
veùÜ
<¡d::
th»ad
> 
dump_th»ads
;

1384 
i
 = 0; i < 
n
; i++) {

1385 
dump_th»ads
.
	`push_back
(
¡d
::
	`th»ad
([&, 
i
]{

1386 
¡d
::
¡ršg¡»am
 
âame_ss
;

1387 
âame_ss
 << "İ_time_ouut/" << 
¬g
[
i
].
th»ad
->
tid
 << ".dat";

1388 
¡d
::
¡ršg
 
âame
 = 
âame_ss
.
	`¡r
();

1389 
¡d
::
f¡»am
 
	`¡rm
(
âame
, 
¡rm
.
out
);

1390 auto& 
™
 : *
¬g
[
i
].
th»ad
->
İ_time_¬r
) {

1391 
¡rm
 << 
™
.
fœ¡
 << " " << it.
£cÚd
 << 
¡d
::
’dl
;

1393 
¡rm
.
	`şo£
();

1396 auto& 
t
 : 
dump_th»ads
è{ iàÑ.
	`jošabË
()èt.
	`još
(); }

1399 
i
 = 0; i < 
n
; i++) {

1400 
d–‘e
 
¬g
[
i
].
th»ad
->
ş›Á
;

1401 ià(
¬g
[
i
].
th»ad
->
İ_time_¬r
) {

1402 
d–‘e
 
¬g
[
i
].
th»ad
->
İ_time_¬r
;

1404 
d–‘e
 
¬g
[
i
].
th»ad
;

1406 
d–‘e
[] 
¬g
;

1408  
m”ge_¡©s
;

1409 
	}
}

1411 
	$AcquœeLßd
(
Th»adS‹
* 
th»ad
) {

1412 
dummy
;

1413 
¡d
::
©omic
<*> 
	`­
(&
dummy
);

1414 
couÁ
 = 0;

1415 [[
maybe_unu£d
]] *
±r
 = 
nuÎ±r
;

1416 
th»ad
->
¡©s
.
	`AddMes§ge
("(each op is 1000†oads)");

1417 
couÁ
 < 100000) {

1418 
i
 = 0; i < 1000; i++) {

1419 
±r
 = 
­
.
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
);

1421 
couÁ
++;

1422 
th»ad
->
¡©s
.
	`FšishedOps
(
nuÎ±r
, 1, 
kOth”s
);

1425 
	}
}

1426 
	eWr™eMode
 {

1427 
	gRANDOM
, 
	gSEQUENTIAL
, 
	gUNIQUE_RANDOM


1430 
	$Wr™eSeq
(
Th»adS‹
* 
th»ad
) {

1431 
	`DoWr™e
(
th»ad
, 
SEQUENTIAL
);

1432 
	}
}

1434 
	$Wr™eRªdom
(
Th»adS‹
* 
th»ad
) {

1435 
	`DoWr™e
(
th»ad
, 
RANDOM
);

1436 
	}
}

1438 
	$Wr™eUniqueRªdom
(
Th»adS‹
* 
th»ad
) {

1439 
	`DoWr™e
(
th»ad
, 
UNIQUE_RANDOM
);

1440 
	}
}

1442 şas 
	cKeyG’”©Ü
 {

1443 
	gpublic
:

1444 
KeyG’”©Ü
(
Rªdom64
* 
¿nd
, 
Wr™eMode
 
mode
, 
ušt64_t
 
num
,

1445 
ušt64_t
 = 64 * 1024)

1446 : 
¿nd_
(
¿nd
), 
mode_
(
mode
), 
num_
(
num
), 
Ãxt_
(0) {

1447 ià(
	gmode_
 =ğ
UNIQUE_RANDOM
) {

1452 
v®ues_
.
»size
(
num_
);

1453 
ušt64_t
 
	gi
 = 0; i < 
	gnum_
; ++i) {

1454 
	gv®ues_
[
i
] = i;

1456 
RªdomShufæe
(
v®ues_
.
begš
(), v®ues_.
’d
(),

1457 
¡©ic_ÿ¡
<
ušt32_t
>(
FLAGS_£ed
));

1461 
ušt64_t
 
Next
() {

1462 
	gmode_
) {

1463 
	gSEQUENTIAL
:

1464  
Ãxt_
++;

1465 
	gRANDOM
:

1466  (
¿nd_
->
Next
(è% (
num_
 - 1)) + 1;

1467 
	gUNIQUE_RANDOM
:

1468 
as£¹
(
Ãxt_
 < 
num_
);

1469  
	gv®ues_
[
Ãxt_
++];

1471 
as£¹
(
çl£
);

1472  
	g¡d
::
num”ic_lim™s
<
ušt64_t
>::
max
();

1476 
ušt64_t
 
F‘ch
(ušt64_ˆ
šdex
) {

1477 
as£¹
(
mode_
 =ğ
UNIQUE_RANDOM
);

1478 
as£¹
(
šdex
 < 
v®ues_
.
size
());

1479  
	gv®ues_
[
šdex
];

1482 
	g´iv©e
:

1483 
Rªdom64
* 
¿nd_
;

1484 
Wr™eMode
 
	gmode_
;

1485 cÚ¡ 
ušt64_t
 
	gnum_
;

1486 
ušt64_t
 
	gÃxt_
;

1487 
	g¡d
::
veùÜ
<
ušt64_t
> 
v®ues_
;

1490 
	$SšeR©e
(
x
) {

1491  
FLAGS_sše_a
*
	`sš
((
FLAGS_sše_b
*
x
è+ 
FLAGS_sše_c
è+ 
FLAGS_sše_d
;

1492 
	}
}

1494 
	$DoWr™e
(
Th»adS‹
* 
th»ad
, 
Wr™eMode
 
wr™e_mode
) {

1495 cÚ¡ 
‹¡_du¿tiÚ
 = 
wr™e_mode
 =ğ
RANDOM
 ? 
FLAGS_du¿tiÚ
 : 0;

1496 cÚ¡ 
št64_t
 
num_İs
 = 
wr™es_
 =ğ0 ? 
num_
 : writes_;

1498 
size_t
 
num_key_g’s
 = 1;

1499 
¡d
::
veùÜ
<¡d::
unique_±r
<
KeyG’”©Ü
>> 
	`key_g’s
(
num_key_g’s
);

1500 
št64_t
 
max_İs
 = 
num_İs
 * 
num_key_g’s
;

1501 
št64_t
 
İs_³r_¡age
 = 
max_İs
;

1503 
Du¿tiÚ
 
	`du¿tiÚ
(
‹¡_du¿tiÚ
, 
max_İs
, 
İs_³r_¡age
);

1504 cÚ¡ 
ušt64_t
 
num_³r_key_g’
 = 
num_
 ;

1505 
size_t
 
i
 = 0; i < 
num_key_g’s
; i++) {

1506 
key_g’s
[
i
].
	`»£t
(
Ãw
 
	`KeyG’”©Ü
(&(
th»ad
->
¿nd
), 
wr™e_mode
,

1507 
num_³r_key_g’
, 
İs_³r_¡age
));

1510 ià(
num_
 !ğ
FLAGS_num
) {

1511 
msg
[100];

1512 
	`¢´štf
(
msg
, (msg), "(%lu ops)", 
num_
);

1513 
th»ad
->
¡©s
.
	`AddMes§ge
(
msg
);

1516 
RªdomG’”©Ü
 
g’
;

1519 
s
;

1520 
št64_t
 
by‹s
 = 0;

1522 
¡d
::
unique_±r
<cÚ¡ []> 
key_gu¬d
;

1523 
¡d
::
¡ršg_v›w
 
key
 = 
	`AÎoÿ‹Key
(&
key_gu¬d
);

1525 
št64_t
 
¡age
 = 0;

1526 
št64_t
 
num_wr™‹n
 = 0;

1527 (
num_³r_key_g’
 !ğ0è&& !
du¿tiÚ
.
	`DÚe
(
’Œ›s_³r_b©ch_
)) {

1528 ià(
du¿tiÚ
.
	`G‘Sge
(è!ğ
¡age
) {

1529 
¡age
 = 
du¿tiÚ
.
	`G‘Sge
();

1539 
size_t
 
id
 = 
th»ad
->
¿nd
.
	`Next
(è% 
num_key_g’s
;

1542 
št64_t
 
b©ch_by‹s
 = 0;

1544 
¡d
::
¡ršg_v›w
 
v®
;

1546 
št64_t
 
¿nd_num
 = 0;

1547 
¿nd_num
 = 
key_g’s
[
id
]->
	`Next
();

1548 
	`G’”©eKeyFromIÁ
(
¿nd_num
, 
FLAGS_num
, &
key
);

1550 
v®
 = 
g’
.
	`G’”©e
();

1551 
b©ch_by‹s
 +ğ
v®
.
	`size
(è+ 
key_size_
;

1552 
by‹s
 +ğ
v®
.
	`size
(è+ 
key_size_
;

1553 ++
num_wr™‹n
;

1555 ià(
th»ad
->
sh¬ed
->
wr™e_¿‹_lim™”
.
	`g‘
(è!ğ
nuÎ±r
) {

1556 
th»ad
->
sh¬ed
->
wr™e_¿‹_lim™”
->
	`Reque¡
(
b©ch_by‹s
, 
Env
::
IO_HIGH
, 
R©eLim™”
::
OpTy³
::
kWr™e
);

1560 
th»ad
->
¡©s
.
	`Re£tLa¡OpTime
();

1562 
s
 = 
	`li¡db_Put
(
th»ad
->
ş›Á
, 
key
, 
v®
);

1563 
th»ad
->
¡©s
.
	`FšishedOps
(
nuÎ±r
, 
’Œ›s_³r_b©ch_
, 
kWr™e
);

1564 ià(
s
 != 0 ) {

1565 
	`årštf
(
¡d”r
, "putƒrror\n");

1566 
	`abÜt
();

1569 
th»ad
->
¡©s
.
	`AddBy‹s
(
by‹s
);

1570 
	}
}

1572 
	$R—dSequ’tŸl
(
Th»adS‹
* 
th»ad
) {

1573 
	`abÜt
();

1581 
	}
}

1583 
	$R—dSequ’tŸl
(
Th»adS‹
* 
th»ad
, 
DB
* 
db
) {

1585 
	`abÜt
();

1587 
R—dO±iÚs
 
	`İtiÚs
(
FLAGS_v”ify_checksum
, 
Œue
);

1588 
İtiÚs
.
šg
 = 
FLAGS_u£_šg_™”©Ü
;

1589 
¡d
::
unique_±r
<[]> 
ts_gu¬d
;

1590 
Sliû
 
ts
;

1591 ià(
u£r_time¡amp_size_
 > 0) {

1592 
ts_gu¬d
.
	`»£t
(
Ãw
 [
u£r_time¡amp_size_
]);

1593 
ts
 = 
mock_­p_şock_
->
	`G‘Time¡ampFÜR—d
(
th»ad
->
¿nd
, 
ts_gu¬d
.
	`g‘
());

1594 
İtiÚs
.
time¡amp
 = &
ts
;

1597 
İtiÚs
.
ad­tive_»adah—d
 = 
FLAGS_ad­tive_»adah—d
;

1598 
I‹¿tÜ
* 
™”
 = 
db
->
	`NewI‹¿tÜ
(
İtiÚs
);

1599 
št64_t
 
i
 = 0;

1600 
št64_t
 
by‹s
 = 0;

1601 
™”
->
	`S“kToFœ¡
(); 
i
 < 
»ads_
 && i‹r->
	`V®id
(); i‹r->
	`Next
()) {

1602 
by‹s
 +ğ
™”
->
	`key
().
	`size
(è+ i‹r->
	`v®ue
().size();

1603 
th»ad
->
¡©s
.
	`FšishedOps
(
nuÎ±r
, 
db
, 1, 
kR—d
);

1604 ++
i
;

1606 ià(
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
.
	`g‘
(è!ğ
nuÎ±r
 &&

1607 
i
 % 1024 == 1023) {

1608 
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
->
	`Reque¡
(1024, 
Env
::
IO_HIGH
, 
R©eLim™”
::
OpTy³
::
kR—d
);

1612 
d–‘e
 
™”
;

1613 
th»ad
->
¡©s
.
	`AddBy‹s
(
by‹s
);

1614 ià(
FLAGS_³rf_Ëv–
 > 
ROCKSDB_NAMESPACE
::
P”fLev–
::
kDi§bË
) {

1615 
th»ad
->
¡©s
.
	`AddMes§ge
(
¡d
::
	`¡ršg
("PERF_CONTEXT:\n") +

1616 
	`g‘_³rf_cÚ‹xt
()->
	`ToSŒšg
());

1619 
	}
}

1621 
št64_t
 
	$G‘RªdomKey
(
Rªdom64
* 
¿nd
) {

1622 
ušt64_t
 
¿nd_št
 = 
¿nd
->
	`Next
();

1623 
št64_t
 
key_¿nd
;

1624 ià(
»ad_¿ndom_exp_¿nge_
 == 0) {

1625 
key_¿nd
 = (
¿nd_št
 % (
FLAGS_num
 - 1)) + 1;

1627 cÚ¡ 
ušt64_t
 
kBigIÁ
 = 
¡©ic_ÿ¡
<uint64_t>(1U) << 62;

1628 
Üd”
 = -
¡©ic_ÿ¡
<>(
¿nd_št
 % 
kBigIÁ
) /

1629 
¡©ic_ÿ¡
<>(
kBigIÁ
) *

1630 
»ad_¿ndom_exp_¿nge_
;

1631 
exp_¿n
 = 
¡d
::
	`exp
(
Üd”
);

1632 
ušt64_t
 
¿nd_num
 =

1633 
¡©ic_ÿ¡
<
št64_t
>(
exp_¿n
 * stic_ÿ¡<>(
FLAGS_num
));

1635 cÚ¡ 
ušt64_t
 
kBigPrime
 = 0x5bd1e995;

1637 
key_¿nd
 = 
¡©ic_ÿ¡
<
št64_t
>((
¿nd_num
 * 
kBigPrime
è% 
FLAGS_num
);

1639  
key_¿nd
;

1640 
	}
}

1642 
	$R—dRªdom
(
Th»adS‹
* 
th»ad
) {

1643 
št64_t
 
»ad
 = 0;

1644 
št64_t
 
found
 = 0;

1645 
št64_t
 
by‹s
 = 0;

1647 
št64_t
 
key_¿nd
 = 0;

1657 
¡d
::
unique_±r
<cÚ¡ []> 
key_gu¬d
;

1658 
¡d
::
¡ršg_v›w
 
key
 = 
	`AÎoÿ‹Key
(&
key_gu¬d
);

1659 
¡d
::
¡ršg
 
v®ue
;

1660 
v®ue
.
	`»£rve
(
v®ue_size
);

1662 
Du¿tiÚ
 
	`du¿tiÚ
(
FLAGS_du¿tiÚ
, 
»ads_
);

1663 !
du¿tiÚ
.
	`DÚe
(1)) {

1664 
key_¿nd
 = 
	`G‘RªdomKey
(&
th»ad
->
¿nd
);

1665 
	`G’”©eKeyFromIÁ
(
key_¿nd
, 
FLAGS_num
, &
key
);

1666 
»ad
++;

1667 
s
;

1684 
s
 = 
	`li¡db_G‘
(
th»ad
->
ş›Á
, 
key
, &
v®ue
);

1686 ià(
s
 == 0 ) {

1687 
found
++;

1688 
by‹s
 +ğ
key
.
	`size
(è+ 
v®ue
.size();

1694 ià(
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
.
	`g‘
(è!ğ
nuÎ±r
 &&

1695 
»ad
 % 256 == 255) {

1696 
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
->
	`Reque¡
(256, 
Env
::
IO_HIGH
, 
R©eLim™”
::
OpTy³
::
kR—d
);

1699 
th»ad
->
¡©s
.
	`FšishedOps
(
nuÎ±r
, 1, 
kR—d
);

1702 
msg
[100];

1703 
	`¢´štf
(
msg
, (msg), "(%lu of %lu found)\n",

1704 
found
, 
»ad
);

1706 
th»ad
->
¡©s
.
	`AddBy‹s
(
by‹s
);

1707 
th»ad
->
¡©s
.
	`AddMes§ge
(
msg
);

1708 
	}
}

1711 
št64_t
 
	$P¬‘oCdfInv”siÚ
(
u
, 
th‘a
, 
k
, 
sigma
) {

1712 
»t
;

1713 ià(
k
 == 0.0) {

1714 
»t
 = 
th‘a
 - 
sigma
 * 
¡d
::
	`log
(
u
);

1716 
»t
 = 
th‘a
 + 
sigma
 * (
¡d
::
	`pow
(
u
, -1 * 
k
) - 1) / k;

1718  
¡©ic_ÿ¡
<
št64_t
>(
	`û
(
»t
));

1719 
	}
}

1721 
št64_t
 
	$Pow”CdfInv”siÚ
(
u
, 
a
, 
b
) {

1722 
»t
;

1723 
»t
 = 
¡d
::
	`pow
((
u
 / 
a
), (1 / 
b
));

1724  
¡©ic_ÿ¡
<
št64_t
>(
	`û
(
»t
));

1725 
	}
}

1728 
	$AddNoi£
(
Üigš
, 
noi£_¿tio
) {

1729 ià(
noi£_¿tio
 < 0.0 ||‚oise_ratio > 1.0) {

1730  
Üigš
;

1732 
bªd_št
 = 
¡©ic_ÿ¡
<>(
FLAGS_sše_a
);

1733 
d–
 = (
	`¿nd
(è% 
bªd_št
 - bªd_šˆ/ 2è* 
noi£_¿tio
;

1734 ià(
Üigš
 + 
d–
 < 0) {

1735  
Üigš
;

1737  (
Üigš
 + 
d–
);

1739 
	}
}

1743 şas 
	cQu”yDecid”
 {

1744 
	gpublic
:

1745 
¡d
::
veùÜ
<> 
ty³_
;

1746 
	g¡d
::
veùÜ
<> 
¿tio_
;

1747 
	g¿nge_
;

1749 
Qu”yDecid”
() {}

1750 ~
Qu”yDecid”
() {}

1752 
In™Ÿ‹
(
¡d
::
veùÜ
<> 
¿tio_šput
) {

1753 
¿nge_max
 = 1000;

1754 
	gsum
 = 0.0;

1755 auto& 
	g¿tio
 : 
¿tio_šput
) {

1756 
sum
 +ğ
¿tio
;

1758 
	g¿nge_
 = 0;

1759 auto& 
	g¿tio
 : 
¿tio_šput
) {

1760 
¿nge_
 +ğ
¡©ic_ÿ¡
<>(
û
(
¿nge_max
 * (
¿tio
 / 
sum
)));

1761 
	gty³_
.
push_back
(
¿nge_
);

1762 
	g¿tio_
.
push_back
(
¿tio
 / 
sum
);

1767 
G‘Ty³
(
št64_t
 
¿nd_num
) {

1768 ià(
	g¿nd_num
 < 0) {

1769 
	g¿nd_num
 = 
¿nd_num
 * (-1);

1771 
as£¹
(
¿nge_
 != 0);

1772 
	gpos
 = 
¡©ic_ÿ¡
<>(
¿nd_num
 % 
¿nge_
);

1773 
	gi
 = 0; i < 
	g¡©ic_ÿ¡
<>(
	gty³_
.
size
()); i++) {

1774 ià(
	gpos
 < 
	gty³_
[
i
]) {

1775  
	gi
;

1784 
	sKey¿ngeUn™
 {

1785 
št64_t
 
	gkey¿nge_¡¬t
;

1786 
št64_t
 
	gkey¿nge_acûss
;

1787 
št64_t
 
	gkey¿nge_keys
;

1803 şas 
	cG’”©eTwoT”mExpKeys
 {

1804 
	gpublic
:

1806 
št64_t
 
key¿nge_¿nd_max_
 = 0;

1807 
št64_t
 
	gkey¿nge_size_
 = 0;

1808 
št64_t
 
	gkey¿nge_num_
 = 0;

1809 
	g¡d
::
veùÜ
<
Key¿ngeUn™
> 
key¿nge_£t_
;

1813 
In™Ÿ‹ExpDi¡ributiÚ
(
št64_t
 
tÙ®_keys
, 
´efix_a
,

1814 
´efix_b
, 
´efix_c
,

1815 
´efix_d
) {

1816 
št64_t
 
	gam¶ify
 = 0;

1817 
št64_t
 
	gkey¿nge_¡¬t
 = 0;

1818 ià(
	gFLAGS_key¿nge_num
 <= 0) {

1819 
key¿nge_num_
 = 1;

1821 
	gkey¿nge_num_
 = 
FLAGS_key¿nge_num
;

1823 
	gkey¿nge_size_
 = 
tÙ®_keys
 / 
key¿nge_num_
;

1826 
št64_t
 
	gpfx
 = 
key¿nge_num_
;…fx >= 1;…fx--) {

1830 
	gkey¿nge_p
 = 
´efix_a
 * 
¡d
::
exp
(
´efix_b
 * 
pfx
) +

1831 
´efix_c
 * 
¡d
::
exp
(
´efix_d
 * 
pfx
);

1832 ià(
	gkey¿nge_p
 < 
	g¡d
::
pow
(10.0, -16.0)) {

1833 
	gkey¿nge_p
 = 0.0;

1841 ià(
	gam¶ify
 =ğ0 && 
key¿nge_p
 > 0) {

1842 
am¶ify
 = 
¡©ic_ÿ¡
<
št64_t
>(
¡d
::
æoÜ
(1 / 
key¿nge_p
)) + 1;

1847 
Key¿ngeUn™
 
	gp_un™
;

1848 
	gp_un™
.
	gkey¿nge_¡¬t
 = 
key¿nge_¡¬t
;

1849 ià(0.0 >ğ
key¿nge_p
) {

1850 
p_un™
.
key¿nge_acûss
 = 0;

1852 
	gp_un™
.
	gkey¿nge_acûss
 =

1853 
¡©ic_ÿ¡
<
št64_t
>(
¡d
::
æoÜ
(
am¶ify
 * 
key¿nge_p
));

1855 
	gp_un™
.
	gkey¿nge_keys
 = 
key¿nge_size_
;

1856 
	gkey¿nge_£t_
.
push_back
(
p_un™
);

1857 
	gkey¿nge_¡¬t
 +ğ
p_un™
.
key¿nge_acûss
;

1859 
	gkey¿nge_¿nd_max_
 = 
key¿nge_¡¬t
;

1868 
Rªdom64
 
¿nd_loÿ
(
key¿nge_¿nd_max_
);

1869 
št64_t
 
	gi
 = 0; i < 
	gFLAGS_key¿nge_num
; i++) {

1870 
št64_t
 
	gpos
 = 
¿nd_loÿ
.
Next
(è% 
FLAGS_key¿nge_num
;

1871 
as£¹
(
i
 >ğ0 && i < 
¡©ic_ÿ¡
<
št64_t
>(
key¿nge_£t_
.
size
()) &&

1872 
pos
 >ğ0 &&…o < 
¡©ic_ÿ¡
<
št64_t
>(
key¿nge_£t_
.
size
()));

1873 
	g¡d
::
sw­
(
key¿nge_£t_
[
i
], key¿nge_£t_[
pos
]);

1877 
št64_t
 
	goff£t
 = 0;

1878 auto& 
	gp_un™
 : 
key¿nge_£t_
) {

1879 
p_un™
.
key¿nge_¡¬t
 = 
off£t
;

1880 
	goff£t
 +ğ
p_un™
.
key¿nge_acûss
;

1887 
št64_t
 
Di¡G‘KeyID
(št64_ˆ
ši_¿nd
, 
key_di¡_a
,

1888 
key_di¡_b
) {

1889 
št64_t
 
	gkey¿nge_¿nd
 = 
ši_¿nd
 % 
key¿nge_¿nd_max_
;

1892 
št64_t
 
	g¡¬t
 = 0, 
	g’d
 = 
¡©ic_ÿ¡
<št64_t>(
key¿nge_£t_
.
size
());

1893 
	g¡¬t
 + 1 < 
	g’d
) {

1894 
št64_t
 
	gmid
 = 
¡¬t
 + (
’d
 - start) / 2;

1895 
as£¹
(
mid
 >ğ0 && mid < 
¡©ic_ÿ¡
<
št64_t
>(
key¿nge_£t_
.
size
()));

1896 ià(
	gkey¿nge_¿nd
 < 
	gkey¿nge_£t_
[
mid
].
	gkey¿nge_¡¬t
) {

1897 
	g’d
 = 
mid
;

1899 
	g¡¬t
 = 
mid
;

1902 
št64_t
 
	gkey¿nge_id
 = 
¡¬t
;

1905 
št64_t
 
	gkey_off£t
 = 0, 
	gkey_£ed
;

1906 ià(
	gkey_di¡_a
 =ğ0.0 || 
key_di¡_b
 == 0.0) {

1907 
key_off£t
 = 
ši_¿nd
 % 
key¿nge_size_
;

1909 
	gu
 =

1910 
¡©ic_ÿ¡
<>(
ši_¿nd
 % 
key¿nge_size_
) / keyrange_size_;

1911 
	gkey_£ed
 = 
¡©ic_ÿ¡
<
št64_t
>(

1912 
û
(
¡d
::
pow
((
u
 / 
key_di¡_a
), (1 / 
key_di¡_b
))));

1913 
Rªdom64
 
¿nd_key
(
key_£ed
);

1914 
	gkey_off£t
 = 
¿nd_key
.
Next
(è% 
key¿nge_size_
;

1916  
key¿nge_size_
 * 
	gkey¿nge_id
 + 
	gkey_off£t
;

1927 
	$MixG¿ph
(
Th»adS‹
* 
th»ad
) {

1928 
št64_t
 
»ad
 = 0;

1929 
št64_t
 
g‘s
 = 0;

1930 
št64_t
 
puts
 = 0;

1931 
št64_t
 
found
 = 0;

1932 
št64_t
 
£ek
 = 0;

1934 
št64_t
 
by‹s
 = 0;

1935 cÚ¡ 
št64_t
 
deçuÉ_v®ue_max
 = 1 * 1024 * 1024;

1936 
št64_t
 
v®ue_max
 = 
deçuÉ_v®ue_max
;

1938 
wr™e_¿‹
 = 1000000.0;

1939 
»ad_¿‹
 = 1000000.0;

1940 
boŞ
 
u£_´efix_mod–šg
 = 
çl£
;

1941 
boŞ
 
u£_¿ndom_mod–šg
 = 
çl£
;

1942 
G’”©eTwoT”mExpKeys
 
g’_exp
;

1943 
¡d
::
veùÜ
<> 
¿tio
{
FLAGS_mix_g‘_¿tio
, 
FLAGS_mix_put_¿tio
,

1944 
FLAGS_mix_£ek_¿tio
};

1946 
Qu”yDecid”
 
qu”y
;

1947 
RªdomG’”©Ü
 
g’
;

1948 
s
;

1949 ià(
v®ue_max
 > 
FLAGS_mix_max_v®ue_size
) {

1950 
v®ue_max
 = 
FLAGS_mix_max_v®ue_size
;

1954 
¡d
::
unique_±r
<cÚ¡ []> 
key_gu¬d
;

1956 
¡d
::
¡ršg_v›w
 
key
 = 
	`AÎoÿ‹Key
(&
key_gu¬d
);

1958 
¡d
::
¡ršg
 
v®ue
;

1959 
v®ue
.
	`»£rve
(
v®ue_max
);

1960 
qu”y
.
	`In™Ÿ‹
(
¿tio
);

1963 ià(
FLAGS_sše_mix_¿‹
) {

1964 
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
.
	`»£t
(

1965 
	`NewG’”icR©eLim™”
(
¡©ic_ÿ¡
<
št64_t
>(
»ad_¿‹
)));

1966 
th»ad
->
sh¬ed
->
wr™e_¿‹_lim™”
.
	`»£t
(

1967 
	`NewG’”icR©eLim™”
(
¡©ic_ÿ¡
<
št64_t
>(
wr™e_¿‹
)));

1971 ià(
FLAGS_key¿nge_di¡_a
 !ğ0.0 || 
FLAGS_key¿nge_di¡_b
 != 0.0 ||

1972 
FLAGS_key¿nge_di¡_c
 !ğ0.0 || 
FLAGS_key¿nge_di¡_d
 != 0.0) {

1973 
u£_´efix_mod–šg
 = 
Œue
;

1974 
g’_exp
.
	`In™Ÿ‹ExpDi¡ributiÚ
(

1975 
FLAGS_num
, 
FLAGS_key¿nge_di¡_a
, 
FLAGS_key¿nge_di¡_b
,

1976 
FLAGS_key¿nge_di¡_c
, 
FLAGS_key¿nge_di¡_d
);

1978 ià(
FLAGS_key_di¡_a
 =ğ0 || 
FLAGS_key_di¡_b
 == 0) {

1979 
u£_¿ndom_mod–šg
 = 
Œue
;

1982 
Du¿tiÚ
 
	`du¿tiÚ
(
FLAGS_du¿tiÚ
, 
»ads_
);

1983 ià(
th»ad
->
İ_time_¬r
) {

1984 
th»ad
->
İ_time_¬r
->
	`em¶aû_back
(-1, 
Clock
::
	`NowNªos
());

1986 !
du¿tiÚ
.
	`DÚe
(1)) {

1987 
št64_t
 
ši_¿nd
, 
¿nd_v
, 
key_¿nd
, 
key_£ed
;

1988 
ši_¿nd
 = 
	`G‘RªdomKey
(&
th»ad
->
¿nd
);

1989 
¿nd_v
 = 
ši_¿nd
 % 
FLAGS_num
;

1990 
u
 = 
¡©ic_ÿ¡
<>(
¿nd_v
è/ 
FLAGS_num
;

1993 ià(
u£_¿ndom_mod–šg
) {

1994 
key_¿nd
 = 
ši_¿nd
;

1995 } ià(
u£_´efix_mod–šg
) {

1996 
key_¿nd
 =

1997 
g’_exp
.
	`Di¡G‘KeyID
(
ši_¿nd
, 
FLAGS_key_di¡_a
, 
FLAGS_key_di¡_b
);

1999 
key_£ed
 = 
	`Pow”CdfInv”siÚ
(
u
, 
FLAGS_key_di¡_a
, 
FLAGS_key_di¡_b
);

2000 
Rªdom64
 
	`¿nd
(
key_£ed
);

2001 
key_¿nd
 = 
¡©ic_ÿ¡
<
št64_t
>(
¿nd
.
	`Next
()è% 
FLAGS_num
;

2003 
	`G’”©eKeyFromIÁ
(
key_¿nd
, 
FLAGS_num
, &
key
);

2004 
qu”y_ty³
 = 
qu”y
.
	`G‘Ty³
(
¿nd_v
);

2007 
ušt64_t
 
now
 = 
Clock
::
	`NowMiüos
();

2008 
ušt64_t
 
u£cs_sšû_Ï¡
;

2009 ià(
now
 > 
th»ad
->
¡©s
.
	`G‘SšeIÁ”v®
()) {

2010 
u£cs_sšû_Ï¡
 = 
now
 - 
th»ad
->
¡©s
.
	`G‘SšeIÁ”v®
();

2012 
u£cs_sšû_Ï¡
 = 0;

2015 ià(
FLAGS_sše_mix_¿‹
 &&

2016 
u£cs_sšû_Ï¡
 >

2017 (
FLAGS_sše_mix_¿‹_š‹rv®_mli£cÚds
 * 
ušt64_t
{1000})) {

2018 
u£cs_sšû_¡¬t
 =

2019 
¡©ic_ÿ¡
<>(
now
 - 
th»ad
->
¡©s
.
	`G‘S¹
());

2020 
th»ad
->
¡©s
.
	`Re£tSšeIÁ”v®
();

2021 
mix_¿‹_w™h_noi£
 = 
	`AddNoi£
(

2022 
	`SšeR©e
(
u£cs_sšû_¡¬t
 / 1000000.0), 
FLAGS_sše_mix_¿‹_noi£
);

2023 
»ad_¿‹
 = 
mix_¿‹_w™h_noi£
 * (
qu”y
.
¿tio_
[0] + query.ratio_[2]);

2024 
wr™e_¿‹
 = 
mix_¿‹_w™h_noi£
 * 
qu”y
.
¿tio_
[1];

2026 ià(
»ad_¿‹
 > 0) {

2027 
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
->
	`S‘By‹sP”SecÚd
(

2028 
¡©ic_ÿ¡
<
št64_t
>(
»ad_¿‹
));

2030 ià(
wr™e_¿‹
 > 0) {

2031 
th»ad
->
sh¬ed
->
wr™e_¿‹_lim™”
->
	`S‘By‹sP”SecÚd
(

2032 
¡©ic_ÿ¡
<
št64_t
>(
wr™e_¿‹
));

2036 ià(
qu”y_ty³
 == 0) {

2038 
g‘s
++;

2039 
»ad
++;

2050 
s
 = 
	`li¡db_G‘
(
th»ad
->
ş›Á
, 
key
, &
v®ue
);

2052 ià(
s
 == 0 ) {

2053 
found
++;

2054 
by‹s
 +ğ
key
.
	`size
(è+ 
v®ue
.size();

2060 ià(
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
 && 
»ad
 % 100 == 0) {

2061 
th»ad
->
sh¬ed
->
»ad_¿‹_lim™”
->
	`Reque¡
(100, 
Env
::
IO_HIGH
);

2063 
th»ad
->
¡©s
.
	`FšishedOps
(
nuÎ±r
, 1, 
kR—d
);

2064 } ià(
qu”y_ty³
 == 1) {

2066 
puts
++;

2067 
št64_t
 
v®_size
 = 
	`P¬‘oCdfInv”siÚ
(

2068 
u
, 
FLAGS_v®ue_th‘a
, 
FLAGS_v®ue_k
, 
FLAGS_v®ue_sigma
);

2069 ià(
v®_size
 < 0) {

2070 
v®_size
 = 10;

2071 } ià(
v®_size
 > 
v®ue_max
) {

2072 
v®_size
 = v®_siz% 
v®ue_max
;

2077 
s
 = 
	`li¡db_Put
(
th»ad
->
ş›Á
, 
key
, 
g’
.
	`G’”©e
(
¡©ic_ÿ¡
<>(
v®_size
)));

2086 ià(
th»ad
->
sh¬ed
->
wr™e_¿‹_lim™”
 && 
puts
 % 100 == 0) {

2087 
th»ad
->
sh¬ed
->
wr™e_¿‹_lim™”
->
	`Reque¡
(100, 
Env
::
IO_HIGH
);

2089 
th»ad
->
¡©s
.
	`FšishedOps
(
nuÎ±r
, 1, 
kWr™e
);

2090 } ià(
qu”y_ty³
 == 2) {

2091 
	`årštf
(
¡dout
, "Seek is‚ot supported yet.\n");

2092 
	`abÜt
();

2095 ià(
db_w™h_cfh
->
db
 !ğ
nuÎ±r
) {

2096 
I‹¿tÜ
* 
sšgË_™”
 = 
nuÎ±r
;

2097 
sšgË_™”
 = 
db_w™h_cfh
->
db
->
	`NewI‹¿tÜ
(
İtiÚs
);

2098 ià(
sšgË_™”
 !ğ
nuÎ±r
) {

2099 
sšgË_™”
->
	`S“k
(
key
);

2100 
£ek
++;

2101 
»ad
++;

2102 ià(
sšgË_™”
->
	`V®id
(è&& sšgË_™”->
	`key
().
	`com·»
(
key
) == 0) {

2103 
£ek_found
++;

2105 
št64_t
 
sÿn_Ëngth
 =

2106 
	`P¬‘oCdfInv”siÚ
(
u
, 
FLAGS_™”_th‘a
, 
FLAGS_™”_k
,

2107 
FLAGS_™”_sigma
) %

2108 
sÿn_Ën_max
;

2109 
št64_t
 
j
 = 0; j < 
sÿn_Ëngth
 && 
sšgË_™”
->
	`V®id
(); j++) {

2110 
Sliû
 
v®ue
 = 
sšgË_™”
->
	`v®ue
();

2111 
	`memıy
(
v®ue_bufãr
, 
v®ue
.
	`d©a
(),

2112 
¡d
::
	`mš
(
v®ue
.
	`size
(), (
v®ue_bufãr
)));

2113 
by‹s
 +ğ
sšgË_™”
->
	`key
().
	`size
(è+ sšgË_™”->
	`v®ue
().size();

2114 
sšgË_™”
->
	`Next
();

2115 
	`as£¹
(
sšgË_™”
->
	`¡©us
().
	`ok
());

2118 
d–‘e
 
sšgË_™”
;

2120 
th»ad
->
¡©s
.
	`FšishedOps
(
nuÎ±r
, 1, 
kS“k
);

2123 ià(
th»ad
->
İ_time_¬r
) {

2124 
th»ad
->
İ_time_¬r
->
	`em¶aû_back
(
qu”y_ty³
, 
Clock
::
	`NowNªos
());

2127 
msg
[256];

2128 
	`¢´štf
(
msg
, (msg),

2130 
g‘s
, 
puts
, 
£ek
, 
found
, 
»ad
);

2132 
th»ad
->
¡©s
.
	`AddBy‹s
(
by‹s
);

2133 
th»ad
->
¡©s
.
	`AddMes§ge
(
msg
);

2139 
	}
}

2141 
	$Recov”yAá”MixG¿ph
() {

2142 
	`årštf
(
¡dout
, "> db_->PrintDebugLsmState(0);\n");

2143 
db_
->
	`PrštDebugLsmS‹
(0);

2144 
	`årštf
(
¡dout
, "> delete db_;\n");

2145 
d–‘e
 
db_
;

2146 
	`årštf
(
¡dout
, "> db_ =‚ew ListDB();\n");

2147 
db_
 = 
Ãw
 
	`Li¡DB
();

2148 
	`årštf
(
¡dout
, "> db_->Open();\n");

2149 autØ
İ’_begš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

2150 
db_
->
	`O³n
();

2151 autØ
İ’_’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
();

2152 
¡d
::
chrÚo
::
du¿tiÚ
<> 
İ’_dur
 = 
İ’_’d_
 - 
İ’_begš_
;

2153 
	`årštf
(
¡dout
, "O³n(ètime: %.3là£c\n", 
İ’_dur
.
	`couÁ
());

2154 
	`årštf
(
¡dout
, "> db_->PrintDebugLsmState(0);\n");

2155 
db_
->
	`PrštDebugLsmS‹
(0);

2156 
	`årštf
(
¡dout
, "\n");

2157 
	}
}

2159 #ifdeà
IMNOTDEFINED


2160 
boŞ
 
bš¬y_£¬ch
(
¡d
::
veùÜ
<>& 
d©a
, 
¡¬t
, 
’d
, 
key
) {

2161 ià(
	gd©a
.
em±y
()è 
	gçl£
;

2162 ià(
	g¡¬t
 > 
	g’d
è 
	gçl£
;

2163 
	gmid
 = 
¡¬t
 + (
’d
 - start) / 2;

2164 ià(
	gmid
 > 
	g¡©ic_ÿ¡
<>(
	gd©a
.
size
()è- 1è 
	gçl£
;

2165 ià(
	gd©a
[
mid
] =ğ
key
) {

2166  
Œue
;

2167 } ià(
	gd©a
[
mid
] > 
	gkey
) {

2168  
bš¬y_£¬ch
(
d©a
, 
¡¬t
, 
mid
 - 1, 
key
);

2170  
bš¬y_£¬ch
(
d©a
, 
mid
 + 1, 
’d
, 
key
);

2174 
	$Re£tSts
() {

2175 
	`abÜt
();

2182 
	}
}

2184 
	$O³nDb
(
O±iÚs
 
İtiÚs
, cÚ¡ 
¡d
::
¡ršg
& 
db_Çme
,

2185 
DBW™hCŞumnFam›s
* 
db
) {

2186 
ušt64_t
 
İ’_¡¬t
 = 
FLAGS_»pÜt_İ’_timšg
 ? 
FLAGS_’v
->
	`NowNªos
() : 0;

2187 
Stus
 
s
;

2189 ià(
FLAGS_num_cŞumn_çm›s
 > 1) {

2190 
size_t
 
num_hÙ
 = 
FLAGS_num_cŞumn_çm›s
;

2191 ià(
FLAGS_num_hÙ_cŞumn_çm›s
 > 0 &&

2192 
FLAGS_num_hÙ_cŞumn_çm›s
 < 
FLAGS_num_cŞumn_çm›s
) {

2193 
num_hÙ
 = 
FLAGS_num_hÙ_cŞumn_çm›s
;

2195 
FLAGS_num_hÙ_cŞumn_çm›s
 = 
FLAGS_num_cŞumn_çm›s
;

2197 
¡d
::
veùÜ
<
CŞumnFamyDesütÜ
> 
cŞumn_çm›s
;

2198 
size_t
 
i
 = 0; i < 
num_hÙ
; i++) {

2199 
cŞumn_çm›s
.
	`push_back
(
	`CŞumnFamyDesütÜ
(

2200 
	`CŞumnFamyName
(
i
), 
	`CŞumnFamyO±iÚs
(
İtiÚs
)));

2202 
¡d
::
veùÜ
<> 
cfh_idx_to_´ob
;

2203 ià(!
FLAGS_cŞumn_çmy_di¡ributiÚ
.
	`em±y
()) {

2204 
¡d
::
¡ršg¡»am
 
	`cf_´ob_¡»am
(
FLAGS_cŞumn_çmy_di¡ributiÚ
);

2205 
¡d
::
¡ršg
 
cf_´ob
;

2206 
sum
 = 0;

2207 
¡d
::
	`g‘lše
(
cf_´ob_¡»am
, 
cf_´ob
, ',')) {

2208 
cfh_idx_to_´ob
.
	`push_back
(
¡d
::
	`¡oi
(
cf_´ob
));

2209 
sum
 +ğ
cfh_idx_to_´ob
.
	`back
();

2211 ià(
sum
 != 100) {

2212 
	`årštf
(
¡d”r
, "column_family_distribution items must sumo 100\n");

2213 
	`ex™
(1);

2215 ià(
cfh_idx_to_´ob
.
	`size
(è!ğ
num_hÙ
) {

2216 
	`årštf
(
¡d”r
,

2217 "gÙ %" 
ROCKSDB_PRIszt


2219 "%" 
ROCKSDB_PRIszt
 "\n",

2220 
cfh_idx_to_´ob
.
	`size
(), 
num_hÙ
);

2221 
	`ex™
(1);

2224 #iâdeà
ROCKSDB_LITE


2225 ià(
FLAGS_»adÚly
) {

2226 
s
 = 
DB
::
	`O³nFÜR—dOÆy
(
İtiÚs
, 
db_Çme
, 
cŞumn_çm›s
,

2227 &
db
->
cfh
, &db->db);

2228 } ià(
FLAGS_İtimi¡ic_Œª§ùiÚ_db
) {

2229 
s
 = 
O±imi¡icT¿n§ùiÚDB
::
	`O³n
(
İtiÚs
, 
db_Çme
, 
cŞumn_çm›s
,

2230 &
db
->
cfh
, &db->
İt_txn_db
);

2231 ià(
s
.
	`ok
()) {

2232 
db
->db = db->
İt_txn_db
->
	`G‘Ba£DB
();

2234 } ià(
FLAGS_Œª§ùiÚ_db
) {

2235 
T¿n§ùiÚDB
* 
±r
;

2236 
T¿n§ùiÚDBO±iÚs
 
txn_db_İtiÚs
;

2237 ià(
İtiÚs
.
unÜd”ed_wr™e
) {

2238 
İtiÚs
.
two_wr™e_queues
 = 
Œue
;

2239 
txn_db_İtiÚs
.
sk_cÚcu¼’cy_cÚŒŞ
 = 
Œue
;

2240 
txn_db_İtiÚs
.
wr™e_pŞicy
 = 
WRITE_PREPARED
;

2242 
s
 = 
T¿n§ùiÚDB
::
	`O³n
(
İtiÚs
, 
txn_db_İtiÚs
, 
db_Çme
,

2243 
cŞumn_çm›s
, &
db
->
cfh
, &
±r
);

2244 ià(
s
.
	`ok
()) {

2245 
db
->db = 
±r
;

2248 
s
 = 
DB
::
	`O³n
(
İtiÚs
, 
db_Çme
, 
cŞumn_çm›s
, &
db
->
cfh
, &db->db);

2251 
s
 = 
DB
::
	`O³n
(
İtiÚs
, 
db_Çme
, 
cŞumn_çm›s
, &
db
->
cfh
, &db->db);

2253 
db
->
cfh
.
	`»size
(
FLAGS_num_cŞumn_çm›s
);

2254 
db
->
num_ü—‹d
 = 
num_hÙ
;

2255 
db
->
num_hÙ
 =‚um_hot;

2256 
db
->
cfh_idx_to_´ob
 = 
¡d
::
	`move
(cfh_idx_to_prob);

2257 #iâdeà
ROCKSDB_LITE


2258 } ià(
FLAGS_»adÚly
) {

2259 
s
 = 
DB
::
	`O³nFÜR—dOÆy
(
İtiÚs
, 
db_Çme
, &
db
->db);

2260 } ià(
FLAGS_İtimi¡ic_Œª§ùiÚ_db
) {

2261 
s
 = 
O±imi¡icT¿n§ùiÚDB
::
	`O³n
(
İtiÚs
, 
db_Çme
, &
db
->
İt_txn_db
);

2262 ià(
s
.
	`ok
()) {

2263 
db
->db = db->
İt_txn_db
->
	`G‘Ba£DB
();

2265 } ià(
FLAGS_Œª§ùiÚ_db
) {

2266 
T¿n§ùiÚDB
* 
±r
 = 
nuÎ±r
;

2267 
T¿n§ùiÚDBO±iÚs
 
txn_db_İtiÚs
;

2268 ià(
İtiÚs
.
unÜd”ed_wr™e
) {

2269 
İtiÚs
.
two_wr™e_queues
 = 
Œue
;

2270 
txn_db_İtiÚs
.
sk_cÚcu¼’cy_cÚŒŞ
 = 
Œue
;

2271 
txn_db_İtiÚs
.
wr™e_pŞicy
 = 
WRITE_PREPARED
;

2273 
s
 = 
	`C»©eLogg”FromO±iÚs
(
db_Çme
, 
İtiÚs
, &İtiÚs.
šfo_log
);

2274 ià(
s
.
	`ok
()) {

2275 
s
 = 
T¿n§ùiÚDB
::
	`O³n
(
İtiÚs
, 
txn_db_İtiÚs
, 
db_Çme
, &
±r
);

2277 ià(
s
.
	`ok
()) {

2278 
db
->db = 
±r
;

2280 } ià(
FLAGS_u£_blob_db
) {

2282 
blob_db
::
BlobDBO±iÚs
 
blob_db_İtiÚs
;

2283 
blob_db_İtiÚs
.
’abË_g¬bage_cŞËùiÚ
 = 
FLAGS_blob_db_’abË_gc
;

2284 
blob_db_İtiÚs
.
g¬bage_cŞËùiÚ_cutoff
 = 
FLAGS_blob_db_gc_cutoff
;

2285 
blob_db_İtiÚs
.
is_fifo
 = 
FLAGS_blob_db_is_fifo
;

2286 
blob_db_İtiÚs
.
max_db_size
 = 
FLAGS_blob_db_max_db_size
;

2287 
blob_db_İtiÚs
.
‰l_¿nge_£cs
 = 
FLAGS_blob_db_‰l_¿nge_£cs
;

2288 
blob_db_İtiÚs
.
mš_blob_size
 = 
FLAGS_blob_db_mš_blob_size
;

2289 
blob_db_İtiÚs
.
by‹s_³r_sync
 = 
FLAGS_blob_db_by‹s_³r_sync
;

2290 
blob_db_İtiÚs
.
blob_fe_size
 = 
FLAGS_blob_db_fe_size
;

2291 
blob_db_İtiÚs
.
com´essiÚ
 = 
FLAGS_blob_db_com´essiÚ_ty³_e
;

2292 
blob_db
::
BlobDB
* 
±r
 = 
nuÎ±r
;

2293 
s
 = 
blob_db
::
BlobDB
::
	`O³n
(
İtiÚs
, 
blob_db_İtiÚs
, 
db_Çme
, &
±r
);

2294 ià(
s
.
	`ok
()) {

2295 
db
->db = 
±r
;

2297 } ià(
FLAGS_u£_£cÚd¬y_db
) {

2298 ià(
FLAGS_£cÚd¬y_·th
.
	`em±y
()) {

2299 
¡d
::
¡ršg
 
deçuÉ_£cÚd¬y_·th
;

2300 
FLAGS_’v
->
	`G‘Te¡DœeùÜy
(&
deçuÉ_£cÚd¬y_·th
);

2301 
deçuÉ_£cÚd¬y_·th
 += "/dbbench_secondary";

2302 
FLAGS_£cÚd¬y_·th
 = 
deçuÉ_£cÚd¬y_·th
;

2304 
s
 = 
DB
::
	`O³nAsSecÚd¬y
(
İtiÚs
, 
db_Çme
, 
FLAGS_£cÚd¬y_·th
, &
db
->db);

2305 ià(
s
.
	`ok
(è&& 
FLAGS_£cÚd¬y_upd©e_š‹rv®
 > 0) {

2306 
£cÚd¬y_upd©e_th»ad_
.
	`»£t
(
Ãw
 
pÜt
::
	`Th»ad
(

2307 [
this
](
š‹rv®
, 
DBW™hCŞumnFam›s
* 
_db
) {

2308 0 =ğ
£cÚd¬y_upd©e_¡İ³d_
.
	`lßd
(

2309 
¡d
::
memÜy_Üd”_»Ïxed
)) {

2310 
Stus
 
£cÚd¬y_upd©e_¡©us
 =

2311 
_db
->
db
->
	`TryC©chUpW™hPrim¬y
();

2312 ià(!
£cÚd¬y_upd©e_¡©us
.
	`ok
()) {

2313 
	`årštf
(
¡d”r
, "Failedo catch up with…rimary: %s\n",

2314 
£cÚd¬y_upd©e_¡©us
.
	`ToSŒšg
().
	`c_¡r
());

2317 ++
£cÚd¬y_db_upd©es_
;

2318 
FLAGS_’v
->
	`SË•FÜMiüo£cÚds
(
š‹rv®
 * 1000000);

2321 
FLAGS_£cÚd¬y_upd©e_š‹rv®
, 
db
));

2325 
s
 = 
DB
::
	`O³n
(
İtiÚs
, 
db_Çme
, &
db
->db);

2327 ià(
FLAGS_»pÜt_İ’_timšg
) {

2328 
¡d
::
cout
 << "OpenDb: "

2329 << (
FLAGS_’v
->
	`NowNªos
(è- 
İ’_¡¬t
) / 1000000.0

2332 ià(!
s
.
	`ok
()) {

2333 
	`årštf
(
¡d”r
, "İ’ƒ¼Ü: %s\n", 
s
.
	`ToSŒšg
().
	`c_¡r
());

2334 
	`ex™
(1);

2336 
	}
}

2338 
	$PrštStsHi¡Üy
() {

2339 
	`abÜt
();

2346 
	}
}

2348 
	$PrštStsHi¡ÜyIm¶
(
DB
* 
db
, 
boŞ
 
´št_h—d”
) {

2349 ià(
´št_h—d”
) {

2350 
	`årštf
(
¡dout
, "\n===ğDB: % ===\n", 
db
->
	`G‘Name
().
	`c_¡r
());

2353 
¡d
::
unique_±r
<
StsHi¡ÜyI‹¿tÜ
> 
shi
;

2354 
Stus
 
s
 = 
db
->
	`G‘StsHi¡Üy
(0, 
pÜt
::
kMaxUšt64
, &
shi
);

2355 ià(!
s
.
	`ok
()) {

2356 
	`årštf
(
¡dout
, "%s\n", 
s
.
	`ToSŒšg
().
	`c_¡r
());

2359 
	`as£¹
(
shi
);

2360 
shi
->
	`V®id
()) {

2361 
ušt64_t
 
¡©s_time
 = 
shi
->
	`G‘StsTime
();

2362 
	`årštf
(
¡dout
, "------ %s ------\n",

2363 
	`TimeToHumªSŒšg
(
¡©ic_ÿ¡
<>(
¡©s_time
)).
	`c_¡r
());

2364 auto& 
’Œy
 : 
shi
->
	`G‘StsM­
()) {

2365 
	`årštf
(
¡dout
, " %lu %  %lu\n", 
¡©s_time
,

2366 
’Œy
.
fœ¡
.
	`c_¡r
(),ƒÁry.
£cÚd
);

2368 
shi
->
	`Next
();

2370 
	}
}

2372 
	$PrštSts
(cÚ¡ * 
key
) {

2373 
	`abÜt
();

2380 
	}
}

2382 
	$PrštSts
(
DB
* 
db
, cÚ¡ * 
key
, 
boŞ
 
´št_h—d”
 = 
çl£
) {

2383 
	`abÜt
();

2392 
	}
}

2394 
PrštSts
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
keys
) {

2395 
abÜt
();

2404 
PrštSts
(
DB
* 
db
, cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
keys
,

2405 
boŞ
 
´št_h—d”
 = 
çl£
) {

2406 ià(
´št_h—d”
) {

2407 
årštf
(
¡dout
, "\n===ğDB: % ===\n", 
db
->
G‘Name
().
c_¡r
());

2410 cÚ¡‡uto& 
	gkey
 : 
keys
) {

2411 
¡d
::
¡ršg
 
¡©s
;

2412 ià(!
	gdb
->
G‘Prİ”ty
(
key
, &
¡©s
)) {

2413 
	g¡©s
 = "(failed)";

2415 
årštf
(
¡dout
, "%s: %s\n", 
key
.
c_¡r
(), 
¡©s
.c_str());

2420 
DB
* 
	gdb_
;

2421 
št64_t
 
	gnum_
;

2422 
	gkey_size_
;

2423 
št64_t
 
	g’Œ›s_³r_b©ch_
;

2424 
št64_t
 
	g»ads_
;

2425 
	g»ad_¿ndom_exp_¿nge_
;

2426 
št64_t
 
	gwr™es_
;

2437 
	$db_b’ch_toŞ
(
¬gc
, ** 
¬gv
) {

2438 
boŞ
 
š™Ÿlized
 = 
çl£
;

2439 ià(!
š™Ÿlized
) {

2440 
Numa
::
	`In™
();

2441 
googË
::
	`S‘U§geMes§ge
(
¡d
::
	`¡ršg
("\nUSAGE:\n"è+ std::¡ršg(
¬gv
[0]) +

2443 
š™Ÿlized
 = 
Œue
;

2445 
googË
::
	`P¬£CommªdLšeFÏgs
(&
¬gc
, &
¬gv
, 
Œue
);

2447 
FLAGS_v®ue_size_di¡ributiÚ_ty³_e
 =

2448 
	`SŒšgToDi¡ributiÚTy³
(
FLAGS_v®ue_size_di¡ributiÚ_ty³
.
	`c_¡r
());

2450 ià(
FLAGS_¡©s_š‹rv®_£cÚds
 > 0) {

2453 
FLAGS_¡©s_š‹rv®
 = 1000;

2456 
B’chm¬k
 
b’chm¬k
;

2457 
b’chm¬k
.
	`Run
();

2461 ià(
FLAGS_´št_m®loc_¡©s
) {

2462 
¡d
::
¡ršg
 
¡©s_¡ršg
;

2463 
ROCKSDB_NAMESPACE
::
	`DumpM®locSts
(&
¡©s_¡ršg
);

2464 
	`årštf
(
¡dout
, "M®loø¡©s:\n%s\n", 
¡©s_¡ršg
.
	`c_¡r
());

2469 
	}
}

2471 
	$maš
(
¬gc
, ** 
¬gv
) {

2472  
	`db_b’ch_toŞ
(
¬gc
, 
¬gv
);

2473 
	}
}

	@ubench/aaa.cc

1 
	~<chrÚo
>

2 
	~<c¡dio
>

3 
	~<f¡»am
>

4 
	~<io¡»am
>

5 
	~<m­
>

6 
	~<s¡»am
>

7 
	~<¡ršg
>

8 
	~<sh¬ed_mu‹x
>

9 
	~<th»ad
>

10 
	~<veùÜ
>

12 
	~"tbb/tbb.h
"

13 
	~"tbb/sk_scheduËr_š™.h
"

15 
	~"li¡db/commÚ.h
"

16 
	~"li¡db/šdex/lockä“_skli¡.h
"

17 
	~"li¡db/šdex/skli¡.h
"

19 
	~"li¡db/lsm/bË.h
"

20 
	~"li¡db/lsm/bË_li¡.h
"

21 
	~"li¡db/lsm/membË_li¡.h
"

22 
	~"li¡db/ut/¿ndom.h
"

31 
cÚ¡ex´
 
	gNUM_THREADS
 = 80;

32 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 10 * 1000 * 1000;

33 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 1 * 1000 * 1000;

35 
	eOpTy³
 {

36 
	mOP_INSERT
,

37 
	mOP_UPDATE
,

38 
	mOP_READ
,

39 
	mOP_SCAN
,

40 
	mOP_DELETE
,

45 
	g¡d
::
mu‹x
 
š£¹_mu
;

47 
	$drİ_ÿche
() {

49 
size
 = 256*1024*1024;

50 *
g¬bage
 = 
Ãw
 [
size
];

51 
i
=0;i<
size
;++i)

52 
g¬bage
[
i
] = i;

53 
i
=100;i<
size
;++i)

54 
g¬bage
[
i
] += garbage[i-100];

55 
d–‘e
[] 
g¬bage
;

56 
	}
}

58 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
) {

59 
¡d
::
¡ršg
 
f’ame
 = "/home/wkim/RECIPE/index-microbench/workloads_10M_1M_unif/loada_unif_int.dat";

61 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

62 
size_t
 
	gcouÁ
 = 0;

63 
size_t
 
	g•och
 = 10;

64 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

65 
	g¡d
::
¡ršg
 
İ
;

66 
ušt64_t
 
	gkey
;

67 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

68 ià(
	gİ
 == "INSERT") {

69 
lßd_keys
->
push_back
(
key
);

71 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

72 
ex™
(1);

74 
	gcouÁ
++;

75 ià(
	gcouÁ
 % 
	g•och
 == 0) {

76 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

77 
fæush
(
¡dout
);

78 ià(
	gcouÁ
 =ğ
•och
 * 100) {

79 
•och
 *= 10;

83 
	gi¡rm
.
şo£
();

84 ià(
	gcouÁ
 !ğ
num_lßds
) {

85 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

86 
ex™
(1);

88 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

91 
FlWÜkKeys
(cÚ¡ 
wÜklßd_ty³
, cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

92 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
) {

93 
¡d
::
¡ršg¡»am
 
ss
;

94 
	gss
 << "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_10M_1M_unif/txns" << 
	gwÜklßd_ty³
 << "_unif_int.dat";

96 
	g¡d
::
¡ršg
 
f’ame
 = 
ss
.
¡r
();

97 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

98 
size_t
 
	gcouÁ
 = 0;

99 
size_t
 
	g•och
 = 10;

100 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

101 
	g¡d
::
¡ršg
 
İ
;

102 
ušt64_t
 
	gkey
;

103 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

104 ià(
	gİ
 == "INSERT") {

105 
wÜk_İs
->
push_back
(
OP_INSERT
);

106 
	gwÜk_keys
->
push_back
(
key
);

107 } ià(
	gİ
 == "UPDATE") {

108 
wÜk_İs
->
push_back
(
OP_UPDATE
);

109 
	gwÜk_keys
->
push_back
(
key
);

110 } ià(
	gİ
 == "READ") {

111 
wÜk_İs
->
push_back
(
OP_READ
);

112 
	gwÜk_keys
->
push_back
(
key
);

114 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

115 
ex™
(1);

117 
	gcouÁ
++;

118 ià(
	gcouÁ
 % 
	g•och
 == 0) {

119 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

120 
fæush
(
¡dout
);

121 ià(
	gcouÁ
 =ğ
•och
 * 100) {

122 
•och
 *= 10;

126 
	gi¡rm
.
şo£
();

127 ià(
	gcouÁ
 !ğ
num_wÜks
) {

128 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

129 
ex™
(1);

131 
årštf
(
¡dout
, "\rFilling up workload queries: \x1b[32mDONE\x1b[0m\n");

134 
Run1
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

135 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

136 
lockä“_skli¡
 
skli¡
;

137 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

139 
årštf
(
¡dout
, "===†ockfree_skiplist ===\n");

143 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

144 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

145 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

146 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

147 
	glßd”s
.
em¶aû_back
([&, 
id
] {

148 
S‘Affš™y
(
id
);

149 
Rªdom
 
ºd
(
id
);

150 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

151 cÚ¡ 
kB¿nchšg
 = 4;

152 
height
 = 1;

153 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

154 
height
++;

156 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

158 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

160 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

161 
node
->
log_·ddr
 = 0;

163 
skli¡
.
š£¹
(
node
);

167 auto& 
	gt
 : 
lßd”s
) {

168 
t
.
još
();

170 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

171 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

172 
	gdur_£c
 = 
dur
.
couÁ
();

173 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

177 
drİ_ÿche
();

179 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

180 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

181 
tid
 = 
tbb
::
sk_¬’a
::
cu¼’t_th»ad_šdex
();

183 
Rªdom
 
ºd
(
tid
);

184 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

185 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

186 cÚ¡ 
kB¿nchšg
 = 4;

187 
height
 = 1;

188 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

189 
height
++;

191 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
wÜk_keys
[
i
], 
height
);

193 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

195 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
wÜk_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
, 
çl£
);

196 
node
->
log_·ddr
 = 0;

199 
skli¡
.
š£¹
(
node
);

200 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

201 
skli¡
.
fšd
(
wÜk_keys
[
i
]);

205 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

206 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

207 
	gdur_£c
 = 
dur
.
couÁ
();

208 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

210 
årštf
(
¡dout
, "\n");

213 
Run1_lock
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

214 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

215 
lockä“_skli¡
 
skli¡
;

216 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

217 
	g¡d
::
sh¬ed_mu‹x
 
rw_mu
;

219 
årštf
(
¡dout
, "===†ockfree_skiplist + CAS-lock ===\n");

223 
	g¡d
::
©omic
<> 
¡©e
(0);

224 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

225 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

226 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

227 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

228 
	glßd”s
.
em¶aû_back
([&, 
id
] {

229 
Rªdom
 
ºd
(
id
);

230 
S‘Affš™y
(
id
);

231 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

232 cÚ¡ 
kB¿nchšg
 = 4;

233 
height
 = 1;

234 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

235 
height
++;

237 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

239 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

241 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

242 
node
->
log_·ddr
 = 0;

244 
Œue
) {

245 
ex³ùed
 = 0;

246 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, 1)) {

250 
skli¡
.
š£¹
(
node
);

251 
¡©e
.
¡Üe
(0);

255 auto& 
	gt
 : 
lßd”s
) {

256 
t
.
još
();

258 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

259 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

260 
	gdur_£c
 = 
dur
.
couÁ
();

261 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

265 
drİ_ÿche
();

267 
	g¡d
::
©omic
<> 
¡©e
(0);

268 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

269 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

270 
tid
 = 
tbb
::
sk_¬’a
::
cu¼’t_th»ad_šdex
();

271 
Rªdom
 
ºd
(
tid
);

272 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

273 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

274 cÚ¡ 
kB¿nchšg
 = 4;

275 
height
 = 1;

276 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

277 
height
++;

279 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
wÜk_keys
[
i
], 
height
);

280 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

281 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
wÜk_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
, 
çl£
);

282 
node
->
log_·ddr
 = 0;

284 
Œue
) {

285 
ex³ùed
 = 0;

286 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, -1)) {

290 
skli¡
.
š£¹
(
node
);

291 
¡©e
.
¡Üe
(0);

292 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

300 
skli¡
.
fšd
(
wÜk_keys
[
i
]);

305 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

306 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

307 
	gdur_£c
 = 
dur
.
couÁ
();

308 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

310 
årštf
(
¡dout
, "\n");

313 
Run1_sh¬ed_lock
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

314 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

315 
lockä“_skli¡
 
skli¡
;

316 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

317 
	g¡d
::
sh¬ed_mu‹x
 
rw_mu
;

319 
årštf
(
¡dout
, "===†ockfree_skiplist + std::shared_mutex ===\n");

323 
	g¡d
::
©omic
<> 
¡©e
(0);

324 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

325 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

326 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

327 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

328 
	glßd”s
.
em¶aû_back
([&, 
id
] {

329 
Rªdom
 
ºd
(
id
);

330 
S‘Affš™y
(
id
);

331 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

332 cÚ¡ 
kB¿nchšg
 = 4;

333 
height
 = 1;

334 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

335 
height
++;

337 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

339 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

341 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

342 
node
->
log_·ddr
 = 0;

344 
¡d
::
unique_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

345 
skli¡
.
š£¹
(
node
);

346 
lk
.
uÆock
();

350 auto& 
	gt
 : 
lßd”s
) {

351 
t
.
još
();

353 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

354 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

355 
	gdur_£c
 = 
dur
.
couÁ
();

356 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

360 
drİ_ÿche
();

362 
	g¡d
::
©omic
<> 
¡©e
(0);

363 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

364 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

365 
tid
 = 
tbb
::
sk_¬’a
::
cu¼’t_th»ad_šdex
();

366 
Rªdom
 
ºd
(
tid
);

367 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

368 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

369 cÚ¡ 
kB¿nchšg
 = 4;

370 
height
 = 1;

371 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

372 
height
++;

374 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
wÜk_keys
[
i
], 
height
);

375 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

376 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
wÜk_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
, 
çl£
);

377 
node
->
log_·ddr
 = 0;

379 
¡d
::
unique_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

380 
skli¡
.
š£¹
(
node
);

381 
lk
.
uÆock
();

382 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

383 
¡d
::
sh¬ed_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

384 
skli¡
.
fšd
(
wÜk_keys
[
i
]);

385 
lk
.
uÆock
();

389 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

390 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

391 
	gdur_£c
 = 
dur
.
couÁ
();

392 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

394 
årštf
(
¡dout
, "\n");

397 
Run1_sh¬ed_±r
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

398 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

399 
¡d
::
sh¬ed_±r
<
lockä“_skli¡
> 
skli¡
 = std::
make_sh¬ed
<lockfree_skiplist>();

400 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

402 
årštf
(
¡dout
, "===†ockfree_skiplist std::shared_ptr ===\n");

406 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

407 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

408 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

409 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

410 
	glßd”s
.
em¶aû_back
([&, 
id
] {

411 
S‘Affš™y
(
id
);

412 
Rªdom
 
ºd
(
id
);

413 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

414 cÚ¡ 
kB¿nchšg
 = 4;

415 
height
 = 1;

416 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

417 
height
++;

419 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

421 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

423 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

424 
node
->
log_·ddr
 = 0;

426 autØ
bË
 = 
skli¡
;

427 
bË
->
š£¹
(
node
);

431 auto& 
	gt
 : 
lßd”s
) {

432 
t
.
još
();

434 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

435 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

436 
	gdur_£c
 = 
dur
.
couÁ
();

437 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

441 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

442 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

443 
tid
 = 
tbb
::
sk_¬’a
::
cu¼’t_th»ad_šdex
();

444 
Rªdom
 
ºd
(
tid
);

445 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

446 autØ
bË
 = 
skli¡
;

447 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

448 cÚ¡ 
kB¿nchšg
 = 4;

449 
height
 = 1;

450 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

451 
height
++;

453 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

455 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

457 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

458 
node
->
log_·ddr
 = 0;

460 
bË
->
š£¹
(
node
);

461 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

462 
bË
->
fšd
(
wÜk_keys
[
i
]);

466 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

467 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

468 
	gdur_£c
 = 
dur
.
couÁ
();

469 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

471 
årštf
(
¡dout
, "\n");

475 
Run1_sh¬ded
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

476 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

477 
lockä“_skli¡
 
skli¡
[256];

478 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

480 
årštf
(
¡dout
, "===†ockfree_skiplist + 256-shard ===\n");

484 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

485 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

486 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

487 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

488 
	glßd”s
.
em¶aû_back
([&, 
id
] {

489 
Rªdom
 
ºd
(
id
);

490 
S‘Affš™y
(
id
);

491 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

492 cÚ¡ 
kB¿nchšg
 = 4;

493 
height
 = 1;

494 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

495 
height
++;

497 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

499 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

501 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

502 
node
->
log_·ddr
 = 0;

504 
s
 = 
lßd_keys
[
i
]%256;

505 
skli¡
[
s
].
š£¹
(
node
);

509 auto& 
	gt
 : 
lßd”s
) {

510 
t
.
još
();

512 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

513 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

514 
	gdur_£c
 = 
dur
.
couÁ
();

515 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

517 
årštf
(
¡dout
, "\n");

520 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

521 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

522 
¡d
::
m­
<
Key
, 
	gV®ue
> 
	gbË
;

524 
årštf
(
¡dout
, "=== std::map + CAS-lock ===\n");

528 
	g¡d
::
©omic
<> 
¡©e
(0);

529 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

530 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

531 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

532 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

533 
	glßd”s
.
em¶aû_back
([&, 
id
] {

534 
S‘Affš™y
(
id
);

535 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

536 
Œue
) {

537 
ex³ùed
 = 0;

538 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, 1)) {

542 
bË
.
em¶aû
(
lßd_keys
[
i
], 0);

543 
¡©e
.
¡Üe
(0);

547 auto& 
	gt
 : 
lßd”s
) {

548 
t
.
još
();

550 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

551 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

552 
	gdur_£c
 = 
dur
.
couÁ
();

553 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

556 
drİ_ÿche
();

558 
	g¡d
::
©omic
<> 
¡©e
(0);

559 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

560 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

561 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

562 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

563 
Œue
) {

564 
ex³ùed
 = 0;

565 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, -1)) {

569 
bË
.
em¶aû
(
wÜk_keys
[
i
], 0);

570 
¡©e
.
¡Üe
(0);

571 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

572 
ex³ùed
 = 0;

573 
Œue
) {

574 
desœed
 = 
ex³ùed
 + 1;

575 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, 
desœed
)) {

579 autØ
™
 = 
bË
.
fšd
(
wÜk_keys
[
i
]);

580 ià(
™
 =ğ
bË
.
’d
()) {

581 
årštf
(
¡d”r
, "HHAHAHAHHAHA\n");

583 
¡©e
.
ãtch_add
(-1);

587 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

588 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

589 
	gdur_£c
 = 
dur
.
couÁ
();

590 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

592 
årštf
(
¡dout
, "\n");

595 
Run2_sh¬ed_lock
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

596 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

597 
¡d
::
m­
<
Key
, 
	gV®ue
> 
	gbË
;

598 
	g¡d
::
sh¬ed_mu‹x
 
rw_mu
;

600 
årštf
(
¡dout
, "=== std::map + shared_mutex ===\n");

604 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

605 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

606 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

607 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

608 
	glßd”s
.
em¶aû_back
([&, 
id
] {

609 
S‘Affš™y
(
id
);

610 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

611 
¡d
::
unique_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

612 
bË
.
em¶aû
(
lßd_keys
[
i
], 0);

613 
lk
.
uÆock
();

617 auto& 
	gt
 : 
lßd”s
) {

618 
t
.
još
();

620 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

621 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

622 
	gdur_£c
 = 
dur
.
couÁ
();

623 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

626 
drİ_ÿche
();

628 
	g¡d
::
©omic
<> 
¡©e
(0);

629 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

630 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

631 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

632 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

633 
¡d
::
unique_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

634 
bË
.
em¶aû
(
wÜk_keys
[
i
], 0);

635 
lk
.
uÆock
();

636 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

637 
¡d
::
sh¬ed_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

638 
bË
.
fšd
(
wÜk_keys
[
i
]);

639 
lk
.
uÆock
();

643 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

644 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

645 
	gdur_£c
 = 
dur
.
couÁ
();

646 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

648 
årštf
(
¡dout
, "\n");

651 
Run3
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

652 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

653 
SkLi¡
 
skli¡
;

654 
usšg
 
	gNode
 = 
SkLi¡
::
Node
;

656 
årštf
(
¡dout
, "=== SkipList + CAS-lock ===\n");

660 
	g¡d
::
©omic
<> 
¡©e
(0);

661 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

662 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

663 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

664 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

665 
	glßd”s
.
em¶aû_back
([&, 
id
] {

666 
Rªdom
 
ºd
(
id
);

667 
S‘Affš™y
(
id
);

668 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

669 cÚ¡ 
kB¿nchšg
 = 4;

670 
height
 = 1;

671 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

672 
height
++;

674 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

676 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

678 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

679 
node
->
log_·ddr
 = 0;

681 
Œue
) {

682 
ex³ùed
 = 0;

683 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, -1)) {

687 
skli¡
.
š£¹
(
node
);

688 
¡©e
.
¡Üe
(0);

692 auto& 
	gt
 : 
lßd”s
) {

693 
t
.
još
();

695 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

696 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

697 
	gdur_£c
 = 
dur
.
couÁ
();

698 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

701 
drİ_ÿche
();

703 
	g¡d
::
©omic
<> 
¡©e
(0);

704 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

705 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

706 
tid
 = 
tbb
::
sk_¬’a
::
cu¼’t_th»ad_šdex
();

707 
Rªdom
 
ºd
(
tid
);

708 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

709 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

710 cÚ¡ 
kB¿nchšg
 = 4;

711 
height
 = 1;

712 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

713 
height
++;

715 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
wÜk_keys
[
i
], 
height
);

716 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

717 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
wÜk_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
, 
çl£
);

718 
node
->
log_·ddr
 = 0;

720 
Œue
) {

721 
ex³ùed
 = 0;

722 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, -1)) {

726 
skli¡
.
š£¹
(
node
);

727 
¡©e
.
¡Üe
(0);

728 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

729 
ex³ùed
 = 0;

730 
Œue
) {

731 
desœed
 = 
ex³ùed
 + 1;

732 ià(
¡©e
.
com·»_exchªge_w—k
(
ex³ùed
, 
desœed
)) {

736 
skli¡
.
fšd
(
wÜk_keys
[
i
]);

737 
¡©e
.
ãtch_add
(-1);

741 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

742 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

743 
	gdur_£c
 = 
dur
.
couÁ
();

744 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

746 
årštf
(
¡dout
, "\n");

749 
Run3_sh¬ed_lock
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

750 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

751 
SkLi¡
 
skli¡
;

752 
usšg
 
	gNode
 = 
SkLi¡
::
Node
;

753 
	g¡d
::
sh¬ed_mu‹x
 
rw_mu
;

755 
årštf
(
¡dout
, "=== SkipList + std::shared_mutex ===\n");

759 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

760 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

761 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

762 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

763 
	glßd”s
.
em¶aû_back
([&, 
id
] {

764 
Rªdom
 
ºd
(
id
);

765 
S‘Affš™y
(
id
);

766 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

767 cÚ¡ 
kB¿nchšg
 = 4;

768 
height
 = 1;

769 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

770 
height
++;

772 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

773 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

774 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

775 
node
->
log_·ddr
 = 0;

777 
¡d
::
unique_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

778 
skli¡
.
š£¹
(
node
);

779 
lk
.
uÆock
();

783 auto& 
	gt
 : 
lßd”s
) {

784 
t
.
još
();

786 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

787 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

788 
	gdur_£c
 = 
dur
.
couÁ
();

789 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

792 
drİ_ÿche
();

794 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

795 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

796 
tid
 = 
tbb
::
sk_¬’a
::
cu¼’t_th»ad_šdex
();

797 
Rªdom
 
ºd
(
tid
);

798 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

799 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

800 cÚ¡ 
kB¿nchšg
 = 4;

801 
height
 = 1;

802 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

803 
height
++;

805 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
wÜk_keys
[
i
], 
height
);

806 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

807 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
wÜk_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
, 
çl£
);

808 
node
->
log_·ddr
 = 0;

810 
¡d
::
unique_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

811 
skli¡
.
š£¹
(
node
);

812 
lk
.
uÆock
();

813 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

814 
¡d
::
sh¬ed_lock
<¡d::
sh¬ed_mu‹x
> 
lk
(
rw_mu
);

815 
skli¡
.
fšd
(
wÜk_keys
[
i
]);

816 
lk
.
uÆock
();

820 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

821 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

822 
	gdur_£c
 = 
dur
.
couÁ
();

823 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

825 
årštf
(
¡dout
, "\n");

828 
Run3_sh¬ded
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

829 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

830 
SkLi¡
 
skli¡
[256];

831 
usšg
 
	gNode
 = 
SkLi¡
::
Node
;

833 
årštf
(
¡dout
, "=== SkipList 256-shard ===\n");

837 
	g¡d
::
©omic
<> 
¡©es
[256];

838 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

839 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

840 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

841 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

842 
	glßd”s
.
em¶aû_back
([&, 
id
] {

843 
Rªdom
 
ºd
(
id
);

844 
S‘Affš™y
(
id
);

845 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

846 cÚ¡ 
kB¿nchšg
 = 4;

847 
height
 = 1;

848 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

849 
height
++;

851 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

853 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

855 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

856 
node
->
log_·ddr
 = 0;

858 
s
 = 
lßd_keys
[
i
]%256;

859 
ex³ùed
 = 0;

860 
¡©es
[
s
].
com·»_exchªge_w—k
(
ex³ùed
, 1)) {

861 
ex³ùed
 = 0;

863 
skli¡
[
s
].
š£¹
(
node
);

864 
¡©es
[
s
].
¡Üe
(0);

868 auto& 
	gt
 : 
lßd”s
) {

869 
t
.
još
();

871 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

872 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

873 
	gdur_£c
 = 
dur
.
couÁ
();

874 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

876 
årštf
(
¡dout
, "\n");

920 
th»ad_loÿl
 
Rªdom
 
ºd_
(1);

922 şas 
	cMemTabËLockF»eSkLi¡
 : 
public
 
TabË
 {

923 
public
:

924 
usšg
 
Node
 = 
lockä“_skli¡
::Node;

925 
	$MemTabËLockF»eSkLi¡
(cÚ¡ 
size_t
 
c
è: 
	$TabË
(
c
) { }

926 * 
	$Put
(cÚ¡ 
Key
& 
key
, cÚ¡ 
V®ue
& 
v®ue
è
ov”ride
 {

928 cÚ¡ 
kB¿nchšg
 = 4;

929 
height
 = 1;

930 
height
 < 
kMaxHeight
 && ((
ºd_
.
	`Next
(è% 
kB¿nchšg
) == 0)) {

931 
height
++;

934 cÚ¡ 
size_t
 
®loc_size
 = 
lockä“_skli¡
::
Node
::
	`compu‹_®loc_size
(
key
, 
height
);

935 * 
buf
 = 
	`®igÃd_®loc
(8, 
®loc_size
);

937 
Node
* 
node
 = Node::
	`š™_node
((*è
buf
, 
key
, (1uÎ<<8|
kTy³V®ue
), 
v®ue
, 
height
);

938 
node
->
log_·ddr
 = 0;

940 
bË_
.
	`š£¹
(
node
);

941 
	}
}

942 
boŞ
 
	$G‘
(cÚ¡ 
Key
& 
key
, ** 
v®ue_out
è
ov”ride
 {

943  
bË_
.
	`fšd
(
key
è!ğ
nuÎ±r
;

944 
	}
}

946 
	g´iv©e
:

947 
lockä“_skli¡
 
bË_
;

950 
	g‹m¶©e
 <>

951 
MemTabËLockF»eSkLi¡
* 
	gNewMubË
<
	gMemTabËLockF»eSkLi¡
>(MemTabËLockF»eSkLi¡* cÚ¡ 
	g´ev
, cÚ¡ 
size_t
 
	gÿ·c™y
) {

952 
MemTabËLockF»eSkLi¡
* 
	gÃw_bË
 = 
Ãw
 MemTabËLockF»eSkLi¡(
ÿ·c™y
);

953 
	gÃw_bË
->
S‘Next
(
´ev
);

954  
	gÃw_bË
;

957 
Run5
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

958 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

960 
MemTabËLockF»eSkLi¡
* 
tbl
 = 
Ãw
 MemTabËLockF»eSkLi¡(16*
NUM_LOADS
/1);

962 
årštf
(
¡dout
, "=== Table + RefCount ==\n");

966 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

967 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

968 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

969 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

970 
	glßd”s
.
em¶aû_back
([&, 
id
] {

971 
S‘Affš™y
(
id
);

972 *((
ušt32_t
*è&
ºd_
èğ
id
 + 1;

973 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

974 
tbl
->
w_Ref
();

975 
tbl
->
Put
(
lßd_keys
[
i
], 0);

976 
tbl
->
w_UnRef
();

980 auto& 
	gt
 : 
lßd”s
) {

981 
t
.
još
();

983 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

984 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

985 
	gdur_£c
 = 
dur
.
couÁ
();

986 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

990 
drİ_ÿche
();

992 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

993 
	gtbb
::
·¿Î–_fÜ
(
tbb
::
blocked_¿nge
<
ušt64_t
>(0, 
NUM_WORKS
), [&](cÚ¡bb::blocked_¿nge<ušt64_t> &
scİe
) {

994 
tid
 = 
tbb
::
sk_¬’a
::
cu¼’t_th»ad_šdex
();

996 *((
ušt32_t
*è&
ºd_
èğ
tid
 + 1;

997 
ušt64_t
 
i
 = 
scİe
.
begš
(); i !ğscİe.
’d
(); i++) {

998 ià(
wÜk_İs
[
i
] =ğ
OP_UPDATE
) {

999 
tbl
->
w_Ref
();

1000 
tbl
->
Put
(
wÜk_keys
[
i
], 0);

1001 
tbl
->
w_UnRef
();

1002 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

1003 
tbl
->
G‘
(
wÜk_keys
[
i
], 
nuÎ±r
);

1007 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

1008 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

1009 
	gdur_£c
 = 
dur
.
couÁ
();

1010 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

1012 
årštf
(
¡dout
, "\n");

1015 
	$maš
() {

1016 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

1017 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

1018 
¡d
::
veùÜ
<
ušt64_t
> 
wÜk_keys
;

1019 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

1020 
wÜk_İs
.
	`»£rve
(
NUM_WORKS
);

1021 
wÜk_keys
.
	`»£rve
(
NUM_WORKS
);

1022 
	`årštf
(
¡dout
, "NUM_LOADS: %zu\nNUM_WORKS: %zu\n", 
NUM_LOADS
, 
NUM_WORKS
);

1023 
	`FlLßdKeys
(
NUM_LOADS
, &
lßd_keys
);

1024 
	`FlWÜkKeys
('c', 
NUM_WORKS
, &
wÜk_İs
, &
wÜk_keys
);

1026 
tbb
::
sk_scheduËr_š™
 
	`š™
(
NUM_THREADS
);

1034 
	`drİ_ÿche
();

1035 
	`Run1
(
NUM_THREADS
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

1036 
	`drİ_ÿche
();

1037 
	`Run1_sh¬ed_±r
(
NUM_THREADS
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

1038 
	`drİ_ÿche
();

1039 
	`Run5
(
NUM_THREADS
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

1046 
	`drİ_ÿche
();

1047 
	`Run3
(
NUM_THREADS
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

1051 
	}
}

	@ubench/bbb.cc

3 
	~<chrÚo
>

4 
	~<c¡dio
>

5 
	~<f¡»am
>

6 
	~<io¡»am
>

7 
	~<m­
>

8 
	~<s¡»am
>

9 
	~<¡ršg
>

10 
	~<sh¬ed_mu‹x
>

11 
	~<th»ad
>

12 
	~<veùÜ
>

13 
	~<ex³rim’l/fesy¡em
>

15 
	~<xmmšŒš.h
>

17 
	~"tbb/tbb.h
"

18 
	~"tbb/sk_scheduËr_š™.h
"

20 
	~"li¡db/commÚ.h
"

21 
	~"li¡db/lib/numa.h
"

22 
	~"li¡db/cÜe/pmem_log.h
"

23 
	~"li¡db/ut/¿ndom.h
"

25 
cÚ¡ex´
 
	gNUM_THREADS
 = 80;

26 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 10 * 1000 * 1000;

27 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 1 * 1000 * 1000;

29 
cÚ¡ex´
 
	gNUM_SHARDS
 = 
kNumSh¬ds
;

31 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

33 
	eOpTy³
 {

34 
	mOP_INSERT
,

35 
	mOP_UPDATE
,

36 
	mOP_READ
,

37 
	mOP_SCAN
,

38 
	mOP_DELETE
,

43 
	g¡d
::
mu‹x
 
š£¹_mu
;

45 
	$drİ_ÿche
() {

47 
size
 = 256*1024*1024;

48 *
g¬bage
 = 
Ãw
 [
size
];

49 
i
=0;i<
size
;++i)

50 
g¬bage
[
i
] = i;

51 
i
=100;i<
size
;++i)

52 
g¬bage
[
i
] += garbage[i-100];

53 
d–‘e
[] 
g¬bage
;

54 
	}
}

56 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
) {

57 
¡d
::
¡ršg
 
f’ame
 = "/home/wkim/RECIPE/index-microbench/workloads_10M_1M_unif/loada_unif_int.dat";

59 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

60 
size_t
 
	gcouÁ
 = 0;

61 
size_t
 
	g•och
 = 10;

62 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

63 
	g¡d
::
¡ršg
 
İ
;

64 
ušt64_t
 
	gkey
;

65 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

66 ià(
	gİ
 == "INSERT") {

67 
lßd_keys
->
push_back
(
key
);

69 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

70 
ex™
(1);

72 
	gcouÁ
++;

73 ià(
	gcouÁ
 % 
	g•och
 == 0) {

74 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

75 
fæush
(
¡dout
);

76 ià(
	gcouÁ
 =ğ
•och
 * 100) {

77 
•och
 *= 10;

81 
	gi¡rm
.
şo£
();

82 ià(
	gcouÁ
 !ğ
num_lßds
) {

83 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

84 
ex™
(1);

86 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

89 
FlWÜkKeys
(cÚ¡ 
wÜklßd_ty³
, cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

90 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
) {

91 
¡d
::
¡ršg¡»am
 
ss
;

92 
	gss
 << "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_10M_1M_unif/txns" << 
	gwÜklßd_ty³
 << "_unif_int.dat";

94 
	g¡d
::
¡ršg
 
f’ame
 = 
ss
.
¡r
();

95 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

96 
size_t
 
	gcouÁ
 = 0;

97 
size_t
 
	g•och
 = 10;

98 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

99 
	g¡d
::
¡ršg
 
İ
;

100 
ušt64_t
 
	gkey
;

101 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

102 ià(
	gİ
 == "INSERT") {

103 
wÜk_İs
->
push_back
(
OP_INSERT
);

104 
	gwÜk_keys
->
push_back
(
key
);

105 } ià(
	gİ
 == "UPDATE") {

106 
wÜk_İs
->
push_back
(
OP_UPDATE
);

107 
	gwÜk_keys
->
push_back
(
key
);

108 } ià(
	gİ
 == "READ") {

109 
wÜk_İs
->
push_back
(
OP_READ
);

110 
	gwÜk_keys
->
push_back
(
key
);

112 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

113 
ex™
(1);

115 
	gcouÁ
++;

116 ià(
	gcouÁ
 % 
	g•och
 == 0) {

117 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

118 
fæush
(
¡dout
);

119 ià(
	gcouÁ
 =ğ
•och
 * 100) {

120 
•och
 *= 10;

124 
	gi¡rm
.
şo£
();

125 ià(
	gcouÁ
 !ğ
num_wÜks
) {

126 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

127 
ex™
(1);

129 
årštf
(
¡dout
, "\rFilling up workload queries: \x1b[32mDONE\x1b[0m\n");

132 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_bË
[
kNumRegiÚs
];

133 
	gpoŞ_id_bË
[
kNumRegiÚs
];

135 
	$In™PoŞS‘
() {

137 
i
 = 0; i < 
kNumRegiÚs
; i++) {

138 
¡d
::
¡ršg¡»am
 
pss
;

139 
pss
 << "/pmem" << 
i
 << "/wkim/pmem_log_test";

140 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

141 
fs
::
	`»move_®l
(
·th
);

142 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

144 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

145 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

146 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

147 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

148 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

149 
¡rm
.
	`şo£
();

151 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

152 
poŞ_bË
[
i
] = 
Pmem
::
poŞ
<
pmem_log_roÙ
>(
id
);

153 
poŞ_id_bË
[
i
] = 
id
;

155 
	}
}

157 
šlše
 
	$şwb
(cÚ¡ *
addr
, cÚ¡ 
size_t
 
size
)

159 * 
a
 = (*è
addr
;

160 
s
 = 
size
;

161 
s
 > 0) {

162 
asm
 volatile(".byte 0x66; xsaveopt %0" : "+m" \

163 (*(vŞ©*)(
a
)));

164 
a
 += 64;

165 
s
 -= 64;

167 
	}
}

169 
Run1
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

170 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

171 
årštf
(
¡dout
, "=== PmemLog ===\n");

173 
In™PoŞS‘
();

174 
PmemLog
* 
	glog
[
kNumRegiÚs
];

175 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

176 
	glog
[
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], 0);

181 
drİ_ÿche
();

182 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

183 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

184 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

185 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

186 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

187 
	glßd”s
.
em¶aû_back
([&, 
id
] {

188 
size_t
 
by‹s_wr™‹n
 = 0;

189 
Rªdom
 
ºd
(
id
);

190 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

191 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

192 cÚ¡ 
kB¿nchšg
 = 4;

193 
height
 = 1;

194 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

195 
height
++;

198 cÚ¡ 
size_t
 
®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

202 
»giÚ
 = 
G‘Ch
();

203 autØ
·ddr
 = 
log
[
»giÚ
]->
AÎoÿ‹
(
®loc_size
);

204 * 
p
 = (*è
·ddr
.
g‘
();

205 
	sEÁry
 {

206 
ušt64_t
 
key
;

207 
ušt64_t
 
g
;

208 
ušt64_t
 
v®ue
;

209 
height
;

211 
EÁry
* 
•
 = (EÁry*è
p
;

212 
•
->
key
 = 
lßd_keys
[
i
];

213 
•
->
g
 = 0;

214 
•
->
v®ue
 = 0;

215 
•
->
height
 = height;

217 
şwb
(
·ddr
.
g‘
(), 
®loc_size
);

218 
_mm_sãnû
();

220 
by‹s_wr™‹n
 +ğ
®loc_size
;

222 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

225 auto& 
	gt
 : 
lßd”s
) {

226 
t
.
još
();

228 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

229 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

230 
	gdur_£c
 = 
dur
.
couÁ
();

231 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

232 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/s\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024);

234 
årštf
(
¡dout
, "\n");

237 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

238 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

239 
årštf
(
¡dout
, "==ğPmemLog %d-sh¬d ===\n", 
NUM_SHARDS
);

241 
In™PoŞS‘
();

242 
PmemLog
* 
	glog
[
NUM_SHARDS
][
kNumRegiÚs
];

243 
	gs
 = 0; s < 
	gNUM_SHARDS
; s++) {

244 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

246 
	glog
[
s
][
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], s);

252 
drİ_ÿche
();

253 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

254 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

255 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

256 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

257 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

258 
	glßd”s
.
em¶aû_back
([&, 
id
] {

259 
size_t
 
by‹s_wr™‹n
 = 0;

260 
Rªdom
 
ºd
(
id
);

261 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

262 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

263 cÚ¡ 
kB¿nchšg
 = 4;

264 
height
 = 1;

265 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

266 
height
++;

269 cÚ¡ 
size_t
 
®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

272 
s
 = 
lßd_keys
[
i
] % 
NUM_SHARDS
;

275 
»giÚ
 = 
G‘Ch
();

276 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
®loc_size
);

277 * 
p
 = (*è
·ddr
.
g‘
();

278 
	sEÁry
 {

279 
ušt64_t
 
key
;

280 
ušt64_t
 
g
;

281 
ušt64_t
 
v®ue
;

282 
height
;

284 
EÁry
* 
•
 = (EÁry*è
p
;

285 
•
->
key
 = 
lßd_keys
[
i
];

286 
•
->
g
 = 0;

287 
•
->
v®ue
 = 0;

288 
•
->
height
 = height;

290 
şwb
(
·ddr
.
g‘
(), 
®loc_size
);

291 
_mm_sãnû
();

292 
by‹s_wr™‹n
 +ğ
®loc_size
;

294 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

297 auto& 
	gt
 : 
lßd”s
) {

298 
t
.
još
();

300 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

301 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

302 
	gdur_£c
 = 
dur
.
couÁ
();

303 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

304 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/s\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024);

306 
årštf
(
¡dout
, "\n");

309 
	$maš
() {

310 
Numa
::
	`In™
();

311 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

312 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

313 
¡d
::
veùÜ
<
ušt64_t
> 
wÜk_keys
;

314 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

315 
wÜk_İs
.
	`»£rve
(
NUM_WORKS
);

316 
wÜk_keys
.
	`»£rve
(
NUM_WORKS
);

317 
	`FlLßdKeys
(
NUM_LOADS
, &
lßd_keys
);

318 
	`FlWÜkKeys
('c', 
NUM_WORKS
, &
wÜk_İs
, &
wÜk_keys
);

320 
tbb
::
sk_scheduËr_š™
 
	`š™
(
NUM_THREADS
);

322 
	`Run1
(
NUM_THREADS
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

323 
	`Run2
(
NUM_THREADS
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

325 
	}
}

	@ubench/ccc.cc

1 
	~<chrÚo
>

2 
	~<c¡dio
>

3 
	~<f¡»am
>

4 
	~<futu»
>

5 
	~<io¡»am
>

6 
	~<m­
>

7 
	~<s¡»am
>

8 
	~<¡ršg
>

9 
	~<sh¬ed_mu‹x
>

10 
	~<th»ad
>

11 
	~<veùÜ
>

12 
	~<ex³rim’l/fesy¡em
>

13 
	~<unÜd”ed_m­
>

15 
	~<g‘İt.h
>

17 
	~<xmmšŒš.h
>

19 
	~"tbb/tbb.h
"

20 
	~"tbb/sk_scheduËr_š™.h
"

22 
	~"li¡db/commÚ.h
"

23 
	~"li¡db/šdex/lockä“_skli¡.h
"

24 
	~"li¡db/lib/numa.h
"

25 
	~"li¡db/cÜe/pmem_log.h
"

26 
	~"li¡db/lsm/bË.h
"

27 
	~"li¡db/lsm/bË_li¡.h
"

28 
	~"li¡db/lsm/membË_li¡.h
"

29 
	~"li¡db/ut/¿ndom.h
"

31 
cÚ¡ex´
 
	gNUM_THREADS
 = 80;

32 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 10 * 1000 * 1000;

33 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 1 * 1000 * 1000;

35 
cÚ¡ex´
 
	gNUM_SHARDS
 = 
kNumSh¬ds
;

37 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

39 
	eOpTy³
 {

40 
	mOP_INSERT
,

41 
	mOP_UPDATE
,

42 
	mOP_READ
,

43 
	mOP_SCAN
,

44 
	mOP_DELETE
,

49 
	g¡d
::
mu‹x
 
š£¹_mu
;

51 
	$drİ_ÿche
() {

53 
size
 = 256*1024*1024;

54 *
g¬bage
 = 
Ãw
 [
size
];

55 
i
=0;i<
size
;++i)

56 
g¬bage
[
i
] = i;

57 
i
=100;i<
size
;++i)

58 
g¬bage
[
i
] += garbage[i-100];

59 
d–‘e
[] 
g¬bage
;

60 
	}
}

62 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
) {

63 
¡d
::
¡ršg
 
f’ame
 = "/home/wkim/RECIPE/index-microbench/workloads_10M_1M_unif/loada_unif_int.dat";

65 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

66 
size_t
 
	gcouÁ
 = 0;

67 
size_t
 
	g•och
 = 10;

68 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

69 
	g¡d
::
¡ršg
 
İ
;

70 
ušt64_t
 
	gkey
;

71 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

72 ià(
	gİ
 == "INSERT") {

73 
lßd_keys
->
push_back
(
key
);

75 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

76 
ex™
(1);

78 
	gcouÁ
++;

79 ià(
	gcouÁ
 % 
	g•och
 == 0) {

80 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

81 
fæush
(
¡dout
);

82 ià(
	gcouÁ
 =ğ
•och
 * 100) {

83 
•och
 *= 10;

87 
	gi¡rm
.
şo£
();

88 ià(
	gcouÁ
 !ğ
num_lßds
) {

89 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

90 
ex™
(1);

92 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

95 
FlWÜkKeys
(cÚ¡ 
wÜklßd_ty³
, cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

96 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
) {

97 
¡d
::
¡ršg¡»am
 
ss
;

98 
	gss
 << "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_10M_1M_unif/txns" << 
	gwÜklßd_ty³
 << "_unif_int.dat";

100 
	g¡d
::
¡ršg
 
f’ame
 = 
ss
.
¡r
();

101 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

102 
size_t
 
	gcouÁ
 = 0;

103 
size_t
 
	g•och
 = 10;

104 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

105 
	g¡d
::
¡ršg
 
İ
;

106 
ušt64_t
 
	gkey
;

107 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

108 ià(
	gİ
 == "INSERT") {

109 
wÜk_İs
->
push_back
(
OP_INSERT
);

110 
	gwÜk_keys
->
push_back
(
key
);

111 } ià(
	gİ
 == "UPDATE") {

112 
wÜk_İs
->
push_back
(
OP_UPDATE
);

113 
	gwÜk_keys
->
push_back
(
key
);

114 } ià(
	gİ
 == "READ") {

115 
wÜk_İs
->
push_back
(
OP_READ
);

116 
	gwÜk_keys
->
push_back
(
key
);

118 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

119 
ex™
(1);

121 
	gcouÁ
++;

122 ià(
	gcouÁ
 % 
	g•och
 == 0) {

123 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

124 
fæush
(
¡dout
);

125 ià(
	gcouÁ
 =ğ
•och
 * 100) {

126 
•och
 *= 10;

130 
	gi¡rm
.
şo£
();

131 ià(
	gcouÁ
 !ğ
num_wÜks
) {

132 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

133 
ex™
(1);

135 
årštf
(
¡dout
, "\rFilling up workload queries: \x1b[32mDONE\x1b[0m\n");

138 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_bË
[
kNumRegiÚs
];

139 
	gpoŞ_id_bË
[
kNumRegiÚs
];

141 
	$In™PoŞS‘
() {

143 
i
 = 0; i < 
kNumRegiÚs
; i++) {

144 
¡d
::
¡ršg¡»am
 
pss
;

145 
pss
 << "/pmem" << 
i
 << "/wkim/pmem_log_test";

146 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

147 
fs
::
	`»move_®l
(
·th
);

148 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

150 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

151 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

152 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

153 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

154 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

155 
¡rm
.
	`şo£
();

157 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

158 
poŞ_bË
[
i
] = 
Pmem
::
poŞ
<
pmem_log_roÙ
>(
id
);

159 
poŞ_id_bË
[
i
] = 
id
;

161 
	}
}

163 
Run1
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

164 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

165 
årštf
(
¡dout
, "==ğPmemLog (%d-sh¬dè===\n", 
num_sh¬ds
);

167 
In™PoŞS‘
();

168 
PmemLog
* 
	glog
[
num_sh¬ds
][
kNumRegiÚs
];

169 
	gs
 = 0; s < 
	gnum_sh¬ds
; s++) {

170 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

171 
	glog
[
s
][
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], s);

177 
drİ_ÿche
();

178 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

179 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

180 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

181 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

182 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

183 
	glßd”s
.
em¶aû_back
([&, 
id
] {

184 
size_t
 
by‹s_wr™‹n
 = 0;

185 
Rªdom
 
ºd
(
id
);

186 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

187 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

188 cÚ¡ 
kB¿nchšg
 = 4;

189 
height
 = 1;

190 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

191 
height
++;

193 cÚ¡ 
size_t
 
log_®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

196 
»giÚ
 = 
G‘Ch
();

197 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

198 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
log_®loc_size
);

199 * 
p
 = (*è
·ddr
.
g‘
();

200 
	sEÁry
 {

201 
ušt64_t
 
key
;

202 
ušt64_t
 
g
;

203 
ušt64_t
 
v®ue
;

204 
height
;

206 
EÁry
* 
•
 = (EÁry*è
p
;

207 
•
->
key
 = 
lßd_keys
[
i
];

208 
•
->
g
 = 0;

209 
•
->
v®ue
 = 0;

210 
•
->
height
 = height;

212 
şwb
(
·ddr
.
g‘
(), 
log_®loc_size
);

213 
_mm_sãnû
();

215 
by‹s_wr™‹n
 +ğ
log_®loc_size
;

217 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

220 auto& 
	gt
 : 
lßd”s
) {

221 
t
.
još
();

223 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

224 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

225 
	gdur_£c
 = 
dur
.
couÁ
();

226 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

227 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/s\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024);

229 
årštf
(
¡dout
, "\n");

232 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

233 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

234 
årštf
(
¡dout
, "==ğlockä“_skli¡ (%d-sh¬dè===\n", 
num_sh¬ds
);

236 
lockä“_skli¡
 
	gskli¡
[
num_sh¬ds
];

237 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

241 
drİ_ÿche
();

242 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

243 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

244 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

245 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

246 
	glßd”s
.
em¶aû_back
([&, 
id
] {

247 
Rªdom
 
ºd
(
id
);

248 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

249 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

250 cÚ¡ 
kB¿nchšg
 = 4;

251 
height
 = 1;

252 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

253 
height
++;

255 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

257 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

259 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

260 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

261 
node
->
log_·ddr
 = 0;

262 
skli¡
[
s
].
š£¹
(
node
);

266 auto& 
	gt
 : 
lßd”s
) {

267 
t
.
još
();

269 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

270 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

271 
	gdur_£c
 = 
dur
.
couÁ
();

272 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

274 
årštf
(
¡dout
, "\n");

277 
Run22
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

278 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

279 
årštf
(
¡dout
, "=== PmemLog +†ockfree_skiplist ===\n");

281 
lockä“_skli¡
 
	gskli¡
;

282 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

284 
In™PoŞS‘
();

285 
PmemLog
* 
	glog
[
kNumRegiÚs
];

286 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

287 
	glog
[
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], 0);

292 
drİ_ÿche
();

293 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

294 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

295 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

296 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

297 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

298 
	glßd”s
.
em¶aû_back
([&, 
id
] {

299 
size_t
 
by‹s_wr™‹n
 = 0;

300 
Rªdom
 
ºd
(
id
);

301 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

302 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

303 cÚ¡ 
kB¿nchšg
 = 4;

304 
height
 = 1;

305 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

306 
height
++;

308 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

309 cÚ¡ 
size_t
 
log_®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

313 
»giÚ
 = 
G‘Ch
();

314 autØ
·ddr
 = 
log
[
»giÚ
]->
AÎoÿ‹
(
log_®loc_size
);

315 * 
p
 = (*è
·ddr
.
g‘
();

316 
	sEÁry
 {

317 
ušt64_t
 
key
;

318 
ušt64_t
 
g
;

319 
ušt64_t
 
v®ue
;

320 
height
;

322 
EÁry
* 
•
 = (EÁry*è
p
;

323 
•
->
key
 = 
lßd_keys
[
i
];

324 
•
->
g
 = 0;

325 
•
->
v®ue
 = 0;

326 
•
->
height
 = height;

328 
şwb
(
·ddr
.
g‘
(), 
log_®loc_size
);

329 
_mm_sãnû
();

331 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

332 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

333 
node
->
log_·ddr
 = 
·ddr
.
dump
();

334 
skli¡
.
š£¹
(
node
);

336 
by‹s_wr™‹n
 +ğ
log_®loc_size
;

338 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

341 auto& 
	gt
 : 
lßd”s
) {

342 
t
.
još
();

344 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

345 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

346 
	gdur_£c
 = 
dur
.
couÁ
();

347 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

348 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/s\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024);

350 
årštf
(
¡dout
, "\n");

353 
Run3
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

354 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

355 
årštf
(
¡dout
, "==ğPmemLog-%d +†ockä“_skli¡ ===\n", 
num_sh¬ds
);

357 
lockä“_skli¡
 
	gskli¡
;

358 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

360 
In™PoŞS‘
();

361 
PmemLog
* 
	glog
[
num_sh¬ds
][
kNumRegiÚs
];

362 
	gs
 = 0; s < 
	gnum_sh¬ds
; s++) {

363 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

364 
	glog
[
s
][
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], s);

370 
drİ_ÿche
();

371 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

372 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

373 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

374 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

375 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

376 
	glßd”s
.
em¶aû_back
([&, 
id
] {

377 
size_t
 
by‹s_wr™‹n
 = 0;

378 
Rªdom
 
ºd
(
id
);

379 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

380 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

381 cÚ¡ 
kB¿nchšg
 = 4;

382 
height
 = 1;

383 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

384 
height
++;

386 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

387 cÚ¡ 
size_t
 
log_®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

389 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

392 
»giÚ
 = 
G‘Ch
();

393 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
log_®loc_size
);

394 * 
p
 = (*è
·ddr
.
g‘
();

395 
	sEÁry
 {

396 
ušt64_t
 
key
;

397 
ušt64_t
 
g
;

398 
ušt64_t
 
v®ue
;

399 
height
;

401 
EÁry
* 
•
 = (EÁry*è
p
;

402 
•
->
key
 = 
lßd_keys
[
i
];

403 
•
->
g
 = 0;

404 
•
->
v®ue
 = 0;

405 
•
->
height
 = height;

407 
şwb
(
·ddr
.
g‘
(), 
log_®loc_size
);

408 
_mm_sãnû
();

410 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

411 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

412 
node
->
log_·ddr
 = 
·ddr
.
dump
();

413 
skli¡
.
š£¹
(
node
);

415 
by‹s_wr™‹n
 +ğ
log_®loc_size
;

417 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

420 auto& 
	gt
 : 
lßd”s
) {

421 
t
.
još
();

423 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

424 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

425 
	gdur_£c
 = 
dur
.
couÁ
();

426 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

427 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/s\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024);

429 
årštf
(
¡dout
, "\n");

432 
Run4
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

433 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

434 
årštf
(
¡dout
, "==ğPmemLog-%d +†ockä“_skli¡-%d ===\n", 
num_sh¬ds
,‚um_shards);

436 
lockä“_skli¡
 
	gskli¡
[
num_sh¬ds
];

437 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

439 
In™PoŞS‘
();

440 
PmemLog
* 
	glog
[
num_sh¬ds
][
kNumRegiÚs
];

441 
	gs
 = 0; s < 
	gnum_sh¬ds
; s++) {

442 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

444 
	glog
[
s
][
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], s);

450 
drİ_ÿche
();

451 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

452 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

453 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

454 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

455 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

456 
	glßd”s
.
em¶aû_back
([&, 
id
] {

457 
size_t
 
by‹s_wr™‹n
 = 0;

458 
Rªdom
 
ºd
(
id
);

459 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

460 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

461 cÚ¡ 
kB¿nchšg
 = 4;

462 
height
 = 1;

463 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

464 
height
++;

466 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

467 cÚ¡ 
size_t
 
log_®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

469 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

472 
»giÚ
 = 
G‘Ch
();

473 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
log_®loc_size
);

474 * 
p
 = (*è
·ddr
.
g‘
();

475 
	sEÁry
 {

476 
ušt64_t
 
key
;

477 
ušt64_t
 
g
;

478 
ušt64_t
 
v®ue
;

479 
height
;

481 
EÁry
* 
•
 = (EÁry*è
p
;

482 
•
->
key
 = 
lßd_keys
[
i
];

483 
•
->
g
 = 0;

484 
•
->
v®ue
 = 0;

485 
•
->
height
 = height;

487 
şwb
(
·ddr
.
g‘
(), 
log_®loc_size
);

488 
_mm_sãnû
();

490 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

491 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

492 
node
->
log_·ddr
 = 
·ddr
.
dump
();

493 
skli¡
[
s
].
š£¹
(
node
);

495 
by‹s_wr™‹n
 +ğ
log_®loc_size
;

497 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

500 auto& 
	gt
 : 
lßd”s
) {

501 
t
.
još
();

503 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

504 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

505 
	gdur_£c
 = 
dur
.
couÁ
();

506 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

507 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/s\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024);

509 
årštf
(
¡dout
, "\n");

512 
Run5
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

513 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

514 
årštf
(
¡dout
, "==ğPmemLog(group, %d-sh¬dè===\n", 
num_sh¬ds
);

516 
In™PoŞS‘
();

517 
PmemLog
* 
	glog
[
num_sh¬ds
][
kNumRegiÚs
];

518 
	gs
 = 0; s < 
	gnum_sh¬ds
; s++) {

519 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

520 
	glog
[
s
][
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], s);

526 
drİ_ÿche
();

527 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

528 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

529 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

530 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

531 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

532 
	glßd”s
.
em¶aû_back
([&, 
id
] {

533 
¡d
::
veùÜ
<
Key
*> 
group_keys
[
num_sh¬ds
];

534 
¡d
::
veùÜ
<> 
group_heights
[
num_sh¬ds
];

535 
¡d
::
veùÜ
<
size_t
> 
log_sizes
[
num_sh¬ds
];

536 
size_t
 
group_®loc_sizes
[
num_sh¬ds
] = { 0 };

537 
group_út
[
num_sh¬ds
] = { 0 };

538 
size_t
 
by‹s_wr™‹n
 = 0;

539 
Rªdom
 
ºd
(
id
);

540 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

541 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

542 cÚ¡ 
kB¿nchšg
 = 4;

543 
height
 = 1;

544 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

545 
height
++;

547 cÚ¡ 
size_t
 
log_®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

548 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

549 
group_keys
[
s
].
push_back
((
Key
*è&(
lßd_keys
[
i
]));

550 
group_heights
[
s
].
push_back
(
height
);

551 
log_sizes
[
s
].
push_back
(
log_®loc_size
);

552 
group_®loc_sizes
[
s
] +ğ
log_®loc_size
;

553 
group_út
[
s
]++;

554 ià(
group_®loc_sizes
[
s
] >= 1024) {

556 
size_t
 
group_®igÃd_size
 = 
group_®loc_sizes
[
s
];

557 
»giÚ
 = 
G‘Ch
();

558 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
group_®igÃd_size
);

559 * 
pfœ¡
 = (*è
·ddr
.
g‘
();

560 * 
p
 = 
pfœ¡
;

561 
j
 = 0; j < 
group_út
[
s
]; j++) {

562 
	sEÁry
 {

563 
ušt64_t
 
key
;

564 
ušt64_t
 
g
;

565 
ušt64_t
 
v®ue
;

566 
height
;

568 
EÁry
* 
•
 = (EÁry*è
p
;

569 
•
->
key
 = *((
ušt64_t
*è
group_keys
[
s
][
j
]);

570 
•
->
g
 = 0;

571 
•
->
v®ue
 = 0;

572 
•
->
height
 = 
group_heights
[
s
][
j
];

573 
p
 +ğ
log_sizes
[
s
][
j
];

575 
şwb
(
·ddr
.
g‘
(), 
group_®igÃd_size
);

576 
_mm_sãnû
();

577 
group_út
[
s
] = 0;

578 
group_®loc_sizes
[
s
] = 0;

579 
group_keys
[
s
].
ş—r
();

580 
group_heights
[
s
].
ş—r
();

581 
log_sizes
[
s
].
ş—r
();

583 
by‹s_wr™‹n
 +ğ
log_®loc_size
;

585 
s
 = 0; s < 
num_sh¬ds
; s++) {

586 ià(
group_út
[
s
] > 0) {

587 
»giÚ
 = 
G‘Ch
();

588 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
group_®loc_sizes
[s]);

589 * 
pfœ¡
 = (*è
·ddr
.
g‘
();

590 * 
p
 = 
pfœ¡
;

591 
j
 = 0; j < 
group_út
[
s
]; j++) {

592 
	sEÁry
 {

593 
ušt64_t
 
key
;

594 
ušt64_t
 
g
;

595 
ušt64_t
 
v®ue
;

596 
height
;

598 
EÁry
* 
•
 = (EÁry*è
p
;

599 
•
->
key
 = *((
ušt64_t
*è
group_keys
[
s
][
j
]);

600 
•
->
g
 = 0;

601 
•
->
v®ue
 = 0;

602 
•
->
height
 = 
group_heights
[
s
][
j
];

603 
p
 +ğ
log_sizes
[
s
][
j
];

605 
şwb
(
·ddr
.
g‘
(), 
group_®loc_sizes
[
s
]);

606 
_mm_sãnû
();

607 
group_út
[
s
] = 0;

608 
group_®loc_sizes
[
s
] = 0;

611 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

614 auto& 
	gt
 : 
lßd”s
) {

615 
t
.
još
();

617 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

618 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

619 
	gdur_£c
 = 
dur
.
couÁ
();

620 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

621 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/ (wr™‹n=%zu)\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024,otal_bytes_written.load());

623 
årštf
(
¡dout
, "\n");

626 
Run6
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

627 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

628 
årštf
(
¡dout
, "==ğPmemLog(group, %d-sh¬dè+ skli¡ ===\n", 
num_sh¬ds
);

630 
lockä“_skli¡
 
	gskli¡
;

631 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

633 
In™PoŞS‘
();

634 
PmemLog
* 
	glog
[
num_sh¬ds
][
kNumRegiÚs
];

635 
	gs
 = 0; s < 
	gnum_sh¬ds
; s++) {

636 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

637 
	glog
[
s
][
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], s);

643 
drİ_ÿche
();

644 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

645 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

646 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

647 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

648 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

649 
	glßd”s
.
em¶aû_back
([&, 
id
] {

650 
¡d
::
veùÜ
<
Key
*> 
group_keys
[
num_sh¬ds
];

651 
¡d
::
veùÜ
<> 
group_heights
[
num_sh¬ds
];

652 
¡d
::
veùÜ
<
size_t
> 
log_sizes
[
num_sh¬ds
];

653 
¡d
::
veùÜ
<
Node
*> 
nodes
[
num_sh¬ds
];

654 
size_t
 
group_®loc_sizes
[
num_sh¬ds
] = { 0 };

655 
group_út
[
num_sh¬ds
] = { 0 };

656 
size_t
 
by‹s_wr™‹n
 = 0;

657 
Rªdom
 
ºd
(
id
);

658 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

659 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

660 cÚ¡ 
kB¿nchšg
 = 4;

661 
height
 = 1;

662 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

663 
height
++;

665 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

666 cÚ¡ 
size_t
 
log_®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

667 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

668 
group_keys
[
s
].
push_back
((
Key
*è&(
lßd_keys
[
i
]));

669 
group_heights
[
s
].
push_back
(
height
);

670 
log_sizes
[
s
].
push_back
(
log_®loc_size
);

671 
group_®loc_sizes
[
s
] +ğ
log_®loc_size
;

672 
group_út
[
s
]++;

674 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

675 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], (1uÎ<<8|
kTy³V®ue
), 0, 
height
);

676 
nodes
[
s
].
push_back
(
node
);

678 ià(
group_®loc_sizes
[
s
] >= 1024) {

679 
size_t
 
group_®igÃd_size
 = 
group_®loc_sizes
[
s
];

680 
»giÚ
 = 
G‘Ch
();

681 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
group_®igÃd_size
);

682 * 
pfœ¡
 = (*è
·ddr
.
g‘
();

683 * 
p
 = 
pfœ¡
;

684 
j
 = 0; j < 
group_út
[
s
]; j++) {

685 
	sEÁry
 {

686 
ušt64_t
 
key
;

687 
ušt64_t
 
g
;

688 
ušt64_t
 
v®ue
;

689 
height
;

691 
EÁry
* 
•
 = (EÁry*è
p
;

692 
•
->
key
 = *((
ušt64_t
*è
group_keys
[
s
][
j
]);

693 
•
->
g
 = 0;

694 
•
->
v®ue
 = 0;

695 
•
->
height
 = 
group_heights
[
s
][
j
];

697 
nodes
[
s
][
j
]->
log_·ddr
 = (
ušt64_t
è
p
;

699 
p
 +ğ
log_sizes
[
s
][
j
];

701 
şwb
(
·ddr
.
g‘
(), 
group_®igÃd_size
);

702 
_mm_sãnû
();

703 
group_út
[
s
] = 0;

704 
group_®loc_sizes
[
s
] = 0;

705 
group_keys
[
s
].
ş—r
();

706 
group_heights
[
s
].
ş—r
();

707 
log_sizes
[
s
].
ş—r
();

708 
nodes
[
s
].
ş—r
();

710 
skli¡
.
š£¹
(
node
);

712 
by‹s_wr™‹n
 +ğ
log_®loc_size
;

714 
s
 = 0; s < 
num_sh¬ds
; s++) {

715 ià(
group_út
[
s
] > 0) {

716 
»giÚ
 = 
G‘Ch
();

717 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
group_®loc_sizes
[s]);

718 * 
pfœ¡
 = (*è
·ddr
.
g‘
();

719 * 
p
 = 
pfœ¡
;

720 
j
 = 0; j < 
group_út
[
s
]; j++) {

721 
	sEÁry
 {

722 
ušt64_t
 
key
;

723 
ušt64_t
 
g
;

724 
ušt64_t
 
v®ue
;

725 
height
;

727 
EÁry
* 
•
 = (EÁry*è
p
;

728 
•
->
key
 = *((
ušt64_t
*è
group_keys
[
s
][
j
]);

729 
•
->
g
 = 0;

730 
•
->
v®ue
 = 0;

731 
•
->
height
 = 
group_heights
[
s
][
j
];

732 
nodes
[
s
][
j
]->
log_·ddr
 = (
ušt64_t
è
p
;

733 
p
 +ğ
log_sizes
[
s
][
j
];

735 
şwb
(
·ddr
.
g‘
(), 
group_®loc_sizes
[
s
]);

736 
_mm_sãnû
();

737 
group_út
[
s
] = 0;

738 
group_®loc_sizes
[
s
] = 0;

741 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

744 auto& 
	gt
 : 
lßd”s
) {

745 
t
.
još
();

747 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

748 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

749 
	gdur_£c
 = 
dur
.
couÁ
();

750 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

751 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/ (wr™‹n=%zu)\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024,otal_bytes_written.load());

753 
årštf
(
¡dout
, "\n");

756 
th»ad_loÿl
 
Rªdom
 
ºd_
(1);

758 
Run7
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

759 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

760 
årštf
(
¡dout
, "==ğPmemLog(group, %d-sh¬dè+ MemTabËLi¡(%d-sh¬dè===\n", 
num_sh¬ds
,‚um_shards);

762 
MemTabËLi¡
* 
	g
[
num_sh¬ds
];

763 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

764 
	g
[
i
] = 
Ãw
 
MemTabËLi¡
(16*
NUM_LOADS
/
num_sh¬ds
/4);

766 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

768 
In™PoŞS‘
();

769 
PmemLog
* 
	glog
[
num_sh¬ds
][
kNumRegiÚs
];

770 
	gs
 = 0; s < 
	gnum_sh¬ds
; s++) {

771 
	gi
 = 0; i < 
	gkNumRegiÚs
; i++) {

772 
	glog
[
s
][
i
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[i], s);

778 
drİ_ÿche
();

779 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

780 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

781 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

782 
	g¡d
::
©omic
<
size_t
> 
tÙ®_by‹s_wr™‹n
 = 0;

783 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

784 
	glßd”s
.
em¶aû_back
([&, 
id
] {

785 
¡d
::
veùÜ
<
Key
*> 
group_keys
[
num_sh¬ds
];

786 
¡d
::
veùÜ
<> 
group_heights
[
num_sh¬ds
];

787 
¡d
::
veùÜ
<
size_t
> 
log_sizes
[
num_sh¬ds
];

788 
¡d
::
veùÜ
<
Node
*> 
nodes
[
num_sh¬ds
];

789 
size_t
 
group_®loc_sizes
[
num_sh¬ds
] = { 0 };

790 
group_út
[
num_sh¬ds
] = { 0 };

791 
size_t
 
by‹s_wr™‹n
 = 0;

792 
Rªdom
 
ºd
(
id
);

793 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

794 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

795 cÚ¡ 
kB¿nchšg
 = 4;

796 
height
 = 1;

797 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

798 
height
++;

800 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

801 cÚ¡ 
size_t
 
log_®loc_size
 = 8 + 8 + 8 + 8 + 8 * 
height
;

802 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

804 
group_keys
[
s
].
push_back
((
Key
*è&(
lßd_keys
[
i
]));

805 
group_heights
[
s
].
push_back
(
height
);

806 
log_sizes
[
s
].
push_back
(
log_®loc_size
);

807 
group_®loc_sizes
[
s
] +ğ
log_®loc_size
;

808 
group_út
[
s
]++;

810 
Node
* 
node
 = (Node*è

[
s
]->
Put
(
lßd_keys
[
i
], 0);

813 
nodes
[
s
].
push_back
(
node
);

815 ià(
group_®loc_sizes
[
s
] >= 1024) {

816 
size_t
 
group_®igÃd_size
 = 
group_®loc_sizes
[
s
];

817 
»giÚ
 = 
G‘Ch
();

818 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
group_®igÃd_size
);

819 * 
pfœ¡
 = (*è
·ddr
.
g‘
();

820 * 
p
 = 
pfœ¡
;

821 
j
 = 0; j < 
group_út
[
s
]; j++) {

822 
	sEÁry
 {

823 
ušt64_t
 
key
;

824 
ušt64_t
 
g
;

825 
ušt64_t
 
v®ue
;

826 
height
;

828 
EÁry
* 
•
 = (EÁry*è
p
;

829 
•
->
key
 = *((
ušt64_t
*è
group_keys
[
s
][
j
]);

830 
•
->
g
 = 0;

831 
•
->
v®ue
 = 0;

832 
•
->
height
 = 
group_heights
[
s
][
j
];

834 
nodes
[
s
][
j
]->
log_·ddr
 = (
ušt64_t
è
p
;

836 
p
 +ğ
log_sizes
[
s
][
j
];

838 
şwb
(
·ddr
.
g‘
(), 
group_®igÃd_size
);

839 
_mm_sãnû
();

840 
group_út
[
s
] = 0;

841 
group_®loc_sizes
[
s
] = 0;

842 
group_keys
[
s
].
ş—r
();

843 
group_heights
[
s
].
ş—r
();

844 
log_sizes
[
s
].
ş—r
();

845 
nodes
[
s
].
ş—r
();

848 
by‹s_wr™‹n
 +ğ
log_®loc_size
;

850 
s
 = 0; s < 
num_sh¬ds
; s++) {

851 ià(
group_út
[
s
] > 0) {

852 
»giÚ
 = 
G‘Ch
();

853 autØ
·ddr
 = 
log
[
s
][
»giÚ
]->
AÎoÿ‹
(
group_®loc_sizes
[s]);

854 * 
pfœ¡
 = (*è
·ddr
.
g‘
();

855 * 
p
 = 
pfœ¡
;

856 
j
 = 0; j < 
group_út
[
s
]; j++) {

857 
	sEÁry
 {

858 
ušt64_t
 
key
;

859 
ušt64_t
 
g
;

860 
ušt64_t
 
v®ue
;

861 
height
;

863 
EÁry
* 
•
 = (EÁry*è
p
;

864 
•
->
key
 = *((
ušt64_t
*è
group_keys
[
s
][
j
]);

865 
•
->
g
 = 0;

866 
•
->
v®ue
 = 0;

867 
•
->
height
 = 
group_heights
[
s
][
j
];

868 
nodes
[
s
][
j
]->
log_·ddr
 = (
ušt64_t
è
p
;

869 
p
 +ğ
log_sizes
[
s
][
j
];

871 
şwb
(
·ddr
.
g‘
(), 
group_®loc_sizes
[
s
]);

872 
_mm_sãnû
();

873 
group_út
[
s
] = 0;

874 
group_®loc_sizes
[
s
] = 0;

877 
tÙ®_by‹s_wr™‹n
.
ãtch_add
(
by‹s_wr™‹n
);

880 auto& 
	gt
 : 
lßd”s
) {

881 
t
.
još
();

883 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

884 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

885 
	gdur_£c
 = 
dur
.
couÁ
();

886 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

887 
årštf
(
¡dout
, "Lßd Throughput: %.3làMB/ (wr™‹n=%zu)\n", 
tÙ®_by‹s_wr™‹n
.
lßd
()/
dur_£c
/1024/1024,otal_bytes_written.load());

889 
årštf
(
¡dout
, "\n");

892 
P¬£CLA
(
¬gc
, * 
¬gv
[], 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg>* 
´İs
) {

893 
İtiÚ
 
lÚg_İtiÚs
[] = {

894 { "num_th»ads", 
»quœed_¬gum’t
, 0, 0 },

895 { "num_sh¬ds", 
»quœed_¬gum’t
, 0, 0 },

898 cÚ¡ * 
	gİt¡ršg
 = "";

899 
	gc
;

900 
	gi
;

901 (
	gc
 = 
g‘İt_lÚg
(
¬gc
, 
¬gv
, 
İt¡ršg
, 
lÚg_İtiÚs
, &
i
)) != -1) {

902 
c
) {

904 ià(
lÚg_İtiÚs
[
i
].
æag
 != 0) {

907 
	g´İs
->
em¶aû
(
lÚg_İtiÚs
[
i
].
Çme
, 
İrg
);

911 
abÜt
();

917 
	$maš
(
¬gc
, * 
¬gv
[]) {

918 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg> 
´İs
;

919 
	`P¬£CLA
(
¬gc
, 
¬gv
, &
´İs
);

920 
num_th»ads
 = 
NUM_THREADS
;

921 
num_sh¬ds
 = 
NUM_SHARDS
;

922 auto& 
™
 : 
´İs
) {

923 
¡d
::
cout
 << 
™
.
fœ¡
 << ": " << it.
£cÚd
 << std::
’dl
;

924 ià(
™
.
fœ¡
 == "num_threads") {

925 
num_th»ads
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

926 } ià(
™
.
fœ¡
 == "num_shards") {

927 
num_sh¬ds
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

930 
Numa
::
	`In™
();

931 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

932 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

933 
¡d
::
veùÜ
<
ušt64_t
> 
wÜk_keys
;

934 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

935 
wÜk_İs
.
	`»£rve
(
NUM_WORKS
);

936 
wÜk_keys
.
	`»£rve
(
NUM_WORKS
);

937 
	`FlLßdKeys
(
NUM_LOADS
, &
lßd_keys
);

938 
	`FlWÜkKeys
('c', 
NUM_WORKS
, &
wÜk_İs
, &
wÜk_keys
);

940 
tbb
::
sk_scheduËr_š™
 
	`š™
(
num_th»ads
);

942 
	`Run7
(
num_th»ads
, 
num_sh¬ds
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

944 
	}
}

	@ubench/eee.cc

1 
	~<chrÚo
>

2 
	~<c¡dio
>

3 
	~<f¡»am
>

4 
	~<futu»
>

5 
	~<io¡»am
>

6 
	~<m­
>

7 
	~<s¡»am
>

8 
	~<¡ršg
>

9 
	~<sh¬ed_mu‹x
>

10 
	~<th»ad
>

11 
	~<veùÜ
>

12 
	~<ex³rim’l/fesy¡em
>

13 
	~<unÜd”ed_m­
>

15 
	~<g‘İt.h
>

17 
	~"li¡db/commÚ.h
"

18 
	~"li¡db/cÜe/pmem_log.h
"

19 
	~"li¡db/db_ş›Á.h
"

20 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

21 
	~"li¡db/šdex/lockä“_skli¡.h
"

22 
	~"li¡db/lib/numa.h
"

23 
	~"li¡db/li¡db.h
"

24 
	~"li¡db/lsm/bË.h
"

25 
	~"li¡db/lsm/bË_li¡.h
"

26 
	~"li¡db/ut.h
"

27 
	~"li¡db/ut/¿ndom.h
"

29 
	#QUERY_DISTRIBUTION
 "unif"

	)

34 
	#LOAD_FILE
 "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_100M_10M_unif/lßda_unif_št.d©"

	)

40 
	#WORK_FILE_PREFIX
 "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_100M_10M_unif/txns"

	)

44 
cÚ¡ex´
 
	gNUM_THREADS
 = 40;

45 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 100 * 1000 * 1000;

46 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 10 * 1000 * 1000;

48 
cÚ¡ex´
 
	gNUM_SHARDS
 = 
kNumSh¬ds
;

50 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

52 
	eOpTy³
 {

53 
	mOP_INSERT
,

54 
	mOP_UPDATE
,

55 
	mOP_READ
,

56 
	mOP_SCAN
,

57 
	mOP_DELETE
,

60 
	$drİ_ÿche
() {

62 
size
 = 256*1024*1024;

63 *
g¬bage
 = 
Ãw
 [
size
];

64 
i
=0;i<
size
;++i)

65 
g¬bage
[
i
] = i;

66 
i
=100;i<
size
;++i)

67 
g¬bage
[
i
] += garbage[i-100];

68 
d–‘e
[] 
g¬bage
;

69 
	}
}

71 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
) {

72 
¡d
::
¡ršg
 
f’ame
 = 
LOAD_FILE
;

73 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

74 
size_t
 
	gcouÁ
 = 0;

75 
size_t
 
	g•och
 = 10;

76 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

77 
	g¡d
::
¡ršg
 
İ
;

78 
ušt64_t
 
	gkey
;

79 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

80 ià(
	gİ
 == "INSERT") {

81 
lßd_keys
->
push_back
(
key
);

83 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

84 
ex™
(1);

86 
	gcouÁ
++;

87 ià(
	gcouÁ
 % 
	g•och
 == 0) {

88 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

89 
fæush
(
¡dout
);

90 ià(
	gcouÁ
 =ğ
•och
 * 100) {

91 
•och
 *= 10;

95 
	gi¡rm
.
şo£
();

96 ià(
	gcouÁ
 !ğ
num_lßds
) {

97 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

98 
ex™
(1);

100 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

103 
FlWÜkKeys
(cÚ¡ 
wÜklßd_ty³
, cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

104 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
) {

105 
¡d
::
¡ršg¡»am
 
ss
;

106 
	gss
 << 
	gWORK_FILE_PREFIX
 << 
	gwÜklßd_ty³
 << "_" << 
	gQUERY_DISTRIBUTION
 << "_int.dat";

107 
	g¡d
::
¡ršg
 
f’ame
 = 
ss
.
¡r
();

108 
	g¡d
::
if¡»am
 
i¡rm
(
f’ame
);

109 
size_t
 
	gcouÁ
 = 0;

110 
size_t
 
	g•och
 = 10;

111 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

112 
	g¡d
::
¡ršg
 
İ
;

113 
ušt64_t
 
	gkey
;

114 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

115 ià(
	gİ
 == "INSERT") {

116 
wÜk_İs
->
push_back
(
OP_INSERT
);

117 
	gwÜk_keys
->
push_back
(
key
);

118 } ià(
	gİ
 == "UPDATE") {

119 
wÜk_İs
->
push_back
(
OP_UPDATE
);

120 
	gwÜk_keys
->
push_back
(
key
);

121 } ià(
	gİ
 == "READ") {

122 
wÜk_İs
->
push_back
(
OP_READ
);

123 
	gwÜk_keys
->
push_back
(
key
);

125 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

126 
ex™
(1);

128 
	gcouÁ
++;

129 ià(
	gcouÁ
 % 
	g•och
 == 0) {

130 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

131 
fæush
(
¡dout
);

132 ià(
	gcouÁ
 =ğ
•och
 * 100) {

133 
•och
 *= 10;

137 
	gi¡rm
.
şo£
();

138 ià(
	gcouÁ
 !ğ
num_wÜks
) {

139 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

140 
ex™
(1);

142 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: \x1b[32mDONE (couÁ: %zu)\x1b[0m\n", 
couÁ
);

145 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_bË
[
kNumRegiÚs
];

146 
	gpoŞ_id_bË
[
kNumRegiÚs
];

148 
	$In™PoŞS‘
() {

150 
i
 = 0; i < 
kNumRegiÚs
; i++) {

151 
¡d
::
¡ršg¡»am
 
pss
;

152 
pss
 << "/pmem" << 
i
 << "/wkim/pmem_log_test";

153 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

154 
fs
::
	`»move_®l
(
·th
);

155 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

157 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

158 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

159 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

160 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

161 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

162 
¡rm
.
	`şo£
();

164 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

165 
poŞ_bË
[
i
] = 
Pmem
::
poŞ
<
pmem_log_roÙ
>(
id
);

166 
poŞ_id_bË
[
i
] = 
id
;

168 
	}
}

170 
Run1
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

171 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

172 
årštf
(
¡dout
, "==ğB¿idedPmemSkLi¡ (%d-sh¬dè===\n", 
num_sh¬ds
);

174 
In™PoŞS‘
();

175 
B¿idedPmemSkLi¡
* 
	gskli¡
[
num_sh¬ds
];

176 
PmemLog
* 
	g¬’a
[
num_sh¬ds
][
kNumRegiÚs
];

177 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

178 autØ
	g¦
 = 
Ãw
 
B¿idedPmemSkLi¡
(
poŞ_id_bË
[0]);

179 
	gj
 = 0; j < 
	gkNumRegiÚs
; j++) {

180 
	g¬’a
[
i
][
j
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[j], i);

181 
	g¦
->
BšdA»Ç
(
poŞ_id_bË
[
j
], 
¬’a
[
i
][j]);

183 
	g¦
->
In™
();

184 
	gskli¡
[
i
] = 
¦
;

187 
usšg
 
	gNode
 = 
B¿idedPmemSkLi¡
::
Node
;

188 
ušt64_t
 
	gsh¬d_size
 = 
¡d
::
num”ic_lim™s
<ušt64_t>::
max
(è/ 
num_sh¬ds
;

192 
´štf
("Lßd %zu i‹ms\n", 
NUM_LOADS
);

193 
drİ_ÿche
();

194 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

195 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

196 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

197 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

198 
	glßd”s
.
em¶aû_back
([&, 
id
] {

199 
Rªdom
 
ºd
(
id
);

200 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

201 
r
 = 
G‘Ch
();

203 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

204 cÚ¡ 
kB¿nchšg
 = 4;

205 
height
 = 2;

208 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

209 
height
++;

214 
size_t
 
node_size
 = (
Node
è+ (
height
-1)*(
ušt64_t
);

217 
s
 = 
lßd_keys
[
i
] / 
sh¬d_size
;

220 autØ
node_·ddr
 = 
¬’a
[
s
][
r
]->
AÎoÿ‹
(
node_size
);

221 
Node
* 
node
 = (Node*è
node_·ddr
.
g‘
();

223 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
r
);

224 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
p_buf
;

225 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
p_buf
, 
node_size
);

226 
Node
* 
node
 = (Node*è
p_buf
.
g‘
();

227 
PmemPŒ
 
node_·ddr
 = PmemPŒ(
r
, ((
ušŒ_t
è
node
 - (ušŒ_tè
poŞ
.
hªdË
()));

230 
node
->
key
 = 
lßd_keys
[
i
];

231 
node
->
g
 = 
height
;

232 
node
->
v®ue
 = 
lßd_keys
[
i
];

233 
skli¡
[
s
]->
In£¹
(
node_·ddr
);

255 auto& 
	gt
 : 
lßd”s
) {

256 
t
.
još
();

258 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

259 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

260 
	gdur_£c
 = 
dur
.
couÁ
();

261 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

263 
årštf
(
¡dout
, "\n");

267 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

269 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

270 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

271 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

272 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

273 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

274 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

275 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

276 
r
 = 
G‘Ch
();

278 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

280 
s
 = 
wÜk_keys
[
i
] / 
sh¬d_size
;

281 
skli¡
[
s
]->
Lookup
(
wÜk_keys
[
i
], 
r
);

305 auto& 
	gt
 : 
wÜk”s
) {

306 
t
.
još
();

308 
	gút_sum
 = 0;

309 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

310 
	gút_sum
 +ğ
út
[
i
];

312 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

313 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

314 
	gdur_£c
 = 
dur
.
couÁ
();

315 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

318 
årštf
(
¡dout
, "\n");

321 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

322 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

323 
årštf
(
¡dout
, "==ğLi¡DB (%d-sh¬d, MemTabËè===\n", 
num_sh¬ds
);

325 
Li¡DB
* 
	gdb
 = 
Ãw
 ListDB();

326 
	gdb
->
In™
();

330 
´štf
("Lßd %zu i‹ms\n", 
NUM_LOADS
);

331 
drİ_ÿche
();

333 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

334 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

335 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

336 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

337 
	glßd”s
.
em¶aû_back
([&, 
id
] {

338 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

339 
r
 = 
G‘Ch
();

340 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

342 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

343 
ş›Á
->
Put
(
lßd_keys
[
i
],†oad_keys[i]);

352 auto& 
	gt
 : 
lßd”s
) {

353 
t
.
još
();

355 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

356 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

357 
	gdur_£c
 = 
dur
.
couÁ
();

358 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

360 
årštf
(
¡dout
, "\n");

362 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(3));

363 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

364 
	gdb
->
Mªu®FlushMemTabË
(
i
);

366 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(35));

367 
	gdb
->
PrštDebugLsmS‹
(0);

371 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

372 
	g¡d
::
veùÜ
<
¡d
::
chrÚo
::
du¿tiÚ
<>> 
Ï‹ncy
;

373 
	gÏ‹ncy
.
»£rve
(
NUM_WORKS
);

374 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

375 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

376 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

377 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

378 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

379 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

380 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

381 
r
 = 
G‘Ch
();

382 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

385 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

386 autØ
qu”y_begš
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

387 ià(
wÜk_İs
[
i
] =ğ
OP_INSERT
 || wÜk_İs[i] =ğ
OP_UPDATE
) {

388 
ş›Á
->
Put
(
wÜk_keys
[
i
], work_keys[i]);

389 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

390 
ušt64_t
 
v®_»ad
;

391 
ş›Á
->
G‘
(
wÜk_keys
[
i
], &
v®_»ad
);

395 
Ï‹ncy
[
i
] = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
(è- 
qu”y_begš
;

399 auto& 
	gt
 : 
wÜk”s
) {

400 
t
.
još
();

402 
	gút_sum
 = 0;

403 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

404 
	gút_sum
 +ğ
út
[
i
];

406 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

407 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

408 
	gdur_£c
 = 
dur
.
couÁ
();

409 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

412 
	g¡d
::
f¡»am
 
¡rm
("Ï‹ncy.out", sŒm.
out
);

413 
size_t
 
	gi
 = 0; i < 
	gNUM_WORKS
; i++) {

414 
	g¡rm
 << 
	gÏ‹ncy
[
i
].
couÁ
(è<< 
	g¡d
::
’dl
;

416 
	g¡rm
.
şo£
();

418 
årštf
(
¡dout
, "\n");

419 
d–‘e
 
	gdb
;

422 
Run3
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

423 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

424 
årštf
(
¡dout
, "==ğlockä“_skli¡ (%d-sh¬dè===\n", 
num_sh¬ds
);

426 
lockä“_skli¡
 
	gskli¡
[
num_sh¬ds
];

427 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

431 
drİ_ÿche
();

432 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

433 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

434 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

435 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

436 
	glßd”s
.
em¶aû_back
([&, 
id
] {

437 
Rªdom
 
ºd
(
id
);

438 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

439 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

440 cÚ¡ 
kB¿nchšg
 = 4;

441 
height
 = 1;

442 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

443 
height
++;

445 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

447 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

449 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

450 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], 0, 
kTy³V®ue
, 
height
, 0);

452 
skli¡
[
s
].
In£¹
(
node
);

456 auto& 
	gt
 : 
lßd”s
) {

457 
t
.
još
();

459 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

460 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

461 
	gdur_£c
 = 
dur
.
couÁ
();

462 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

467 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

468 
drİ_ÿche
();

469 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

470 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

471 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

472 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

473 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

474 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

475 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

478 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

479 
s
 = 
wÜk_keys
[
i
] % 
num_sh¬ds
;

480 
skli¡
[
s
].
Lookup
(
wÜk_keys
[
i
]);

484 auto& 
	gt
 : 
wÜk”s
) {

485 
t
.
još
();

487 
	gút_sum
 = 0;

488 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

489 
	gút_sum
 +ğ
út
[
i
];

491 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

492 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

493 
	gdur_£c
 = 
dur
.
couÁ
();

494 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

497 
årštf
(
¡dout
, "\n");

500 
P¬£CLA
(
¬gc
, * 
¬gv
[], 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg>* 
´İs
) {

501 
İtiÚ
 
lÚg_İtiÚs
[] = {

502 { "num_th»ads", 
»quœed_¬gum’t
, 0, 0 },

503 { "num_sh¬ds", 
»quœed_¬gum’t
, 0, 0 },

506 cÚ¡ * 
	gİt¡ršg
 = "";

507 
	gc
;

508 
	gi
;

509 (
	gc
 = 
g‘İt_lÚg
(
¬gc
, 
¬gv
, 
İt¡ršg
, 
lÚg_İtiÚs
, &
i
)) != -1) {

510 
c
) {

512 ià(
lÚg_İtiÚs
[
i
].
æag
 != 0) {

515 
	g´İs
->
em¶aû
(
lÚg_İtiÚs
[
i
].
Çme
, 
İrg
);

519 
abÜt
();

525 
	$maš
(
¬gc
, * 
¬gv
[]) {

526 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg> 
´İs
;

527 
	`P¬£CLA
(
¬gc
, 
¬gv
, &
´İs
);

528 
num_th»ads
 = 
NUM_THREADS
;

529 
num_sh¬ds
 = 
NUM_SHARDS
;

530 auto& 
™
 : 
´İs
) {

531 
¡d
::
cout
 << 
™
.
fœ¡
 << ": " << it.
£cÚd
 << std::
’dl
;

532 ià(
™
.
fœ¡
 == "num_threads") {

533 
num_th»ads
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

534 } ià(
™
.
fœ¡
 == "num_shards") {

535 
num_sh¬ds
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

538 
Numa
::
	`In™
();

539 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

540 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

541 
¡d
::
veùÜ
<
ušt64_t
> 
wÜk_keys
;

542 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

543 
wÜk_İs
.
	`»£rve
(
NUM_WORKS
);

544 
wÜk_keys
.
	`»£rve
(
NUM_WORKS
);

545 
	`FlLßdKeys
(
NUM_LOADS
, &
lßd_keys
);

546 
	`FlWÜkKeys
('a', 
NUM_WORKS
, &
wÜk_İs
, &
wÜk_keys
);

549 
	`Run2
(
num_th»ads
, 
num_sh¬ds
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

553 
	}
}

	@ubench/recovery_test.cc

1 
	~<chrÚo
>

2 
	~<c¡dio
>

3 
	~<f¡»am
>

4 
	~<futu»
>

5 
	~<io¡»am
>

6 
	~<m­
>

7 
	~<s¡»am
>

8 
	~<¡ršg
>

9 
	~<sh¬ed_mu‹x
>

10 
	~<th»ad
>

11 
	~<veùÜ
>

12 
	~<ex³rim’l/fesy¡em
>

13 
	~<unÜd”ed_m­
>

15 
	~<g‘İt.h
>

17 
	~"li¡db/commÚ.h
"

18 
	~"li¡db/cÜe/pmem_log.h
"

19 
	~"li¡db/db_ş›Á.h
"

20 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

21 
	~"li¡db/šdex/lockä“_skli¡.h
"

22 
	~"li¡db/lib/numa.h
"

23 
	~"li¡db/li¡db.h
"

24 
	~"li¡db/lsm/bË.h
"

25 
	~"li¡db/lsm/bË_li¡.h
"

26 
	~"li¡db/ut.h
"

27 
	~"li¡db/ut/¿ndom.h
"

32 
	#LOAD_FILE
 "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_100M_10M_zf/lßda_zf_št.d©"

	)

34 
cÚ¡ex´
 
	gNUM_THREADS
 = 80;

35 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 100 * 1000 * 1000;

37 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 10 * 1000 * 1000;

39 
cÚ¡ex´
 
	gNUM_SHARDS
 = 
kNumSh¬ds
;

41 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

43 
	eOpTy³
 {

44 
	mOP_INSERT
,

45 
	mOP_UPDATE
,

46 
	mOP_READ
,

47 
	mOP_SCAN
,

48 
	mOP_DELETE
,

51 
	$drİ_ÿche
() {

53 
size
 = 256*1024*1024;

54 *
g¬bage
 = 
Ãw
 [
size
];

55 
i
=0;i<
size
;++i)

56 
g¬bage
[
i
] = i;

57 
i
=100;i<
size
;++i)

58 
g¬bage
[
i
] += garbage[i-100];

59 
d–‘e
[] 
g¬bage
;

60 
	}
}

62 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

63 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

64 
size_t
 
	gcouÁ
 = 0;

65 
size_t
 
	g•och
 = 10;

66 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

67 
	g¡d
::
¡ršg
 
İ
;

68 
ušt64_t
 
	gkey
;

69 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

70 ià(
	gİ
 == "INSERT") {

71 
lßd_keys
->
push_back
(
key
);

73 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

74 
ex™
(1);

76 
	gcouÁ
++;

77 ià(
	gcouÁ
 % 
	g•och
 == 0) {

78 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

79 
fæush
(
¡dout
);

80 ià(
	gcouÁ
 =ğ
•och
 * 100) {

81 
•och
 *= 10;

85 
	gi¡rm
.
şo£
();

86 ià(
	gcouÁ
 !ğ
num_lßds
) {

87 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

88 
ex™
(1);

90 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

93 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
) {

94 
årštf
(
¡dout
, "==ğLi¡DB (%d-sh¬dè===\n", 
num_sh¬ds
);

96 
Li¡DB
* 
	gdb
 = 
Ãw
 ListDB();

97 
	gdb
->
In™
();

102 
´štf
("Lßd %zu i‹ms\n", 
NUM_LOADS
);

104 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

105 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

106 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

107 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

108 
	glßd”s
.
em¶aû_back
([&, 
id
] {

109 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

110 
r
 = 
G‘Ch
();

111 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

113 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

114 
ş›Á
->
Put
(
lßd_keys
[
i
],†oad_keys[i]);

118 auto& 
	gt
 : 
lßd”s
) {

119 
t
.
još
();

121 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

122 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

123 
	gdur_£c
 = 
dur
.
couÁ
();

124 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

126 
årštf
(
¡dout
, "\n");

133 
	gdb
->
PrštDebugLsmS‹
(0);

135 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(3));

136 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

137 
	gdb
->
Mªu®FlushMemTabË
(
i
);

139 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(10));

140 
	gdb
->
PrštDebugLsmS‹
(0);

143 
årštf
(
¡dout
, "> delete db;\n");

144 
d–‘e
 
	gdb
;

146 
årštf
(
¡dout
, "> db =‚ew ListDB();\n");

147 
	gdb
 = 
Ãw
 
Li¡DB
();

148 
årštf
(
¡dout
, "> db->Open();\n");

149 autØ
	gİ’_begš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

150 
	gdb
->
O³n
();

151 autØ
	gİ’_’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

152 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
İ’_dur
 = 
İ’_’d_
 - 
İ’_begš_
;

153 
årštf
(
¡dout
, "O³n(ètime: %.3là£c\n", 
İ’_dur
.
couÁ
());

154 
årštf
(
¡dout
, "> db->PrintDebugLsmState(0);\n");

155 
	gdb
->
PrštDebugLsmS‹
(0);

156 
årštf
(
¡dout
, "\n");

157 
d–‘e
 
	gdb
;

160 
P¬£CLA
(
¬gc
, * 
¬gv
[], 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg>* 
´İs
) {

161 
İtiÚ
 
lÚg_İtiÚs
[] = {

162 { "num_th»ads", 
»quœed_¬gum’t
, 0, 0 },

163 { "num_sh¬ds", 
»quœed_¬gum’t
, 0, 0 },

164 { "»ad_¿tio", 
»quœed_¬gum’t
, 0, 0 },

167 cÚ¡ * 
	gİt¡ršg
 = "";

168 
	gc
;

169 
	gi
;

170 (
	gc
 = 
g‘İt_lÚg
(
¬gc
, 
¬gv
, 
İt¡ršg
, 
lÚg_İtiÚs
, &
i
)) != -1) {

171 
c
) {

173 ià(
lÚg_İtiÚs
[
i
].
æag
 != 0) {

176 
	g´İs
->
em¶aû
(
lÚg_İtiÚs
[
i
].
Çme
, 
İrg
);

180 
abÜt
();

186 
	$maš
(
¬gc
, * 
¬gv
[]) {

187 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg> 
´İs
;

188 
	`P¬£CLA
(
¬gc
, 
¬gv
, &
´İs
);

189 
num_th»ads
 = 
NUM_THREADS
;

190 
num_sh¬ds
 = 
NUM_SHARDS
;

191 
»ad_¿tio
 = 100;

192 auto& 
™
 : 
´İs
) {

193 
¡d
::
cout
 << 
™
.
fœ¡
 << ": " << it.
£cÚd
 << std::
’dl
;

194 ià(
™
.
fœ¡
 == "num_threads") {

195 
num_th»ads
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

196 } ià(
™
.
fœ¡
 == "num_shards") {

197 
num_sh¬ds
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

198 } ià(
™
.
fœ¡
 == "read_ratio") {

199 
»ad_¿tio
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

203 
	`årštf
(
¡dout
, "num_th»ads=%d\Ä—d_¿tio=%d\n", 
num_th»ads
, 
»ad_¿tio
);

205 
Numa
::
	`In™
();

206 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

207 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

208 
	`FlLßdKeys
(
NUM_LOADS
, &
lßd_keys
, 
LOAD_FILE
);

210 
	`Run2
(
num_th»ads
, 
num_sh¬ds
, 
lßd_keys
);

213 
	}
}

	@ubench/rw_ratio.cc

1 
	~<chrÚo
>

2 
	~<c¡dio
>

3 
	~<f¡»am
>

4 
	~<futu»
>

5 
	~<io¡»am
>

6 
	~<m­
>

7 
	~<s¡»am
>

8 
	~<¡ršg
>

9 
	~<sh¬ed_mu‹x
>

10 
	~<th»ad
>

11 
	~<veùÜ
>

12 
	~<ex³rim’l/fesy¡em
>

13 
	~<unÜd”ed_m­
>

15 
	~<g‘İt.h
>

17 
	~"li¡db/commÚ.h
"

18 
	~"li¡db/cÜe/pmem_log.h
"

19 
	~"li¡db/db_ş›Á.h
"

20 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

21 
	~"li¡db/šdex/lockä“_skli¡.h
"

22 
	~"li¡db/lib/numa.h
"

23 
	~"li¡db/li¡db.h
"

24 
	~"li¡db/lsm/bË.h
"

25 
	~"li¡db/lsm/bË_li¡.h
"

26 
	~"li¡db/ut.h
"

27 
	~"li¡db/ut/¿ndom.h
"

34 
cÚ¡ex´
 
	gNUM_THREADS
 = 40;

35 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 100 * 1000 * 1000;

36 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 10 * 1000 * 1000;

38 
cÚ¡ex´
 
	gNUM_SHARDS
 = 
kNumSh¬ds
;

40 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

42 
	eOpTy³
 {

43 
	mOP_INSERT
,

44 
	mOP_UPDATE
,

45 
	mOP_READ
,

46 
	mOP_SCAN
,

47 
	mOP_DELETE
,

50 
	$drİ_ÿche
() {

52 
size
 = 256*1024*1024;

53 *
g¬bage
 = 
Ãw
 [
size
];

54 
i
=0;i<
size
;++i)

55 
g¬bage
[
i
] = i;

56 
i
=100;i<
size
;++i)

57 
g¬bage
[
i
] += garbage[i-100];

58 
d–‘e
[] 
g¬bage
;

59 
	}
}

61 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

62 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

63 
size_t
 
	gcouÁ
 = 0;

64 
size_t
 
	g•och
 = 10;

65 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

66 
	g¡d
::
¡ršg
 
İ
;

67 
ušt64_t
 
	gkey
;

68 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

69 ià(
	gİ
 == "INSERT") {

70 
lßd_keys
->
push_back
(
key
);

72 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

73 
ex™
(1);

75 
	gcouÁ
++;

76 ià(
	gcouÁ
 % 
	g•och
 == 0) {

77 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

78 
fæush
(
¡dout
);

79 ià(
	gcouÁ
 =ğ
•och
 * 100) {

80 
•och
 *= 10;

84 
	gi¡rm
.
şo£
();

85 ià(
	gcouÁ
 !ğ
num_lßds
) {

86 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

87 
ex™
(1);

89 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

92 
FlWÜkKeys
(cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

93 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

94 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

95 
size_t
 
	gcouÁ
 = 0;

96 
size_t
 
	g•och
 = 10;

97 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

98 
	g¡d
::
¡ršg
 
İ
;

99 
ušt64_t
 
	gkey
;

100 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

101 ià(
	gİ
 == "INSERT") {

102 
wÜk_İs
->
push_back
(
OP_INSERT
);

103 
	gwÜk_keys
->
push_back
(
key
);

104 } ià(
	gİ
 == "UPDATE") {

105 
wÜk_İs
->
push_back
(
OP_UPDATE
);

106 
	gwÜk_keys
->
push_back
(
key
);

107 } ià(
	gİ
 == "READ") {

108 
wÜk_İs
->
push_back
(
OP_READ
);

109 
	gwÜk_keys
->
push_back
(
key
);

111 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

112 
ex™
(1);

114 
	gcouÁ
++;

115 ià(
	gcouÁ
 % 
	g•och
 == 0) {

116 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

117 
fæush
(
¡dout
);

118 ià(
	gcouÁ
 =ğ
•och
 * 100) {

119 
•och
 *= 10;

123 
	gi¡rm
.
şo£
();

124 ià(
	gcouÁ
 !ğ
num_wÜks
) {

125 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

126 
ex™
(1);

128 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: \x1b[32mDONE (couÁ: %zu)\x1b[0m\n", 
couÁ
);

131 
FlLßdKeysR—dR©io
(cÚ¡ 
size_t
 
num_lßds
, cÚ¡ size_ˆ
num_wÜks
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
, 
»ad_¿tio
) {

132 
	g¡d
::
¡ršg¡»am
 
ss
;

133 
	gss
 << "/home/wkim/RECIPE/index-microbench/workloads_rw_ratio_unif/";

134 
	gss
 << "lßd_r" << 
	g»ad_¿tio
 << "_unif_št_" << (
	gnum_lßds
 / 1000 / 1000è<< "M_" << (
	gnum_wÜks
 / 1000 / 1000) << "M";

135 
FlLßdKeys
(
num_lßds
, 
lßd_keys
, 
ss
.
¡r
());

138 
FlWÜkKeysR—dR©io
(cÚ¡ 
size_t
 
num_lßds
, cÚ¡ size_ˆ
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

139 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
, 
»ad_¿tio
) {

140 
	g¡d
::
¡ršg¡»am
 
ss
;

141 
	gss
 << "/home/wkim/RECIPE/index-microbench/workloads_rw_ratio_unif/";

142 
	gss
 << "run_r" << 
	g»ad_¿tio
 << "_unif_št_" << (
	gnum_lßds
 / 1000 / 1000è<< "M_" << (
	gnum_wÜks
 / 1000 / 1000) << "M";

143 
FlWÜkKeys
(
num_wÜks
, 
wÜk_İs
, 
wÜk_keys
, 
ss
.
¡r
());

146 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_bË
[
kNumRegiÚs
];

147 
	gpoŞ_id_bË
[
kNumRegiÚs
];

149 
	$In™PoŞS‘
() {

151 
i
 = 0; i < 
kNumRegiÚs
; i++) {

152 
¡d
::
¡ršg¡»am
 
pss
;

153 
pss
 << "/pmem" << 
i
 << "/wkim/pmem_log_test";

154 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

155 
fs
::
	`»move_®l
(
·th
);

156 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

158 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

159 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

160 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

161 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

162 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

163 
¡rm
.
	`şo£
();

165 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

166 
poŞ_bË
[
i
] = 
Pmem
::
poŞ
<
pmem_log_roÙ
>(
id
);

167 
poŞ_id_bË
[
i
] = 
id
;

169 
	}
}

171 
Run1
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

172 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

173 
årštf
(
¡dout
, "==ğB¿idedPmemSkLi¡ (%d-sh¬dè===\n", 
num_sh¬ds
);

175 
In™PoŞS‘
();

176 
B¿idedPmemSkLi¡
* 
	gskli¡
[
num_sh¬ds
];

177 
PmemLog
* 
	g¬’a
[
num_sh¬ds
][
kNumRegiÚs
];

178 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

179 autØ
	g¦
 = 
Ãw
 
B¿idedPmemSkLi¡
(
poŞ_id_bË
[0]);

180 
	gj
 = 0; j < 
	gkNumRegiÚs
; j++) {

181 
	g¬’a
[
i
][
j
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[j], i);

182 
	g¦
->
BšdA»Ç
(
poŞ_id_bË
[
j
], 
¬’a
[
i
][j]);

184 
	g¦
->
In™
();

185 
	gskli¡
[
i
] = 
¦
;

188 
usšg
 
	gNode
 = 
B¿idedPmemSkLi¡
::
Node
;

189 
ušt64_t
 
	gsh¬d_size
 = 
¡d
::
num”ic_lim™s
<ušt64_t>::
max
(è/ 
num_sh¬ds
;

193 
´štf
("Lßd %zu i‹ms\n", 
NUM_LOADS
);

194 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

195 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

196 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

197 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

198 
	glßd”s
.
em¶aû_back
([&, 
id
] {

199 
Rªdom
 
ºd
(
id
);

200 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

201 
r
 = 
G‘Ch
();

203 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

204 cÚ¡ 
kB¿nchšg
 = 4;

205 
height
 = 2;

208 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

209 
height
++;

214 
size_t
 
node_size
 = (
Node
è+ (
height
-1)*(
ušt64_t
);

217 
s
 = 
lßd_keys
[
i
] / 
sh¬d_size
;

220 autØ
node_·ddr
 = 
¬’a
[
s
][
r
]->
AÎoÿ‹
(
node_size
);

221 
Node
* 
node
 = (Node*è
node_·ddr
.
g‘
();

223 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
r
);

224 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
p_buf
;

225 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
p_buf
, 
node_size
);

226 
Node
* 
node
 = (Node*è
p_buf
.
g‘
();

227 
PmemPŒ
 
node_·ddr
 = PmemPŒ(
r
, ((
ušŒ_t
è
node
 - (ušŒ_tè
poŞ
.
hªdË
()));

230 
node
->
key
 = 
lßd_keys
[
i
];

231 
node
->
g
 = 
height
;

232 
node
->
v®ue
 = 
lßd_keys
[
i
];

233 
skli¡
[
s
]->
In£¹
(
node_·ddr
);

255 auto& 
	gt
 : 
lßd”s
) {

256 
t
.
još
();

258 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

259 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

260 
	gdur_£c
 = 
dur
.
couÁ
();

261 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

263 
årštf
(
¡dout
, "\n");

267 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

268 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

269 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

270 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

271 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

272 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

273 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

274 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

275 
r
 = 
G‘Ch
();

277 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

279 
s
 = 
wÜk_keys
[
i
] / 
sh¬d_size
;

280 
skli¡
[
s
]->
Lookup
(
wÜk_keys
[
i
], 
r
);

304 auto& 
	gt
 : 
wÜk”s
) {

305 
t
.
još
();

307 
	gút_sum
 = 0;

308 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

309 
	gút_sum
 +ğ
út
[
i
];

311 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

312 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

313 
	gdur_£c
 = 
dur
.
couÁ
();

314 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

317 
årštf
(
¡dout
, "\n");

320 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

321 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

322 
årštf
(
¡dout
, "==ğLi¡DB (%d-sh¬dè===\n", 
num_sh¬ds
);

324 
Li¡DB
* 
	gdb
 = 
Ãw
 ListDB();

325 
	gdb
->
In™
();

329 
´štf
("Lßd %zu i‹ms\n", 
NUM_LOADS
);

331 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

332 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

333 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

334 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

335 
	glßd”s
.
em¶aû_back
([&, 
id
] {

336 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

337 
r
 = 
G‘Ch
();

338 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

340 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

341 
ş›Á
->
Put
(
lßd_keys
[
i
],†oad_keys[i]);

345 auto& 
	gt
 : 
lßd”s
) {

346 
t
.
još
();

348 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

349 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

350 
	gdur_£c
 = 
dur
.
couÁ
();

351 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

353 
årštf
(
¡dout
, "\n");

355 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(3));

356 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

357 
	gdb
->
Mªu®FlushMemTabË
(
i
);

359 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(20));

360 
	gdb
->
PrštDebugLsmS‹
(0);

364 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

367 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

368 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

369 #ifdeà
COUNT_FOUND


370 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

372 
	g¡d
::
veùÜ
<
size_t
> 
pmem_g‘_út
(
num_th»ads
);

373 
	g¡d
::
veùÜ
<
size_t
> 
£¬ch_vis™_út
(
num_th»ads
);

374 
	g¡d
::
veùÜ
<
size_t
> 
height_vis™_út
[
kMaxHeight
];

375 
	gi
 = 0; i < 
	gkMaxHeight
; i++) {

376 
	gheight_vis™_út
[
i
].
»£rve
(
num_th»ads
);

377 
	gj
 = 0; j < 
	gnum_th»ads
; j++) {

378 
	gheight_vis™_út
[
i
][
j
] = 0;

381 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

382 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

383 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

384 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

385 
r
 = 
G‘Ch
();

386 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

388 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

390 ià(
wÜk_İs
[
i
] =ğ
OP_INSERT
 || wÜk_İs[i] =ğ
OP_UPDATE
) {

391 
ş›Á
->
Put
(
wÜk_keys
[
i
], work_keys[i]);

392 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

393 
ušt64_t
 
v®_»ad
;

394 #iâdeà
COUNT_FOUND


395 
ş›Á
->
G‘
(
wÜk_keys
[
i
], &
v®_»ad
);

397 autØ
»t
 = 
ş›Á
->
G‘
(
wÜk_keys
[
i
], &
v®_»ad
);

398 ià(
»t
è
út
[
id
]++;

404 
pmem_g‘_út
[
id
] = 
ş›Á
->pmem_get_cnt();

405 
£¬ch_vis™_út
[
id
] = 
ş›Á
->search_visit_cnt();

406 
h
 = 0; h < 
kMaxHeight
; h++) {

407 
height_vis™_út
[
h
][
id
] = 
ş›Á
->height_visit_cnt(h);

411 auto& 
	gt
 : 
wÜk”s
) {

412 
t
.
još
();

414 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

415 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

416 
	gdur_£c
 = 
dur
.
couÁ
();

417 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

418 #ifdeà
COUNT_FOUND


419 
	gút_sum
 = 0;

420 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

421 
	gút_sum
 +ğ
út
[
i
];

423 
årštf
(
¡dout
, "Found %d\n", 
út_sum
);

426 
size_t
 
	gpmem_g‘_út_tÙ®
 = 0;

427 
size_t
 
	g£¬ch_vis™_út_tÙ®
 = 0;

428 
size_t
 
	gheight_vis™_út_tÙ®
[
kMaxHeight
] = {};

429 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

430 
	gpmem_g‘_út_tÙ®
 +ğ
pmem_g‘_út
[
i
];

431 
	g£¬ch_vis™_út_tÙ®
 +ğ
£¬ch_vis™_út
[
i
];

432 
	gh
 = 0; h < 
	gkMaxHeight
; h++) {

433 
	gheight_vis™_út_tÙ®
[
h
] +ğ
height_vis™_út
[h][
i
];

436 
årštf
(
¡dout
, "Numb” oàqu”› çÎ’ backØpmem s—rch: %zu\n", 
pmem_g‘_út_tÙ®
);

437 
årštf
(
¡dout
, "Pmem‚odvis™ couÁ fÜ qu”› çÎ’ backØpmem s—rch: %zu\n", 
£¬ch_vis™_út_tÙ®
);

438 
årštf
(
¡dout
, "Avg. Pmem‚odvis™ couÁ…” qu”y f®ËÀbackØpmem s—rch: %.3lf\n", (è
£¬ch_vis™_út_tÙ®
 / 
pmem_g‘_út_tÙ®
);

439 
	gh
 = 0; h < 
	gkMaxHeight
; h++) {

440 
årštf
(
¡dout
, "height: %d - Avg. Pmem‚odvis™ couÁ…” qu”y f®ËÀbackØpmem s—rch: %.3lf\n", 
h
 + 1, (è
height_vis™_út_tÙ®
[h] / 
pmem_g‘_út_tÙ®
);

442 #ifdeà
LISTDB_L1_LRU


443 
årštf
(
¡dout
, "DRAM COPY LAYER SIZE = %zu\n", 
db
->
tÙ®_sÜ‹d_¬r_size
());

446 
årštf
(
¡dout
, "\n");

447 
	g¡d
::
¡ršg
 
buf
;

448 
	gdb
->
G‘StSŒšg
("l1_ÿche_size", &
buf
);

449 
årštf
(
¡dout
, "%s\n", 
buf
.
c_¡r
());

450 
d–‘e
 
	gdb
;

453 
Run3
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

454 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

455 
årštf
(
¡dout
, "==ğlockä“_skli¡ (%d-sh¬dè===\n", 
num_sh¬ds
);

457 
lockä“_skli¡
 
	gskli¡
[
num_sh¬ds
];

458 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

462 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

463 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

464 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

465 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

466 
	glßd”s
.
em¶aû_back
([&, 
id
] {

467 
Rªdom
 
ºd
(
id
);

468 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

469 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

470 cÚ¡ 
kB¿nchšg
 = 4;

471 
height
 = 1;

472 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

473 
height
++;

475 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

477 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

479 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

480 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], 0, 
kTy³V®ue
, 
height
, 0);

482 
skli¡
[
s
].
In£¹
(
node
);

486 auto& 
	gt
 : 
lßd”s
) {

487 
t
.
još
();

489 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

490 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

491 
	gdur_£c
 = 
dur
.
couÁ
();

492 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

497 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

498 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

499 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

500 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

501 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

502 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

503 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

504 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

507 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

508 
s
 = 
wÜk_keys
[
i
] % 
num_sh¬ds
;

509 
skli¡
[
s
].
Lookup
(
wÜk_keys
[
i
]);

513 auto& 
	gt
 : 
wÜk”s
) {

514 
t
.
još
();

516 
	gút_sum
 = 0;

517 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

518 
	gút_sum
 +ğ
út
[
i
];

520 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

521 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

522 
	gdur_£c
 = 
dur
.
couÁ
();

523 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

526 
årštf
(
¡dout
, "\n");

529 
P¬£CLA
(
¬gc
, * 
¬gv
[], 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg>* 
´İs
) {

530 
İtiÚ
 
lÚg_İtiÚs
[] = {

531 { "num_th»ads", 
»quœed_¬gum’t
, 0, 0 },

532 { "num_sh¬ds", 
»quœed_¬gum’t
, 0, 0 },

533 { "»ad_¿tio", 
»quœed_¬gum’t
, 0, 0 },

536 cÚ¡ * 
	gİt¡ršg
 = "";

537 
	gc
;

538 
	gi
;

539 (
	gc
 = 
g‘İt_lÚg
(
¬gc
, 
¬gv
, 
İt¡ršg
, 
lÚg_İtiÚs
, &
i
)) != -1) {

540 
c
) {

542 ià(
lÚg_İtiÚs
[
i
].
æag
 != 0) {

545 
	g´İs
->
em¶aû
(
lÚg_İtiÚs
[
i
].
Çme
, 
İrg
);

549 
abÜt
();

555 
	$maš
(
¬gc
, * 
¬gv
[]) {

556 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg> 
´İs
;

557 
	`P¬£CLA
(
¬gc
, 
¬gv
, &
´İs
);

558 
num_th»ads
 = 
NUM_THREADS
;

559 
num_sh¬ds
 = 
NUM_SHARDS
;

560 
»ad_¿tio
 = 100;

561 auto& 
™
 : 
´İs
) {

562 
¡d
::
cout
 << 
™
.
fœ¡
 << ": " << it.
£cÚd
 << std::
’dl
;

563 ià(
™
.
fœ¡
 == "num_threads") {

564 
num_th»ads
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

565 } ià(
™
.
fœ¡
 == "num_shards") {

566 
num_sh¬ds
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

567 } ià(
™
.
fœ¡
 == "read_ratio") {

568 
»ad_¿tio
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

572 
	`årštf
(
¡dout
, "num_th»ads=%d\Ä—d_¿tio=%d\n", 
num_th»ads
, 
»ad_¿tio
);

574 
	`årštf
(
¡dout
, "*** Cache Configurations ***\n");

575 #ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_SIMPLE


576 
	`årštf
(
¡dout
, "L0_cache_size: %zu = %zu bytes (SimpleHashTable)\n",

577 
kHTSize
, kHTSiz* (
Sim¶eHashTabË
::
Buck‘
));

578 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_STATIC


579 
	`årštf
(
¡dout
, "L0_cache_size: %zu = %zu bytes (StaticHashTableCache)\n",

580 
kHTSize
, kHTSiz* (
SticHashTabËCache
::
Buck‘
));

581 #–ià
LISTDB_L0_CACHE
 =ğ
L0_CACHE_T_DOUBLE_HASHING


582 
	`årštf
(
¡dout
, "L0_cache_size: %zu = %zu bytes (DoubleHashingCache)\n",

583 
kHTSize
, kHTSiz* (
DoubËHashšgCache
::
Buck‘
));

585 
	`årštf
(
¡dout
, "L0_cache_size: 0\n");

588 #ifdeà
LISTDB_SKIPLIST_CACHE


589 
	`årštf
(
¡dout
, "L1_ÿche_size: %zu by‹s\n", 
kSkLi¡CacheC­ac™y
);

591 
¡d
::
cout
 << "kSkLi¡CacheC¬dš®™y: " << 
kSkLi¡CacheC¬dš®™y
 << std::
’dl
;

592 
¡d
::
cout
 << "kSkLi¡CacheMšPmemHeight: " << 
kSkLi¡CacheMšPmemHeight
 << std::
’dl
;

594 
	`årštf
(
¡dout
, "L1_cache_size: disabled.\n");

597 #ifdeà
LISTDB_L0_CACHE


598 
	`årštf
(
¡dout
, "L0_CACHE_TYPE: %d\n", 
LISTDB_L0_CACHE
);

599 
	`årštf
(
¡dout
, "PROBING_DISTANCE: %d\n", 
LISTDB_L0_CACHE_PROBING_DISTANCE
);

603 
Numa
::
	`In™
();

604 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

605 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

606 
¡d
::
veùÜ
<
ušt64_t
> 
wÜk_keys
;

607 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

608 
wÜk_İs
.
	`»£rve
(
NUM_WORKS
);

609 
wÜk_keys
.
	`»£rve
(
NUM_WORKS
);

610 
	`FlLßdKeysR—dR©io
(
NUM_LOADS
, 
NUM_WORKS
, &
lßd_keys
, 
»ad_¿tio
);

612 
	`FlWÜkKeysR—dR©io
(
NUM_LOADS
, 
NUM_WORKS
, &
wÜk_İs
, &
wÜk_keys
, 
»ad_¿tio
);

615 
	`Run2
(
num_th»ads
, 
num_sh¬ds
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

619 
	}
}

	@ubench/string_kv_test.cc

1 #ià
defšed
(
LISTDB_STRING_KEY
è&& defšed(
LISTDB_WISCKEY
)

3 
	~<chrÚo
>

4 
	~<c¡dio
>

5 
	~<f¡»am
>

6 
	~<futu»
>

7 
	~<io¡»am
>

8 
	~<m­
>

9 
	~<s¡»am
>

10 
	~<¡ršg
>

11 
	~<sh¬ed_mu‹x
>

12 
	~<th»ad
>

13 
	~<veùÜ
>

14 
	~<ex³rim’l/fesy¡em
>

15 
	~<unÜd”ed_m­
>

17 
	~<g‘İt.h
>

19 
	~"li¡db/commÚ.h
"

20 
	~"li¡db/cÜe/pmem_log.h
"

21 
	~"li¡db/db_ş›Á.h
"

22 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

23 
	~"li¡db/šdex/lockä“_skli¡.h
"

24 
	~"li¡db/lib/numa.h
"

25 
	~"li¡db/li¡db.h
"

26 
	~"li¡db/lsm/bË.h
"

27 
	~"li¡db/lsm/bË_li¡.h
"

28 
	~"li¡db/ut.h
"

29 
	~"li¡db/ut/¿ndom.h
"

33 
	#LOAD_FILE
 "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_10M_1M_zf/ycsbkey_lßd_wÜklßdc_zf"

	)

34 
	#WORK_FILE
 "/home/wkim/RECIPE/šdex-miüob’ch/wÜklßds_10M_1M_zf/ycsbkey_run_wÜklßdc_zf"

	)

36 
cÚ¡ex´
 
	gNUM_THREADS
 = 40;

37 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 10 * 1000 * 1000;

38 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 1 * 1000 * 1000;

40 
cÚ¡ex´
 
	gNUM_SHARDS
 = 
kNumSh¬ds
;

42 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

44 
	eOpTy³
 {

45 
	mOP_INSERT
,

46 
	mOP_UPDATE
,

47 
	mOP_READ
,

48 
	mOP_SCAN
,

49 
	mOP_DELETE
,

52 
	$drİ_ÿche
() {

54 
size
 = 256*1024*1024;

55 *
g¬bage
 = 
Ãw
 [
size
];

56 
i
=0;i<
size
;++i)

57 
g¬bage
[
i
] = i;

58 
i
=100;i<
size
;++i)

59 
g¬bage
[
i
] += garbage[i-100];

60 
d–‘e
[] 
g¬bage
;

61 
	}
}

63 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
Key
>* 
lßd_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

64 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

65 
size_t
 
	gcouÁ
 = 0;

66 
size_t
 
	g•och
 = 10;

67 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

68 
	g¡d
::
¡ršg
 
İ
;

69 
	g¡d
::
¡ršg
 
key
;

70 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

71 ià(
	gİ
 == "INSERT") {

72 
lßd_keys
->
em¶aû_back
(
key
);

74 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

75 
ex™
(1);

77 
	gcouÁ
++;

78 ià(
	gcouÁ
 % 
	g•och
 == 0) {

79 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

80 
fæush
(
¡dout
);

81 ià(
	gcouÁ
 =ğ
•och
 * 100) {

82 
•och
 *= 10;

86 
	gi¡rm
.
şo£
();

87 ià(
	gcouÁ
 !ğ
num_lßds
) {

88 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

89 
ex™
(1);

91 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

94 
FlWÜkKeys
(cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

95 
¡d
::
veùÜ
<
Key
>* 
wÜk_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

96 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

97 
size_t
 
	gcouÁ
 = 0;

98 
size_t
 
	g•och
 = 10;

99 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

100 
	g¡d
::
¡ršg
 
İ
;

101 
	g¡d
::
¡ršg
 
key
;

102 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

103 ià(
	gİ
 == "INSERT") {

104 
wÜk_İs
->
push_back
(
OP_INSERT
);

105 
	gwÜk_keys
->
em¶aû_back
(
key
);

106 } ià(
	gİ
 == "UPDATE") {

107 
wÜk_İs
->
push_back
(
OP_UPDATE
);

108 
	gwÜk_keys
->
em¶aû_back
(
key
);

109 } ià(
	gİ
 == "READ") {

110 
wÜk_İs
->
push_back
(
OP_READ
);

111 
	gwÜk_keys
->
em¶aû_back
(
key
);

113 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

114 
ex™
(1);

116 
	gcouÁ
++;

117 ià(
	gcouÁ
 % 
	g•och
 == 0) {

118 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

119 
fæush
(
¡dout
);

120 ià(
	gcouÁ
 =ğ
•och
 * 100) {

121 
•och
 *= 10;

125 
	gi¡rm
.
şo£
();

126 ià(
	gcouÁ
 !ğ
num_wÜks
) {

127 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

128 
ex™
(1);

130 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: \x1b[32mDONE (couÁ: %zu)\x1b[0m\n", 
couÁ
);

133 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
Key
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

134 cÚ¡ 
¡d
::
veùÜ
<
Key
>& 
wÜk_keys
) {

135 
årštf
(
¡dout
, "==ğLi¡DB (%d-sh¬dè===\n", 
num_sh¬ds
);

137 
Li¡DB
* 
	gdb
 = 
Ãw
 ListDB();

138 
	gdb
->
In™
();

142 
´štf
("Lßd %zu i‹ms\n", 
NUM_LOADS
);

144 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

145 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

146 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

147 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

148 
	glßd”s
.
em¶aû_back
([&, 
id
] {

149 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

150 
r
 = 
G‘Ch
();

151 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

153 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

154 
ş›Á
->
PutSŒšgKV
(
lßd_keys
[
i
].
d©a
(),†oad_keys[i].data());

158 auto& 
	gt
 : 
lßd”s
) {

159 
t
.
još
();

161 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

162 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

163 
	gdur_£c
 = 
dur
.
couÁ
();

164 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

166 
årštf
(
¡dout
, "\n");

168 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(3));

169 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

170 
	gdb
->
Mªu®FlushMemTabË
(
i
);

172 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(35));

173 
	gdb
->
PrštDebugLsmS‹
(0);

177 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

180 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

181 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

182 #ifdeà
COUNT_FOUND


183 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

185 
	g¡d
::
veùÜ
<
size_t
> 
pmem_g‘_út
(
num_th»ads
);

186 
	g¡d
::
veùÜ
<
size_t
> 
£¬ch_vis™_út
(
num_th»ads
);

187 
	g¡d
::
veùÜ
<
size_t
> 
height_vis™_út
[
kMaxHeight
];

188 
	gi
 = 0; i < 
	gkMaxHeight
; i++) {

189 
	gheight_vis™_út
[
i
].
»£rve
(
num_th»ads
);

190 
	gj
 = 0; j < 
	gnum_th»ads
; j++) {

191 
	gheight_vis™_út
[
i
][
j
] = 0;

194 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

195 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

196 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

197 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

198 
r
 = 
G‘Ch
();

199 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

201 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

203 ià(
wÜk_İs
[
i
] =ğ
OP_INSERT
 || wÜk_İs[i] =ğ
OP_UPDATE
) {

204 
ş›Á
->
PutSŒšgKV
(
wÜk_keys
[
i
].
d©a
(), work_keys[i].data());

205 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

206 
ušt64_t
 
v®_»ad
;

207 #iâdeà
COUNT_FOUND


208 [[
maybe_unu£d
]]‡utØ
»t
 = 
ş›Á
->
G‘SŒšgKV
(
wÜk_keys
[
i
].
d©a
(), &
v®_»ad
);

210 autØ
»t
 = 
ş›Á
->
G‘
(
wÜk_keys
[
i
].
d©a
(), &
v®_»ad
);

211 ià(
»t
è
út
[
id
]++;

214 ià(
»t
) {

215 
PmemPŒ
 
v®ue_·ddr
(
v®_»ad
);

216 * 
v®ue_buf
 = (*è
v®ue_·ddr
.
g‘
();

217 
¡d
::
¡ršg_v›w
 
v®ue_sv
(
v®ue_buf
 + 8, *((
size_t
*) value_buf));

218 
årštf
(
¡dout
, "key: %s, v®ue: %s\n", 
wÜk_keys
[
i
].
d©a
(), 
v®ue_sv
.data());

225 
pmem_g‘_út
[
id
] = 
ş›Á
->pmem_get_cnt();

226 
£¬ch_vis™_út
[
id
] = 
ş›Á
->search_visit_cnt();

227 
h
 = 0; h < 
kMaxHeight
; h++) {

228 
height_vis™_út
[
h
][
id
] = 
ş›Á
->height_visit_cnt(h);

232 auto& 
	gt
 : 
wÜk”s
) {

233 
t
.
još
();

235 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

236 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

237 
	gdur_£c
 = 
dur
.
couÁ
();

238 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

239 #ifdeà
COUNT_FOUND


240 
	gút_sum
 = 0;

241 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

242 
	gút_sum
 +ğ
út
[
i
];

244 
årštf
(
¡dout
, "Found %d\n", 
út_sum
);

247 
size_t
 
	gpmem_g‘_út_tÙ®
 = 0;

248 
size_t
 
	g£¬ch_vis™_út_tÙ®
 = 0;

249 
size_t
 
	gheight_vis™_út_tÙ®
[
kMaxHeight
] = {};

250 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

251 
	gpmem_g‘_út_tÙ®
 +ğ
pmem_g‘_út
[
i
];

252 
	g£¬ch_vis™_út_tÙ®
 +ğ
£¬ch_vis™_út
[
i
];

253 
	gh
 = 0; h < 
	gkMaxHeight
; h++) {

254 
	gheight_vis™_út_tÙ®
[
h
] +ğ
height_vis™_út
[h][
i
];

257 
årštf
(
¡dout
, "Numb” oàqu”› çÎ’ backØpmem s—rch: %zu\n", 
pmem_g‘_út_tÙ®
);

258 
årštf
(
¡dout
, "Pmem‚odvis™ couÁ fÜ qu”› çÎ’ backØpmem s—rch: %zu\n", 
£¬ch_vis™_út_tÙ®
);

259 
årštf
(
¡dout
, "Avg. Pmem‚odvis™ couÁ…” qu”y f®ËÀbackØpmem s—rch: %.3lf\n", (è
£¬ch_vis™_út_tÙ®
 / 
pmem_g‘_út_tÙ®
);

260 
	gh
 = 0; h < 
	gkMaxHeight
; h++) {

261 
årštf
(
¡dout
, "height: %d - Avg. Pmem‚odvis™ couÁ…” qu”y f®ËÀbackØpmem s—rch: %.3lf\n", 
h
 + 1, (è
height_vis™_út_tÙ®
[h] / 
pmem_g‘_út_tÙ®
);

263 #ifdeà
LISTDB_L1_LRU


264 
årštf
(
¡dout
, "DRAM COPY LAYER SIZE = %zu\n", 
db
->
tÙ®_sÜ‹d_¬r_size
());

267 
årštf
(
¡dout
, "\n");

268 
d–‘e
 
	gdb
;

271 
P¬£CLA
(
¬gc
, * 
¬gv
[], 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg>* 
´İs
) {

272 
İtiÚ
 
lÚg_İtiÚs
[] = {

273 { "num_th»ads", 
»quœed_¬gum’t
, 0, 0 },

274 { "num_sh¬ds", 
»quœed_¬gum’t
, 0, 0 },

275 { "»ad_¿tio", 
»quœed_¬gum’t
, 0, 0 },

278 cÚ¡ * 
	gİt¡ršg
 = "";

279 
	gc
;

280 
	gi
;

281 (
	gc
 = 
g‘İt_lÚg
(
¬gc
, 
¬gv
, 
İt¡ršg
, 
lÚg_İtiÚs
, &
i
)) != -1) {

282 
c
) {

284 ià(
lÚg_İtiÚs
[
i
].
æag
 != 0) {

287 
	g´İs
->
em¶aû
(
lÚg_İtiÚs
[
i
].
Çme
, 
İrg
);

291 
abÜt
();

297 
	$maš
(
¬gc
, * 
¬gv
[]) {

298 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg> 
´İs
;

299 
	`P¬£CLA
(
¬gc
, 
¬gv
, &
´İs
);

300 
num_th»ads
 = 
NUM_THREADS
;

301 
num_sh¬ds
 = 
NUM_SHARDS
;

302 
»ad_¿tio
 = 100;

303 auto& 
™
 : 
´İs
) {

304 
¡d
::
cout
 << 
™
.
fœ¡
 << ": " << it.
£cÚd
 << std::
’dl
;

305 ià(
™
.
fœ¡
 == "num_threads") {

306 
num_th»ads
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

307 } ià(
™
.
fœ¡
 == "num_shards") {

308 
num_sh¬ds
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

309 } ià(
™
.
fœ¡
 == "read_ratio") {

310 
»ad_¿tio
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

314 
	`årštf
(
¡dout
, "num_th»ads=%d\Ä—d_¿tio=%d\n", 
num_th»ads
, 
»ad_¿tio
);

316 
Numa
::
	`In™
();

317 
¡d
::
veùÜ
<
Key
> 
lßd_keys
;

318 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

319 
¡d
::
veùÜ
<
Key
> 
wÜk_keys
;

320 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

321 
wÜk_İs
.
	`»£rve
(
NUM_WORKS
);

322 
wÜk_keys
.
	`»£rve
(
NUM_WORKS
);

323 
	`FlLßdKeys
(
NUM_LOADS
, &
lßd_keys
, 
LOAD_FILE
);

324 
	`FlWÜkKeys
(
NUM_WORKS
, &
wÜk_İs
, &
wÜk_keys
, 
WORK_FILE
);

326 
	`Run2
(
num_th»ads
, 
num_sh¬ds
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

329 
	}
}

331 
	~<io¡»am
>

332 
	$maš
(
¬gc
, * 
¬gv
[]) {

333 
¡d
::
û¼
 << "Compile with both LISTDB_STRING_KEY‡nd LISTDB_WISCKEY defined: cmake .. -DSTRING_KEY=ON -DWISCKEY=ON\n";

335 
	}
}

	@ubench/tune_l1.cc

1 
	~<chrÚo
>

2 
	~<c¡dio
>

3 
	~<f¡»am
>

4 
	~<futu»
>

5 
	~<io¡»am
>

6 
	~<m­
>

7 
	~<s¡»am
>

8 
	~<¡ršg
>

9 
	~<sh¬ed_mu‹x
>

10 
	~<th»ad
>

11 
	~<veùÜ
>

12 
	~<ex³rim’l/fesy¡em
>

13 
	~<unÜd”ed_m­
>

15 
	~<g‘İt.h
>

17 
	~"li¡db/commÚ.h
"

18 
	~"li¡db/cÜe/pmem_log.h
"

19 
	~"li¡db/db_ş›Á.h
"

20 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

21 
	~"li¡db/šdex/lockä“_skli¡.h
"

22 
	~"li¡db/lib/numa.h
"

23 
	~"li¡db/li¡db.h
"

24 
	~"li¡db/lsm/bË.h
"

25 
	~"li¡db/lsm/bË_li¡.h
"

26 
	~"li¡db/ut.h
"

27 
	~"li¡db/ut/¿ndom.h
"

29 
cÚ¡ex´
 
	gNUM_THREADS
 = 40;

30 
cÚ¡ex´
 
size_t
 
	gNUM_LOADS
 = 80 * 1000 * 1000;

31 
cÚ¡ex´
 
size_t
 
	gNUM_WORKS
 = 1 * 1000 * 1000;

33 
	#QUERY_DISTRIBUTION
 "unif"

	)

36 
cÚ¡ex´
 
	gNUM_SHARDS
 = 
kNumSh¬ds
;

38 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

40 
	eOpTy³
 {

41 
	mOP_INSERT
,

42 
	mOP_UPDATE
,

43 
	mOP_READ
,

44 
	mOP_SCAN
,

45 
	mOP_DELETE
,

48 
	$drİ_ÿche
() {

50 
size
 = 256*1024*1024;

51 *
g¬bage
 = 
Ãw
 [
size
];

52 
i
=0;i<
size
;++i)

53 
g¬bage
[
i
] = i;

54 
i
=100;i<
size
;++i)

55 
g¬bage
[
i
] += garbage[i-100];

56 
d–‘e
[] 
g¬bage
;

57 
	}
}

59 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

60 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

61 
size_t
 
	gcouÁ
 = 0;

62 
size_t
 
	g•och
 = 10;

63 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

64 
	g¡d
::
¡ršg
 
İ
;

65 
ušt64_t
 
	gkey
;

66 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

67 ià(
	gİ
 == "INSERT") {

68 
lßd_keys
->
push_back
(
key
);

70 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

71 
ex™
(1);

73 
	gcouÁ
++;

74 ià(
	gcouÁ
 % 
	g•och
 == 0) {

75 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

76 
fæush
(
¡dout
);

77 ià(
	gcouÁ
 =ğ
•och
 * 100) {

78 
•och
 *= 10;

82 
	gi¡rm
.
şo£
();

83 ià(
	gcouÁ
 !ğ
num_lßds
) {

84 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

85 
ex™
(1);

87 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

90 
FlWÜkKeys
(cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

91 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

92 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

93 
size_t
 
	gcouÁ
 = 0;

94 
size_t
 
	g•och
 = 10;

95 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

96 
	g¡d
::
¡ršg
 
İ
;

97 
ušt64_t
 
	gkey
;

98 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

99 ià(
	gİ
 == "INSERT") {

100 
wÜk_İs
->
push_back
(
OP_INSERT
);

101 
	gwÜk_keys
->
push_back
(
key
);

102 } ià(
	gİ
 == "UPDATE") {

103 
wÜk_İs
->
push_back
(
OP_UPDATE
);

104 
	gwÜk_keys
->
push_back
(
key
);

105 } ià(
	gİ
 == "READ") {

106 
wÜk_İs
->
push_back
(
OP_READ
);

107 
	gwÜk_keys
->
push_back
(
key
);

109 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

110 
ex™
(1);

112 
	gcouÁ
++;

113 ià(
	gcouÁ
 % 
	g•och
 == 0) {

114 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

115 
fæush
(
¡dout
);

116 ià(
	gcouÁ
 =ğ
•och
 * 100) {

117 
•och
 *= 10;

121 
	gi¡rm
.
şo£
();

122 ià(
	gcouÁ
 !ğ
num_wÜks
) {

123 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

124 
ex™
(1);

126 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: \x1b[32mDONE (couÁ: %zu)\x1b[0m\n", 
couÁ
);

129 
FlLßdKeysR—dR©io
(cÚ¡ 
size_t
 
num_lßds
, cÚ¡ size_ˆ
num_wÜks
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
, 
»ad_¿tio
) {

130 
	g¡d
::
¡ršg¡»am
 
ss
;

131 
	gss
 << "/home/wkim/RECIPE/index-microbench/workloads_rw_ratio_unif/";

132 
	gss
 << "lßd_r" << 
	g»ad_¿tio
 << "_unif_št_" << (
	gnum_lßds
 / 1000 / 1000è<< "M_" << (
	gnum_wÜks
 / 1000 / 1000) << "M";

133 
FlLßdKeys
(
num_lßds
, 
lßd_keys
, 
ss
.
¡r
());

136 
FlWÜkKeysR—dR©io
(cÚ¡ 
size_t
 
num_lßds
, cÚ¡ size_ˆ
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

137 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
, 
»ad_¿tio
) {

138 
	g¡d
::
¡ršg¡»am
 
ss
;

139 
	gss
 << "/home/wkim/RECIPE/index-microbench/workloads_rw_ratio_unif/";

140 
	gss
 << "run_r" << 
	g»ad_¿tio
 << "_unif_št_" << (
	gnum_lßds
 / 1000 / 1000è<< "M_" << (
	gnum_wÜks
 / 1000 / 1000) << "M";

141 
FlWÜkKeys
(
num_wÜks
, 
wÜk_İs
, 
wÜk_keys
, 
ss
.
¡r
());

144 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_bË
[
kNumRegiÚs
];

145 
	gpoŞ_id_bË
[
kNumRegiÚs
];

147 
	$In™PoŞS‘
() {

149 
i
 = 0; i < 
kNumRegiÚs
; i++) {

150 
¡d
::
¡ršg¡»am
 
pss
;

151 
pss
 << "/pmem" << 
i
 << "/wkim/pmem_log_test";

152 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

153 
fs
::
	`»move_®l
(
·th
);

154 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

156 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

157 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

158 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

159 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

160 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

161 
¡rm
.
	`şo£
();

163 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

164 
poŞ_bË
[
i
] = 
Pmem
::
poŞ
<
pmem_log_roÙ
>(
id
);

165 
poŞ_id_bË
[
i
] = 
id
;

167 
	}
}

169 
Run1
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

170 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

171 
årštf
(
¡dout
, "==ğB¿idedPmemSkLi¡ (%d-sh¬dè===\n", 
num_sh¬ds
);

173 
In™PoŞS‘
();

174 
B¿idedPmemSkLi¡
* 
	gskli¡
[
num_sh¬ds
];

175 
PmemLog
* 
	g¬’a
[
num_sh¬ds
][
kNumRegiÚs
];

176 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

177 autØ
	g¦
 = 
Ãw
 
B¿idedPmemSkLi¡
(
poŞ_id_bË
[0]);

178 
	gj
 = 0; j < 
	gkNumRegiÚs
; j++) {

179 
	g¬’a
[
i
][
j
] = 
Ãw
 
PmemLog
(
poŞ_id_bË
[j], i);

180 
	g¦
->
BšdA»Ç
(
poŞ_id_bË
[
j
], 
¬’a
[
i
][j]);

182 
	g¦
->
In™
();

183 
	gskli¡
[
i
] = 
¦
;

186 
usšg
 
	gNode
 = 
B¿idedPmemSkLi¡
::
Node
;

190 
´štf
("Lßd %zu i‹ms\n", 
NUM_LOADS
);

191 
drİ_ÿche
();

192 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

193 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

194 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

195 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

196 
	glßd”s
.
em¶aû_back
([&, 
id
] {

197 
Rªdom
 
ºd
(
id
);

198 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

199 
r
 = 
G‘Ch
();

201 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

202 cÚ¡ 
kB¿nchšg
 = 4;

203 
height
 = 2;

206 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

207 
height
++;

212 
size_t
 
node_size
 = (
Node
è+ (
height
-1)*(
ušt64_t
);

214 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

217 autØ
node_·ddr
 = 
¬’a
[
s
][
r
]->
AÎoÿ‹
(
node_size
);

218 
Node
* 
node
 = (Node*è
node_·ddr
.
g‘
();

220 autØ
poŞ
 = 
Pmem
::poŞ<
pmem_log_roÙ
>(
r
);

221 
pmem
::
obj
::
³rsi¡’t_±r
<[]> 
p_buf
;

222 
pmem
::
obj
::
make_³rsi¡’t_©omic
<[]>(
poŞ
, 
p_buf
, 
node_size
);

223 
Node
* 
node
 = (Node*è
p_buf
.
g‘
();

224 
PmemPŒ
 
node_·ddr
 = PmemPŒ(
r
, ((
ušŒ_t
è
node
 - (ušŒ_tè
poŞ
.
hªdË
()));

227 
node
->
key
 = 
lßd_keys
[
i
];

228 
node
->
g
 = 
height
;

229 
node
->
v®ue
 = 
lßd_keys
[
i
];

230 
skli¡
[
s
]->
In£¹
(
node_·ddr
);

252 auto& 
	gt
 : 
lßd”s
) {

253 
t
.
još
();

255 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

256 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

257 
	gdur_£c
 = 
dur
.
couÁ
();

258 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

260 
årštf
(
¡dout
, "\n");

264 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

266 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

267 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

268 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

269 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

270 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

271 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

272 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

273 
r
 = 
G‘Ch
();

275 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

276 
s
 = 
wÜk_keys
[
i
] % 
num_sh¬ds
;

277 
skli¡
[
s
]->
Lookup
(
wÜk_keys
[
i
], 
r
);

301 auto& 
	gt
 : 
wÜk”s
) {

302 
t
.
još
();

304 
	gút_sum
 = 0;

305 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

306 
	gút_sum
 +ğ
út
[
i
];

308 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

309 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

310 
	gdur_£c
 = 
dur
.
couÁ
();

311 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

314 
årštf
(
¡dout
, "\n");

317 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

318 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

319 
årštf
(
¡dout
, "==ğlockä“_skli¡ (%d-sh¬dè===\n", 
num_sh¬ds
);

321 
lockä“_skli¡
 
	gskli¡
[
num_sh¬ds
];

322 
usšg
 
	gNode
 = 
lockä“_skli¡
::
Node
;

326 
drİ_ÿche
();

327 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

328 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

329 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_LOADS
 / 
num_th»ads
;

330 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

331 
	glßd”s
.
em¶aû_back
([&, 
id
] {

332 
Rªdom
 
ºd
(
id
);

333 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

334 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

335 cÚ¡ 
kB¿nchšg
 = 4;

336 
height
 = 1;

337 
height
 < 
kMaxHeight
 && ((
ºd
.
Next
(è% 
kB¿nchšg
) == 0)) {

338 
height
++;

340 cÚ¡ 
size_t
 
®loc_size
 = 
Node
::
compu‹_®loc_size
(
lßd_keys
[
i
], 
height
);

342 
s
 = 
lßd_keys
[
i
] % 
num_sh¬ds
;

344 * 
buf
 = 
®igÃd_®loc
(8, 
®loc_size
);

345 
Node
* 
node
 = Node::
š™_node
((*è
buf
, 
lßd_keys
[
i
], 0, 
kTy³V®ue
, 
height
, 0);

347 
skli¡
[
s
].
In£¹
(
node
);

351 auto& 
	gt
 : 
lßd”s
) {

352 
t
.
još
();

354 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

355 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

356 
	gdur_£c
 = 
dur
.
couÁ
();

357 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
NUM_LOADS
/
dur_£c
/1000000);

362 
´štf
("WORK %zu qu”›s\n", 
NUM_WORKS
);

363 
drİ_ÿche
();

364 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

365 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

366 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

367 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
NUM_WORKS
 / 
num_th»ads
;

368 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

369 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

370 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

373 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

374 
s
 = 
wÜk_keys
[
i
] % 
num_sh¬ds
;

375 
skli¡
[
s
].
Lookup
(
wÜk_keys
[
i
]);

379 auto& 
	gt
 : 
wÜk”s
) {

380 
t
.
još
();

382 
	gút_sum
 = 0;

383 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

384 
	gút_sum
 +ğ
út
[
i
];

386 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

387 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

388 
	gdur_£c
 = 
dur
.
couÁ
();

389 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
NUM_WORKS
/
dur_£c
/1000000);

392 
årštf
(
¡dout
, "\n");

395 
P¬£CLA
(
¬gc
, * 
¬gv
[], 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg>* 
´İs
) {

396 
İtiÚ
 
lÚg_İtiÚs
[] = {

397 { "num_th»ads", 
»quœed_¬gum’t
, 0, 0 },

398 { "num_sh¬ds", 
»quœed_¬gum’t
, 0, 0 },

401 cÚ¡ * 
	gİt¡ršg
 = "";

402 
	gc
;

403 
	gi
;

404 (
	gc
 = 
g‘İt_lÚg
(
¬gc
, 
¬gv
, 
İt¡ršg
, 
lÚg_İtiÚs
, &
i
)) != -1) {

405 
c
) {

407 ià(
lÚg_İtiÚs
[
i
].
æag
 != 0) {

410 
	g´İs
->
em¶aû
(
lÚg_İtiÚs
[
i
].
Çme
, 
İrg
);

414 
abÜt
();

420 
	$maš
(
¬gc
, * 
¬gv
[]) {

421 
¡d
::
unÜd”ed_m­
<¡d::
¡ršg
, std::¡ršg> 
´İs
;

422 
	`P¬£CLA
(
¬gc
, 
¬gv
, &
´İs
);

423 
num_th»ads
 = 
NUM_THREADS
;

424 
num_sh¬ds
 = 
NUM_SHARDS
;

425 auto& 
™
 : 
´İs
) {

426 
¡d
::
cout
 << 
™
.
fœ¡
 << ": " << it.
£cÚd
 << std::
’dl
;

427 ià(
™
.
fœ¡
 == "num_threads") {

428 
num_th»ads
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

429 } ià(
™
.
fœ¡
 == "num_shards") {

430 
num_sh¬ds
 = 
¡d
::
	`¡oi
(
™
.
£cÚd
);

433 
Numa
::
	`In™
();

434 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

435 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

436 
¡d
::
veùÜ
<
ušt64_t
> 
wÜk_keys
;

437 
lßd_keys
.
	`»£rve
(
NUM_LOADS
);

438 
wÜk_İs
.
	`»£rve
(
NUM_WORKS
);

439 
wÜk_keys
.
	`»£rve
(
NUM_WORKS
);

440 cÚ¡ 
»ad_¿tio
 = 100;

441 
	`FlLßdKeysR—dR©io
(
NUM_LOADS
, 
NUM_WORKS
, &
lßd_keys
, 
»ad_¿tio
);

442 
	`FlWÜkKeysR—dR©io
(
NUM_LOADS
, 
NUM_WORKS
, &
wÜk_İs
, &
wÜk_keys
, 
»ad_¿tio
);

444 
	`Run1
(
num_th»ads
, 
num_sh¬ds
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

449 
	}
}

	@ubench/ycsb_index_microbench.cc

1 
	~<chrÚo
>

2 
	~<c¡dio
>

3 
	~<f¡»am
>

4 
	~<futu»
>

5 
	~<io¡»am
>

6 
	~<m­
>

7 
	~<s¡»am
>

8 
	~<¡ršg
>

9 
	~<sh¬ed_mu‹x
>

10 
	~<th»ad
>

11 
	~<veùÜ
>

12 
	~<ex³rim’l/fesy¡em
>

13 
	~<unÜd”ed_m­
>

15 
	~<g‘İt.h
>

17 
	~<gæags/gæags.h
>

19 
	~"li¡db/commÚ.h
"

20 
	~"li¡db/cÜe/pmem_log.h
"

21 
	~"li¡db/db_ş›Á.h
"

22 
	~"li¡db/šdex/b¿ided_pmem_skli¡.h
"

23 
	~"li¡db/šdex/lockä“_skli¡.h
"

24 
	~"li¡db/lib/numa.h
"

25 
	~"li¡db/li¡db.h
"

26 
	~"li¡db/lsm/bË.h
"

27 
	~"li¡db/lsm/bË_li¡.h
"

28 
	~"li¡db/ut.h
"

29 
	~"li¡db/ut/¿ndom.h
"

31 
DEFINE_¡ršg
(
wÜklßd
, "c", "ycsb‡ b c d ");

33 
DEFINE_¡ršg
(
qu”y_di¡
, "zipfian", "uniform zipfian");

35 
DEFINE_št64
(
lßds
, 100'000'000, "Number of key/valueso…lace in database");

37 
DEFINE_št64
(
wÜks
, 10'000'000, "Number of„ead operationso do. "

40 
DEFINE_št32
(
th»ads
, 80, "Number of concurrenthreadso„un.");

42 
DEFINE_št32
(
sh¬ds
, 
kNumSh¬ds
, "num shards");

45 
DEFINE_¡ršg
(
lßd_hi¡Üy_fe
, "", "query history file");

47 
DEFINE_¡ršg
(
wÜk_hi¡Üy_fe
, "", "query history file");

50 
DEFINE_¡ršg
(
»pÜt_fe
, "", "report_file");

52 
DEFINE_boŞ
(
lßd_Úly
, 
çl£
, "load only");

54 
DEFINE_¡ršg
(
wÜklßd_dœ
, "", "example) ~/RECIPE/index-microbench/workloads_100M_10M_zipf");

56 
DEFINE_¡ršg
(
bšd_ty³
, "cpu_numa_rr", "workerhread bindype: <cpu_numa_rr|numa_rr>");

60 
Çme¥aû
 
	gfs
 = 
¡d
::
ex³rim’l
::
fesy¡em
::
v1
;

62 
	eOpTy³
 {

63 
	mOP_INSERT
,

64 
	mOP_UPDATE
,

65 
	mOP_READ
,

66 
	mOP_SCAN
,

67 
	mOP_DELETE
,

70 
	$drİ_ÿche
() {

72 
size
 = 256*1024*1024;

73 *
g¬bage
 = 
Ãw
 [
size
];

74 
i
=0;i<
size
;++i)

75 
g¬bage
[
i
] = i;

76 
i
=100;i<
size
;++i)

77 
g¬bage
[
i
] += garbage[i-100];

78 
d–‘e
[] 
g¬bage
;

79 
	}
}

81 
FlLßdKeys
(cÚ¡ 
size_t
 
num_lßds
, 
¡d
::
veùÜ
<
ušt64_t
>* 
lßd_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

82 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

83 
size_t
 
	gcouÁ
 = 0;

84 
size_t
 
	g•och
 = 10;

85 (
	gcouÁ
 < 
	gnum_lßds
è&& 
	gi¡rm
.
good
()) {

86 
	g¡d
::
¡ršg
 
İ
;

87 
ušt64_t
 
	gkey
;

88 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

89 ià(
	gİ
 == "INSERT") {

90 
lßd_keys
->
push_back
(
key
);

92 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

93 
ex™
(1);

95 
	gcouÁ
++;

96 ià(
	gcouÁ
 % 
	g•och
 == 0) {

97 
årštf
(
¡dout
, "\rFlšg u°lßd qu”›s: %zu%%", 
couÁ
*100/
num_lßds
);

98 
fæush
(
¡dout
);

99 ià(
	gcouÁ
 =ğ
•och
 * 100) {

100 
•och
 *= 10;

104 
	gi¡rm
.
şo£
();

105 ià(
	gcouÁ
 !ğ
num_lßds
) {

106 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_lßds
 << ")" << std::
’dl
;

107 
ex™
(1);

109 
årštf
(
¡dout
, "\rFilling up†oad queries: \x1b[32mDONE\x1b[0m\n");

112 
FlWÜkKeys
(cÚ¡ 
size_t
 
num_wÜks
, 
¡d
::
veùÜ
<
OpTy³
>* 
wÜk_İs
,

113 
¡d
::
veùÜ
<
ušt64_t
>* 
wÜk_keys
, cÚ¡ std::
¡ršg
& 
f’ame
) {

114 
¡d
::
if¡»am
 
i¡rm
(
f’ame
);

115 
size_t
 
	gcouÁ
 = 0;

116 
size_t
 
	g•och
 = 10;

117 (
	gcouÁ
 < 
	gnum_wÜks
è&& 
	gi¡rm
.
good
()) {

118 
	g¡d
::
¡ršg
 
İ
;

119 
ušt64_t
 
	gkey
;

120 
	gi¡rm
 >> 
	gİ
 >> 
	gkey
;

121 ià(
	gİ
 == "INSERT") {

122 
wÜk_İs
->
push_back
(
OP_INSERT
);

123 
	gwÜk_keys
->
push_back
(
key
);

124 } ià(
	gİ
 == "UPDATE") {

125 
wÜk_İs
->
push_back
(
OP_UPDATE
);

126 
	gwÜk_keys
->
push_back
(
key
);

127 } ià(
	gİ
 == "READ") {

128 
wÜk_İs
->
push_back
(
OP_READ
);

129 
	gwÜk_keys
->
push_back
(
key
);

131 
	g¡d
::
cout
 << "Inv®id op: " << 
İ
 << 
¡d
::
’dl
;

132 
ex™
(1);

134 
	gcouÁ
++;

135 ià(
	gcouÁ
 % 
	g•och
 == 0) {

136 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: %zu%%", 
couÁ
*100/
num_wÜks
);

137 
fæush
(
¡dout
);

138 ià(
	gcouÁ
 =ğ
•och
 * 100) {

139 
•och
 *= 10;

143 
	gi¡rm
.
şo£
();

144 ià(
	gcouÁ
 !ğ
num_wÜks
) {

145 
¡d
::
cout
 << "NÙƒnough qu”› š fe: " << 
f’ame
 << " (" << 
couÁ
 << "/" << 
num_wÜks
 << ")" << std::
’dl
;

146 
ex™
(1);

148 
årštf
(
¡dout
, "\rFlšg u°wÜklßd qu”›s: \x1b[32mDONE (couÁ: %zu)\x1b[0m\n", 
couÁ
);

151 
	gpmem
::
obj
::
poŞ
<
pmem_log_roÙ
> 
poŞ_bË
[
kNumRegiÚs
];

152 
	gpoŞ_id_bË
[
kNumRegiÚs
];

154 
	$In™PoŞS‘
() {

156 
i
 = 0; i < 
kNumRegiÚs
; i++) {

157 
¡d
::
¡ršg¡»am
 
pss
;

158 
pss
 << "/pmem" << 
i
 << "/wkim/pmem_log_test";

159 
¡d
::
¡ršg
 
·th
 = 
pss
.
	`¡r
();

160 
fs
::
	`»move_®l
(
·th
);

161 
fs
::
	`ü—‹_dœeùÜ›s
(
·th
);

163 
¡d
::
¡ršg
 
poŞ£t
 = 
·th
 + ".set";

164 
¡d
::
f¡»am
 
	`¡rm
(
poŞ£t
, 
¡rm
.
out
);

165 
¡rm
 << "PMEMPOOLSET" << 
¡d
::
’dl
;

166 
¡rm
 << "OPTION SINGLEHDR" << 
¡d
::
’dl
;

167 
¡rm
 << "400G " << 
·th
 << "/" << 
¡d
::
’dl
;

168 
¡rm
.
	`şo£
();

170 
id
 = 
Pmem
::
BšdPoŞS‘
<
pmem_log_roÙ
>(
poŞ£t
, "");

171 
poŞ_bË
[
i
] = 
Pmem
::
poŞ
<
pmem_log_roÙ
>(
id
);

172 
poŞ_id_bË
[
i
] = 
id
;

174 
	}
}

177 
FlushHi¡ÜyFe
(
¡d
::
veùÜ
<
ušt64_t
>& 
hi¡
, ušt64_ˆ
begš_Çno
, 
št64_t
 
size
, std::
¡ršg
 
fe
) {

178 
¡d
::
cout
 << "FlushHistoryFile is‚ot implemented yet.\n";

182 
Run2
(cÚ¡ 
num_th»ads
, cÚ¡ 
num_sh¬ds
, cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
lßd_keys
, cÚ¡ std::veùÜ<
OpTy³
>& 
wÜk_İs
,

183 cÚ¡ 
¡d
::
veùÜ
<
ušt64_t
>& 
wÜk_keys
) {

184 
årštf
(
¡dout
, "==ğLi¡DB (%d-sh¬dè===\n", 
num_sh¬ds
);

186 
Li¡DB
* 
	gdb
 = 
Ãw
 ListDB();

187 
	gdb
->
In™
();

189 
R•Ü‹r
* 
	g»pÜ‹r
 = 
nuÎ±r
;

190 ià(
	gFLAGS_»pÜt_fe
 != "") {

191 
»pÜ‹r
 = 
db
->
G‘OrC»©eR•Ü‹r
(
FLAGS_»pÜt_fe
);

192 
	g»pÜ‹r
->
S¹
();

199 
	g¡d
::
veùÜ
<
ušt64_t
> 
lßd_time
;

200 
	g¡d
::
veùÜ
<
ušt64_t
> 
wÜk_time
;

201 
boŞ
 
	g»cÜd_lßd_hi¡Üy
 = (
FLAGS_lßd_hi¡Üy_fe
 =ğ""è? 
çl£
 : 
Œue
;

202 ià(
	g»cÜd_lßd_hi¡Üy
) {

203 
	glßd_time
.
»size
(
FLAGS_lßds
);

205 
boŞ
 
	g»cÜd_wÜk_hi¡Üy
 = (
FLAGS_wÜk_hi¡Üy_fe
 =ğ"" && !
FLAGS_lßd_Úly
è? 
çl£
 : 
Œue
;

206 ià(
	g»cÜd_wÜk_hi¡Üy
) {

207 
	gwÜk_time
.
»size
(
FLAGS_wÜks
);

211 şas 
	cCpuBšdTy³
 {

212 
	gkNÚe
,

213 
	gkCpuNumaRoundRobš
,

214 
	gkNumaRoundRobš


216 
CpuBšdTy³
 
	gbšd_ty³
;

219 
	g¡d
::
cout
 << "Thread bindype: ";

220 ià(
	gFLAGS_bšd_ty³
 == "cpu_numa_rr") {

221 
bšd_ty³
 = 
CpuBšdTy³
::
kCpuNumaRoundRobš
;

222 
	g¡d
::
cout
 << "CpuBindType::kCpuNumaRoundRobin";

223 } ià(
	gFLAGS_bšd_ty³
 == "numa_rr") {

224 
bšd_ty³
 = 
CpuBšdTy³
::
kNumaRoundRobš
;

225 
	g¡d
::
cout
 << "CpuBindType::kNumaRoundRobin";

227 
	gbšd_ty³
 = 
CpuBšdTy³
::
kNÚe
;

228 
	g¡d
::
cout
 << "CpuBindType::kNone";

230 
	g¡d
::
cout
 << 
¡d
::
’dl
;

234 
´štf
("Lßd %zu i‹ms\n", 
FLAGS_lßds
);

236 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

237 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
lßd”s
;

238 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
FLAGS_lßds
 / 
num_th»ads
;

239 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

240 
	glßd”s
.
em¶aû_back
([&, 
id
] {

241 ià(
bšd_ty³
 =ğ
CpuBšdTy³
::
kCpuNumaRoundRobš
) {

242 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

243 } ià(
bšd_ty³
 =ğ
CpuBšdTy³
::
kNumaRoundRobš
) {

244 
numa_run_Ú_node
(
id
 % 
kNumRegiÚs
);

246 
r
 = 
G‘Ch
();

247 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

249 
R•Ü‹rCl›Á
* 
»pÜ‹r_ş›Á
 = (
»pÜ‹r
 !ğ
nuÎ±r
è? 
Ãw
 ReporterClient(reporter) :‚ullptr;

251 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

252 
ş›Á
->
Put
(
lßd_keys
[
i
],†oad_keys[i]);

258 ià(
»pÜ‹r_ş›Á
 !ğ
nuÎ±r
) {

259 
»pÜ‹r_ş›Á
->
R•ÜtFšishedOps
(
R•Ü‹r
::
OpTy³
::
kPut
, 1);

262 
d–‘e
 
»pÜ‹r_ş›Á
;

265 auto& 
	gt
 : 
lßd”s
) {

266 
t
.
još
();

268 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

269 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

270 
	gdur_£c
 = 
dur
.
couÁ
();

271 
årštf
(
¡dout
, "Lßd IOPS: %.3làM\n", 
FLAGS_lßds
/
dur_£c
/1000000);

275 
	g¡d
::
¡ršg
 
æush_¡©
;

276 
	gdb
->
G‘StSŒšg
("æush_¡©s", &
æush_¡©
);

277 
årštf
(
¡dout
, "%s\n", 
æush_¡©
.
c_¡r
());

279 
årštf
(
¡dout
, "\n");

281 ià(!
	gFLAGS_lßd_Úly
) {

282 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(3));

283 
	gi
 = 0; i < 
	gnum_sh¬ds
; i++) {

284 
	gdb
->
Mªu®FlushMemTabË
(
i
);

286 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
£cÚds
(20));

287 
	gdb
->
PrštDebugLsmS‹
(0);

291 ià(!
	gFLAGS_lßd_Úly
) {

292 
´štf
("WORK %zu qu”›s\n", 
FLAGS_wÜks
);

295 autØ
	gbegš_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

296 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
wÜk”s
;

297 #ifdeà
COUNT_FOUND


298 
	g¡d
::
veùÜ
<> 
út
(
num_th»ads
);

300 
	g¡d
::
veùÜ
<
size_t
> 
pmem_g‘_út
(
num_th»ads
);

301 
	g¡d
::
veùÜ
<
size_t
> 
£¬ch_vis™_út
(
num_th»ads
);

302 
	g¡d
::
veùÜ
<
size_t
> 
height_vis™_út
[
kMaxHeight
];

303 
	gi
 = 0; i < 
	gkMaxHeight
; i++) {

304 
	gheight_vis™_út
[
i
].
»£rve
(
num_th»ads
);

305 
	gj
 = 0; j < 
	gnum_th»ads
; j++) {

306 
	gheight_vis™_út
[
i
][
j
] = 0;

309 cÚ¡ 
size_t
 
	gnum_İs_³r_th»ad
 = 
FLAGS_wÜks
 / 
num_th»ads
;

310 
	gid
 = 0; id < 
	gnum_th»ads
; id++) {

311 
	gwÜk”s
.
em¶aû_back
([&, 
id
] {

312 ià(
bšd_ty³
 =ğ
CpuBšdTy³
::
kCpuNumaRoundRobš
) {

313 
S‘Affš™y
(
Numa
::
CpuSequ’ûRR
(
id
));

314 } ià(
bšd_ty³
 =ğ
CpuBšdTy³
::
kNumaRoundRobš
) {

315 
numa_run_Ú_node
(
id
 % 
kNumRegiÚs
);

317 
r
 = 
G‘Ch
();

318 
DBCl›Á
* 
ş›Á
 = 
Ãw
 DBCl›Á(
db
, 
id
, 
r
);

320 
size_t
 
i
 = 
id
*
num_İs_³r_th»ad
; i < (id+1)*num_ops_per_thread; i++) {

322 ià(
wÜk_İs
[
i
] =ğ
OP_INSERT
 || wÜk_İs[i] =ğ
OP_UPDATE
) {

323 
ş›Á
->
Put
(
wÜk_keys
[
i
], work_keys[i]);

324 } ià(
wÜk_İs
[
i
] =ğ
OP_READ
) {

325 
ušt64_t
 
v®_»ad
;

326 #iâdeà
COUNT_FOUND


327 
ş›Á
->
G‘
(
wÜk_keys
[
i
], &
v®_»ad
);

329 autØ
»t
 = 
ş›Á
->
G‘
(
wÜk_keys
[
i
], &
v®_»ad
);

330 ià(
»t
è
út
[
id
]++;

336 
pmem_g‘_út
[
id
] = 
ş›Á
->pmem_get_cnt();

337 
£¬ch_vis™_út
[
id
] = 
ş›Á
->search_visit_cnt();

338 
h
 = 0; h < 
kMaxHeight
; h++) {

339 
height_vis™_út
[
h
][
id
] = 
ş›Á
->height_visit_cnt(h);

343 auto& 
	gt
 : 
wÜk”s
) {

344 
t
.
još
();

346 autØ
	g’d_
 = 
¡d
::
chrÚo
::
¡—dy_şock
::
now
();

347 
	g¡d
::
chrÚo
::
du¿tiÚ
<> 
dur
 = 
’d_
 - 
begš_
;

348 
	gdur_£c
 = 
dur
.
couÁ
();

349 
årštf
(
¡dout
, "WÜk IOPS: %.3làM\n", 
FLAGS_wÜks
/
dur_£c
/1000000);

350 #ifdeà
COUNT_FOUND


351 
	gút_sum
 = 0;

352 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

353 
	gút_sum
 +ğ
út
[
i
];

355 
årštf
(
¡dout
, "Found %d\n", 
út_sum
);

358 
size_t
 
	gpmem_g‘_út_tÙ®
 = 0;

359 
size_t
 
	g£¬ch_vis™_út_tÙ®
 = 0;

360 
size_t
 
	gheight_vis™_út_tÙ®
[
kMaxHeight
] = {};

361 
	gi
 = 0; i < 
	gnum_th»ads
; i++) {

362 
	gpmem_g‘_út_tÙ®
 +ğ
pmem_g‘_út
[
i
];

363 
	g£¬ch_vis™_út_tÙ®
 +ğ
£¬ch_vis™_út
[
i
];

364 
	gh
 = 0; h < 
	gkMaxHeight
; h++) {

365 
	gheight_vis™_út_tÙ®
[
h
] +ğ
height_vis™_út
[h][
i
];

368 
årštf
(
¡dout
, "Numb” oàqu”› çÎ’ backØpmem s—rch: %zu\n", 
pmem_g‘_út_tÙ®
);

369 
årštf
(
¡dout
, "Pmem‚odvis™ couÁ fÜ qu”› çÎ’ backØpmem s—rch: %zu\n", 
£¬ch_vis™_út_tÙ®
);

370 
årštf
(
¡dout
, "Avg. Pmem‚odvis™ couÁ…” qu”y f®ËÀbackØpmem s—rch: %.3lf\n", (è
£¬ch_vis™_út_tÙ®
 / 
pmem_g‘_út_tÙ®
);

371 
	gh
 = 0; h < 
	gkMaxHeight
; h++) {

372 
årštf
(
¡dout
, "height: %d - Avg. Pmem‚odvis™ couÁ…” qu”y f®ËÀbackØpmem s—rch: %.3lf\n", 
h
 + 1, (è
height_vis™_út_tÙ®
[h] / 
pmem_g‘_út_tÙ®
);

374 #ifdeà
LISTDB_L1_LRU


375 
årštf
(
¡dout
, "DRAM COPY LAYER SIZE = %zu\n", 
db
->
tÙ®_sÜ‹d_¬r_size
());

378 
årštf
(
¡dout
, "\n");

379 
	g¡d
::
¡ršg
 
buf
;

380 
	gdb
->
G‘StSŒšg
("l1_ÿche_size", &
buf
);

381 
årštf
(
¡dout
, "%s\n", 
buf
.
c_¡r
());

382 
d–‘e
 
	gdb
;

385 
	g¡d
::
¡ršg
 
	$G‘FeName
(cÚ¡ 
¡d
::
¡ršg
& 
ba£
, 
boŞ
 
is_lßd
, cÚ¡ std::¡ršg& 
ty³
, cÚ¡ std::¡ršg& 
qu”y_di¡
) {

386 
¡d
::
¡ršg_v›w
 
	`di¡_shÜt
(
qu”y_di¡
.
	`d©a
(), 4);

387 
¡d
::
¡ršg¡»am
 
ss
;

388 
ss
 << 
ba£
 << "/" << (
is_lßd
 ? "lßd" : "txns"è<< 
ty³
 << "_" << 
di¡_shÜt
 << "_int.dat";

389  
ss
.
	`¡r
();

390 
	}
}

392 
	$maš
(
¬gc
, * 
¬gv
[]) {

393 
googË
::
	`P¬£CommªdLšeFÏgs
(&
¬gc
, &
¬gv
, 
Œue
);

394 
num_th»ads
 = 
FLAGS_th»ads
;

395 
num_sh¬ds
 = 
FLAGS_sh¬ds
;

397 
Numa
::
	`In™
();

398 
¡d
::
veùÜ
<
ušt64_t
> 
lßd_keys
;

399 
¡d
::
veùÜ
<
OpTy³
> 
wÜk_İs
;

400 
¡d
::
veùÜ
<
ušt64_t
> 
wÜk_keys
;

401 
lßd_keys
.
	`»£rve
(
FLAGS_lßds
);

402 
wÜk_İs
.
	`»£rve
(
FLAGS_wÜks
);

403 
wÜk_keys
.
	`»£rve
(
FLAGS_wÜks
);

405 autØ
lßd_fe
 = 
	`G‘FeName
(
FLAGS_wÜklßd_dœ
, 
Œue
, 
FLAGS_wÜklßd
, 
FLAGS_qu”y_di¡
);

406 autØ
wÜk_fe
 = 
	`G‘FeName
(
FLAGS_wÜklßd_dœ
, 
çl£
, 
FLAGS_wÜklßd
, 
FLAGS_qu”y_di¡
);

407 
¡d
::
cout
 << 
lßd_fe
 << std::
’dl
;

408 
¡d
::
cout
 << 
wÜk_fe
 << std::
’dl
;

410 
	`FlLßdKeys
(
FLAGS_lßds
, &
lßd_keys
, 
lßd_fe
);

411 
	`FlWÜkKeys
(
FLAGS_wÜks
, &
wÜk_İs
, &
wÜk_keys
, 
wÜk_fe
);

413 
	`Run2
(
num_th»ads
, 
num_sh¬ds
, 
lßd_keys
, 
wÜk_İs
, 
wÜk_keys
);

416 
	}
}

	@util.h

1 #iâdeà
LISTDB_UTIL_H_


2 
	#LISTDB_UTIL_H_


	)

4 
Çme¥aû
 
	gut
 {

6 
šlše
 
size_t
 
AligÃdSize
(cÚ¡ size_ˆ
®ign
, cÚ¡ size_ˆ
size
) {

7 
	gmod
 = 
size
 % 
®ign
;

8  (
	gmod
 =ğ0è? 
size
 : siz+ (
®ign
 - 
mod
);

11 
šlše
 
ušt64_t
 
KeyNum
(cÚ¡ * 
buf
) {

12 
ušt64_t
 
	gnumb”
;

13 
	gnumb”
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[0]) << 56

14 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[1]) << 48

15 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[2]) << 40

16 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[3]) << 32

17 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[4]) << 24

18 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[5]) << 16

19 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[6]) << 8

20 | 
¡©ic_ÿ¡
<
ušt64_t
>(
buf
[7]);

21  
	gnumb”
;

	@util/clock.h

1 #´agm¨
Úû


3 
	~<chrÚo
>

4 
	~<c¡dio
>

5 
	~<ùime
>

6 
	~<¡ršg
>

8 şas 
	cClock
 {

9 
	mpublic
:

10 
ušt64_t
 
	$NowMiüos
() {

11  
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
miüo£cÚds
>(

12 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
().
	`time_sšû_•och
())

13 .
	`couÁ
();

16 
ušt64_t
 
	$NowNªos
() {

17  
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
Çno£cÚds
>(

18 
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
().
	`time_sšû_•och
())

19 .
	`couÁ
();

20 
	}
}

22 
	g¡d
::
¡ršg
 
	$TimeToSŒšg
(
ušt64_t
 
£cÚdsSšû1970
) {

23 cÚ¡ 
time_t
 
£cÚds
 = (time_t)
£cÚdsSšû1970
;

24 
tm
 
t
;

25 
maxsize
 = 64;

26 
¡d
::
¡ršg
 
dummy
;

27 
dummy
.
	`»£rve
(
maxsize
);

28 
dummy
.
	`»size
(
maxsize
);

29 * 
p
 = &
dummy
[0];

30 
	`loÿÉime_r
(&
£cÚds
, &
t
);

31 
	`¢´štf
(
p
, 
maxsize
, "%04d/%02d/%02d-%02d:%02d:%02d ", 
t
.
tm_y—r
 + 1900,

32 
t
.
tm_mÚ
 + 1,.
tm_mday
,.
tm_hour
,.
tm_mš
,.
tm_£c
);

33  
dummy
;

34 
	}
}

	@util/random.h

1 #iâdeà
LISTDB_UTIL_RANDOM_H_


2 
	#LISTDB_UTIL_RANDOM_H_


	)

4 
	~<şim™s
>

5 
	~<¿ndom
>

6 
	~<th»ad
>

8 
	~"li¡db/pÜt/lik–y.h
"

13 şas 
	cRªdom
 {

14 
	m´iv©e
:

15 : 
ušt32_t
 {

16 
M
 = 2147483647L

18 : 
ušt64_t
 {

19 
A
 = 16807

22 
ušt32_t
 
	g£ed_
;

24 
ušt32_t
 
	$GoodS“d
(
ušt32_t
 
s
è{  ( & 
M
è!ğ0 ? ( & Mè: 1; 
	}
}

26 
	gpublic
:

28 : 
ušt32_t
 { 
kMaxNext
 = 
M
 };

30 
ex¶ic™
 
	$Rªdom
(
ušt32_t
 
s
è: 
	`£ed_
(
	$GoodS“d
(
s
)è{
	}
}

32 
	$Re£t
(
ušt32_t
 
s
è{ 
£ed_
 = 
	`GoodS“d
(s); 
	}
}

34 
ušt32_t
 
	$Next
() {

41 
ušt64_t
 
´oduù
 = 
£ed_
 * 
A
;

44 
£ed_
 = 
¡©ic_ÿ¡
<
ušt32_t
>((
´oduù
 >> 31è+ (´oduù & 
M
));

48 ià(
£ed_
 > 
M
) {

49 
£ed_
 -ğ
M
;

51  
£ed_
;

52 
	}
}

54 
ušt64_t
 
	$Next64
(è{  (
ušt64_t
{
	`Next
()} << 32è| Next(); 
	}
}

58 
ušt32_t
 
	$UnifÜm
(
n
è{  
	`Next
(è%‚; 
	}
}

62 
boŞ
 
	$OÃIn
(
n
è{  
	`UnifÜm
Òè=ğ0; 
	}
}

66 
boŞ
 
	$OÃInO±
(
n
è{ ‚ > 0 && 
	`OÃIn
Ò); 
	}
}

71 
boŞ
 
	$P”ûÁTrue
(
³rûÁage
) {

72  
¡©ic_ÿ¡
<>(
	`UnifÜm
(100)è< 
³rûÁage
;

73 
	}
}

78 
ušt32_t
 
	$Skewed
(
max_log
) {

79  
	`UnifÜm
(1 << UnifÜm(
max_log
 + 1));

80 
	}
}

83 
	g¡d
::
¡ršg
 
RªdomSŒšg
(
Ën
);

86 
	g¡d
::
¡ršg
 
HumªR—dabËSŒšg
(
Ën
);

89 
	g¡d
::
¡ršg
 
RªdomBš¬ySŒšg
(
Ën
);

93 
Rªdom
* 
G‘TLSIn¡ªû
();

96 
Rªdom
* 
	gRªdom
::
	$G‘TLSIn¡ªû
() {

97 
th»ad_loÿl
 
Rªdom
* 
s_š¡ªû
;

98 
th»ad_loÿl
 
¡d
::
®igÃd_¡Üage
<(
Rªdom
)>::
ty³
 
s_š¡ªû_by‹s
;

100 autØ
rv
 = 
s_š¡ªû
;

101 ià(
	`UNLIKELY
(
rv
 =ğ
nuÎ±r
)) {

102 
size_t
 
£ed
 = 
¡d
::
hash
<¡d::
th»ad
::
id
>()(¡d::
this_th»ad
::
	`g‘_id
());

103 
rv
 = 
	`Ãw
 (&
s_š¡ªû_by‹s
è
	`Rªdom
((
ušt32_t
)
£ed
);

104 
s_š¡ªû
 = 
rv
;

106  
rv
;

107 
	}
}

109 
	g¡d
::
¡ršg
 
Rªdom
::
	$HumªR—dabËSŒšg
(
Ën
) {

110 
¡d
::
¡ršg
 
»t
;

111 
»t
.
	`»size
(
Ën
);

112 
i
 = 0; i < 
Ën
; ++i) {

113 
»t
[
i
] = 
¡©ic_ÿ¡
<>('a' + 
	`UnifÜm
(26));

115  
»t
;

116 
	}
}

118 
	g¡d
::
¡ršg
 
Rªdom
::
	$RªdomSŒšg
(
Ën
) {

119 
¡d
::
¡ršg
 
»t
;

120 
»t
.
	`»size
(
Ën
);

121 
i
 = 0; i < 
Ën
; i++) {

122 
»t
[
i
] = 
¡©ic_ÿ¡
<>(' ' + 
	`UnifÜm
(95));

124  
»t
;

125 
	}
}

127 
	g¡d
::
¡ršg
 
Rªdom
::
	$RªdomBš¬ySŒšg
(
Ën
) {

128 
¡d
::
¡ršg
 
»t
;

129 
»t
.
	`»size
(
Ën
);

130 
i
 = 0; i < 
Ën
; i++) {

131 
»t
[
i
] = 
¡©ic_ÿ¡
<>(
	`UnifÜm
(
CHAR_MAX
));

133  
»t
;

134 
	}
}

137 şas 
	cRªdom64
 {

138 
	m´iv©e
:

139 
¡d
::
mt19937_64
 
g’”©Ü_
;

141 
	mpublic
:

142 
ex¶ic™
 
	$Rªdom64
(
ušt64_t
 
s
è: 
	$g’”©Ü_
(
s
) { }

144 
	$S“d
(
ušt64_t
 
s
è{ 
g’”©Ü_
.
	`£ed
(s); 
	}
}

147 
ušt64_t
 
	$Next
(è{  
	`g’”©Ü_
(); 
	}
}

151 
ušt64_t
 
	$UnifÜm
(
ušt64_t
 
n
) {

152  
¡d
::
unifÜm_št_di¡ributiÚ
<
ušt64_t
>(0, 
n
 - 1)(
g’”©Ü_
);

153 
	}
}

157 
boŞ
 
	$OÃIn
(
ušt64_t
 
n
è{  
	`UnifÜm
Òè=ğ0; 
	}
}

162 
ušt64_t
 
	$Skewed
(
max_log
) {

163  
	`UnifÜm
(
	`ušt64_t
(1è<< UnifÜm(
max_log
 + 1));

164 
	}
}

168 
	g‹m¶©e
 <
şass
 
	gRªdomIt
>

169 
	$RªdomShufæe
(
RªdomIt
 
fœ¡
, RªdomIˆ
Ï¡
, 
ušt32_t
 
£ed
) {

170 
¡d
::
mt19937
 
	`ºg
(
£ed
);

171 
¡d
::
	`shufæe
(
fœ¡
, 
Ï¡
, 
ºg
);

172 
	}
}

175 
	g‹m¶©e
 <
şass
 
	gRªdomIt
>

176 
	$RªdomShufæe
(
RªdomIt
 
fœ¡
, RªdomIˆ
Ï¡
) {

177 
	`RªdomShufæe
(
fœ¡
, 
Ï¡
, 
¡d
::
¿ndom_deviû
{}());

178 
	}
}

	@util/rate_limiter.h

1 #iâdeà
LISTDB_UTIL_RATE_LIMITER_H_


2 
	#LISTDB_UTIL_RATE_LIMITER_H_


	)

4 
	~<cÚd™iÚ_v¬ŸbË
>

5 
	~<mu‹x
>

7 
	~"li¡db/ut/şock.h
"

8 
	~"li¡db/’v.h
"

13 şas 
	cR©eLim™”
 {

14 
	mpublic
:

15 şas 
	cOpTy³
 {

18 
kR—d
,

19 
	mkWr™e
,

21 şas 
	cMode
 {

22 
	gkR—dsOÆy
,

23 
	gkWr™esOÆy
,

24 
	gkAÎIo
,

27 cÚ¡ * 
	$Ty³
(è{  "R©eLim™”"; 
	}
}

30 
ex¶ic™
 
R©eLim™”
(
Mode
 
mode
 = Mode::
kWr™esOÆy
);

32 
	gvœtu®
 ~
	$R©eLim™”
(è{
	}
}

36 
vœtu®
 cÚ¡ * 
	$Name
(ècÚ¡ {  ""; 
	}
}

40 
vœtu®
 
S‘By‹sP”SecÚd
(
št64_t
 
by‹s_³r_£cÚd
) = 0;

51 
vœtu®
 
	$Reque¡
(cÚ¡ 
št64_t
 , cÚ¡ 
Env
::
IOPriÜ™y
 ) {

52 
	`as£¹
(
çl£
);

53 
	}
}

60 
vœtu®
 
	$Reque¡
(cÚ¡ 
št64_t
 
by‹s
, cÚ¡ 
Env
::
IOPriÜ™y
 
´i
, 
OpTy³
 
İ_ty³
) {

61 ià(
	`IsR©eLim™ed
(
İ_ty³
)) {

62 
	`Reque¡
(
by‹s
, 
´i
);

64 
	}
}

71 
size_t
 
Reque¡Tok’
(size_ˆ
by‹s
, size_ˆ
®ignm’t
,

72 
Env
::
IOPriÜ™y
 
io_´iÜ™y
, 
Sti¡ics
* 
¡©s
,

73 
R©eLim™”
::
OpTy³
 
İ_ty³
);

77 
vœtu®
 
št64_t
 
	$G‘SšgËBur¡By‹s
() const = 0;

80 
vœtu®
 
št64_t
 
	$G‘TÙ®By‹sThrough
(

81 cÚ¡ 
Env
::
IOPriÜ™y
 
´i
 = Env::
IO_TOTAL
) const = 0;

84 
vœtu®
 
št64_t
 
	$G‘TÙ®Reque¡s
(

85 cÚ¡ 
Env
::
IOPriÜ™y
 
´i
 = Env::
IO_TOTAL
) const = 0;

93 
Stus
 
	$G‘TÙ®P’dšgReque¡s
(

94 
št64_t
* 
tÙ®_³ndšg_»que¡s
,

95 cÚ¡ 
Env
::
IOPriÜ™y
 
´i
 = Env::
IO_TOTAL
) const {

96 
	`as£¹
(
tÙ®_³ndšg_»que¡s
 !ğ
nuÎ±r
);

97 ()
tÙ®_³ndšg_»que¡s
;

98 ()
´i
;

99  
Stus
::
	`NÙSuµÜ‹d
();

100 
	}
}

103 
vœtu®
 
št64_t
 
	$G‘By‹sP”SecÚd
() const = 0;

105 
boŞ
 
	$IsR©eLim™ed
(
OpTy³
 
İ_ty³
) {

106 ià((
mode_
 =ğ
R©eLim™”
::
Mode
::
kWr™esOÆy
 &&

107 
İ_ty³
 =ğ
R©eLim™”
::
OpTy³
::
kR—d
) ||

108 (
mode_
 =ğ
R©eLim™”
::
Mode
::
kR—dsOÆy
 &&

109 
İ_ty³
 =ğ
R©eLim™”
::
OpTy³
::
kWr™e
)) {

110  
çl£
;

112  
Œue
;

113 
	}
}

115 
	g´Ùeùed
:

116 
Mode
 
	$G‘Mode
(è{  
mode_
; 
	}
}

118 
	g´iv©e
:

119 
Mode
 
mode_
;

122 şas 
	cG’”icR©eLim™”
 : 
public
 
R©eLim™”
 {

123 
public
:

124 
	sG’”icR©eLim™”O±iÚs
 {

125 cÚ¡ * 
kName
() {  "GenericRateLimiterOptions"; }

126 
G’”icR©eLim™”O±iÚs
(
št64_t
 
_¿‹_by‹s_³r_£c
,

127 
št64_t
 
_»fl_³riod_us
, 
št32_t
 
_çœÃss
,

128 
boŞ
 
_auto_tuÃd
)

129 : 
max_by‹s_³r_£c
(
_¿‹_by‹s_³r_£c
),

130 
»fl_³riod_us
(
_»fl_³riod_us
),

131 
çœÃss
(
_çœÃss
 > 100 ? 100 : _fairness),

132 
auto_tuÃd
(
_auto_tuÃd
) {}

133 
št64_t
 
	mmax_by‹s_³r_£c
;

134 
št64_t
 
	m»fl_³riod_us
;

135 
št32_t
 
	mçœÃss
;

136 
boŞ
 
	mauto_tuÃd
;

139 
	gpublic
:

140 
ex¶ic™
 
G’”icR©eLim™”
(

141 
št64_t
 
»fl_by‹s
, iÁ64_ˆ
»fl_³riod_us
 = 100 * 1000,

142 
št32_t
 
çœÃss
 = 10,

143 
R©eLim™”
::
Mode
 
mode
 = R©eLim™”::Mode::
kWr™esOÆy
,

144 
boŞ
 
auto_tuÃd
 = 
çl£
);

146 
	gvœtu®
 ~
G’”icR©eLim™”
();

148 cÚ¡ * 
	$kCÏssName
(è{  "G’”icR©eLim™”"; 
	}
}

149 cÚ¡ * 
	$Name
(ècÚ¡ 
ov”ride
 {  
	`kCÏssName
(); 
	}
}

153 
vœtu®
 
	$S‘By‹sP”SecÚd
(
št64_t
 
by‹s_³r_£cÚd
è
ov”ride
;

159 
usšg
 
R©eLim™”
::
Reque¡
;

160 
vœtu®
 
	$Reque¡
(cÚ¡ 
št64_t
 
by‹s
, cÚ¡ 
Env
::
IOPriÜ™y
 
´i
è
ov”ride
;

162 
vœtu®
 
št64_t
 
	$G‘SšgËBur¡By‹s
(ècÚ¡ 
ov”ride
 {

163  
»fl_by‹s_³r_³riod_
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

164 
	}
}

166 
vœtu®
 
št64_t
 
	$G‘TÙ®By‹sThrough
(

167 cÚ¡ 
Env
::
IOPriÜ™y
 
´i
 = Env::
IO_TOTAL
ècÚ¡ 
ov”ride
 {

168 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`g
(
»que¡_mu‹x_
);

169 ià(
´i
 =ğ
Env
::
IO_TOTAL
) {

170 
št64_t
 
tÙ®_by‹s_through_sum
 = 0;

171 
i
 = 
Env
::
IO_LOW
; i < Env::
IO_TOTAL
; ++i) {

172 
tÙ®_by‹s_through_sum
 +ğ
tÙ®_by‹s_through_
[
i
];

174  
tÙ®_by‹s_through_sum
;

176  
tÙ®_by‹s_through_
[
´i
];

177 
	}
}

179 
vœtu®
 
št64_t
 
	$G‘TÙ®Reque¡s
(

180 cÚ¡ 
Env
::
IOPriÜ™y
 
´i
 = Env::
IO_TOTAL
ècÚ¡ 
ov”ride
 {

181 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`g
(
»que¡_mu‹x_
);

182 ià(
´i
 =ğ
Env
::
IO_TOTAL
) {

183 
št64_t
 
tÙ®_»que¡s_sum
 = 0;

184 
i
 = 
Env
::
IO_LOW
; i < Env::
IO_TOTAL
; ++i) {

185 
tÙ®_»que¡s_sum
 +ğ
tÙ®_»que¡s_
[
i
];

187  
tÙ®_»que¡s_sum
;

189  
tÙ®_»que¡s_
[
´i
];

190 
	}
}

193 
vœtu®
 
Stus
 
	$G‘TÙ®P’dšgReque¡s
(

194 
št64_t
* 
tÙ®_³ndšg_»que¡s
,

195 cÚ¡ 
Env
::
IOPriÜ™y
 
´i
 = Env::
IO_TOTAL
ècÚ¡ 
ov”ride
 {

196 
	`as£¹
(
tÙ®_³ndšg_»que¡s
 !ğ
nuÎ±r
);

197 
Mu‹xLock
 
	`g
(&
»que¡_mu‹x_
);

198 ià(
´i
 =ğ
Env
::
IO_TOTAL
) {

199 
št64_t
 
tÙ®_³ndšg_»que¡s_sum
 = 0;

200 
i
 = 
Env
::
IO_LOW
; i < Env::
IO_TOTAL
; ++i) {

201 
tÙ®_³ndšg_»que¡s_sum
 +ğ
¡©ic_ÿ¡
<
št64_t
>(
queue_
[
i
].
	`size
());

203 *
tÙ®_³ndšg_»que¡s
 = 
tÙ®_³ndšg_»que¡s_sum
;

205 *
tÙ®_³ndšg_»que¡s
 = 
¡©ic_ÿ¡
<
št64_t
>(
queue_
[
´i
].
	`size
());

207  
Stus
::
	`OK
();

208 
	}
}

211 
vœtu®
 
št64_t
 
	$G‘By‹sP”SecÚd
(ècÚ¡ 
ov”ride
 {

212  
¿‹_by‹s_³r_£c_
;

213 
	}
}

215 
	g´iv©e
:

217 
	sReq
 {

218 
ex¶ic™
 
Req
(
št64_t
 
_by‹s
)

219 : 
»que¡_by‹s
(
_by‹s
), 
by‹s
(_by‹s), 
g¿Áed
(
çl£
) {}

220 
št64_t
 
	g»que¡_by‹s
;

221 
št64_t
 
	gby‹s
;

222 
	g¡d
::
cÚd™iÚ_v¬ŸbË
 
cv
;

223 
boŞ
 
	gg¿Áed
;

226 
In™Ÿlize
();

227 
ReflBy‹sAndG¿ÁReque¡s
();

228 
	g¡d
::
veùÜ
<
Env
::
IOPriÜ™y
> 
G’”©ePriÜ™yI‹¿tiÚOrd”
();

229 
št64_t
 
C®cuÏ‹ReflBy‹sP”P”iod
(št64_ˆ
¿‹_by‹s_³r_£c
);

230 
TuÃ
();

232 
ušt64_t
 
	$NowMiüosMÚÙÚic
() {

233  
Clock
::
	`NowNªos
(è/ 
¡d
::
mli
::
d’
;

234 
	}
}

237 
mubË
 
	g¡d
::
mu‹x
 
»que¡_mu‹x_
;

239 
G’”icR©eLim™”O±iÚs
 
	gİtiÚs_
;

241 
št64_t
 
	g¿‹_by‹s_³r_£c_
;

243 
	g¡d
::
©omic
<
št64_t
> 
»fl_by‹s_³r_³riod_
;

245 
boŞ
 
	g¡İ_
;

246 
	g¡d
::
cÚd™iÚ_v¬ŸbË
 
ex™_cv_
;

247 
št32_t
 
	g»que¡s_to_wa™_
;

249 
št64_t
 
	gtÙ®_»que¡s_
[
Env
::
IO_TOTAL
];

250 
št64_t
 
	gtÙ®_by‹s_through_
[
Env
::
IO_TOTAL
];

251 
št64_t
 
	gavaabË_by‹s_
;

252 
št64_t
 
	gÃxt_»fl_us_
;

254 
Rªdom
 
	gºd_
;

256 
	gReq
;

257 
	g¡d
::
deque
<
Req
*> 
queue_
[
Env
::
IO_TOTAL
];

258 
boŞ
 
	gwa™_uÁ_»fl_³ndšg_
;

260 
št64_t
 
	gnum_d¿šs_
;

261 
št64_t
 
	g´ev_num_d¿šs_
;

262 
	g¡d
::
chrÚo
::
miüo£cÚds
 
tuÃd_time_
;

265 
	gR©eLim™”
::
	$R©eLim™”
(
Mode
 
mode
è: 
	$mode_
(
mode
) {

267 
	}
}

271 
G’”icR©eLim™”
::
	$G’”icR©eLim™”
(

272 
št64_t
 
¿‹_by‹s_³r_£c
, iÁ64_ˆ
»fl_³riod_us
, 
št32_t
 
çœÃss
,

273 
R©eLim™”
::
Mode
 
mode
,

274 
boŞ
 
auto_tuÃd
)

275 : 
	`R©eLim™”
(
mode
),

276 
	`İtiÚs_
(
¿‹_by‹s_³r_£c
, 
»fl_³riod_us
, 
çœÃss
,

277 
auto_tuÃd
),

278 
	`¡İ_
(
çl£
),

279 
	`»que¡s_to_wa™_
(0),

280 
	`avaabË_by‹s_
(0),

281 
	`ºd_
((
ušt32_t
)
	`time
(
nuÎ±r
)),

282 
	`wa™_uÁ_»fl_³ndšg_
(
çl£
),

283 
	`num_d¿šs_
(0),

284 
	$´ev_num_d¿šs_
(0) {

286 
i
 = 
Env
::
IO_LOW
; i < Env::
IO_TOTAL
; ++i) {

287 
tÙ®_»que¡s_
[
i
] = 0;

288 
tÙ®_by‹s_through_
[
i
] = 0;

290 
	`In™Ÿlize
();

291 
	}
}

292 
	gG’”icR©eLim™”
::
	$In™Ÿlize
() {

293 
İtiÚs_
.
çœÃss
 = 
¡d
::
	`mš
(options_.fairness, 100);

294 
Ãxt_»fl_us_
 = 
	`NowMiüosMÚÙÚic
();

295 
tuÃd_time_
 = 
¡d
::
chrÚo
::
	`miüo£cÚds
(
	`NowMiüosMÚÙÚic
());

296 ià(
İtiÚs_
.
auto_tuÃd
) {

297 
¿‹_by‹s_³r_£c_
 = 
İtiÚs_
.
max_by‹s_³r_£c
 / 2;

299 
¿‹_by‹s_³r_£c_
 = 
İtiÚs_
.
max_by‹s_³r_£c
;

301 
»fl_by‹s_³r_³riod_
 = 
	`C®cuÏ‹ReflBy‹sP”P”iod
(
¿‹_by‹s_³r_£c_
);

302 
	}
}

304 
	gG’”icR©eLim™”
::~
	$G’”icR©eLim™”
() {

305 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
»que¡_mu‹x_
);

306 
¡İ_
 = 
Œue
;

307 
¡d
::
deque
<
Req
*>::
size_ty³
 
queues_size_sum
 = 0;

308 
i
 = 
Env
::
IO_LOW
; i < Env::
IO_TOTAL
; ++i) {

309 
queues_size_sum
 +ğ
queue_
[
i
].
	`size
();

311 
»que¡s_to_wa™_
 = 
¡©ic_ÿ¡
<
št32_t
>(
queues_size_sum
);

313 
i
 = 
Env
::
IO_TOTAL
 - 1; i >ğEnv::
IO_LOW
; --i) {

314 
¡d
::
deque
<
Req
*> 
queue
 = 
queue_
[
i
];

315 auto& 
r
 : 
queue
) {

316 
r
->
cv
.
	`nÙify_Úe
();

320 
ex™_cv_
.
	`wa™
(
lk
, [&]{  
»que¡s_to_wa™_
 <= 0; });

321 
	}
}

324 
	gG’”icR©eLim™”
::
	$S‘By‹sP”SecÚd
(
št64_t
 
by‹s_³r_£cÚd
) {

325 
	`as£¹
(
by‹s_³r_£cÚd
 > 0);

326 
¿‹_by‹s_³r_£c_
 = 
by‹s_³r_£cÚd
;

327 
»fl_by‹s_³r_³riod_
.
	`¡Üe
(

328 
	`C®cuÏ‹ReflBy‹sP”P”iod
(
by‹s_³r_£cÚd
),

329 
¡d
::
memÜy_Üd”_»Ïxed
);

330 
	}
}

332 
	gG’”icR©eLim™”
::
	$Reque¡
(
št64_t
 
by‹s
, cÚ¡ 
Env
::
IOPriÜ™y
 
´i
) {

333 
	`as£¹
(
by‹s
 <ğ
»fl_by‹s_³r_³riod_
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
));

334 
by‹s
 = 
¡d
::
	`max
(
¡©ic_ÿ¡
<
št64_t
>(0), bytes);

336 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
»que¡_mu‹x_
);

338 ià(
İtiÚs_
.
auto_tuÃd
) {

339 cÚ¡ 
kReflsP”TuÃ
 = 100;

340 
¡d
::
chrÚo
::
miüo£cÚds
 
	`now
(
	`NowMiüosMÚÙÚic
());

341 ià(
now
 - 
tuÃd_time_
 >ğ
kReflsP”TuÃ
 * 
¡d
::
chrÚo
::
	`miüo£cÚds
(

342 
İtiÚs_
.
»fl_³riod_us
)) {

343 
	`TuÃ
();

347 ià(
¡İ_
) {

354 ++
tÙ®_»que¡s_
[
´i
];

356 ià(
avaabË_by‹s_
 >ğ
by‹s
) {

360 
avaabË_by‹s_
 -ğ
by‹s
;

361 
tÙ®_by‹s_through_
[
´i
] +ğ
by‹s
;

366 
Req
 
	`r
(
by‹s
);

367 
queue_
[
´i
].
	`push_back
(&
r
);

374 
št64_t
 
time_uÁ_»fl_us
 = 
Ãxt_»fl_us_
 - 
	`NowMiüosMÚÙÚic
();

375 ià(
time_uÁ_»fl_us
 > 0) {

376 ià(
wa™_uÁ_»fl_³ndšg_
) {

380 
r
.
cv
.
	`wa™
(
lk
);

386 ++
num_d¿šs_
;

387 
wa™_uÁ_»fl_³ndšg_
 = 
Œue
;

389 
r
.
cv
.
	`wa™_fÜ
(
lk
, 
¡d
::
chrÚo
::
du¿tiÚ
<
št64_t
, std::
miüo
>(
time_uÁ_»fl_us
));

390 
wa™_uÁ_»fl_³ndšg_
 = 
çl£
;

395 
	`ReflBy‹sAndG¿ÁReque¡s
();

396 ià(
r
.
g¿Áed
) {

400 
i
 = 
Env
::
IO_TOTAL
 - 1; i >ğEnv::
IO_LOW
; --i) {

401 
¡d
::
deque
<
Req
*> 
queue
 = 
queue_
[
i
];

402 ià(!
queue
.
	`em±y
()) {

403 
queue
.
	`äÚt
()->
cv
.
	`nÙify_Úe
();

411 #iâdeà
NDEBUG


412 
num_found
 = 0;

413 
i
 = 
Env
::
IO_LOW
; i < Env::
IO_TOTAL
; ++i) {

414 ià(
¡d
::
	`fšd
(
queue_
[
i
].
	`begš
(), queue_[i].
	`’d
(), &
r
) !=

415 
queue_
[
i
].
	`’d
()) {

416 ++
num_found
;

419 ià(
r
.
g¿Áed
) {

420 
	`as£¹
(
num_found
 == 0);

422 
	`as£¹
(
num_found
 == 1);

425 } !
¡İ_
 && !
r
.
g¿Áed
);

427 ià(
¡İ_
) {

431 --
»que¡s_to_wa™_
;

432 
ex™_cv_
.
	`nÙify_Úe
();

434 
	}
}

436 
	g¡d
::
veùÜ
<
Env
::
IOPriÜ™y
>

437 
G’”icR©eLim™”
::
	$G’”©ePriÜ™yI‹¿tiÚOrd”
() {

438 
¡d
::
veùÜ
<
Env
::
IOPriÜ™y
> 
	`´i_™”©iÚ_Üd”
(Env::
IO_TOTAL
 );

441 
´i_™”©iÚ_Üd”
[0] = 
Env
::
IO_USER
;

443 
boŞ
 
high_´i_™”©ed_aá”_mid_low_´i
 = 
ºd_
.
	`OÃIn
(
İtiÚs_
.
çœÃss
);

448 
boŞ
 
mid_´i_™”—‹d_aá”_low_´i
 = 
ºd_
.
	`OÃIn
(
İtiÚs_
.
çœÃss
);

454 ià(
high_´i_™”©ed_aá”_mid_low_´i
) {

455 
´i_™”©iÚ_Üd”
[3] = 
Env
::
IO_HIGH
;

456 
´i_™”©iÚ_Üd”
[2] =

457 
mid_´i_™”—‹d_aá”_low_´i
 ? 
Env
::
IO_MID
 : Env::
IO_LOW
;

458 
´i_™”©iÚ_Üd”
[1] =

459 (
´i_™”©iÚ_Üd”
[2] =ğ
Env
::
IO_MID
è? Env::
IO_LOW
 : Env::IO_MID;

461 
´i_™”©iÚ_Üd”
[1] = 
Env
::
IO_HIGH
;

462 
´i_™”©iÚ_Üd”
[3] =

463 
mid_´i_™”—‹d_aá”_low_´i
 ? 
Env
::
IO_MID
 : Env::
IO_LOW
;

464 
´i_™”©iÚ_Üd”
[2] =

465 (
´i_™”©iÚ_Üd”
[3] =ğ
Env
::
IO_MID
è? Env::
IO_LOW
 : Env::IO_MID;

472  
´i_™”©iÚ_Üd”
;

473 
	}
}

475 
	gG’”icR©eLim™”
::
	$ReflBy‹sAndG¿ÁReque¡s
() {

477 
Ãxt_»fl_us_
 = 
	`NowMiüosMÚÙÚic
(è+ 
İtiÚs_
.
»fl_³riod_us
;

479 autØ
»fl_by‹s_³r_³riod
 =

480 
»fl_by‹s_³r_³riod_
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

481 ià(
avaabË_by‹s_
 < 
»fl_by‹s_³r_³riod
) {

482 
avaabË_by‹s_
 +ğ
»fl_by‹s_³r_³riod
;

485 
¡d
::
veùÜ
<
Env
::
IOPriÜ™y
> 
´i_™”©iÚ_Üd”
 =

486 
	`G’”©ePriÜ™yI‹¿tiÚOrd”
();

488 
i
 = 
Env
::
IO_LOW
; i < Env::
IO_TOTAL
; ++i) {

489 
	`as£¹
(!
´i_™”©iÚ_Üd”
.
	`em±y
());

490 
Env
::
IOPriÜ™y
 
cu¼’t_´i
 = 
´i_™”©iÚ_Üd”
[
i
];

491 auto* 
queue
 = &
queue_
[
cu¼’t_´i
];

492 !
queue
->
	`em±y
()) {

493 auto* 
Ãxt_»q
 = 
queue
->
	`äÚt
();

494 ià(
avaabË_by‹s_
 < 
Ãxt_»q
->
»que¡_by‹s
) {

499 
Ãxt_»q
->
»que¡_by‹s
 -ğ
avaabË_by‹s_
;

500 
avaabË_by‹s_
 = 0;

503 
avaabË_by‹s_
 -ğ
Ãxt_»q
->
»que¡_by‹s
;

504 
Ãxt_»q
->
»que¡_by‹s
 = 0;

505 
tÙ®_by‹s_through_
[
cu¼’t_´i
] +ğ
Ãxt_»q
->
by‹s
;

506 
queue
->
	`pİ_äÚt
();

508 
Ãxt_»q
->
g¿Áed
 = 
Œue
;

511 
Ãxt_»q
->
cv
.
	`nÙify_Úe
();

514 
	}
}

516 
št64_t
 
	gG’”icR©eLim™”
::
	$C®cuÏ‹ReflBy‹sP”P”iod
(

517 
št64_t
 
¿‹_by‹s_³r_£c
) {

518 ià(
¡d
::
num”ic_lim™s
<
št64_t
>::
	`max
(è/ 
¿‹_by‹s_³r_£c
 < 
İtiÚs_
.
»fl_³riod_us
) {

521  
¡d
::
num”ic_lim™s
<
št64_t
>::
	`max
() / 1000000;

523  
¿‹_by‹s_³r_£c
 * 
İtiÚs_
.
»fl_³riod_us
 / 1000000;

525 
	}
}

527 
	gG’”icR©eLim™”
::
	$TuÃ
() {

528 cÚ¡ 
kLowW©”m¬kPù
 = 50;

529 cÚ¡ 
kHighW©”m¬kPù
 = 90;

530 cÚ¡ 
kAdju¡FaùÜPù
 = 5;

533 cÚ¡ 
kAÎowedRªgeFaùÜ
 = 20;

535 
¡d
::
chrÚo
::
miüo£cÚds
 
´ev_tuÃd_time
 = 
tuÃd_time_
;

536 
tuÃd_time_
 = 
¡d
::
chrÚo
::
	`miüo£cÚds
(
	`NowMiüosMÚÙÚic
());

538 
št64_t
 
–­£d_š‹rv®s
 =

539 (
tuÃd_time_
 - 
´ev_tuÃd_time
 +

540 
¡d
::
chrÚo
::
	`miüo£cÚds
(
İtiÚs_
.
»fl_³riod_us
) -

541 
¡d
::
chrÚo
::
	`miüo£cÚds
(1)) /

542 
¡d
::
chrÚo
::
	`miüo£cÚds
(
İtiÚs_
.
»fl_³riod_us
);

545 
	`as£¹
(
num_d¿šs_
 - 
´ev_num_d¿šs_
 <ğ
¡d
::
num”ic_lim™s
<
št64_t
>::
	`max
() / 100);

546 
	`as£¹
(
–­£d_š‹rv®s
 > 0);

547 
št64_t
 
d¿šed_pù
 =

548 (
num_d¿šs_
 - 
´ev_num_d¿šs_
è* 100 / 
–­£d_š‹rv®s
;

550 
št64_t
 
´ev_by‹s_³r_£c
 = 
	`G‘By‹sP”SecÚd
();

551 
št64_t
 
Ãw_by‹s_³r_£c
;

552 ià(
d¿šed_pù
 == 0) {

553 
Ãw_by‹s_³r_£c
 = 
İtiÚs_
.
max_by‹s_³r_£c
 / 
kAÎowedRªgeFaùÜ
;

554 } ià(
d¿šed_pù
 < 
kLowW©”m¬kPù
) {

556 
št64_t
 
§n™ized_´ev_by‹s_³r_£c
 =

557 
¡d
::
	`mš
(
´ev_by‹s_³r_£c
, std::
num”ic_lim™s
<
št64_t
>::
	`max
() / 100);

558 
Ãw_by‹s_³r_£c
 =

559 
¡d
::
	`max
(
İtiÚs_
.
max_by‹s_³r_£c
 / 
kAÎowedRªgeFaùÜ
,

560 
§n™ized_´ev_by‹s_³r_£c
 * 100 / (100 + 
kAdju¡FaùÜPù
));

561 } ià(
d¿šed_pù
 > 
kHighW©”m¬kPù
) {

563 
št64_t
 
§n™ized_´ev_by‹s_³r_£c
 = 
¡d
::
	`mš
(

564 
´ev_by‹s_³r_£c
, 
¡d
::
num”ic_lim™s
<
št64_t
>::
	`max
(è/ (100 + 
kAdju¡FaùÜPù
));

565 
Ãw_by‹s_³r_£c
 =

566 
¡d
::
	`mš
(
İtiÚs_
.
max_by‹s_³r_£c
,

567 
§n™ized_´ev_by‹s_³r_£c
 * (100 + 
kAdju¡FaùÜPù
) / 100);

569 
Ãw_by‹s_³r_£c
 = 
´ev_by‹s_³r_£c
;

571 ià(
Ãw_by‹s_³r_£c
 !ğ
´ev_by‹s_³r_£c
) {

572 
	`S‘By‹sP”SecÚd
(
Ãw_by‹s_³r_£c
);

574 
num_d¿šs_
 = 
´ev_num_d¿šs_
;

576 
	}
}

578 
R©eLim™”
* 
	$NewG’”icR©eLim™”
(

579 
št64_t
 
¿‹_by‹s_³r_£c
, iÁ64_ˆ
»fl_³riod_us
 = 100 * 1000,

580 
št32_t
 
çœÃss
 = 10,

581 
R©eLim™”
::
Mode
 
mode
 = R©eLim™”::Mode::
kWr™esOÆy
,

582 
boŞ
 
auto_tuÃd
 = 
çl£
) {

583 
	`as£¹
(
¿‹_by‹s_³r_£c
 > 0);

584 
	`as£¹
(
»fl_³riod_us
 > 0);

585 
	`as£¹
(
çœÃss
 > 0);

586 
¡d
::
unique_±r
<
R©eLim™”
> 
	`lim™”
(

587 
Ãw
 
	`G’”icR©eLim™”
(
¿‹_by‹s_³r_£c
, 
»fl_³riod_us
, 
çœÃss
,

588 
mode
, 
auto_tuÃd
));

590 ià(
Œue
 ) {

591  
lim™”
.
	`»Ëa£
();

593 
	`as£¹
(
çl£
);

594  
nuÎ±r
;

596 
	}
}

	@util/reporter.h

1 #´agm¨
Úû


3 şas 
	cR•Ü‹r
 {

4 
	mpublic
:

5 şas 
	cOpTy³
 {

6 
kFlush
,

7 
	mkCom·ùiÚ
,

8 
	mkPut
,

9 
	mkG‘


11 
R•Ü‹r
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
ušt64_t
 
»pÜt_š‹rv®_m£cs
 = 1000, std::¡ršg 
h—d”
 = "");

12 ~
R•Ü‹r
();

13 
S¹
();

14 
R•ÜtFšishedOps
(
OpTy³
 
İ_ty³
, 
št64_t
 
num_İs
);

16 
	g´iv©e
:

17 
¡d
::
¡ršg
 
	$H—d”
(ècÚ¡ {  "m£cs_–­£d,æush_dÚe,com·ùiÚ_dÚe,put_dÚe,g‘_dÚe"; 
	}
}

18 
SË•AndR•Üt
();

20 
cÚ¡ex´
 
ušt64_t
 
	gkMiüosInMliSecÚd
 = 1000U;

22 cÚ¡ 
ušt64_t
 
	g»pÜt_š‹rv®_m£cs_
;

23 
	g¡d
::
of¡»am
 
»pÜt_fe_
;

24 
	g¡d
::
¬¿y
<
¡d
::
©omic
<
št64_t
>, 4> 
	gtÙ®_İs_dÚe_
;

25 
	g¡d
::
¬¿y
<
št64_t
, 4> 
	gÏ¡_»pÜt_
;

26 
	g¡d
::
th»ad
 
»pÜtšg_th»ad_
;

27 
	g¡d
::
mu‹x
 
mu_
;

28 
	g¡d
::
cÚd™iÚ_v¬ŸbË
 
¡İ_cv_
;

29 
boŞ
 
	g¡¬t_
;

30 
boŞ
 
	g¡İ_
;

33 
	gR•Ü‹r
::
	$R•Ü‹r
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
ušt64_t
 
»pÜt_š‹rv®_m£cs
, std::¡ršg 
h—d”
)

34 : 
	`»pÜt_š‹rv®_m£cs_
(
»pÜt_š‹rv®_m£cs
),

35 
	`¡¬t_
(
çl£
),

36 
	$¡İ_
(
çl£
) {

37 auto& 
út
 : 
tÙ®_İs_dÚe_
) {

38 
út
.
	`¡Üe
(0);

40 
Ï¡_»pÜt_
.
	`fl
(0);

41 
»pÜt_fe_
.
	`İ’
(
âame
);

42 ià(
»pÜt_fe_
.
	`good
()) {

43 ià(
h—d”
.
	`em±y
()) {

44 
h—d”
 = 
	`H—d”
();

46 
»pÜt_fe_
 << 
h—d”
 << 
¡d
::
’dl
;

47 
»pÜt_fe_
.
	`æush
();

49 
	`årštf
(
¡d”r
, "Cª'ˆİ’ %s: %s\n", 
âame
.
	`c_¡r
(), 
¡d
::
	`¡»¼Ü
(
”ºo
));

50 
	`abÜt
();

53 
»pÜtšg_th»ad_
 = 
¡d
::
	`th»ad
([&](è{ 
	`SË•AndR•Üt
(); });

54 
	}
}

56 
	gR•Ü‹r
::~
	$R•Ü‹r
() {

57 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

58 
¡İ_
 = 
Œue
;

59 
¡İ_cv_
.
	`nÙify_®l
();

60 
lk
.
	`uÆock
();

61 ià(
»pÜtšg_th»ad_
.
	`jošabË
()) {

62 
»pÜtšg_th»ad_
.
	`još
();

64 
»pÜt_fe_
.
	`şo£
();

65 
	}
}

67 
	gR•Ü‹r
::
	$S¹
() {

68 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lk
(
mu_
);

69 
¡¬t_
 = 
Œue
;

70 
¡İ_cv_
.
	`nÙify_®l
();

71 
	}
}

73 
	gR•Ü‹r
::
	$R•ÜtFšishedOps
(
OpTy³
 
İ_ty³
, 
št64_t
 
num_İs
) {

74 
tÙ®_İs_dÚe_
[
¡©ic_ÿ¡
<>(
İ_ty³
)].
	`ãtch_add
(
num_İs
, 
¡d
::
memÜy_Üd”_»Ïxed
);

75 
	}
}

77 
	gR•Ü‹r
::
	$SË•AndR•Üt
() {

79 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

80 
¡İ_cv_
.
	`wa™
(
lk
, [&](è{  
¡¬t_
 || 
¡İ_
; });

82 autØ
time_¡¬‹d
 = 
Clock
::
	`NowMiüos
();

83 
Œue
) {

85 
¡d
::
unique_lock
<¡d::
mu‹x
> 
	`lk
(
mu_
);

86 ià(
¡İ_
 || 
¡İ_cv_
.
	`wa™_fÜ
(
lk
, 
¡d
::
chrÚo
::
	`mli£cÚds
(
»pÜt_š‹rv®_m£cs_
), [&]() {  stop_; })) {

90 autØ
m£cs_–­£d
 = (
Clock
::
	`NowMiüos
(è- 
time_¡¬‹d
 + 
kMiüosInMliSecÚd
 / 2) / kMicrosInMilliSecond;

91 
¡d
::
¡ršg¡»am
 
ss
;

92 
ss
 << 
m£cs_–­£d
 << ",";

93 
i
 = 0; i < 
tÙ®_İs_dÚe_
.
	`size
(); i++) {

94 autØ
tÙ®_İs_dÚe_¢­shÙ
 = 
tÙ®_İs_dÚe_
[
i
].
	`lßd
();

95 
ss
 << 
tÙ®_İs_dÚe_¢­shÙ
 - 
Ï¡_»pÜt_
[
i
];

96 ià(
i
 < 
tÙ®_İs_dÚe_
.
	`size
() - 1) {

97 
ss
 << ",";

99 
ss
 << 
¡d
::
’dl
;

101 
Ï¡_»pÜt_
[
i
] = 
tÙ®_İs_dÚe_¢­shÙ
;

103 
»pÜt_fe_
 << 
ss
.
	`rdbuf
();

104 
»pÜt_fe_
.
	`æush
();

105 ià(!
»pÜt_fe_
.
	`good
()) {

106 
	`årštf
(
¡d”r
, "Cª'ˆwr™tØ»pÜˆf(%s), stİpšgh»pÜtšg\n", 
¡d
::
	`¡»¼Ü
(
”ºo
));

110 
	}
}

	@util/reporter_client.h

1 #´agm¨
Úû


3 
	~"li¡db/ut/»pÜ‹r.h
"

5 şas 
	cR•Ü‹rCl›Á
 {

6 
	mpublic
:

7 
usšg
 
OpTy³
 = 
R•Ü‹r
::OpType;

8 
	$R•Ü‹rCl›Á
(
R•Ü‹r
* 
»pÜ‹r
, 
ušt64_t
 
»pÜt_š‹rv®_m£cs
 = 100)

9 : 
	`»pÜ‹r_
(
»pÜ‹r
),

10 
	`»pÜt_š‹rv®_m£cs_
(
»pÜt_š‹rv®_m£cs
),

11 
	`Ï¡_up_»pÜt_time_
(
Clock
::
	$NowMiüos
()) {

12 
tÙ®_İs_dÚe_
.
	`fl
(0);

13 
Ï¡_»pÜt_
.
	`fl
(0);

16 ~
	$R•Ü‹rCl›Á
() {

17 ià(
»pÜ‹r_
 !ğ
nuÎ±r
) {

18 
i
 = 0; i < 
tÙ®_İs_dÚe_
.
	`size
(); i++) {

19 
»pÜ‹r_
->
	`R•ÜtFšishedOps
(
¡©ic_ÿ¡
<
OpTy³
>(
i
), 
tÙ®_İs_dÚe_
[i] - 
Ï¡_»pÜt_
[i]);

22 
	}
}

24 
	$R•ÜtFšishedOps
(
OpTy³
 
İ_ty³
, 
št64_t
 
num_İs
) {

25 
tÙ®_İs_dÚe_
[
¡©ic_ÿ¡
<>(
İ_ty³
)] +ğ
num_İs
;

26 ià(
»pÜ‹r_
 !ğ
nuÎ±r
) {

27 
ušt64_t
 
now_miüo
 = 
Clock
::
	`NowMiüos
();

28 autØ
m£c_sšû_Ï¡
 = (
now_miüo
 - 
Ï¡_up_»pÜt_time_
 + 
kMiüosInMliSecÚd
 / 2) / kMicrosInMilliSecond;

29 ià(
m£c_sšû_Ï¡
 > 
»pÜt_š‹rv®_m£cs_
) {

30 
i
 = 0; i < 
tÙ®_İs_dÚe_
.
	`size
(); i++) {

31 
»pÜ‹r_
->
	`R•ÜtFšishedOps
(
¡©ic_ÿ¡
<
OpTy³
>(
i
), 
tÙ®_İs_dÚe_
[i] - 
Ï¡_»pÜt_
[i]);

32 
Ï¡_»pÜt_
[
i
] = 
tÙ®_İs_dÚe_
[i];

34 
Ï¡_up_»pÜt_time_
 = 
now_miüo
;

37 
	}
}

39 
	g´iv©e
:

40 
cÚ¡ex´
 
ušt64_t
 
kMiüosInMliSecÚd
 = 1000U;

42 
R•Ü‹r
* 
	g»pÜ‹r_
;

43 cÚ¡ 
ušt64_t
 
	g»pÜt_š‹rv®_m£cs_
;

44 
ušt64_t
 
	gÏ¡_up_»pÜt_time_
;

45 
	g¡d
::
¬¿y
<
št64_t
, 4> 
	gtÙ®_İs_dÚe_
;

46 
	g¡d
::
¬¿y
<
št64_t
, 4> 
	gÏ¡_»pÜt_
;

	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/arpa/nameser_compat.h

29 #iâdeà
_ARPA_NAMESER_COMPAT_


30 
	#_ARPA_NAMESER_COMPAT_


	)

32 
	~<’dŸn.h
>

42 
	mid
 :16;

43 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


45 
	mqr
: 1;

46 
	mİcode
: 4;

47 
	m¯
: 1;

48 
	mtc
: 1;

49 
	mrd
: 1;

51 
	m¿
: 1;

52 
	munu£d
 :1;

53 
	mad
: 1;

54 
	mcd
: 1;

55 
	mrcode
 :4;

57 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN
 || __BYTE_ORDER =ğ
__PDP_ENDIAN


59 
	mrd
 :1;

60 
	mtc
 :1;

61 
	m¯
 :1;

62 
	mİcode
 :4;

63 
	mqr
 :1;

65 
	mrcode
 :4;

66 
	mcd
: 1;

67 
	mad
: 1;

68 
	munu£d
 :1;

69 
	m¿
 :1;

72 
	mqdcouÁ
 :16;

73 
	mªcouÁ
 :16;

74 
	mnscouÁ
 :16;

75 
	m¬couÁ
 :16;

76 } 
	tHEADER
;

78 
	#PACKETSZ
 
NS_PACKETSZ


	)

79 
	#MAXDNAME
 
NS_MAXDNAME


	)

80 
	#MAXCDNAME
 
NS_MAXCDNAME


	)

81 
	#MAXLABEL
 
NS_MAXLABEL


	)

82 
	#HFIXEDSZ
 
NS_HFIXEDSZ


	)

83 
	#QFIXEDSZ
 
NS_QFIXEDSZ


	)

84 
	#RRFIXEDSZ
 
NS_RRFIXEDSZ


	)

85 
	#INT32SZ
 
NS_INT32SZ


	)

86 
	#INT16SZ
 
NS_INT16SZ


	)

87 
	#INT8SZ
 
NS_INT8SZ


	)

88 
	#INADDRSZ
 
NS_INADDRSZ


	)

89 
	#IN6ADDRSZ
 
NS_IN6ADDRSZ


	)

90 
	#INDIR_MASK
 
NS_CMPRSFLGS


	)

91 
	#NAMESERVER_PORT
 
NS_DEFAULTPORT


	)

93 
	#S_ZONE
 
ns_s_zn


	)

94 
	#S_PREREQ
 
ns_s_´


	)

95 
	#S_UPDATE
 
ns_s_ud


	)

96 
	#S_ADDT
 
ns_s_¬


	)

98 
	#QUERY
 
ns_o_qu”y


	)

99 
	#IQUERY
 
ns_o_iqu”y


	)

100 
	#STATUS
 
ns_o_¡©us


	)

101 
	#NS_NOTIFY_OP
 
ns_o_nÙify


	)

102 
	#NS_UPDATE_OP
 
ns_o_upd©e


	)

104 
	#NOERROR
 
ns_r_nÛ¼Ü


	)

105 
	#FORMERR
 
ns_r_fÜm”r


	)

106 
	#SERVFAIL
 
ns_r_£rvç


	)

107 
	#NXDOMAIN
 
ns_r_nxdomaš


	)

108 
	#NOTIMP
 
ns_r_nÙim¶


	)

109 
	#REFUSED
 
ns_r_»fu£d


	)

110 
	#YXDOMAIN
 
ns_r_yxdomaš


	)

111 
	#YXRRSET
 
ns_r_yx¼£t


	)

112 
	#NXRRSET
 
ns_r_nx¼£t


	)

113 
	#NOTAUTH
 
ns_r_nÙauth


	)

114 
	#NOTZONE
 
ns_r_nÙzÚe


	)

120 
	#DELETE
 
ns_uİ_d–‘e


	)

121 
	#ADD
 
ns_uİ_add


	)

123 
	#T_A
 
ns_t_a


	)

124 
	#T_NS
 
ns_t_ns


	)

125 
	#T_MD
 
ns_t_md


	)

126 
	#T_MF
 
ns_t_mf


	)

127 
	#T_CNAME
 
ns_t_úame


	)

128 
	#T_SOA
 
ns_t_sß


	)

129 
	#T_MB
 
ns_t_mb


	)

130 
	#T_MG
 
ns_t_mg


	)

131 
	#T_MR
 
ns_t_mr


	)

132 
	#T_NULL
 
ns_t_nuÎ


	)

133 
	#T_WKS
 
ns_t_wks


	)

134 
	#T_PTR
 
ns_t_±r


	)

135 
	#T_HINFO
 
ns_t_hšfo


	)

136 
	#T_MINFO
 
ns_t_mšfo


	)

137 
	#T_MX
 
ns_t_mx


	)

138 
	#T_TXT
 
ns_t_txt


	)

139 
	#T_RP
 
ns_t_½


	)

140 
	#T_AFSDB
 
ns_t_afsdb


	)

141 
	#T_X25
 
ns_t_x25


	)

142 
	#T_ISDN
 
ns_t_isdn


	)

143 
	#T_RT
 
ns_t_¹


	)

144 
	#T_NSAP
 
ns_t_n§p


	)

145 
	#T_NSAP_PTR
 
ns_t_n§p_±r


	)

146 
	#T_SIG
 
ns_t_sig


	)

147 
	#T_KEY
 
ns_t_key


	)

148 
	#T_PX
 
ns_t_px


	)

149 
	#T_GPOS
 
ns_t_gpos


	)

150 
	#T_AAAA
 
ns_t_¯¯


	)

151 
	#T_LOC
 
ns_t_loc


	)

152 
	#T_NXT
 
ns_t_nxt


	)

153 
	#T_EID
 
ns_t_eid


	)

154 
	#T_NIMLOC
 
ns_t_nimloc


	)

155 
	#T_SRV
 
ns_t_¤v


	)

156 
	#T_ATMA
 
ns_t_©ma


	)

157 
	#T_NAPTR
 
ns_t_Ç±r


	)

158 
	#T_KX
 
ns_t_kx


	)

159 
	#T_CERT
 
ns_t_û¹


	)

160 
	#T_A6
 
ns_t_a6


	)

161 
	#T_DNAME
 
ns_t_dÇme


	)

162 
	#T_SINK
 
ns_t_sšk


	)

163 
	#T_OPT
 
ns_t_İt


	)

164 
	#T_APL
 
ns_t_­l


	)

165 
	#T_DS
 
ns_t_ds


	)

166 
	#T_SSHFP
 
ns_t_sshå


	)

167 
	#T_IPSECKEY
 
ns_t_£ckey


	)

168 
	#T_RRSIG
 
ns_t_¼sig


	)

169 
	#T_NSEC
 
ns_t_n£c


	)

170 
	#T_DNSKEY
 
ns_t_dnskey


	)

171 
	#T_DHCID
 
ns_t_dhcid


	)

172 
	#T_NSEC3
 
ns_t_n£c3


	)

173 
	#T_NSEC3PARAM
 
ns_t_n£c3·¿m


	)

174 
	#T_TLSA
 
ns_t_§


	)

175 
	#T_SMIMEA
 
ns_t_smim—


	)

176 
	#T_HIP
 
ns_t_h


	)

177 
	#T_NINFO
 
ns_t_nšfo


	)

178 
	#T_RKEY
 
ns_t_rkey


	)

179 
	#T_TALINK
 
ns_t_lšk


	)

180 
	#T_CDS
 
ns_t_cds


	)

181 
	#T_CDNSKEY
 
ns_t_cdnskey


	)

182 
	#T_OPENPGPKEY
 
ns_t_İ’pgpkey


	)

183 
	#T_CSYNC
 
ns_t_csync


	)

184 
	#T_SPF
 
ns_t_¥f


	)

185 
	#T_UINFO
 
ns_t_ušfo


	)

186 
	#T_UID
 
ns_t_uid


	)

187 
	#T_GID
 
ns_t_gid


	)

188 
	#T_UNSPEC
 
ns_t_un¥ec


	)

189 
	#T_NID
 
ns_t_nid


	)

190 
	#T_L32
 
ns_t_l32


	)

191 
	#T_L64
 
ns_t_l64


	)

192 
	#T_LP
 
ns_t_Í


	)

193 
	#T_EUI48
 
ns_t_eui48


	)

194 
	#T_EUI64
 
ns_t_eui64


	)

195 
	#T_TKEY
 
ns_t_tkey


	)

196 
	#T_TSIG
 
ns_t_tsig


	)

197 
	#T_IXFR
 
ns_t_ixä


	)

198 
	#T_AXFR
 
ns_t_axä


	)

199 
	#T_MAILB
 
ns_t_mab


	)

200 
	#T_MAILA
 
ns_t_maa


	)

201 
	#T_ANY
 
ns_t_ªy


	)

202 
	#T_URI
 
ns_t_uri


	)

203 
	#T_CAA
 
ns_t_ÿa


	)

204 
	#T_AVC
 
ns_t_avc


	)

205 
	#T_TA
 
ns_t_


	)

206 
	#T_DLV
 
ns_t_dlv


	)

208 
	#C_IN
 
ns_c_š


	)

209 
	#C_CHAOS
 
ns_c_chaos


	)

210 
	#C_HS
 
ns_c_hs


	)

212 
	#C_NONE
 
ns_c_nÚe


	)

213 
	#C_ANY
 
ns_c_ªy


	)

215 
	#GETSHORT
 
NS_GET16


	)

216 
	#GETLONG
 
NS_GET32


	)

217 
	#PUTSHORT
 
NS_PUT16


	)

218 
	#PUTLONG
 
NS_PUT32


	)

	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

24 
	~<b™s/’dŸn.h
>

26 #ifdeà
__USE_MISC


27 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

28 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

29 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

30 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

33 #ià
defšed
 
__USE_MISC
 && !defšed 
__ASSEMBLER__


35 
	~<b™s/by‹sw­.h
>

36 
	~<b™s/ušŠ-id’t™y.h
>

38 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


39 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

40 
	#htŞe16
(
x
è
	`__ušt16_id’t™y
 (x)

	)

41 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

42 
	#Ë16toh
(
x
è
	`__ušt16_id’t™y
 (x)

	)

44 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

45 
	#htŞe32
(
x
è
	`__ušt32_id’t™y
 (x)

	)

46 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

47 
	#Ë32toh
(
x
è
	`__ušt32_id’t™y
 (x)

	)

49 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

50 
	#htŞe64
(
x
è
	`__ušt64_id’t™y
 (x)

	)

51 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

52 
	#Ë64toh
(
x
è
	`__ušt64_id’t™y
 (x)

	)

55 
	#htobe16
(
x
è
	`__ušt16_id’t™y
 (x)

	)

56 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

57 
	#be16toh
(
x
è
	`__ušt16_id’t™y
 (x)

	)

58 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

60 
	#htobe32
(
x
è
	`__ušt32_id’t™y
 (x)

	)

61 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

62 
	#be32toh
(
x
è
	`__ušt32_id’t™y
 (x)

	)

63 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

65 
	#htobe64
(
x
è
	`__ušt64_id’t™y
 (x)

	)

66 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

67 
	#be64toh
(
x
è
	`__ušt64_id’t™y
 (x)

	)

68 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/getopt.h

21 #iâdeà
_GETOPT_H


22 
	#_GETOPT_H
 1

	)

24 
	~<ã©u»s.h
>

31 #iâdeà
__g‘İt_¬gv_cÚ¡


32 
	#__g‘İt_¬gv_cÚ¡
 cÚ¡

	)

35 
	~<b™s/g‘İt_cÜe.h
>

36 
	~<b™s/g‘İt_ext.h
>

	@/usr/include/gflags/gflags.h

78 #iâdeà
GFLAGS_GFLAGS_H_


79 
	#GFLAGS_GFLAGS_H_


	)

81 
	~<¡ršg
>

82 
	~<veùÜ
>

84 
	~"gæags/gæags_deş¬e.h
"

88 #iâdeà
GFLAGS_DLL_DEFINE_FLAG


89 #ià
GFLAGS_IS_A_DLL
 && 
defšed
(
_MSC_VER
)

90 
	#GFLAGS_DLL_DEFINE_FLAG
 
	`__deş¥ec
(
dÎexpÜt
)

	)

92 
	#GFLAGS_DLL_DEFINE_FLAG


	)

97 
Çme¥aû
 
	gGFLAGS_NAMESPACE
 {

129 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ boŞ* 
æag
, boŞ (*
v®id©e_â
)(const *, bool));

130 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
št32
* 
æag
, boŞ (*
v®id©e_â
)(const *, int32));

131 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
ušt32
* 
æag
, boŞ (*
v®id©e_â
)(const *, uint32));

132 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
št64
* 
æag
, boŞ (*
v®id©e_â
)(const *, int64));

133 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
ušt64
* 
æag
, boŞ (*
v®id©e_â
)(const *, uint64));

134 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ * 
æag
, boŞ (*
v®id©e_â
)(const *, ));

135 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
¡d
::
¡ršg
* 
æag
, boŞ (*
v®id©e_â
)(const *, const std::string&));

138 
	#DEFINE_v®id©Ü
(
Çme
, 
v®id©Ü
) \

139 cÚ¡ 
boŞ
 
Çme
##
_v®id©Ü_»gi¡”ed
 = \

140 
GFLAGS_NAMESPACE
::
	`Regi¡”FÏgV®id©Ü
(&
FLAGS_
##
Çme
, 
v®id©Ü
)

	)

155 
	sCommªdLšeFÏgInfo
 {

156 
	g¡d
::
¡ršg
 
Çme
;

157 
	g¡d
::
¡ršg
 
ty³
;

158 
	g¡d
::
¡ršg
 
desütiÚ
;

159 
	g¡d
::
¡ršg
 
cu¼’t_v®ue
;

160 
	g¡d
::
¡ršg
 
deçuÉ_v®ue
;

161 
	g¡d
::
¡ršg
 
f’ame
;

162 
boŞ
 
	ghas_v®id©Ü_â
;

163 
boŞ
 
	gis_deçuÉ
;

166 cÚ¡ * 
	gæag_±r
;

174 
GFLAGS_DLL_DECL
 
G‘AÎFÏgs
(
¡d
::
veùÜ
<
CommªdLšeFÏgInfo
>* 
OUTPUT
);

176 
GFLAGS_DLL_DECL
 
ShowU§geW™hFÏgs
(cÚ¡ *
¬gv0
);

177 
GFLAGS_DLL_DECL
 
ShowU§geW™hFÏgsRe¡riù
(cÚ¡ *
¬gv0
, cÚ¡ *
»¡riù
);

181 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
DesüibeOÃFÏg
(cÚ¡ 
CommªdLšeFÏgInfo
& 
æag
);

184 
GFLAGS_DLL_DECL
 
S‘Argv
(
¬gc
, cÚ¡ ** 
¬gv
);

188 
GFLAGS_DLL_DECL
 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
G‘Argvs
();

189 
GFLAGS_DLL_DECL
 cÚ¡ * 
G‘Argv
();

190 
GFLAGS_DLL_DECL
 cÚ¡ * 
G‘Argv0
();

191 
GFLAGS_DLL_DECL
 
ušt32
 
G‘ArgvSum
();

192 
GFLAGS_DLL_DECL
 cÚ¡ * 
Prog¿mInvoÿtiÚName
();

193 
GFLAGS_DLL_DECL
 cÚ¡ * 
Prog¿mInvoÿtiÚShÜtName
();

197 
GFLAGS_DLL_DECL
 cÚ¡ * 
Prog¿mU§ge
();

201 
GFLAGS_DLL_DECL
 cÚ¡ * 
V”siÚSŒšg
();

215 
GFLAGS_DLL_DECL
 
boŞ
 
G‘CommªdLšeO±iÚ
(cÚ¡ * 
Çme
, 
¡d
::
¡ršg
* 
OUTPUT
);

219 
GFLAGS_DLL_DECL
 
boŞ
 
G‘CommªdLšeFÏgInfo
(cÚ¡ * 
Çme
, 
CommªdLšeFÏgInfo
* 
OUTPUT
);

224 
GFLAGS_DLL_DECL
 
CommªdLšeFÏgInfo
 
G‘CommªdLšeFÏgInfoOrD›
(cÚ¡ * 
Çme
);

226 
GFLAGS_DLL_DECL
 
	gFÏgS‘tšgMode
 {

228 
	gSET_FLAGS_VALUE
,

231 
	gSET_FLAG_IF_DEFAULT
,

235 
	gSET_FLAGS_DEFAULT


246 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
S‘CommªdLšeO±iÚ
 (cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
);

247 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
S‘CommªdLšeO±iÚW™hMode
(cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
, 
FÏgS‘tšgMode
 
£t_mode
);

278 şas 
	cGFLAGS_DLL_DECL
 
	gFÏgSav”
 {

279 
	gpublic
:

280 
FÏgSav”
();

281 ~
FÏgSav”
();

283 
	g´iv©e
:

284 
şass
 
FÏgSav”Im¶
* 
im¶_
;

286 
FÏgSav”
(const FlagSaver&);

287 
	gİ”©Ü
=(cÚ¡ 
FÏgSav”
&);

288 }
__©Œibu‹
((
unu£d
));

294 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
CommªdlšeFÏgsIÁoSŒšg
();

296 
GFLAGS_DLL_DECL


297 
boŞ
 
R—dFÏgsFromSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
æagfecÚ‹Ás
,

298 cÚ¡ * 
´og_Çme
,

299 
boŞ
 
”rÜs_¬e_çl
);

303 
GFLAGS_DLL_DECL
 
boŞ
 
Aµ’dFÏgsIÁoFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, cÚ¡ * 
´og_Çme
);

304 
GFLAGS_DLL_DECL
 
boŞ
 
R—dFromFÏgsFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, cÚ¡ * 
´og_Çme
, boŞ 
”rÜs_¬e_çl
);

315 
GFLAGS_DLL_DECL
 
boŞ
 
BoŞFromEnv
(cÚ¡ *
v¬Çme
, boŞ 
defv®
);

316 
GFLAGS_DLL_DECL
 
št32
 
IÁ32FromEnv
(cÚ¡ *
v¬Çme
, iÁ32 
defv®
);

317 
GFLAGS_DLL_DECL
 
ušt32
 
Ušt32FromEnv
(cÚ¡ *
v¬Çme
, ušt32 
defv®
);

318 
GFLAGS_DLL_DECL
 
št64
 
IÁ64FromEnv
(cÚ¡ *
v¬Çme
, iÁ64 
defv®
);

319 
GFLAGS_DLL_DECL
 
ušt64
 
Ušt64FromEnv
(cÚ¡ *
v¬Çme
, ušt64 
defv®
);

320 
GFLAGS_DLL_DECL
 
DoubËFromEnv
(cÚ¡ *
v¬Çme
, 
defv®
);

321 
GFLAGS_DLL_DECL
 cÚ¡ *
SŒšgFromEnv
(cÚ¡ *
v¬Çme
, cÚ¡ *
defv®
);

333 
GFLAGS_DLL_DECL
 
S‘U§geMes§ge
(cÚ¡ 
¡d
::
¡ršg
& 
u§ge
);

338 
GFLAGS_DLL_DECL
 
S‘V”siÚSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
v”siÚ
);

347 #iâdeà
SWIG


348 
GFLAGS_DLL_DECL
 
ušt32
 
P¬£CommªdLšeFÏgs
(*
¬gc
, *** 
¬gv
, 
boŞ
 
»move_æags
);

362 
GFLAGS_DLL_DECL
 
ušt32
 
P¬£CommªdLšeNÚH–pFÏgs
(*
¬gc
, *** 
¬gv
, 
boŞ
 
»move_æags
);

367 
GFLAGS_DLL_DECL
 
HªdËCommªdLšeH–pFÏgs
();

373 
GFLAGS_DLL_DECL
 
AÎowCommªdLšeR•¬sšg
();

381 
GFLAGS_DLL_DECL
 
R•¬£CommªdLšeNÚH–pFÏgs
();

392 
GFLAGS_DLL_DECL
 
ShutDownCommªdLšeFÏgs
();

432 şas 
	cGFLAGS_DLL_DECL
 
	gFÏgRegi¡””
 {

433 
	gpublic
:

438 
‹m¶©e
 <
ty³Çme
 
FÏgTy³
>

439 
FÏgRegi¡””
(cÚ¡ * 
Çme
,

440 cÚ¡ * 
h–p
, cÚ¡ * 
f’ame
,

441 
FÏgTy³
* 
cu¼’t_¡Üage
, FÏgTy³* 
defv®ue_¡Üage
);

445 #ià
defšed
(
_MSC_VER
) && _MSC_VER < 1800

446 
	#GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
ty³
)

	)

448 
	#GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
ty³
) \

449 
‹m¶©e
 
GFLAGS_DLL_DECL
 
FÏgRegi¡””
::
	`FÏgRegi¡””
( \

450 cÚ¡ * 
Çme
, cÚ¡ * 
h–p
, cÚ¡ * 
f’ame
, \

451 
ty³
* 
cu¼’t_¡Üage
,y³* 
defv®ue_¡Üage
)

	)

455 
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
boŞ
);

456 
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
št32
);

457 
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
ušt32
);

458 
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
št64
);

459 
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
ušt64
);

460 
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
();

461 
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR
(
¡d
::
¡ršg
);

463 #undeà
GFLAGS_DECLARE_FLAG_REGISTERER_CTOR


470 
GFLAGS_DLL_DECL
 cÚ¡ 
kSŒ³dFÏgH–p
[];

476 #iâdeà
SWIG


478 #ià
defšed
(
STRIP_FLAG_HELP
) && STRIP_FLAG_HELP > 0

480 
	#MAYBE_STRIPPED_HELP
(
txt
) \

481 (
çl£
 ? (
txt
è: 
GFLAGS_NAMESPACE
::
kSŒ³dFÏgH–p
)

	)

483 
	#MAYBE_STRIPPED_HELP
(
txt
è
	)
txt

497 
	#DEFINE_VARIABLE
(
ty³
, 
shÜ‰y³
, 
Çme
, 
v®ue
, 
h–p
) \

498 
Çme¥aû
 
fL
##
shÜ‰y³
 { \

499 cÚ¡ 
ty³
 
FLAGS_nÚo
##
Çme
 = 
v®ue
; \

501 
GFLAGS_DLL_DEFINE_FLAG
 
ty³
 
FLAGS_
##
Çme
 = 
FLAGS_nÚo
##name; \

502 
ty³
 
FLAGS_no
##
Çme
 = 
FLAGS_nÚo
##name; \

503 
GFLAGS_NAMESPACE
::
FÏgRegi¡””
 
o_
##
	`Çme
( \

504 #Çme, 
	`MAYBE_STRIPPED_HELP
(
h–p
), 
__FILE__
, \

505 &
FLAGS_
##
Çme
, &
FLAGS_no
##name); \

507 
usšg
 
fL
##
shÜ‰y³
::
FLAGS_
##
Çme


	)

517 
Çme¥aû
 
	gfLB
 {

518 
	sCompeAs£¹
 {};

519 
CompeAs£¹
 
	tex³ùed_sizeof_doubË_Ãq_sizeof_boŞ
[

520 ((è!ğ(
boŞ
)) ? 1 : -1];

521 
	g‹m¶©e
<
ty³Çme
 
	gFrom
> 
GFLAGS_DLL_DECL
 
IsBoŞFÏg
(cÚ¡ 
From
& 
äom
);

522 
GFLAGS_DLL_DECL
 
boŞ
 
IsBoŞFÏg
(boŞ 
äom
);

528 
	#DEFINE_boŞ
(
Çme
, 
v®
, 
txt
) \

529 
Çme¥aû
 
fLB
 { \

530 ::
fLB
::
	tCompeAs£¹
 
	tFLAG_
##
	tÇme
##
	t_v®ue_is_nÙ_a_boŞ
[ \

531 ((::
fLB
::
	`IsBoŞFÏg
(
v®
)) != ())? 1: -1]; \

533 
	`DEFINE_VARIABLE
(
boŞ
, 
B
, 
Çme
, 
v®
, 
txt
)

	)

535 
	#DEFINE_št32
(
Çme
, 
v®
, 
txt
) \

536 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
št32
, 
I
, \

537 
Çme
, 
v®
, 
txt
)

	)

539 
	#DEFINE_ušt32
(
Çme
,
v®
, 
txt
) \

540 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
ušt32
, 
U
, \

541 
Çme
, 
v®
, 
txt
)

	)

543 
	#DEFINE_št64
(
Çme
, 
v®
, 
txt
) \

544 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
št64
, 
I64
, \

545 
Çme
, 
v®
, 
txt
)

	)

547 
	#DEFINE_ušt64
(
Çme
,
v®
, 
txt
) \

548 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
ušt64
, 
U64
, \

549 
Çme
, 
v®
, 
txt
)

	)

551 
	#DEFINE_doubË
(
Çme
, 
v®
, 
txt
) \

552 
	`DEFINE_VARIABLE
(, 
D
, 
Çme
, 
v®
, 
txt
)

	)

561 
Çme¥aû
 
	gfLS
 {

563 
šlše
 
ş¡ršg
* 
dÚt_·ss0toDEFINE_¡ršg
(*
¡ršg¥Ù
,

564 cÚ¡ *
v®ue
) {

565  
Ãw
(
¡ršg¥Ù
è
ş¡ršg
(
v®ue
);

567 
šlše
 
ş¡ršg
* 
dÚt_·ss0toDEFINE_¡ršg
(*
¡ršg¥Ù
,

568 cÚ¡ 
ş¡ršg
 &
v®ue
) {

569  
Ãw
(
¡ršg¥Ù
è
ş¡ršg
(
v®ue
);

571 
šlše
 
ş¡ršg
* 
dÚt_·ss0toDEFINE_¡ršg
(*
¡ršg¥Ù
,

572 
v®ue
);

578 şas 
	cSŒšgFÏgDe¡ruùÜ
 {

579 *
	gcu¼’t_¡Üage_
;

580 *
	gdefv®ue_¡Üage_
;

582 
	gpublic
:

584 
SŒšgFÏgDe¡ruùÜ
(*
cu¼’t
, *
defv®ue
)

585 : 
cu¼’t_¡Üage_
(
cu¼’t
), 
defv®ue_¡Üage_
(
defv®ue
) {}

587 ~
SŒšgFÏgDe¡ruùÜ
() {

588 
	g»š‹½»t_ÿ¡
<
	gş¡ršg
*>(
	gcu¼’t_¡Üage_
 )->~
ş¡ršg
();

589 
	g»š‹½»t_ÿ¡
<
	gş¡ršg
*>(
	gdefv®ue_¡Üage_
)->~
ş¡ršg
();

602 
	#DEFINE_¡ršg
(
Çme
, 
v®
, 
txt
) \

603 
Çme¥aû
 
fLS
 { \

604 
usšg
 ::
fLS
::
ş¡ršg
; \

605 
usšg
 ::
fLS
::
SŒšgFÏgDe¡ruùÜ
; \

606 uniÚ { * 
®ign
; 
s
[(
ş¡ršg
)]; } 
s_
##
Çme
[2]; \

607 
ş¡ršg
* cÚ¡ 
FLAGS_no
##
Çme
 = ::
fLS
:: \

608 
	`dÚt_·ss0toDEFINE_¡ršg
(
s_
##
Çme
[0].
s
, \

609 
v®
); \

610 
GFLAGS_NAMESPACE
::
FÏgRegi¡””
 
o_
##
	`Çme
( \

611 #Çme, 
	`MAYBE_STRIPPED_HELP
(
txt
), 
__FILE__
, \

612 
FLAGS_no
##
Çme
, 
	`Ãw
 (
s_
##Çme[1].
s
è
	`ş¡ršg
(*FLAGS_no##name)); \

613 
SŒšgFÏgDe¡ruùÜ
 
d_
##
	`Çme
(
s_
##
Çme
[0].
s
, s_##name[1].s); \

614 
GFLAGS_DLL_DEFINE_FLAG
 
ş¡ršg
& 
FLAGS_
##
Çme
; \

615 
usšg
 
fLS
::
FLAGS_
##
Çme
; \

616 
ş¡ršg
& 
FLAGS_
##
Çme
 = *
FLAGS_no
##name; \

618 
usšg
 
fLS
::
FLAGS_
##
Çme


	)

624 
	~"gæags_gæags.h
"

	@/usr/include/numa.h

17 #iâdeà
_NUMA_H


18 
	#_NUMA_H
 1

	)

21 
	#LIBNUMA_API_VERSION
 2

	)

25 
	~<¡ddef.h
>

26 
	~<¡ršg.h
>

27 
	~<sys/ty³s.h
>

28 
	~<¡dlib.h
>

30 #ià
defšed
(
__x86_64__
è|| defšed(
__i386__
)

31 
	#NUMA_NUM_NODES
 128

	)

33 
	#NUMA_NUM_NODES
 2048

	)

36 #ifdeà
__ılu¥lus


41 
n
[
NUMA_NUM_NODES
/(()*8)];

42 } 
	tnodemask_t
;

44 
	sb™mask
 {

45 
size
;

46 *
maskp
;

50 
numa_b™mask_isb™£t
(cÚ¡ 
b™mask
 *, );

51 
b™mask
 *
numa_b™mask_£Î
(bitmask *);

52 
b™mask
 *
numa_b™mask_ş—¿Î
(bitmask *);

53 
b™mask
 *
numa_b™mask_£tb™
(bitmask *, );

54 
b™mask
 *
numa_b™mask_ş—rb™
(bitmask *, );

55 
numa_b™mask_nby‹s
(
b™mask
 *);

56 
numa_b™mask_weight
(cÚ¡ 
b™mask
 *);

57 
b™mask
 *
numa_b™mask_®loc
();

58 
numa_b™mask_ä“
(
b™mask
 *);

59 
numa_b™mask_equ®
(cÚ¡ 
b™mask
 *, const bitmask *);

60 
cİy_nodemask_to_b™mask
(
nodemask_t
 *, 
b™mask
 *);

61 
cİy_b™mask_to_nodemask
(
b™mask
 *, 
nodemask_t
 *);

62 
cİy_b™mask_to_b™mask
(
b™mask
 *, bitmask *);

66 
šlše
 
nodemask_z”o
(
nodemask_t
 *
mask
)

68 
b™mask
 
tmp
;

70 
tmp
.
maskp
 = (*)
mask
;

71 
tmp
.
size
 = (
nodemask_t
) * 8;

72 
numa_b™mask_ş—¿Î
(&
tmp
);

75 
šlše
 
nodemask_z”o_com·t
(
nodemask_t
 *
mask
)

77 
b™mask
 
tmp
;

79 
tmp
.
maskp
 = (*)
mask
;

80 
tmp
.
size
 = (
nodemask_t
) * 8;

81 
numa_b™mask_ş—¿Î
(&
tmp
);

84 
šlše
 
nodemask_£t_com·t
(
nodemask_t
 *
mask
, 
node
)

86 
mask
->
n
[
node
 / (8*())] |=

87 (1UL<<(
node
%(8*())));

90 
šlše
 
nodemask_şr_com·t
(
nodemask_t
 *
mask
, 
node
)

92 
mask
->
n
[
node
 / (8*())] &=

93 ~(1UL<<(
node
%(8*())));

96 
šlše
 
nodemask_is£t_com·t
(cÚ¡ 
nodemask_t
 *
mask
, 
node
)

98 ià(()
node
 >ğ
NUMA_NUM_NODES
)

100 ià(
mask
->
n
[
node
 / (8*())] &

101 (1UL<<(
node
%(8*()))))

106 
šlše
 
nodemask_equ®
(cÚ¡ 
nodemask_t
 *
a
, cÚ¡‚odemask_ˆ*
b
)

108 
b™mask
 
tmp_a
, 
tmp_b
;

110 
tmp_a
.
maskp
 = (*)
a
;

111 
tmp_a
.
size
 = (
nodemask_t
) * 8;

113 
tmp_b
.
maskp
 = (*)
b
;

114 
tmp_b
.
size
 = (
nodemask_t
) * 8;

116  
numa_b™mask_equ®
(&
tmp_a
, &
tmp_b
);

119 
šlše
 
nodemask_equ®_com·t
(cÚ¡ 
nodemask_t
 *
a
, cÚ¡‚odemask_ˆ*
b
)

121 
b™mask
 
tmp_a
, 
tmp_b
;

123 
tmp_a
.
maskp
 = (*)
a
;

124 
tmp_a
.
size
 = (
nodemask_t
) * 8;

126 
tmp_b
.
maskp
 = (*)
b
;

127 
tmp_b
.
size
 = (
nodemask_t
) * 8;

129  
numa_b™mask_equ®
(&
tmp_a
, &
tmp_b
);

134 
numa_avaabË
();

139 
numa_max_node
();

140 
numa_max_possibË_node
();

142 
numa_´eã¼ed
();

145 
numa_node_size64
(
node
, *
ä“p
);

146 
numa_node_size
(
node
, *
ä“p
);

148 
numa_·gesize
();

152 
b™mask
 *
numa_®l_nodes_±r
;

155 
b™mask
 *
numa_nodes_±r
;

158 
nodemask_t
 
numa_®l_nodes
;

161 
b™mask
 *
numa_®l_ıus_±r
;

164 
b™mask
 *
numa_no_nodes_±r
;

167 
nodemask_t
 
numa_no_nodes
;

170 
numa_bšd
(
b™mask
 *
nodes
);

173 
numa_£t_š‹¾—ve_mask
(
b™mask
 *
nodemask
);

176 
b™mask
 *
numa_g‘_š‹¾—ve_mask
();

179 
b™mask
 *
numa_®loÿ‹_nodemask
();

181 
šlše
 
numa_ä“_nodemask
(
b™mask
 *
b
)

183 
numa_b™mask_ä“
(
b
);

187 
numa_£t_´eã¼ed
(
node
);

190 
numa_£t_loÿÏÎoc
();

193 
numa_£t_membšd
(
b™mask
 *
nodemask
);

196 
b™mask
 *
numa_g‘_membšd
();

199 
b™mask
 *
numa_g‘_mems_®lowed
();

201 
numa_g‘_š‹¾—ve_node
();

207 *
numa_®loc_š‹¾—ved_sub£t
(
size_t
 
size
, 
b™mask
 *
nodemask
);

209 *
numa_®loc_š‹¾—ved
(
size_t
 
size
);

211 *
numa_®loc_Únode
(
size_t
 
size
, 
node
);

213 *
numa_®loc_loÿl
(
size_t
 
size
);

215 *
numa_®loc
(
size_t
 
size
);

217 *
numa_»®loc
(*
Şd_addr
, 
size_t
 
Şd_size
, size_ˆ
Ãw_size
);

219 
numa_ä“
(*
mem
, 
size_t
 
size
);

225 
numa_š‹¾—ve_memÜy
(*
mem
, 
size_t
 
size
, 
b™mask
 *
mask
);

228 
numa_tÚode_memÜy
(*
¡¬t
, 
size_t
 
size
, 
node
);

231 
numa_tÚodemask_memÜy
(*
mem
, 
size_t
 
size
, 
b™mask
 *
mask
);

234 
numa_£oÿl_memÜy
(*
¡¬t
, 
size_t
 
size
);

237 
numa_pŞiû_memÜy
(*
¡¬t
, 
size_t
 
size
);

240 
numa_run_Ú_node_mask
(
b™mask
 *
mask
);

242 
numa_run_Ú_node_mask_®l
(
b™mask
 *
mask
);

244 
numa_run_Ú_node
(
node
);

246 
b™mask
 * 
numa_g‘_run_node_mask
();

249 
numa_£t_bšd_pŞicy
(
¡riù
);

252 
numa_£t_¡riù
(
æag
);

255 
numa_num_possibË_nodes
();

258 
numa_num_possibË_ıus
();

261 
numa_num_cÚfigu»d_nodes
();

264 
numa_num_cÚfigu»d_ıus
();

267 
numa_num_sk_ıus
();

268 
numa_num_th»ad_ıus
();

271 
numa_num_sk_nodes
();

272 
numa_num_th»ad_nodes
();

275 
b™mask
 *
numa_®loÿ‹_ıumask
();

277 
šlše
 
numa_ä“_ıumask
(
b™mask
 *
b
)

279 
numa_b™mask_ä“
(
b
);

283 
numa_node_to_ıus
(, 
b™mask
 *);

286 
numa_node_of_ıu
(
ıu
);

289 
numa_di¡ªû
(
node1
, 
node2
);

295 
numa_”rÜ
(*
wh”e
);

299 
numa_ex™_Ú_”rÜ
;

302 
numa_w¬n
(
num
, *
fmt
, ...);

305 
numa_ex™_Ú_w¬n
;

307 
numa_mig¿‹_·ges
(
pid
, 
b™mask
 *
äom
, b™mask *
to
);

309 
numa_move_·ges
(
pid
, 
couÁ
, **
·ges
,

310 cÚ¡ *
nodes
, *
¡©us
, 
æags
);

312 
numa_sched_g‘affš™y
(
pid_t
, 
b™mask
 *);

313 
numa_sched_£ffš™y
(
pid_t
, 
b™mask
 *);

316 
b™mask
 *
numa_·r£_node¡ršg
(const *);

320 
b™mask
 *
numa_·r£_node¡ršg_®l
(const *);

323 
b™mask
 *
numa_·r£_ıu¡ršg
(const *);

327 
b™mask
 *
numa_·r£_ıu¡ršg_®l
(const *);

335 
šlše
 
numa_£t_š‹¾—ve_mask_com·t
(
nodemask_t
 *
nodemask
)

337 
b™mask
 
	gtmp
;

339 
	gtmp
.
	gmaskp
 = (*)
nodemask
;

340 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

341 
numa_£t_š‹¾—ve_mask
(&
tmp
);

344 
šlše
 
nodemask_t
 
numa_g‘_š‹¾—ve_mask_com·t
()

346 
b™mask
 *
	g
;

347 
nodemask_t
 
	gmask
;

349 
	g
 = 
numa_g‘_š‹¾—ve_mask
();

350 
cİy_b™mask_to_nodemask
(

, &
mask
);

351 
numa_b™mask_ä“
(

);

352  
	gmask
;

355 
šlše
 
numa_bšd_com·t
(
nodemask_t
 *
mask
)

357 
b™mask
 *
	g
;

359 
	g
 = 
numa_®loÿ‹_nodemask
();

360 
cİy_nodemask_to_b™mask
(
mask
, 

);

361 
numa_bšd
(

);

362 
numa_b™mask_ä“
(

);

365 
šlše
 
numa_£t_membšd_com·t
(
nodemask_t
 *
mask
)

367 
b™mask
 
	gtmp
;

369 
	gtmp
.
	gmaskp
 = (*)
mask
;

370 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

371 
numa_£t_membšd
(&
tmp
);

374 
šlše
 
nodemask_t
 
numa_g‘_membšd_com·t
()

376 
b™mask
 *
	g
;

377 
nodemask_t
 
	gmask
;

379 
	g
 = 
numa_g‘_membšd
();

380 
cİy_b™mask_to_nodemask
(

, &
mask
);

381 
numa_b™mask_ä“
(

);

382  
	gmask
;

385 
šlše
 *
numa_®loc_š‹¾—ved_sub£t_com·t
(
size_t
 
size
,

386 cÚ¡ 
nodemask_t
 *
mask
)

388 
b™mask
 
	gtmp
;

390 
	gtmp
.
	gmaskp
 = (*)
mask
;

391 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

392  
numa_®loc_š‹¾—ved_sub£t
(
size
, &
tmp
);

395 
šlše
 
numa_run_Ú_node_mask_com·t
(cÚ¡ 
nodemask_t
 *
mask
)

397 
b™mask
 
	gtmp
;

399 
	gtmp
.
	gmaskp
 = (*)
mask
;

400 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

401  
numa_run_Ú_node_mask
(&
tmp
);

404 
šlše
 
nodemask_t
 
numa_g‘_run_node_mask_com·t
()

406 
b™mask
 *
	g
;

407 
nodemask_t
 
	gmask
;

409 
	g
 = 
numa_g‘_run_node_mask
();

410 
cİy_b™mask_to_nodemask
(

, &
mask
);

411 
numa_b™mask_ä“
(

);

412  
	gmask
;

415 
šlše
 
numa_š‹¾—ve_memÜy_com·t
(*
mem
, 
size_t
 
size
,

416 cÚ¡ 
nodemask_t
 *
mask
)

418 
b™mask
 
	gtmp
;

420 
	gtmp
.
	gmaskp
 = (*)
mask
;

421 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

422 
numa_š‹¾—ve_memÜy
(
mem
, 
size
, &
tmp
);

425 
šlše
 
numa_tÚodemask_memÜy_com·t
(*
mem
, 
size_t
 
size
,

426 cÚ¡ 
nodemask_t
 *
mask
)

428 
b™mask
 
	gtmp
;

430 
	gtmp
.
	gmaskp
 = (*)
mask
;

431 
	gtmp
.
	gsize
 = (
nodemask_t
) * 8;

432 
numa_tÚodemask_memÜy
(
mem
, 
size
, &
tmp
);

435 
šlše
 
numa_sched_g‘affš™y_com·t
(
pid_t
 
pid
, 
Ën
,

436 *
mask
)

438 
b™mask
 
	gtmp
;

440 
	gtmp
.
	gmaskp
 = (*)
mask
;

441 
	gtmp
.
	gsize
 = 
Ën
 * 8;

442  
numa_sched_g‘affš™y
(
pid
, &
tmp
);

445 
šlše
 
numa_sched_£ffš™y_com·t
(
pid_t
 
pid
, 
Ën
,

446 *
mask
)

448 
b™mask
 
	gtmp
;

450 
	gtmp
.
	gmaskp
 = (*)
mask
;

451 
	gtmp
.
	gsize
 = 
Ën
 * 8;

452  
numa_sched_£ffš™y
(
pid
, &
tmp
);

455 
šlše
 
numa_node_to_ıus_com·t
(
node
, *
bufãr
,

456 
bufãr_Ën
)

458 
b™mask
 
	gtmp
;

460 
	gtmp
.
	gmaskp
 = (*)
bufãr
;

461 
	gtmp
.
	gsize
 = 
bufãr_Ën
 * 8;

462  
numa_node_to_ıus
(
node
, &
tmp
);

471 #ifdeà
NUMA_VERSION1_COMPATIBILITY


472 
	~<numacom·t1.h
>

475 #ifdeà
__ılu¥lus


	@/usr/include/sched.h

19 #iâdef 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

27 
	#__Ãed_size_t


	)

28 
	#__Ãed_NULL


	)

29 
	~<¡ddef.h
>

31 
	~<b™s/ty³s/time_t.h
>

32 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

33 #iâdeà
__USE_XOPEN2K


34 
	~<time.h
>

37 #iâdeà
__pid_t_defšed


38 
__pid_t
 
	tpid_t
;

39 
	#__pid_t_defšed


	)

43 
	~<b™s/sched.h
>

44 
	~<b™s/ıu-£t.h
>

47 
	#sched_´iÜ™y
 
sched_´iÜ™y


	)

48 
	#__sched_´iÜ™y
 
sched_´iÜ™y


	)

51 
__BEGIN_DECLS


54 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

55 
__THROW
;

58 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

61 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

62 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

65 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

68 
	$sched_y›ld
 (è
__THROW
;

71 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

74 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

77 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

80 #ifdeà
__USE_GNU


82 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

83 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

84 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

85 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

86 
ıu£
)

	)

87 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

88 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

90 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

91 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

92 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

93 
ıu£
)

	)

94 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

95 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

97 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

98 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

99 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

100 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

102 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

103 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

104 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

105 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

106 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

107 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

108 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

109 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

110 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

111 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

112 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

113 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

115 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

116 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

117 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

121 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

122 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

125 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

126 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

129 
__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wch¬.h
>

29 
	~<b™s/wÜdsize.h
>

34 
	~<b™s/¡dšt-šŠ.h
>

37 
	~<b™s/¡dšt-ušŠ.h
>

43 
__št_Ëa¡8_t
 
	tšt_Ëa¡8_t
;

44 
__št_Ëa¡16_t
 
	tšt_Ëa¡16_t
;

45 
__št_Ëa¡32_t
 
	tšt_Ëa¡32_t
;

46 
__št_Ëa¡64_t
 
	tšt_Ëa¡64_t
;

49 
__ušt_Ëa¡8_t
 
	tušt_Ëa¡8_t
;

50 
__ušt_Ëa¡16_t
 
	tušt_Ëa¡16_t
;

51 
__ušt_Ëa¡32_t
 
	tušt_Ëa¡32_t
;

52 
__ušt_Ëa¡64_t
 
	tušt_Ëa¡64_t
;

58 sigÃd 
	tšt_ç¡8_t
;

59 #ià
__WORDSIZE
 == 64

60 
	tšt_ç¡16_t
;

61 
	tšt_ç¡32_t
;

62 
	tšt_ç¡64_t
;

64 
	tšt_ç¡16_t
;

65 
	tšt_ç¡32_t
;

66 
__ex‹nsiÚ__


67 
	tšt_ç¡64_t
;

71 
	tušt_ç¡8_t
;

72 #ià
__WORDSIZE
 == 64

73 
	tušt_ç¡16_t
;

74 
	tušt_ç¡32_t
;

75 
	tušt_ç¡64_t
;

77 
	tušt_ç¡16_t
;

78 
	tušt_ç¡32_t
;

79 
__ex‹nsiÚ__


80 
	tušt_ç¡64_t
;

85 #ià
__WORDSIZE
 == 64

86 #iâdeà
__šŒ_t_defšed


87 
	tšŒ_t
;

88 
	#__šŒ_t_defšed


	)

90 
	tušŒ_t
;

92 #iâdeà
__šŒ_t_defšed


93 
	tšŒ_t
;

94 
	#__šŒ_t_defšed


	)

96 
	tušŒ_t
;

101 
__štmax_t
 
	tštmax_t
;

102 
__uštmax_t
 
	tuštmax_t
;

105 #ià
__WORDSIZE
 == 64

106 
	#__INT64_C
(
c
èø## 
L


	)

107 
	#__UINT64_C
(
c
èø## 
UL


	)

109 
	#__INT64_C
(
c
èø## 
LL


	)

110 
	#__UINT64_C
(
c
èø## 
ULL


	)

116 
	#INT8_MIN
 (-128)

	)

117 
	#INT16_MIN
 (-32767-1)

	)

118 
	#INT32_MIN
 (-2147483647-1)

	)

119 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

121 
	#INT8_MAX
 (127)

	)

122 
	#INT16_MAX
 (32767)

	)

123 
	#INT32_MAX
 (2147483647)

	)

124 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

127 
	#UINT8_MAX
 (255)

	)

128 
	#UINT16_MAX
 (65535)

	)

129 
	#UINT32_MAX
 (4294967295U)

	)

130 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

134 
	#INT_LEAST8_MIN
 (-128)

	)

135 
	#INT_LEAST16_MIN
 (-32767-1)

	)

136 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

137 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

139 
	#INT_LEAST8_MAX
 (127)

	)

140 
	#INT_LEAST16_MAX
 (32767)

	)

141 
	#INT_LEAST32_MAX
 (2147483647)

	)

142 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

145 
	#UINT_LEAST8_MAX
 (255)

	)

146 
	#UINT_LEAST16_MAX
 (65535)

	)

147 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

148 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

152 
	#INT_FAST8_MIN
 (-128)

	)

153 #ià
__WORDSIZE
 == 64

154 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

155 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

157 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

158 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

160 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

162 
	#INT_FAST8_MAX
 (127)

	)

163 #ià
__WORDSIZE
 == 64

164 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

165 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

167 
	#INT_FAST16_MAX
 (2147483647)

	)

168 
	#INT_FAST32_MAX
 (2147483647)

	)

170 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

173 
	#UINT_FAST8_MAX
 (255)

	)

174 #ià
__WORDSIZE
 == 64

175 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

176 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

178 
	#UINT_FAST16_MAX
 (4294967295U)

	)

179 
	#UINT_FAST32_MAX
 (4294967295U)

	)

181 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

185 #ià
__WORDSIZE
 == 64

186 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

187 
	#INTPTR_MAX
 (9223372036854775807L)

	)

188 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

190 
	#INTPTR_MIN
 (-2147483647-1)

	)

191 
	#INTPTR_MAX
 (2147483647)

	)

192 
	#UINTPTR_MAX
 (4294967295U)

	)

197 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

199 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

202 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

208 #ià
__WORDSIZE
 == 64

209 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

210 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

212 #ià
__WORDSIZE32_PTRDIFF_LONG


213 
	#PTRDIFF_MIN
 (-2147483647L-1)

	)

214 
	#PTRDIFF_MAX
 (2147483647L)

	)

216 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

217 
	#PTRDIFF_MAX
 (2147483647)

	)

222 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

223 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

226 #ià
__WORDSIZE
 == 64

227 
	#SIZE_MAX
 (18446744073709551615UL)

	)

229 #ià
__WORDSIZE32_SIZE_ULONG


230 
	#SIZE_MAX
 (4294967295UL)

	)

232 
	#SIZE_MAX
 (4294967295U)

	)

237 #iâdeà
WCHAR_MIN


239 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

240 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

244 
	#WINT_MIN
 (0u)

	)

245 
	#WINT_MAX
 (4294967295u)

	)

248 
	#INT8_C
(
c
è
	)
c

249 
	#INT16_C
(
c
è
	)
c

250 
	#INT32_C
(
c
è
	)
c

251 #ià
__WORDSIZE
 == 64

252 
	#INT64_C
(
c
èø## 
L


	)

254 
	#INT64_C
(
c
èø## 
LL


	)

258 
	#UINT8_C
(
c
è
	)
c

259 
	#UINT16_C
(
c
è
	)
c

260 
	#UINT32_C
(
c
èø## 
U


	)

261 #ià
__WORDSIZE
 == 64

262 
	#UINT64_C
(
c
èø## 
UL


	)

264 
	#UINT64_C
(
c
èø## 
ULL


	)

268 #ià
__WORDSIZE
 == 64

269 
	#INTMAX_C
(
c
èø## 
L


	)

270 
	#UINTMAX_C
(
c
èø## 
UL


	)

272 
	#INTMAX_C
(
c
èø## 
LL


	)

273 
	#UINTMAX_C
(
c
èø## 
ULL


	)

276 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

278 
	#INT8_WIDTH
 8

	)

279 
	#UINT8_WIDTH
 8

	)

280 
	#INT16_WIDTH
 16

	)

281 
	#UINT16_WIDTH
 16

	)

282 
	#INT32_WIDTH
 32

	)

283 
	#UINT32_WIDTH
 32

	)

284 
	#INT64_WIDTH
 64

	)

285 
	#UINT64_WIDTH
 64

	)

287 
	#INT_LEAST8_WIDTH
 8

	)

288 
	#UINT_LEAST8_WIDTH
 8

	)

289 
	#INT_LEAST16_WIDTH
 16

	)

290 
	#UINT_LEAST16_WIDTH
 16

	)

291 
	#INT_LEAST32_WIDTH
 32

	)

292 
	#UINT_LEAST32_WIDTH
 32

	)

293 
	#INT_LEAST64_WIDTH
 64

	)

294 
	#UINT_LEAST64_WIDTH
 64

	)

296 
	#INT_FAST8_WIDTH
 8

	)

297 
	#UINT_FAST8_WIDTH
 8

	)

298 
	#INT_FAST16_WIDTH
 
__WORDSIZE


	)

299 
	#UINT_FAST16_WIDTH
 
__WORDSIZE


	)

300 
	#INT_FAST32_WIDTH
 
__WORDSIZE


	)

301 
	#UINT_FAST32_WIDTH
 
__WORDSIZE


	)

302 
	#INT_FAST64_WIDTH
 64

	)

303 
	#UINT_FAST64_WIDTH
 64

	)

305 
	#INTPTR_WIDTH
 
__WORDSIZE


	)

306 
	#UINTPTR_WIDTH
 
__WORDSIZE


	)

308 
	#INTMAX_WIDTH
 64

	)

309 
	#UINTMAX_WIDTH
 64

	)

311 
	#PTRDIFF_WIDTH
 
__WORDSIZE


	)

312 
	#SIG_ATOMIC_WIDTH
 32

	)

313 
	#SIZE_WIDTH
 
__WORDSIZE


	)

314 
	#WCHAR_WIDTH
 32

	)

315 
	#WINT_WIDTH
 32

	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


24 
	#_STDIO_H
 1

	)

26 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

27 
	~<b™s/libc-h—d”-¡¬t.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	#__Ãed___va_li¡


	)

36 
	~<¡d¬g.h
>

38 
	~<b™s/ty³s.h
>

39 
	~<b™s/ty³s/__åos_t.h
>

40 
	~<b™s/ty³s/__åos64_t.h
>

41 
	~<b™s/ty³s/__FILE.h
>

42 
	~<b™s/ty³s/FILE.h
>

43 
	~<b™s/ty³s/¡ruù_FILE.h
>

45 #ifdeà
__USE_GNU


46 
	~<b™s/ty³s/cook›_io_funùiÚs_t.h
>

49 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


50 #ifdeà
__GNUC__


51 #iâdeà
_VA_LIST_DEFINED


52 
__gnuc_va_li¡
 
	tva_li¡
;

53 
	#_VA_LIST_DEFINED


	)

56 
	~<¡d¬g.h
>

60 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


61 #iâdeà
__off_t_defšed


62 #iâdeà
__USE_FILE_OFFSET64


63 
__off_t
 
	toff_t
;

65 
__off64_t
 
	toff_t
;

67 
	#__off_t_defšed


	)

69 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


70 
__off64_t
 
	toff64_t
;

71 
	#__off64_t_defšed


	)

75 #ifdeà
__USE_XOPEN2K8


76 #iâdeà
__ssize_t_defšed


77 
__ssize_t
 
	tssize_t
;

78 
	#__ssize_t_defšed


	)

83 #iâdeà
__USE_FILE_OFFSET64


84 
__åos_t
 
	tåos_t
;

86 
__åos64_t
 
	tåos_t
;

88 #ifdeà
__USE_LARGEFILE64


89 
__åos64_t
 
	tåos64_t
;

93 
	#_IOFBF
 0

	)

94 
	#_IOLBF
 1

	)

95 
	#_IONBF
 2

	)

99 
	#BUFSIZ
 8192

	)

104 
	#EOF
 (-1)

	)

109 
	#SEEK_SET
 0

	)

110 
	#SEEK_CUR
 1

	)

111 
	#SEEK_END
 2

	)

112 #ifdeà
__USE_GNU


113 
	#SEEK_DATA
 3

	)

114 
	#SEEK_HOLE
 4

	)

118 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


120 
	#P_tmpdœ
 "/tmp"

	)

133 
	~<b™s/¡dio_lim.h
>

137 
FILE
 *
¡dš
;

138 
FILE
 *
¡dout
;

139 
FILE
 *
¡d”r
;

141 
	#¡dš
 
¡dš


	)

142 
	#¡dout
 
¡dout


	)

143 
	#¡d”r
 
¡d”r


	)

146 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

148 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

150 #ifdeà
__USE_ATFILE


152 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

153 cÚ¡ *
__Ãw
è
__THROW
;

156 #ifdeà
__USE_GNU


158 
	#RENAME_NOREPLACE
 (1 << 0)

	)

159 
	#RENAME_EXCHANGE
 (1 << 1)

	)

160 
	#RENAME_WHITEOUT
 (1 << 2)

	)

164 
	$»Çm—t2
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

165 cÚ¡ *
__Ãw
, 
__æags
è
__THROW
;

172 #iâdeà
__USE_FILE_OFFSET64


173 
FILE
 *
	$tmpfe
 (è
__wur
;

175 #ifdeà
__REDIRECT


176 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

178 
	#tmpfe
 
tmpfe64


	)

182 #ifdeà
__USE_LARGEFILE64


183 
FILE
 *
	$tmpfe64
 (è
__wur
;

187 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

189 #ifdeà
__USE_MISC


192 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

196 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


204 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

205 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

213 
	`fşo£
 (
FILE
 *
__¡»am
);

218 
	`fæush
 (
FILE
 *
__¡»am
);

220 #ifdeà
__USE_MISC


227 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

230 #ifdeà
__USE_GNU


237 
	`fşo£®l
 ();

241 #iâdeà
__USE_FILE_OFFSET64


246 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

247 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

252 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

253 cÚ¡ *
__»¡riù
 
__modes
,

254 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

256 #ifdeà
__REDIRECT


257 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

258 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

259 
__wur
;

260 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

261 cÚ¡ *
__»¡riù
 
__modes
,

262 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

263 
__wur
;

265 
	#fİ’
 
fİ’64


	)

266 
	#äeİ’
 
äeİ’64


	)

269 #ifdeà
__USE_LARGEFILE64


270 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

271 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

272 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
,

274 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

277 #ifdef 
__USE_POSIX


279 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

282 #ifdef 
__USE_GNU


285 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

286 cÚ¡ *
__»¡riù
 
__modes
,

287 
cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

290 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
)

292 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

293 
__THROW
 
__wur
;

298 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

304 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

308 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

309 
__modes
, 
size_t
 
__n
è
__THROW
;

311 #ifdef 
__USE_MISC


314 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

315 
size_t
 
__size
è
__THROW
;

318 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

326 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

327 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

332 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

334 
	$¥rštf
 (*
__»¡riù
 
__s
,

335 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

341 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

342 
__gnuc_va_li¡
 
__¬g
);

347 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
);

349 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

350 
__gnuc_va_li¡
 
__¬g
è
__THROWNL
;

352 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_UNIX98


354 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

355 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

356 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

358 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

359 cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
)

360 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

363 #ià
	`__GLIBC_USE
 (
LIB_EXT2
)

366 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

367 
__gnuc_va_li¡
 
__¬g
)

368 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

369 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

370 cÚ¡ *
__»¡riù
 
__fmt
, ...)

371 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

372 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

373 cÚ¡ *
__»¡riù
 
__fmt
, ...)

374 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

377 #ifdeà
__USE_XOPEN2K8


379 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

380 
__gnuc_va_li¡
 
__¬g
)

381 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

382 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

383 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

391 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

392 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

397 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

399 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

400 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

405 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
è&& !
defšed
 
__LDBL_COMPAT


406 #ifdeà
__REDIRECT


407 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

408 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

409 
__isoc99_fsÿnf
è
__wur
;

410 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

411 
__isoc99_sÿnf
è
__wur
;

412 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

413 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

414 
__isoc99_ssÿnf
);

416 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

417 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

418 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

419 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

420 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

421 
	#fsÿnf
 
__isoc99_fsÿnf


	)

422 
	#sÿnf
 
__isoc99_sÿnf


	)

423 
	#ssÿnf
 
__isoc99_ssÿnf


	)

427 #ifdef 
__USE_ISOC99


432 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

433 
__gnuc_va_li¡
 
__¬g
)

434 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

440 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
)

441 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

444 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

445 cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
)

446 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

449 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
)

450 #ià
defšed
 
__REDIRECT
 && !defšed 
__LDBL_COMPAT


451 
	`__REDIRECT
 (
vfsÿnf
,

452 (
FILE
 *
__»¡riù
 
__s
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
),

454 
__isoc99_vfsÿnf
)

455 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

456 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

457 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

458 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

459 
	`__REDIRECT_NTH
 (
vssÿnf
,

460 (cÚ¡ *
__»¡riù
 
__s
,

461 cÚ¡ *
__»¡riù
 
__fÜm©
,

462 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

463 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

464 #–ià!
defšed
 
__REDIRECT


465 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

466 cÚ¡ *
__»¡riù
 
__fÜm©
,

467 
__gnuc_va_li¡
 
__¬g
è
__wur
;

468 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

469 
__gnuc_va_li¡
 
__¬g
è
__wur
;

470 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

471 cÚ¡ *
__»¡riù
 
__fÜm©
,

472 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

473 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

474 
	#vsÿnf
 
__isoc99_vsÿnf


	)

475 
	#vssÿnf
 
__isoc99_vssÿnf


	)

485 
	`fg‘c
 (
FILE
 *
__¡»am
);

486 
	`g‘c
 (
FILE
 *
__¡»am
);

492 
	`g‘ch¬
 ();

494 #ifdeà
__USE_POSIX199506


499 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

500 
	`g‘ch¬_uÆocked
 ();

503 #ifdeà
__USE_MISC


510 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

521 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

522 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

528 
	`putch¬
 (
__c
);

530 #ifdeà
__USE_MISC


537 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

540 #ifdeà
__USE_POSIX199506


545 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

546 
	`putch¬_uÆocked
 (
__c
);

550 #ià
defšed
 
__USE_MISC
 \

551 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

553 
	`g‘w
 (
FILE
 *
__¡»am
);

556 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

564 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

565 
__wur
;

567 #ià
	`__GLIBC_USE
 (
DEPRECATED_GETS
)

577 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

580 #ifdeà
__USE_GNU


587 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

588 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

592 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
)

603 
__ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

604 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

605 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

606 
__ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

607 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

608 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

616 
__ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

617 
size_t
 *
__»¡riù
 
__n
,

618 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

626 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

632 
	`puts
 (cÚ¡ *
__s
);

639 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

646 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

647 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

652 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

653 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

655 #ifdeà
__USE_GNU


662 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

663 
FILE
 *
__»¡riù
 
__¡»am
);

666 #ifdeà
__USE_MISC


673 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

674 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

675 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

676 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

684 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

689 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

694 
	`»wšd
 (
FILE
 *
__¡»am
);

701 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


702 #iâdeà
__USE_FILE_OFFSET64


707 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

712 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

714 #ifdeà
__REDIRECT


715 
	`__REDIRECT
 (
f£eko
,

716 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

717 
f£eko64
);

718 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

720 
	#f£eko
 
f£eko64


	)

721 
	#á–lo
 
á–lo64


	)

726 #iâdeà
__USE_FILE_OFFSET64


731 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

736 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

738 #ifdeà
__REDIRECT


739 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

740 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

741 
	`__REDIRECT
 (
f£os
,

742 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

744 
	#fg‘pos
 
fg‘pos64


	)

745 
	#f£os
 
f£os64


	)

749 #ifdeà
__USE_LARGEFILE64


750 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

751 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

752 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

753 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

757 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

759 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

761 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

763 #ifdeà
__USE_MISC


765 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

766 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

767 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

775 
	`³¼Ü
 (cÚ¡ *
__s
);

781 
	~<b™s/sys_”¾i¡.h
>

784 #ifdef 
__USE_POSIX


786 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

789 #ifdeà
__USE_MISC


791 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

795 #ifdeà
__USE_POSIX2


800 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

806 
	`pşo£
 (
FILE
 *
__¡»am
);

810 #ifdef 
__USE_POSIX


812 *
	$ù”mid
 (*
__s
è
__THROW
;

816 #ià(
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
è|| defšed 
__USE_GNU


818 *
	`cu£rid
 (*
__s
);

822 #ifdef 
__USE_GNU


823 
ob¡ack
;

826 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

827 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

828 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

829 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

830 cÚ¡ *
__»¡riù
 
__fÜm©
,

831 
__gnuc_va_li¡
 
__¬gs
)

832 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

836 #ifdeà
__USE_POSIX199506


840 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

844 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

847 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

850 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


853 
	~<b™s/g‘İt_posix.h
>

858 
	`__uæow
 (
FILE
 *);

859 
	`__ov”æow
 (
FILE
 *, );

863 #ifdeà
__USE_EXTERN_INLINES


864 
	~<b™s/¡dio.h
>

866 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


867 
	~<b™s/¡dio2.h
>

869 #ifdeà
__LDBL_COMPAT


870 
	~<b™s/¡dio-ldbl.h
>

873 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

25 
	~<b™s/libc-h—d”-¡¬t.h
>

28 
	#__Ãed_size_t


	)

29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

31 
	~<¡ddef.h
>

33 
	g__BEGIN_DECLS


35 
	#_STDLIB_H
 1

	)

37 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


39 
	~<b™s/wa™æags.h
>

40 
	~<b™s/wa™¡©us.h
>

43 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (¡©us)

	)

44 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (¡©us)

	)

45 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (¡©us)

	)

46 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (¡©us)

	)

47 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (¡©us)

	)

48 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (¡©us)

	)

49 #ifdeà
__WIFCONTINUED


50 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (¡©us)

	)

55 
	~<b™s/æßŠ.h
>

60 
	mquÙ
;

61 
	m»m
;

62 } 
	tdiv_t
;

65 #iâdeà
__ldiv_t_defšed


68 
	mquÙ
;

69 
	m»m
;

70 } 
	tldiv_t
;

71 
	#__ldiv_t_defšed
 1

	)

74 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


76 
__ex‹nsiÚ__
 struct

78 
	mquÙ
;

79 
	m»m
;

80 } 
	tÎdiv_t
;

81 
	#__Îdiv_t_defšed
 1

	)

86 
	#RAND_MAX
 2147483647

	)

91 
	#EXIT_FAILURE
 1

	)

92 
	#EXIT_SUCCESS
 0

	)

96 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

97 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

101 
	$©of
 (cÚ¡ *
__ÅŒ
)

102 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

104 
	$©oi
 (cÚ¡ *
__ÅŒ
)

105 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

107 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

108 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

110 #ifdeà
__USE_ISOC99


112 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

113 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

117 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

118 **
__»¡riù
 
__’d±r
)

119 
__THROW
 
	`__nÚnuÎ
 ((1));

121 #ifdef 
__USE_ISOC99


123 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

124 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

126 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

127 **
__»¡riù
 
__’d±r
)

128 
__THROW
 
	`__nÚnuÎ
 ((1));

133 #ià
__HAVE_FLOAT16
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

134 
_Flßt16
 
	$¡¹of16
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

135 **
__»¡riù
 
__’d±r
)

136 
__THROW
 
	`__nÚnuÎ
 ((1));

139 #ià
__HAVE_FLOAT32
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

140 
_Flßt32
 
	$¡¹of32
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

141 **
__»¡riù
 
__’d±r
)

142 
__THROW
 
	`__nÚnuÎ
 ((1));

145 #ià
__HAVE_FLOAT64
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

146 
_Flßt64
 
	$¡¹of64
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

147 **
__»¡riù
 
__’d±r
)

148 
__THROW
 
	`__nÚnuÎ
 ((1));

151 #ià
__HAVE_FLOAT128
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

152 
_Flßt128
 
	$¡¹of128
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

153 **
__»¡riù
 
__’d±r
)

154 
__THROW
 
	`__nÚnuÎ
 ((1));

157 #ià
__HAVE_FLOAT32X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

158 
_Flßt32x
 
	$¡¹of32x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

159 **
__»¡riù
 
__’d±r
)

160 
__THROW
 
	`__nÚnuÎ
 ((1));

163 #ià
__HAVE_FLOAT64X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

164 
_Flßt64x
 
	$¡¹of64x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

169 #ià
__HAVE_FLOAT128X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

170 
_Flßt128x
 
	$¡¹of128x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

171 **
__»¡riù
 
__’d±r
)

172 
__THROW
 
	`__nÚnuÎ
 ((1));

176 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

177 **
__»¡riù
 
__’d±r
, 
__ba£
)

178 
__THROW
 
	`__nÚnuÎ
 ((1));

180 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

181 **
__»¡riù
 
__’d±r
, 
__ba£
)

182 
__THROW
 
	`__nÚnuÎ
 ((1));

184 #ifdeà
__USE_MISC


186 
__ex‹nsiÚ__


187 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

191 
__ex‹nsiÚ__


192 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

193 **
__»¡riù
 
__’d±r
, 
__ba£
)

194 
__THROW
 
	`__nÚnuÎ
 ((1));

197 #ifdeà
__USE_ISOC99


199 
__ex‹nsiÚ__


200 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

204 
__ex‹nsiÚ__


205 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

206 **
__»¡riù
 
__’d±r
, 
__ba£
)

207 
__THROW
 
	`__nÚnuÎ
 ((1));

211 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

212 
	$¡räomd
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

213 
__f
)

214 
__THROW
 
	`__nÚnuÎ
 ((3));

216 
	$¡räomf
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

217 
__f
)

218 
__THROW
 
	`__nÚnuÎ
 ((3));

220 
	$¡räoml
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

221 
__f
)

222 
__THROW
 
	`__nÚnuÎ
 ((3));

225 #ià
__HAVE_FLOAT16
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

226 
	$¡räomf16
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

227 
_Flßt16
 
__f
)

228 
__THROW
 
	`__nÚnuÎ
 ((3));

231 #ià
__HAVE_FLOAT32
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

232 
	$¡räomf32
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

233 
_Flßt32
 
__f
)

234 
__THROW
 
	`__nÚnuÎ
 ((3));

237 #ià
__HAVE_FLOAT64
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

238 
	$¡räomf64
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

239 
_Flßt64
 
__f
)

240 
__THROW
 
	`__nÚnuÎ
 ((3));

243 #ià
__HAVE_FLOAT128
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

244 
	$¡räomf128
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

245 
_Flßt128
 
__f
)

246 
__THROW
 
	`__nÚnuÎ
 ((3));

249 #ià
__HAVE_FLOAT32X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

250 
	$¡räomf32x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

251 
_Flßt32x
 
__f
)

252 
__THROW
 
	`__nÚnuÎ
 ((3));

255 #ià
__HAVE_FLOAT64X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

256 
	$¡räomf64x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

257 
_Flßt64x
 
__f
)

258 
__THROW
 
	`__nÚnuÎ
 ((3));

261 #ià
__HAVE_FLOAT128X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

262 
	$¡räomf128x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

263 
_Flßt128x
 
__f
)

264 
__THROW
 
	`__nÚnuÎ
 ((3));

268 #ifdeà
__USE_GNU


272 
	~<b™s/ty³s/loÿË_t.h
>

274 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

275 **
__»¡riù
 
__’d±r
, 
__ba£
,

276 
loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

278 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

279 **
__»¡riù
 
__’d±r
,

280 
__ba£
, 
loÿË_t
 
__loc
)

281 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

283 
__ex‹nsiÚ__


284 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

285 **
__»¡riù
 
__’d±r
, 
__ba£
,

286 
loÿË_t
 
__loc
)

287 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

289 
__ex‹nsiÚ__


290 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

291 **
__»¡riù
 
__’d±r
,

292 
__ba£
, 
loÿË_t
 
__loc
)

293 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

295 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

296 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

297 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

299 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

300 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

301 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

303 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

304 **
__»¡riù
 
__’d±r
,

305 
loÿË_t
 
__loc
)

306 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

308 #ià
__HAVE_FLOAT16


309 
_Flßt16
 
	$¡¹of16_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

310 **
__»¡riù
 
__’d±r
,

311 
loÿË_t
 
__loc
)

312 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

315 #ià
__HAVE_FLOAT32


316 
_Flßt32
 
	$¡¹of32_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

317 **
__»¡riù
 
__’d±r
,

318 
loÿË_t
 
__loc
)

319 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

322 #ià
__HAVE_FLOAT64


323 
_Flßt64
 
	$¡¹of64_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

324 **
__»¡riù
 
__’d±r
,

325 
loÿË_t
 
__loc
)

326 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

329 #ià
__HAVE_FLOAT128


330 
_Flßt128
 
	$¡¹of128_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 **
__»¡riù
 
__’d±r
,

332 
loÿË_t
 
__loc
)

333 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

336 #ià
__HAVE_FLOAT32X


337 
_Flßt32x
 
	$¡¹of32x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

338 **
__»¡riù
 
__’d±r
,

339 
loÿË_t
 
__loc
)

340 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

343 #ià
__HAVE_FLOAT64X


344 
_Flßt64x
 
	$¡¹of64x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

345 **
__»¡riù
 
__’d±r
,

346 
loÿË_t
 
__loc
)

347 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

350 #ià
__HAVE_FLOAT128X


351 
_Flßt128x
 
	$¡¹of128x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

352 **
__»¡riù
 
__’d±r
,

353 
loÿË_t
 
__loc
)

354 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

359 #ifdeà
__USE_EXTERN_INLINES


360 
__ex‹º_šlše
 

361 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

363  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

364 
	}
}

365 
__ex‹º_šlše
 

366 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

368  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

369 
	}
}

371 #ifdeà
__USE_ISOC99


372 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

373 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

375  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

376 
	}
}

381 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


385 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

388 
	$a64l
 (cÚ¡ *
__s
)

389 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

393 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


394 
	~<sys/ty³s.h
>

401 
	$¿ndom
 (è
__THROW
;

404 
	$¤ªdom
 (
__£ed
è
__THROW
;

410 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

411 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

415 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

418 #ifdeà
__USE_MISC


423 
	s¿ndom_d©a


425 
št32_t
 *
åŒ
;

426 
št32_t
 *
½Œ
;

427 
št32_t
 *
¡©e
;

428 
¿nd_ty³
;

429 
¿nd_deg
;

430 
¿nd_£p
;

431 
št32_t
 *
’d_±r
;

434 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

435 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

437 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

438 
__THROW
 
	`__nÚnuÎ
 ((2));

440 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

441 
size_t
 
__¡©–’
,

442 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

443 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

445 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

446 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

447 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$¿nd
 (è
__THROW
;

455 
	$¤ªd
 (
__£ed
è
__THROW
;

457 #ifdeà
__USE_POSIX199506


459 
	$¿nd_r
 (*
__£ed
è
__THROW
;

463 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


467 
	$d¿nd48
 (è
__THROW
;

468 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

471 
	$Ìªd48
 (è
__THROW
;

472 
	$Äªd48
 (
__xsubi
[3])

473 
__THROW
 
	`__nÚnuÎ
 ((1));

476 
	$m¿nd48
 (è
__THROW
;

477 
	$j¿nd48
 (
__xsubi
[3])

478 
__THROW
 
	`__nÚnuÎ
 ((1));

481 
	$¤ªd48
 (
__£edv®
è
__THROW
;

482 *
	$£ed48
 (
__£ed16v
[3])

483 
__THROW
 
	`__nÚnuÎ
 ((1));

484 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

486 #ifdeà
__USE_MISC


490 
	sd¿nd48_d©a


492 
__x
[3];

493 
__Şd_x
[3];

494 
__c
;

495 
__š™
;

496 
__ex‹nsiÚ__
 
__a
;

501 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

502 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

503 
	$”ªd48_r
 (
__xsubi
[3],

504 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

505 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

508 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

509 *
__»¡riù
 
__»suÉ
)

510 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

511 
	$Äªd48_r
 (
__xsubi
[3],

512 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

513 *
__»¡riù
 
__»suÉ
)

514 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

517 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

518 *
__»¡riù
 
__»suÉ
)

519 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

520 
	$j¿nd48_r
 (
__xsubi
[3],

521 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

522 *
__»¡riù
 
__»suÉ
)

523 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

526 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

527 
__THROW
 
	`__nÚnuÎ
 ((2));

529 
	$£ed48_r
 (
__£ed16v
[3],

530 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

532 
	$lcÚg48_r
 (
__·¿m
[7],

533 
d¿nd48_d©a
 *
__bufãr
)

534 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

539 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__


540 
	`__©Œibu‹_®loc_size__
 ((1)è
__wur
;

542 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

543 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((1, 2)è
__wur
;

550 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

551 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
 
	`__©Œibu‹_®loc_size__
 ((2));

553 #ifdeà
__USE_MISC


559 *
	$»®loÿ¼ay
 (*
__±r
, 
size_t
 
__nmemb
, size_ˆ
__size
)

560 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__


561 
	`__©Œibu‹_®loc_size__
 ((2, 3));

565 
	$ä“
 (*
__±r
è
__THROW
;

567 #ifdeà
__USE_MISC


568 
	~<®loÿ.h
>

571 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

572 || 
defšed
 
__USE_MISC


574 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__


575 
	`__©Œibu‹_®loc_size__
 ((1)è
__wur
;

578 #ifdeà
__USE_XOPEN2K


580 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

581 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

584 #ifdeà
__USE_ISOC11


586 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

587 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

591 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

595 
	$©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

597 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


599 #ifdeà
__ılu¥lus


600 "C++" 
	$©_quick_ex™
 ((*
__func
) ())

601 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

603 
	$©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

607 #ifdef 
__USE_MISC


610 
	$Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

611 
__THROW
 
	`__nÚnuÎ
 ((1));

617 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

619 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


623 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

626 #ifdeà
__USE_ISOC99


629 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

634 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

636 #ifdeà
__USE_GNU


639 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

640 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


647 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

650 #ifdeà
__USE_XOPEN2K


653 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

654 
__THROW
 
	`__nÚnuÎ
 ((2));

657 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

660 #ifdef 
__USE_MISC


664 
	$ş—»nv
 (è
__THROW
;

668 #ià
defšed
 
__USE_MISC
 \

669 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

675 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

678 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


687 #iâdeà
__USE_FILE_OFFSET64


688 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

690 #ifdeà
__REDIRECT


691 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

692 
	`__nÚnuÎ
 ((1)è
__wur
;

694 
	#mk¡emp
 
mk¡emp64


	)

697 #ifdeà
__USE_LARGEFILE64


698 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

702 #ifdeà
__USE_MISC


709 #iâdeà
__USE_FILE_OFFSET64


710 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

712 #ifdeà
__REDIRECT


713 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

714 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

716 
	#mk¡emps
 
mk¡emps64


	)

719 #ifdeà
__USE_LARGEFILE64


720 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

721 
	`__nÚnuÎ
 ((1)è
__wur
;

725 #ifdeà
__USE_XOPEN2K8


731 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

734 #ifdeà
__USE_GNU


741 #iâdeà
__USE_FILE_OFFSET64


742 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

744 #ifdeà
__REDIRECT


745 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

746 
	`__nÚnuÎ
 ((1)è
__wur
;

748 
	#mko¡emp
 
mko¡emp64


	)

751 #ifdeà
__USE_LARGEFILE64


752 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

761 #iâdeà
__USE_FILE_OFFSET64


762 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

763 
	`__nÚnuÎ
 ((1)è
__wur
;

765 #ifdeà
__REDIRECT


766 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

767 
__æags
), 
mko¡emps64
)

768 
	`__nÚnuÎ
 ((1)è
__wur
;

770 
	#mko¡emps
 
mko¡emps64


	)

773 #ifdeà
__USE_LARGEFILE64


774 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

775 
	`__nÚnuÎ
 ((1)è
__wur
;

784 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

787 #ifdef 
__USE_GNU


790 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

791 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

794 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


800 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

801 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

806 #iâdeà
__COMPAR_FN_T


807 
	#__COMPAR_FN_T


	)

808 (*
	t__com·r_â_t
) (const *, const *);

810 #ifdef 
__USE_GNU


811 
__com·r_â_t
 
	tcom·risÚ_â_t
;

814 #ifdeà
__USE_GNU


815 (*
	t__com·r_d_â_t
) (const *, const *, *);

820 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

821 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

822 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

824 #ifdeà
__USE_EXTERN_INLINES


825 
	~<b™s/¡dlib-b£¬ch.h
>

830 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

831 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

832 #ifdeà
__USE_GNU


833 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

834 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

835 
	`__nÚnuÎ
 ((1, 4));

840 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

841 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

843 #ifdeà
__USE_ISOC99


844 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

845 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

852 
div_t
 
	$div
 (
__num”
, 
__d’om
)

853 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

854 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

855 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

857 #ifdeà
__USE_ISOC99


858 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

859 
__d’om
)

860 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

864 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

865 || 
defšed
 
__USE_MISC


872 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

873 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

878 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

879 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

884 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

885 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

888 #ifdeà
__USE_MISC


890 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

891 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

892 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

893 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

894 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

895 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

896 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

897 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

902 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

903 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

904 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

905 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

906 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

907 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

909 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

910 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

911 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

912 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

913 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

914 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

915 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

916 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

922 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

925 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

926 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

929 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

933 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

934 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

936 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

937 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

938 
__THROW
;

941 #ifdeà
__USE_MISC


946 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

950 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


957 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

958 *cÚ¡ *
__»¡riù
 
__tok’s
,

959 **
__»¡riù
 
__v®u•
)

960 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

966 #ifdeà
__USE_XOPEN2KXSI


968 
	$posix_İ’±
 (
__oæag
è
__wur
;

971 #ifdeà
__USE_XOPEN_EXTENDED


976 
	$g¿Á±
 (
__fd
è
__THROW
;

980 
	$uÆock±
 (
__fd
è
__THROW
;

985 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

988 #ifdeà
__USE_GNU


992 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

993 
__THROW
 
	`__nÚnuÎ
 ((2));

996 
	`g‘±
 ();

999 #ifdeà
__USE_MISC


1003 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

1004 
__THROW
 
	`__nÚnuÎ
 ((1));

1007 #ià
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K


1010 
	$‰y¦Ù
 (è
__THROW
;

1013 
	~<b™s/¡dlib-æßt.h
>

1016 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1017 
	~<b™s/¡dlib.h
>

1019 #ifdeà
__LDBL_COMPAT


1020 
	~<b™s/¡dlib-ldbl.h
>

1023 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

28 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

36 #ià
defšed
 
__ılu¥lus
 && (
__GNUC_PREREQ
 (4, 4) \

37 || 
	$__glibc_şªg_´”eq
 (3, 5))

38 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

43 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

44 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

47 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

48 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

53 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || 
	`__GLIBC_USE
 (
ISOC2X
)

54 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

61 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

64 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

65 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

68 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


71 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

72 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

73 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

74 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

76 #ifdeà
__OPTIMIZE__


77 
__ex‹º_®ways_šlše
 *

78 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


80  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

83 
__ex‹º_®ways_šlše
 const *

84 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


86  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

89 
	}
}

91 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

92 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

95 #ifdeà
__USE_GNU


98 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


99 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

100 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

101 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

104 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

105 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

109 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


110 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

111 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

112 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

116 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

122 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

123 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

125 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

126 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

127 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

130 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

131 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

133 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

134 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

138 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

140 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

141 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

148 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

149 
__THROW
 
	`__nÚnuÎ
 ((2));

151 #ifdeà
__USE_XOPEN2K8


153 
	~<b™s/ty³s/loÿË_t.h
>

156 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__l
)

157 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

160 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

161 
loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

164 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8
 \

165 || 
	`__GLIBC_USE
 (
LIB_EXT2
è|| 
	$__GLIBC_USE
 (
ISOC2X
))

167 *
	$¡rdup
 (cÚ¡ *
__s
)

168 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

174 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
è|| __GLIBC_USE (
ISOC2X
)

175 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

176 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

179 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


181 
	#¡rdu·
(
s
) \

182 (
__ex‹nsiÚ__
 \

184 cÚ¡ *
__Şd
 = (
s
); \

185 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

186 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

187 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

188 
	}
}))

	)

191 
	#¡ºdu·
(
s
, 
n
) \

192 (
__ex‹nsiÚ__
 \

194 cÚ¡ *
__Şd
 = (
s
); \

195 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

196 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

197 
__Ãw
[
__Ën
] = '\0'; \

198 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

199 }))

	)

203 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


206 *
¡rchr
 (*
__s
, 
__c
)

207 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

208 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

209 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

211 #ifdeà
__OPTIMIZE__


212 
__ex‹º_®ways_šlše
 *

213 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


215  
__butš_¡rchr
 (
__s
, 
__c
);

218 
__ex‹º_®ways_šlše
 const *

219 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


221  
__butš_¡rchr
 (
__s
, 
__c
);

226 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

227 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

230 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


233 *
	`¡¼chr
 (*
__s
, 
__c
)

234 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

235 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

236 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

238 #ifdeà
__OPTIMIZE__


239 
__ex‹º_®ways_šlše
 *

240 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


242  
	`__butš_¡¼chr
 (
__s
, 
__c
);

245 
__ex‹º_®ways_šlše
 const *

246 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


248  
	`__butš_¡¼chr
 (
__s
, 
__c
);

251 
	}
}

253 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

254 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

257 #ifdeà
__USE_GNU


260 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


261 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

262 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

263 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

267 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

273 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

274 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

277 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

280 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


283 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

284 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

285 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

286 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

288 #ifdeà
__OPTIMIZE__


289 
__ex‹º_®ways_šlše
 *

290 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


292  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

295 
__ex‹º_®ways_šlše
 const *

296 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


298  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

301 
	}
}

303 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

304 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

307 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


310 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

311 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

312 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

313 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

315 #ifdeà
__OPTIMIZE__


316 
__ex‹º_®ways_šlše
 *

317 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


319  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

322 
__ex‹º_®ways_šlše
 const *

323 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


325  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

328 
	}
}

330 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

331 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

336 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

337 
__THROW
 
	`__nÚnuÎ
 ((2));

341 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

342 cÚ¡ *
__»¡riù
 
__d–im
,

343 **
__»¡riù
 
__§ve_±r
)

344 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

345 #ifdeà
__USE_POSIX


346 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

347 **
__»¡riù
 
__§ve_±r
)

348 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

351 #ifdeà
__USE_GNU


353 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


354 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

355 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

356 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

357 cÚ¡ *
__ÃedË
)

358 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

360 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

361 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

365 #ifdeà
__USE_GNU


369 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

370 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

371 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

375 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

376 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

377 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

378 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

379 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

380 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

385 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

386 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

388 #ifdef 
__USE_XOPEN2K8


391 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

392 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

397 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

398 #ifdeà
__USE_XOPEN2K


406 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


409 #ifdeà
__REDIRECT_NTH


410 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

411 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

412 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

414 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

415 
__THROW
 
	`__nÚnuÎ
 ((2));

416 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

421 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

422 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

426 #ifdeà
__USE_XOPEN2K8


428 *
	$¡»¼Ü_l
 (
__”ºum
, 
loÿË_t
 
__l
è
__THROW
;

431 #ifdeà
__USE_MISC


432 
	~<¡ršgs.h
>

436 
	$ex¶ic™_bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

440 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

441 cÚ¡ *
__»¡riù
 
__d–im
)

442 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

445 #ifdef 
__USE_XOPEN2K8


447 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

450 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

451 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

452 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

453 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

457 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

458 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

459 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

460 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

461 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

462 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

465 #ifdef 
__USE_GNU


467 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

468 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

471 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

474 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

476 #iâdeà
ba£Çme


481 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


482 "C++" *
	$ba£Çme
 (*
__f’ame
)

483 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

484 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

485 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

487 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

492 #ià
	`__GNUC_PREREQ
 (3,4)

493 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


495 
	~<b™s/¡ršg_fÜtif›d.h
>

499 
__END_DECLS


	@/usr/include/sys/syscall.h

18 #iâdeà
_SYSCALL_H


19 
	#_SYSCALL_H
 1

	)

24 
	~<asm/uni¡d.h
>

29 
	~<b™s/sysÿÎ.h
>

	@/usr/include/sys/types.h

22 #iâdef 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdef 
__USE_MISC


32 #iâdeà
__u_ch¬_defšed


33 
__u_ch¬
 
	tu_ch¬
;

34 
__u_shÜt
 
	tu_shÜt
;

35 
__u_št
 
	tu_št
;

36 
__u_lÚg
 
	tu_lÚg
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¬_defšed


	)

42 
__loff_t
 
	tloff_t
;

45 #iâdeà
__šo_t_defšed


46 #iâdeà
__USE_FILE_OFFSET64


47 
__šo_t
 
	tšo_t
;

49 
__šo64_t
 
	tšo_t
;

51 
	#__šo_t_defšed


	)

53 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


54 
__šo64_t
 
	tšo64_t
;

55 
	#__šo64_t_defšed


	)

58 #iâdeà
__dev_t_defšed


59 
__dev_t
 
	tdev_t
;

60 
	#__dev_t_defšed


	)

63 #iâdeà
__gid_t_defšed


64 
__gid_t
 
	tgid_t
;

65 
	#__gid_t_defšed


	)

68 #iâdeà
__mode_t_defšed


69 
__mode_t
 
	tmode_t
;

70 
	#__mode_t_defšed


	)

73 #iâdeà
__Æšk_t_defšed


74 
__Æšk_t
 
	tÆšk_t
;

75 
	#__Æšk_t_defšed


	)

78 #iâdeà
__uid_t_defšed


79 
__uid_t
 
	tuid_t
;

80 
	#__uid_t_defšed


	)

83 #iâdeà
__off_t_defšed


84 #iâdeà
__USE_FILE_OFFSET64


85 
__off_t
 
	toff_t
;

87 
__off64_t
 
	toff_t
;

89 
	#__off_t_defšed


	)

91 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


92 
__off64_t
 
	toff64_t
;

93 
	#__off64_t_defšed


	)

96 #iâdeà
__pid_t_defšed


97 
__pid_t
 
	tpid_t
;

98 
	#__pid_t_defšed


	)

101 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

102 && !
defšed
 
__id_t_defšed


103 
__id_t
 
	tid_t
;

104 
	#__id_t_defšed


	)

107 #iâdeà
__ssize_t_defšed


108 
__ssize_t
 
	tssize_t
;

109 
	#__ssize_t_defšed


	)

112 #ifdef 
__USE_MISC


113 #iâdeà
__daddr_t_defšed


114 
__daddr_t
 
	tdaddr_t
;

115 
__ÿddr_t
 
	tÿddr_t
;

116 
	#__daddr_t_defšed


	)

120 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


121 
__key_t
 
	tkey_t
;

122 
	#__key_t_defšed


	)

125 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


126 
	~<b™s/ty³s/şock_t.h
>

128 
	~<b™s/ty³s/şockid_t.h
>

129 
	~<b™s/ty³s/time_t.h
>

130 
	~<b™s/ty³s/tim”_t.h
>

132 #ifdeà
__USE_XOPEN


133 #iâdeà
__u£cÚds_t_defšed


134 
__u£cÚds_t
 
	tu£cÚds_t
;

135 
	#__u£cÚds_t_defšed


	)

137 #iâdeà
__su£cÚds_t_defšed


138 
__su£cÚds_t
 
	tsu£cÚds_t
;

139 
	#__su£cÚds_t_defšed


	)

143 
	#__Ãed_size_t


	)

144 
	~<¡ddef.h
>

146 #ifdeà
__USE_MISC


148 
	tulÚg
;

149 
	tushÜt
;

150 
	tušt
;

155 
	~<b™s/¡dšt-šŠ.h
>

158 
__ušt8_t
 
	tu_št8_t
;

159 
__ušt16_t
 
	tu_št16_t
;

160 
__ušt32_t
 
	tu_št32_t
;

161 
__ušt64_t
 
	tu_št64_t
;

163 #ià
__GNUC_PREREQ
 (2, 7)

164 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

166 
	t»gi¡”_t
;

171 
	#__BIT_TYPES_DEFINED__
 1

	)

174 #ifdef 
__USE_MISC


176 
	~<’dŸn.h
>

179 
	~<sys/£Ëù.h
>

183 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

184 && !
defšed
 
__blksize_t_defšed


185 
__blksize_t
 
	tblksize_t
;

186 
	#__blksize_t_defšed


	)

190 #iâdeà
__USE_FILE_OFFSET64


191 #iâdeà
__blkút_t_defšed


192 
__blkút_t
 
	tblkút_t
;

193 
	#__blkút_t_defšed


	)

195 #iâdeà
__fsblkút_t_defšed


196 
__fsblkút_t
 
	tfsblkút_t
;

197 
	#__fsblkút_t_defšed


	)

199 #iâdeà
__fsfút_t_defšed


200 
__fsfút_t
 
	tfsfút_t
;

201 
	#__fsfút_t_defšed


	)

204 #iâdeà
__blkút_t_defšed


205 
__blkút64_t
 
	tblkút_t
;

206 
	#__blkút_t_defšed


	)

208 #iâdeà
__fsblkút_t_defšed


209 
__fsblkút64_t
 
	tfsblkút_t
;

210 
	#__fsblkút_t_defšed


	)

212 #iâdeà
__fsfút_t_defšed


213 
__fsfút64_t
 
	tfsfút_t
;

214 
	#__fsfút_t_defšed


	)

218 #ifdeà
__USE_LARGEFILE64


219 
__blkút64_t
 
	tblkút64_t
;

220 
__fsblkút64_t
 
	tfsblkút64_t
;

221 
__fsfút64_t
 
	tfsfút64_t
;

226 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


227 
	~<b™s/±h»adty³s.h
>

230 
	g__END_DECLS


	@/usr/include/tbb/task_scheduler_init.h

17 
	~"š‹º®/_d•»ÿ‹d_h—d”_mes§ge_gu¬d.h
"

19 #ià!
defšed
(
__TBB_show_d•»ÿtiÚ_mes§ge_sk_scheduËr_š™_H
è&& defšed(
__TBB_show_d•»ÿ‹d_h—d”_mes§ge
)

20 
	#__TBB_show_d•»ÿtiÚ_mes§ge_sk_scheduËr_š™_H


	)

21 #´agm¨
mes§ge
("TBB Warning:bb/task_scheduler_init.h is deprecated. For details,…lease see Deprecated Features‡ppendix inhe TBB„eference manual.")

24 #ià
defšed
(
__TBB_show_d•»ÿ‹d_h—d”_mes§ge
)

25 #undeà
__TBB_show_d•»ÿ‹d_h—d”_mes§ge


28 #iâdeà
__TBB_sk_scheduËr_š™_H


29 
	#__TBB_sk_scheduËr_š™_H


	)

31 
	#__TBB_sk_scheduËr_š™_H_šşude_¬—


	)

32 
	~"š‹º®/_w¬nšg_suµ»ss_’abË_nÙiû.h
"

34 
	~"tbb_¡ddef.h
"

35 
	~"lim™s.h
"

36 #ià
__TBB_SUPPORTS_WORKERS_WAITING_IN_TERMINATE


37 
	~<Ãw
>

40 
Çme¥aû
 
	gtbb
 {

42 
	g¡d
::
	tsize_t
 
	t¡ack_size_ty³
;

45 
Çme¥aû
 
	gš‹º®
 {

48 
şass
 
	gscheduËr
;

66 şas 
	c__TBB_DEPRECATED_VERBOSE
 
	gsk_scheduËr_š™
: 
š‹º®
::
no_cİy
 {

67 
	eExû±iÚPrİag©iÚMode
 {

68 
´İag©iÚ_mode_exaù
 = 1u,

69 
	g´İag©iÚ_mode_ÿ±u»d
 = 2u,

70 
	g´İag©iÚ_mode_mask
 = 
´İag©iÚ_mode_exaù
 | 
´İag©iÚ_mode_ÿ±u»d


74 
	gš‹º®
::
scheduËr
* 
my_scheduËr
;

76 
boŞ
 
š‹º®_‹rmš©e
ĞboŞ 
blockšg
 );

77 #ià
__TBB_SUPPORTS_WORKERS_WAITING_IN_TERMINATE


78 
boŞ
 
__TBB_EXPORTED_METHOD
 
š‹º®_blockšg_‹rmš©e
ĞboŞ 
throwšg
 );

80 
	gpublic
:

83 cÚ¡ 
autom©ic
 = -1;

86 cÚ¡ 
	gdeã¼ed
 = -2;

100 
__TBB_EXPORTED_METHOD
 
š™Ÿlize
Ğ
numb”_of_th»ads
=
autom©ic
 );

104 
__TBB_EXPORTED_METHOD
 
š™Ÿlize
Ğ
numb”_of_th»ads
, 
¡ack_size_ty³
 
th»ad_¡ack_size
 );

107 
__TBB_EXPORTED_METHOD
 
‹rmš©e
();

109 #ià
__TBB_SUPPORTS_WORKERS_WAITING_IN_TERMINATE


110 #ià
TBB_USE_EXCEPTIONS


112 
blockšg_‹rmš©e
() {

113 
š‹º®_blockšg_‹rmš©e
Ğ 
Œue
 );

117 
boŞ
 
blockšg_‹rmš©e
(cÚ¡ 
¡d
::
nÙhrow_t
&è
__TBB_NOEXCEPT
(
Œue
) {

118  
š‹º®_blockšg_‹rmš©e
Ğ 
çl£
 );

123 
sk_scheduËr_š™
Ğ
numb”_of_th»ads
=
autom©ic
, 
¡ack_size_ty³
 
th»ad_¡ack_size
=0 ) : 
my_scheduËr
(
NULL
)

132 
__TBB_ASSERT
Ğ!(
th»ad_¡ack_size
 & 
´İag©iÚ_mode_mask
), "Requested stack size is‚ot‡ligned" );

133 #ià
TBB_USE_EXCEPTIONS


134 
	gth»ad_¡ack_size
 |ğ
TBB_USE_CAPTURED_EXCEPTION
 ? 
´İag©iÚ_mode_ÿ±u»d
 : 
´İag©iÚ_mode_exaù
;

136 
š™Ÿlize
Ğ
numb”_of_th»ads
, 
th»ad_¡ack_size
 );

140 ~
sk_scheduËr_š™
() {

141 ifĞ
	gmy_scheduËr
 )

142 
‹rmš©e
();

143 
	gš‹º®
::
poisÚ_poš‹r
Ğ
my_scheduËr
 );

163 
__TBB_EXPORTED_FUNC
 
deçuÉ_num_th»ads
 ();

166 
boŞ
 
is_aùive
(ècÚ¡ {  
	gmy_scheduËr
 !ğ
NULL
; }

171 
	~"š‹º®/_w¬nšg_suµ»ss_di§bË_nÙiû.h
"

172 #undeà
__TBB_sk_scheduËr_š™_H_šşude_¬—


	@/usr/include/tbb/tbb.h

17 #iâdeà
__TBB_tbb_H


18 
	#__TBB_tbb_H


	)

20 #ià(!
defšed
(
TBB_SUPPRESS_DEPRECATED_MESSAGES
è|| (TBB_SUPPRESS_DEPRECATED_MESSAGES =ğ0)è&& !defšed(
__TBB_INTERNAL_INCLUDES_DEPRECATION_MESSAGE
)

21 #´agm¨
mes§ge
("TBB Warning:bb.h contains deprecated functionality. For details,…lease see Deprecated Features‡ppendix inhe TBB„eference manual.")

24 
	#__TBB_tbb_H_šşude_¬—


	)

25 
	~"š‹º®/_w¬nšg_suµ»ss_’abË_nÙiû.h
"

35 #ià
TBB_PREVIEW_AGGREGATOR


36 
	~"agg»g©Ü.h
"

38 
	~"®igÃd_¥aû.h
"

39 
	~"©omic.h
"

40 
	~"blocked_¿nge.h
"

41 
	~"blocked_¿nge2d.h
"

42 
	~"blocked_¿nge3d.h
"

43 #ià
TBB_PREVIEW_BLOCKED_RANGE_ND


44 
	~"blocked_¿ngeNd.h
"

46 
	~"ÿche_®igÃd_®loÿtÜ.h
"

47 
	~"combšabË.h
"

48 
	~"cÚcu¼’t_hash_m­.h
"

49 #ià
TBB_PREVIEW_CONCURRENT_LRU_CACHE


50 
	~"cÚcu¼’t_Ìu_ÿche.h
"

52 
	~"cÚcu¼’t_´iÜ™y_queue.h
"

53 
	~"cÚcu¼’t_queue.h
"

54 
	~"cÚcu¼’t_unÜd”ed_m­.h
"

55 
	~"cÚcu¼’t_unÜd”ed_£t.h
"

56 #ià
TBB_PREVIEW_CONCURRENT_ORDERED_CONTAINERS


57 
	~"cÚcu¼’t_m­.h
"

58 
	~"cÚcu¼’t_£t.h
"

60 
	~"cÚcu¼’t_veùÜ.h
"

61 
	~"ü™iÿl_£ùiÚ.h
"

62 
	~"’um”abË_th»ad_¥ecific.h
"

63 
	~"æow_g¿ph.h
"

64 
	~"glob®_cÚŒŞ.h
"

65 
	~"™”©Üs.h
"

66 
	~"mu‹x.h
"

67 
	~"nuÎ_mu‹x.h
"

68 
	~"nuÎ_rw_mu‹x.h
"

69 
	~"·¿Î–_do.h
"

70 
	~"·¿Î–_fÜ.h
"

71 
	~"·¿Î–_fÜ_—ch.h
"

72 
	~"·¿Î–_švoke.h
"

73 
	~"·¿Î–_»duû.h
"

74 
	~"·¿Î–_sÿn.h
"

75 
	~"·¿Î–_sÜt.h
"

76 
	~"·¹™iÚ”.h
"

77 
	~"p–še.h
"

78 
	~"queušg_mu‹x.h
"

79 
	~"queušg_rw_mu‹x.h
"

80 
	~"»ad”_wr™”_lock.h
"

81 
	~"»cursive_mu‹x.h
"

82 
	~"¥š_mu‹x.h
"

83 
	~"¥š_rw_mu‹x.h
"

84 
	~"sk.h
"

85 
	~"sk_¬’a.h
"

86 
	~"sk_group.h
"

87 
	~"sk_scheduËr_š™.h
"

88 
	~"sk_scheduËr_ob£rv”.h
"

89 
	~"tbb_®loÿtÜ.h
"

90 
	~"tbb_exû±iÚ.h
"

91 
	~"tbb_th»ad.h
"

92 
	~"tick_couÁ.h
"

94 
	~"š‹º®/_w¬nšg_suµ»ss_di§bË_nÙiû.h
"

95 #undeà
__TBB_tbb_H_šşude_¬—


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifdeà
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #–ià
defšed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #–ià
defšed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_MISC
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_MISC


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_MISC


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

634 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

637 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

638 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


639 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

646 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

648 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


660 
	$£g½
 (è
__THROW
;

667 
__pid_t
 
	$£tsid
 (è
__THROW
;

669 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


671 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

675 
__uid_t
 
	$g‘uid
 (è
__THROW
;

678 
__uid_t
 
	$g‘euid
 (è
__THROW
;

681 
__gid_t
 
	$g‘gid
 (è
__THROW
;

684 
__gid_t
 
	$g‘egid
 (è
__THROW
;

689 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

691 #ifdef 
__USE_GNU


693 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

700 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

702 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


705 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

708 #ifdeà
__USE_XOPEN2K


710 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

717 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

719 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

725 #ifdeà
__USE_XOPEN2K


727 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

730 #ifdeà
__USE_GNU


733 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

734 
__THROW
;

738 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

739 
__THROW
;

743 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

744 
__THROW
 
__wur
;

748 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

749 
__THROW
 
__wur
;

756 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

758 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

759 || 
defšed
 
__USE_MISC


764 
__pid_t
 
	$vfÜk
 (è
__THROW
;

770 *
	$‰yÇme
 (
__fd
è
__THROW
;

774 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

775 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

779 
	$i§‰y
 (
__fd
è
__THROW
;

781 #ifdeà
__USE_MISC


784 
	$‰y¦Ù
 (è
__THROW
;

789 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

790 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

792 #ifdeà
__USE_ATFILE


795 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

796 cÚ¡ *
__to
, 
__æags
)

797 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

800 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


802 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

803 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

808 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

809 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

810 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

813 #ifdeà
__USE_ATFILE


815 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

816 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

819 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

820 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

821 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

825 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

827 #ifdeà
__USE_ATFILE


829 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

830 
__THROW
 
	`__nÚnuÎ
 ((2));

834 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

838 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

841 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

848 *
	`g‘logš
 ();

849 #ifdeà
__USE_POSIX199506


856 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

859 #ifdef 
__USE_MISC


861 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

865 #ifdef 
__USE_POSIX2


869 
	~<b™s/g‘İt_posix.h
>

873 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


877 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

881 #ià
defšed
 
__USE_MISC


884 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

885 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

889 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

895 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

896 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

897 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

898 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

904 
	$vhªgup
 (è
__THROW
;

907 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

915 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

916 
size_t
 
__off£t
, 
__sÿË
)

917 
__THROW
 
	`__nÚnuÎ
 ((1));

923 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

927 *
	$g‘u£rsh–l
 (è
__THROW
;

928 
	$’du£rsh–l
 (è
__THROW
;

929 
	$£tu£rsh–l
 (è
__THROW
;

935 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

939 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

942 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

946 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

954 
	`fsync
 (
__fd
);

957 #ifdeà
__USE_GNU


960 
	$syncfs
 (
__fd
è
__THROW
;

964 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


967 
	`g‘ho¡id
 ();

970 
	$sync
 (è
__THROW
;

973 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K


976 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

981 
	$g‘dbËsize
 (è
__THROW
;

987 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


990 #iâdeà
__USE_FILE_OFFSET64


991 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

992 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

994 #ifdeà
__REDIRECT_NTH


995 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

996 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

997 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

999 
	#Œunÿ‹
 
Œunÿ‹64


	)

1002 #ifdeà
__USE_LARGEFILE64


1003 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1004 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1009 #ià
defšed
 
__USE_POSIX199309
 \

1010 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1013 #iâdeà
__USE_FILE_OFFSET64


1014 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1016 #ifdeà
__REDIRECT_NTH


1017 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1018 
árunÿ‹64
è
__wur
;

1020 
	#árunÿ‹
 
árunÿ‹64


	)

1023 #ifdeà
__USE_LARGEFILE64


1024 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1030 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1031 || 
defšed
 
__USE_MISC


1035 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1041 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1045 #ifdeà
__USE_MISC


1056 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1061 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1073 
	#F_ULOCK
 0

	)

1074 
	#F_LOCK
 1

	)

1075 
	#F_TLOCK
 2

	)

1076 
	#F_TEST
 3

	)

1078 #iâdeà
__USE_FILE_OFFSET64


1079 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1081 #ifdeà
__REDIRECT


1082 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1083 
lockf64
è
__wur
;

1085 
	#lockf
 
lockf64


	)

1088 #ifdeà
__USE_LARGEFILE64


1089 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1094 #ifdeà
__USE_GNU


1099 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1100 (
__ex‹nsiÚ__
 \

1101 ({ 
__»suÉ
; \

1102 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1103 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1104 
__»suÉ
; 
	}
}))

	)

1107 
ssize_t
 
cİy_fe_¿nge
 (
__šfd
, 
__off64_t
 *
__pšoff
,

1108 
__outfd
, 
__off64_t
 *
__poutoff
,

1109 
size_t
 
__Ëngth
, 
__æags
);

1112 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1115 
fd©async
 (
__fdes
);

1118 #ifdeà
__USE_MISC


1124 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1125 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1128 #ifdef 
__USE_XOPEN


1133 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1134 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1141 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1143 *
	$ù”mid
 (*
__s
è
__THROW
;

1146 *
	`cu£rid
 (*
__s
);

1152 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_XOPEN2K


1153 
	$±h»ad_©fÜk
 ((*
__´•¬e
) (),

1154 (*
__·»Á
) (),

1155 (*
__chd
è()è
__THROW
;

1158 #ifdeà
__USE_MISC


1161 
	$g‘’Œİy
 (*
__bufãr
, 
size_t
 
__Ëngth
è
__wur
;

1165 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1166 
	~<b™s/uni¡d.h
>

1170 
	~<b™s/uni¡d_ext.h
>

1172 
__END_DECLS


	@/usr/include/asm/unistd.h

2 #iâdeà
_ASM_X86_UNISTD_H


3 
	#_ASM_X86_UNISTD_H


	)

13 
	#__X32_SYSCALL_BIT
 0x40000000

	)

15 #ifdeà
__i386__


16 
	~<asm/uni¡d_32.h
>

17 #–ià
defšed
(
__ILP32__
)

18 
	~<asm/uni¡d_x32.h
>

20 
	~<asm/uni¡d_64.h
>

	@/usr/include/bits/byteswap.h

19 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	#__bsw­_cÚ¡ªt_16
(
x
) \

31 ((
__ušt16_t
è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

33 
__šlše
 
__ušt16_t


34 
	$__bsw­_16
 (
__ušt16_t
 
__bsx
)

36 #ià
	`__GNUC_PREREQ
 (4, 8)

37  
	`__butš_bsw­16
 (
__bsx
);

39  
	`__bsw­_cÚ¡ªt_16
 (
__bsx
);

41 
	}
}

44 
	#__bsw­_cÚ¡ªt_32
(
x
) \

45 ((((
x
) & 0xff000000u) >> 24) | (((x) & 0x00ff0000u) >> 8) \

46 | (((
x
è& 0x0000ff00uè<< 8è| (((xè& 0x000000ffuè<< 24))

	)

48 
__šlše
 
__ušt32_t


49 
	$__bsw­_32
 (
__ušt32_t
 
__bsx
)

51 #ià
	`__GNUC_PREREQ
 (4, 3)

52  
	`__butš_bsw­32
 (
__bsx
);

54  
	`__bsw­_cÚ¡ªt_32
 (
__bsx
);

56 
	}
}

59 
	#__bsw­_cÚ¡ªt_64
(
x
) \

60 ((((
x
) & 0xff00000000000000ull) >> 56) \

61 | (((
x
) & 0x00ff000000000000ull) >> 40) \

62 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

63 | (((
x
) & 0x000000ff00000000ull) >> 8) \

64 | (((
x
) & 0x00000000ff000000ull) << 8) \

65 | (((
x
) & 0x0000000000ff0000ull) << 24) \

66 | (((
x
) & 0x000000000000ff00ull) << 40) \

67 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

69 
__ex‹nsiÚ__
 
__šlše
 
__ušt64_t


70 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

72 #ià
	`__GNUC_PREREQ
 (4, 3)

73  
	`__butš_bsw­64
 (
__bsx
);

75  
	`__bsw­_cÚ¡ªt_64
 (
__bsx
);

77 
	}
}

	@/usr/include/bits/confname.h

19 #iâdeà
_UNISTD_H


26 
	m_PC_LINK_MAX
,

27 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

28 
	m_PC_MAX_CANON
,

29 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

30 
	m_PC_MAX_INPUT
,

31 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

32 
	m_PC_NAME_MAX
,

33 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

34 
	m_PC_PATH_MAX
,

35 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

36 
	m_PC_PIPE_BUF
,

37 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

38 
	m_PC_CHOWN_RESTRICTED
,

39 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

40 
	m_PC_NO_TRUNC
,

41 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

42 
	m_PC_VDISABLE
,

43 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

44 
	m_PC_SYNC_IO
,

45 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

46 
	m_PC_ASYNC_IO
,

47 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

48 
	m_PC_PRIO_IO
,

49 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

50 
	m_PC_SOCK_MAXBUF
,

51 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

52 
	m_PC_FILESIZEBITS
,

53 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

54 
	m_PC_REC_INCR_XFER_SIZE
,

55 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

56 
	m_PC_REC_MAX_XFER_SIZE
,

57 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

58 
	m_PC_REC_MIN_XFER_SIZE
,

59 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

60 
	m_PC_REC_XFER_ALIGN
,

61 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

62 
	m_PC_ALLOC_SIZE_MIN
,

63 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

64 
	m_PC_SYMLINK_MAX
,

65 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

66 
	m_PC_2_SYMLINKS


67 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

73 
	m_SC_ARG_MAX
,

74 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

75 
	m_SC_CHILD_MAX
,

76 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

77 
	m_SC_CLK_TCK
,

78 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

79 
	m_SC_NGROUPS_MAX
,

80 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

81 
	m_SC_OPEN_MAX
,

82 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

83 
	m_SC_STREAM_MAX
,

84 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

85 
	m_SC_TZNAME_MAX
,

86 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

87 
	m_SC_JOB_CONTROL
,

88 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

89 
	m_SC_SAVED_IDS
,

90 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

91 
	m_SC_REALTIME_SIGNALS
,

92 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

93 
	m_SC_PRIORITY_SCHEDULING
,

94 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

95 
	m_SC_TIMERS
,

96 
	#_SC_TIMERS
 
_SC_TIMERS


	)

97 
	m_SC_ASYNCHRONOUS_IO
,

98 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

99 
	m_SC_PRIORITIZED_IO
,

100 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

101 
	m_SC_SYNCHRONIZED_IO
,

102 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

103 
	m_SC_FSYNC
,

104 
	#_SC_FSYNC
 
_SC_FSYNC


	)

105 
	m_SC_MAPPED_FILES
,

106 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

107 
	m_SC_MEMLOCK
,

108 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

109 
	m_SC_MEMLOCK_RANGE
,

110 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

111 
	m_SC_MEMORY_PROTECTION
,

112 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

113 
	m_SC_MESSAGE_PASSING
,

114 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

115 
	m_SC_SEMAPHORES
,

116 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

117 
	m_SC_SHARED_MEMORY_OBJECTS
,

118 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

119 
	m_SC_AIO_LISTIO_MAX
,

120 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

121 
	m_SC_AIO_MAX
,

122 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

123 
	m_SC_AIO_PRIO_DELTA_MAX
,

124 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

125 
	m_SC_DELAYTIMER_MAX
,

126 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

127 
	m_SC_MQ_OPEN_MAX
,

128 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

129 
	m_SC_MQ_PRIO_MAX
,

130 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

131 
	m_SC_VERSION
,

132 
	#_SC_VERSION
 
_SC_VERSION


	)

133 
	m_SC_PAGESIZE
,

134 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

135 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

136 
	m_SC_RTSIG_MAX
,

137 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

138 
	m_SC_SEM_NSEMS_MAX
,

139 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

140 
	m_SC_SEM_VALUE_MAX
,

141 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

142 
	m_SC_SIGQUEUE_MAX
,

143 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

144 
	m_SC_TIMER_MAX
,

145 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

149 
	m_SC_BC_BASE_MAX
,

150 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

151 
	m_SC_BC_DIM_MAX
,

152 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

153 
	m_SC_BC_SCALE_MAX
,

154 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

155 
	m_SC_BC_STRING_MAX
,

156 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

157 
	m_SC_COLL_WEIGHTS_MAX
,

158 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

159 
	m_SC_EQUIV_CLASS_MAX
,

160 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

161 
	m_SC_EXPR_NEST_MAX
,

162 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

163 
	m_SC_LINE_MAX
,

164 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

165 
	m_SC_RE_DUP_MAX
,

166 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

167 
	m_SC_CHARCLASS_NAME_MAX
,

168 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

170 
	m_SC_2_VERSION
,

171 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

172 
	m_SC_2_C_BIND
,

173 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

174 
	m_SC_2_C_DEV
,

175 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

176 
	m_SC_2_FORT_DEV
,

177 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

178 
	m_SC_2_FORT_RUN
,

179 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

180 
	m_SC_2_SW_DEV
,

181 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

182 
	m_SC_2_LOCALEDEF
,

183 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

185 
	m_SC_PII
,

186 
	#_SC_PII
 
_SC_PII


	)

187 
	m_SC_PII_XTI
,

188 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

189 
	m_SC_PII_SOCKET
,

190 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

191 
	m_SC_PII_INTERNET
,

192 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

193 
	m_SC_PII_OSI
,

194 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

195 
	m_SC_POLL
,

196 
	#_SC_POLL
 
_SC_POLL


	)

197 
	m_SC_SELECT
,

198 
	#_SC_SELECT
 
_SC_SELECT


	)

199 
	m_SC_UIO_MAXIOV
,

200 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

201 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

202 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

203 
	m_SC_PII_INTERNET_STREAM
,

204 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

205 
	m_SC_PII_INTERNET_DGRAM
,

206 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

207 
	m_SC_PII_OSI_COTS
,

208 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

209 
	m_SC_PII_OSI_CLTS
,

210 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

211 
	m_SC_PII_OSI_M
,

212 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

213 
	m_SC_T_IOV_MAX
,

214 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

217 
	m_SC_THREADS
,

218 
	#_SC_THREADS
 
_SC_THREADS


	)

219 
	m_SC_THREAD_SAFE_FUNCTIONS
,

220 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

221 
	m_SC_GETGR_R_SIZE_MAX
,

222 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

223 
	m_SC_GETPW_R_SIZE_MAX
,

224 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

225 
	m_SC_LOGIN_NAME_MAX
,

226 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

227 
	m_SC_TTY_NAME_MAX
,

228 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

229 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

230 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

231 
	m_SC_THREAD_KEYS_MAX
,

232 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

233 
	m_SC_THREAD_STACK_MIN
,

234 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

235 
	m_SC_THREAD_THREADS_MAX
,

236 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

237 
	m_SC_THREAD_ATTR_STACKADDR
,

238 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

239 
	m_SC_THREAD_ATTR_STACKSIZE
,

240 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

241 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

242 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

243 
	m_SC_THREAD_PRIO_INHERIT
,

244 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

245 
	m_SC_THREAD_PRIO_PROTECT
,

246 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

247 
	m_SC_THREAD_PROCESS_SHARED
,

248 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

250 
	m_SC_NPROCESSORS_CONF
,

251 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

252 
	m_SC_NPROCESSORS_ONLN
,

253 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

254 
	m_SC_PHYS_PAGES
,

255 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

256 
	m_SC_AVPHYS_PAGES
,

257 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

258 
	m_SC_ATEXIT_MAX
,

259 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

260 
	m_SC_PASS_MAX
,

261 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

263 
	m_SC_XOPEN_VERSION
,

264 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

265 
	m_SC_XOPEN_XCU_VERSION
,

266 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

267 
	m_SC_XOPEN_UNIX
,

268 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

269 
	m_SC_XOPEN_CRYPT
,

270 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

271 
	m_SC_XOPEN_ENH_I18N
,

272 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

273 
	m_SC_XOPEN_SHM
,

274 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

276 
	m_SC_2_CHAR_TERM
,

277 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

278 
	m_SC_2_C_VERSION
,

279 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

280 
	m_SC_2_UPE
,

281 
	#_SC_2_UPE
 
_SC_2_UPE


	)

283 
	m_SC_XOPEN_XPG2
,

284 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

285 
	m_SC_XOPEN_XPG3
,

286 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

287 
	m_SC_XOPEN_XPG4
,

288 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

290 
	m_SC_CHAR_BIT
,

291 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

292 
	m_SC_CHAR_MAX
,

293 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

294 
	m_SC_CHAR_MIN
,

295 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

296 
	m_SC_INT_MAX
,

297 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

298 
	m_SC_INT_MIN
,

299 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

300 
	m_SC_LONG_BIT
,

301 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

302 
	m_SC_WORD_BIT
,

303 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

304 
	m_SC_MB_LEN_MAX
,

305 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

306 
	m_SC_NZERO
,

307 
	#_SC_NZERO
 
_SC_NZERO


	)

308 
	m_SC_SSIZE_MAX
,

309 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

310 
	m_SC_SCHAR_MAX
,

311 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

312 
	m_SC_SCHAR_MIN
,

313 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

314 
	m_SC_SHRT_MAX
,

315 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

316 
	m_SC_SHRT_MIN
,

317 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

318 
	m_SC_UCHAR_MAX
,

319 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

320 
	m_SC_UINT_MAX
,

321 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

322 
	m_SC_ULONG_MAX
,

323 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

324 
	m_SC_USHRT_MAX
,

325 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

327 
	m_SC_NL_ARGMAX
,

328 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

329 
	m_SC_NL_LANGMAX
,

330 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

331 
	m_SC_NL_MSGMAX
,

332 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

333 
	m_SC_NL_NMAX
,

334 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

335 
	m_SC_NL_SETMAX
,

336 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

337 
	m_SC_NL_TEXTMAX
,

338 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

340 
	m_SC_XBS5_ILP32_OFF32
,

341 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

342 
	m_SC_XBS5_ILP32_OFFBIG
,

343 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

344 
	m_SC_XBS5_LP64_OFF64
,

345 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

346 
	m_SC_XBS5_LPBIG_OFFBIG
,

347 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

349 
	m_SC_XOPEN_LEGACY
,

350 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

351 
	m_SC_XOPEN_REALTIME
,

352 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

353 
	m_SC_XOPEN_REALTIME_THREADS
,

354 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

356 
	m_SC_ADVISORY_INFO
,

357 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

358 
	m_SC_BARRIERS
,

359 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

360 
	m_SC_BASE
,

361 
	#_SC_BASE
 
_SC_BASE


	)

362 
	m_SC_C_LANG_SUPPORT
,

363 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

364 
	m_SC_C_LANG_SUPPORT_R
,

365 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

366 
	m_SC_CLOCK_SELECTION
,

367 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

368 
	m_SC_CPUTIME
,

369 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

370 
	m_SC_THREAD_CPUTIME
,

371 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

372 
	m_SC_DEVICE_IO
,

373 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

374 
	m_SC_DEVICE_SPECIFIC
,

375 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

376 
	m_SC_DEVICE_SPECIFIC_R
,

377 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

378 
	m_SC_FD_MGMT
,

379 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

380 
	m_SC_FIFO
,

381 
	#_SC_FIFO
 
_SC_FIFO


	)

382 
	m_SC_PIPE
,

383 
	#_SC_PIPE
 
_SC_PIPE


	)

384 
	m_SC_FILE_ATTRIBUTES
,

385 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

386 
	m_SC_FILE_LOCKING
,

387 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

388 
	m_SC_FILE_SYSTEM
,

389 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

390 
	m_SC_MONOTONIC_CLOCK
,

391 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

392 
	m_SC_MULTI_PROCESS
,

393 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

394 
	m_SC_SINGLE_PROCESS
,

395 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

396 
	m_SC_NETWORKING
,

397 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

398 
	m_SC_READER_WRITER_LOCKS
,

399 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

400 
	m_SC_SPIN_LOCKS
,

401 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

402 
	m_SC_REGEXP
,

403 
	#_SC_REGEXP
 
_SC_REGEXP


	)

404 
	m_SC_REGEX_VERSION
,

405 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

406 
	m_SC_SHELL
,

407 
	#_SC_SHELL
 
_SC_SHELL


	)

408 
	m_SC_SIGNALS
,

409 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

410 
	m_SC_SPAWN
,

411 
	#_SC_SPAWN
 
_SC_SPAWN


	)

412 
	m_SC_SPORADIC_SERVER
,

413 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

414 
	m_SC_THREAD_SPORADIC_SERVER
,

415 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

416 
	m_SC_SYSTEM_DATABASE
,

417 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

418 
	m_SC_SYSTEM_DATABASE_R
,

419 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

420 
	m_SC_TIMEOUTS
,

421 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

422 
	m_SC_TYPED_MEMORY_OBJECTS
,

423 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

424 
	m_SC_USER_GROUPS
,

425 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

426 
	m_SC_USER_GROUPS_R
,

427 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

428 
	m_SC_2_PBS
,

429 
	#_SC_2_PBS
 
_SC_2_PBS


	)

430 
	m_SC_2_PBS_ACCOUNTING
,

431 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

432 
	m_SC_2_PBS_LOCATE
,

433 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

434 
	m_SC_2_PBS_MESSAGE
,

435 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

436 
	m_SC_2_PBS_TRACK
,

437 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

438 
	m_SC_SYMLOOP_MAX
,

439 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

440 
	m_SC_STREAMS
,

441 
	#_SC_STREAMS
 
_SC_STREAMS


	)

442 
	m_SC_2_PBS_CHECKPOINT
,

443 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

445 
	m_SC_V6_ILP32_OFF32
,

446 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

447 
	m_SC_V6_ILP32_OFFBIG
,

448 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

449 
	m_SC_V6_LP64_OFF64
,

450 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

451 
	m_SC_V6_LPBIG_OFFBIG
,

452 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

454 
	m_SC_HOST_NAME_MAX
,

455 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

456 
	m_SC_TRACE
,

457 
	#_SC_TRACE
 
_SC_TRACE


	)

458 
	m_SC_TRACE_EVENT_FILTER
,

459 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

460 
	m_SC_TRACE_INHERIT
,

461 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

462 
	m_SC_TRACE_LOG
,

463 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

465 
	m_SC_LEVEL1_ICACHE_SIZE
,

466 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

467 
	m_SC_LEVEL1_ICACHE_ASSOC
,

468 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

469 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

470 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

471 
	m_SC_LEVEL1_DCACHE_SIZE
,

472 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

473 
	m_SC_LEVEL1_DCACHE_ASSOC
,

474 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

475 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

476 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

477 
	m_SC_LEVEL2_CACHE_SIZE
,

478 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

479 
	m_SC_LEVEL2_CACHE_ASSOC
,

480 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

481 
	m_SC_LEVEL2_CACHE_LINESIZE
,

482 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

483 
	m_SC_LEVEL3_CACHE_SIZE
,

484 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

485 
	m_SC_LEVEL3_CACHE_ASSOC
,

486 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

487 
	m_SC_LEVEL3_CACHE_LINESIZE
,

488 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

489 
	m_SC_LEVEL4_CACHE_SIZE
,

490 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

491 
	m_SC_LEVEL4_CACHE_ASSOC
,

492 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

493 
	m_SC_LEVEL4_CACHE_LINESIZE
,

494 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

497 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

498 
	#_SC_IPV6
 
_SC_IPV6


	)

499 
	m_SC_RAW_SOCKETS
,

500 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

502 
	m_SC_V7_ILP32_OFF32
,

503 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

504 
	m_SC_V7_ILP32_OFFBIG
,

505 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

506 
	m_SC_V7_LP64_OFF64
,

507 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

508 
	m_SC_V7_LPBIG_OFFBIG
,

509 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

511 
	m_SC_SS_REPL_MAX
,

512 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

514 
	m_SC_TRACE_EVENT_NAME_MAX
,

515 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

516 
	m_SC_TRACE_NAME_MAX
,

517 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

518 
	m_SC_TRACE_SYS_MAX
,

519 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

520 
	m_SC_TRACE_USER_EVENT_MAX
,

521 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

523 
	m_SC_XOPEN_STREAMS
,

524 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

526 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

527 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

528 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


529 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

535 
	m_CS_PATH
,

536 
	#_CS_PATH
 
_CS_PATH


	)

538 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

539 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

540 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

542 
	m_CS_GNU_LIBC_VERSION
,

543 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

544 
	m_CS_GNU_LIBPTHREAD_VERSION
,

545 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

547 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

548 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

549 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

551 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

552 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

553 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

555 
	m_CS_LFS_CFLAGS
 = 1000,

556 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

557 
	m_CS_LFS_LDFLAGS
,

558 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

559 
	m_CS_LFS_LIBS
,

560 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

561 
	m_CS_LFS_LINTFLAGS
,

562 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

563 
	m_CS_LFS64_CFLAGS
,

564 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

565 
	m_CS_LFS64_LDFLAGS
,

566 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

567 
	m_CS_LFS64_LIBS
,

568 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

569 
	m_CS_LFS64_LINTFLAGS
,

570 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

572 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

573 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

574 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

575 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

576 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

577 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

578 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

579 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

580 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

581 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

582 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

583 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

584 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

585 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

586 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

587 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

588 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

589 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

590 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

591 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

592 
	m_CS_XBS5_LP64_OFF64_LIBS
,

593 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

594 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

595 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

596 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

597 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

598 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

599 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

600 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

601 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

602 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

603 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

605 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

606 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

607 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

608 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

609 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

610 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

611 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

612 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

613 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

614 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

615 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

616 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

617 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

618 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

619 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

620 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

621 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

622 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

623 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

624 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

625 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

626 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

627 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

628 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

629 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

630 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

631 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

632 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

633 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

634 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

635 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

636 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

638 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

639 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

640 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

641 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

642 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

643 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

644 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

645 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

646 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

647 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

648 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

649 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

650 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

651 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

652 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

653 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

654 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

655 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

656 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

657 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

658 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

659 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

660 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

661 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

662 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

663 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

664 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

665 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

666 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

667 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

668 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

669 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

671 
	m_CS_V6_ENV
,

672 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

673 
	m_CS_V7_ENV


674 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/cpu-set.h

20 #iâdeà
_BITS_CPU_SET_H


21 
	#_BITS_CPU_SET_H
 1

	)

23 #iâdeà
_SCHED_H


28 
	#__CPU_SETSIZE
 1024

	)

29 
	#__NCPUBITS
 (8 *  (
__ıu_mask
))

	)

32 
__CPU_MASK_TYPE
 
	t__ıu_mask
;

35 
	#__CPUELT
(
ıu
è((ıuè/ 
__NCPUBITS
)

	)

36 
	#__CPUMASK
(
ıu
è((
__ıu_mask
è1 << ((ıuè% 
__NCPUBITS
))

	)

41 
__ıu_mask
 
	m__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

42 } 
	tıu_£t_t
;

45 #ià
__GNUC_PREREQ
 (2, 91)

46 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

47 dØ
	`__butš_mem£t
 (
ıu£
, '\0', 
£tsize
); 0)

	)

49 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

51 
size_t
 
__i
; \

52 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

53 
__ıu_mask
 *
__b™s
 = (
ıu£
)->__bits; \

54 
__i
 = 0; __˜< 
__imax
; ++__i) \

55 
__b™s
[
__i
] = 0; \

56 } 0)

	)

58 
	#__CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
) \

59 (
__ex‹nsiÚ__
 \

60 ({ 
size_t
 
__ıu
 = (
ıu
); \

61 
__ıu
 / 8 < (
£tsize
) \

62 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

63 |ğ
	`__CPUMASK
 (
__ıu
)) \

64 : 0; }))

	)

65 
	#__CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
) \

66 (
__ex‹nsiÚ__
 \

67 ({ 
size_t
 
__ıu
 = (
ıu
); \

68 
__ıu
 / 8 < (
£tsize
) \

69 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

70 &ğ~
	`__CPUMASK
 (
__ıu
)) \

71 : 0; }))

	)

72 
	#__CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
) \

73 (
__ex‹nsiÚ__
 \

74 ({ 
size_t
 
__ıu
 = (
ıu
); \

75 
__ıu
 / 8 < (
£tsize
) \

76 ? ((((cÚ¡ 
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

77 & 
	`__CPUMASK
 (
__ıu
))) != 0 \

78 : 0; }))

	)

80 
	#__CPU_COUNT_S
(
£tsize
, 
ıu£
) \

81 
	`__sched_ıucouÁ
 (
£tsize
, 
ıu£
)

	)

83 #ià
__GNUC_PREREQ
 (2, 91)

84 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

85 (
	`__butš_memcmp
 (
ıu£1
, 
ıu£2
, 
£tsize
è=ğ0)

	)

87 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

88 (
__ex‹nsiÚ__
 \

89 ({ cÚ¡ 
__ıu_mask
 *
__¬r1
 = (
ıu£1
)->
__b™s
; \

90 cÚ¡ 
__ıu_mask
 *
__¬r2
 = (
ıu£2
)->
__b™s
; \

91 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

92 
size_t
 
__i
; \

93 
__i
 = 0; __˜< 
__imax
; ++__i) \

94 ià(
__¬r1
[
__i
] !ğ
__¬r2
[__i]) \

96 
__i
 =ğ
__imax
; }))

	)

99 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
İ
) \

100 (
__ex‹nsiÚ__
 \

101 ({ 
ıu_£t_t
 *
__de¡
 = (
de¡£t
); \

102 cÚ¡ 
__ıu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

103 cÚ¡ 
__ıu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

104 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

105 
size_t
 
__i
; \

106 
__i
 = 0; __˜< 
__imax
; ++__i) \

107 ((
__ıu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
İ
 
__¬r2
[__i]; \

108 
__de¡
; }))

	)

110 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

111 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ıu_mask
))

	)

112 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ıu®loc
 (couÁ)

	)

113 
	#__CPU_FREE
(
ıu£t
è
	`__sched_ıuä“
 (ıu£t)

	)

115 
__BEGIN_DECLS


117 
	$__sched_ıucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ıu_£t_t
 *
__£
)

118 
__THROW
;

119 
ıu_£t_t
 *
	$__sched_ıu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

120 
	$__sched_ıuä“
 (
ıu_£t_t
 *
__£t
è
__THROW
;

122 
__END_DECLS


	@/usr/include/bits/endian.h

19 #iâdeà
_BITS_ENDIAN_H


20 
	#_BITS_ENDIAN_H
 1

	)

30 
	#__LITTLE_ENDIAN
 1234

	)

31 
	#__BIG_ENDIAN
 4321

	)

32 
	#__PDP_ENDIAN
 3412

	)

35 
	~<b™s/’dŸÂess.h
>

39 #iâdeà
__FLOAT_WORD_ORDER


40 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

43 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


44 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

45 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


46 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

	@/usr/include/bits/environments.h

18 #iâdeà
_UNISTD_H


22 
	~<b™s/wÜdsize.h
>

42 #ià
__WORDSIZE
 == 64

56 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

57 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

58 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

61 
	#_POSIX_V7_LP64_OFF64
 1

	)

62 
	#_POSIX_V6_LP64_OFF64
 1

	)

63 
	#_XBS5_LP64_OFF64
 1

	)

69 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

70 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

71 
	#_XBS5_ILP32_OFFBIG
 1

	)

73 #iâdeà
__x86_64__


75 
	#_POSIX_V7_ILP32_OFF32
 1

	)

76 
	#_POSIX_V6_ILP32_OFF32
 1

	)

77 
	#_XBS5_ILP32_OFF32
 1

	)

95 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

96 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

97 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


98 
	#__ILP32_OFFBIG_CFLAGS
 "-mx32"

	)

99 
	#__ILP32_OFFBIG_LDFLAGS
 "-mx32"

	)

101 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

102 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

104 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

105 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/floatn.h

19 #iâdeà
_BITS_FLOATN_H


20 
	#_BITS_FLOATN_H


	)

22 
	~<ã©u»s.h
>

29 #ià(
defšed
 
__x86_64__
 \

30 ? 
__GNUC_PREREQ
 (4, 3) \

31 : (
defšed
 
__GNU__
 ? 
	$__GNUC_PREREQ
 (4, 5è: 
	`__GNUC_PREREQ
 (4, 4))) \

32 && !
	$defšed
(
__CUDACC__
)

33 
	#__HAVE_FLOAT128
 1

	)

35 
	#__HAVE_FLOAT128
 0

	)

40 #ià
__HAVE_FLOAT128


41 
	#__HAVE_DISTINCT_FLOAT128
 1

	)

43 
	#__HAVE_DISTINCT_FLOAT128
 0

	)

49 
	#__HAVE_FLOAT64X
 1

	)

55 
	#__HAVE_FLOAT64X_LONG_DOUBLE
 1

	)

57 #iâdeà
__ASSEMBLER__


61 #ià
__HAVE_FLOAT128


62 #ià!
	`__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


64 
	#__f128
(
x
èx##
q


	)

66 
	#__f128
(
x
èx##
f128


	)

71 #ià
__HAVE_FLOAT128


72 #ià!
	`__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


75 
_Com¶ex
 
	t__cæßt128
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__TC__
)));

76 
	#__CFLOAT128
 
__cæßt128


	)

78 
	#__CFLOAT128
 
_Com¶ex
 
_Flßt128


	)

83 #ià
__HAVE_FLOAT128


86 #ià!
	`__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


87 
__æßt128
 
	t_Flßt128
;

91 #ià!
	`__GNUC_PREREQ
 (7, 0)

92 
	#__butš_huge_v®f128
(è((
_Flßt128
è
	`__butš_huge_v®
 ())

	)

100 #ià!
	`__GNUC_PREREQ
 (7, 0)

101 
	#__butš_cİysignf128
 
__butš_cİysignq


	)

102 
	#__butš_çbsf128
 
__butš_çbsq


	)

103 
	#__butš_šff128
(è((
_Flßt128
è
	`__butš_šf
 ())

	)

104 
	#__butš_Çnf128
(
x
è((
_Flßt128
è
	`__butš_Çn
 (x))

	)

105 
	#__butš_Çnsf128
(
x
è((
_Flßt128
è
	`__butš_Çns
 (x))

	)

112 #ià!
	`__GNUC_PREREQ
 (6, 0)

113 
	#__butš_signb™f128
 
__signb™f128


	)

120 
	~<b™s/æßŠ-commÚ.h
>

	@/usr/include/bits/getopt_core.h

20 #iâdeà
_GETOPT_CORE_H


21 
	#_GETOPT_CORE_H
 1

	)

28 
__BEGIN_DECLS


36 *
İrg
;

50 
İtšd
;

55 
İ‹¼
;

59 
İtİt
;

91 
	$g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

92 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

94 
__END_DECLS


	@/usr/include/bits/getopt_ext.h

20 #iâdeà
_GETOPT_EXT_H


21 
	#_GETOPT_EXT_H
 1

	)

27 
__BEGIN_DECLS


50 
	sİtiÚ


52 cÚ¡ *
	mÇme
;

55 
	mhas_¬g
;

56 *
	mæag
;

57 
	mv®
;

62 
	#no_¬gum’t
 0

	)

63 
	#»quœed_¬gum’t
 1

	)

64 
	#İtiÚ®_¬gum’t
 2

	)

66 
	$g‘İt_lÚg
 (
___¬gc
, *
__g‘İt_¬gv_cÚ¡
 *
___¬gv
,

67 cÚ¡ *
__shÜtİts
,

68 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

69 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

70 
	$g‘İt_lÚg_Úly
 (
___¬gc
, *
__g‘İt_¬gv_cÚ¡
 *
___¬gv
,

71 cÚ¡ *
__shÜtİts
,

72 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

73 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

75 
__END_DECLS


	@/usr/include/bits/getopt_posix.h

20 #iâdeà
_GETOPT_POSIX_H


21 
	#_GETOPT_POSIX_H
 1

	)

23 #ià!
defšed
 
_UNISTD_H
 && !defšed 
_STDIO_H


27 
	~<b™s/g‘İt_cÜe.h
>

29 
	g__BEGIN_DECLS


31 #ià
defšed
 
__USE_POSIX2
 && !defšed 
__USE_POSIX_IMPLICITLY
 \

32 && !
defšed
 
	g__USE_GNU
 && !defšed 
	g_GETOPT_H


37 #ifdeà
__REDIRECT


38 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

39 cÚ¡ *
__shÜtİts
),

40 
__posix_g‘İt
);

42 
	$__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

43 cÚ¡ *
__shÜtİts
)

44 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

45 
	#g‘İt
 
__posix_g‘İt


	)

49 
__END_DECLS


	@/usr/include/bits/libc-header-start.h

27 #iâdeà
__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


31 #undeà
__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


33 
	~<ã©u»s.h
>

37 #undeà
__GLIBC_USE_LIB_EXT2


38 #ià(
defšed
 
__USE_GNU
 \

39 || (
defšed
 
	g__STDC_WANT_LIB_EXT2__
 && __STDC_WANT_LIB_EXT2__ > 0))

40 
	#__GLIBC_USE_LIB_EXT2
 1

	)

42 
	#__GLIBC_USE_LIB_EXT2
 0

	)

49 #undeà
__GLIBC_USE_IEC_60559_BFP_EXT


50 #ià
defšed
 
__USE_GNU
 || defšed 
__STDC_WANT_IEC_60559_BFP_EXT__


51 
	#__GLIBC_USE_IEC_60559_BFP_EXT
 1

	)

53 
	#__GLIBC_USE_IEC_60559_BFP_EXT
 0

	)

55 #undeà
__GLIBC_USE_IEC_60559_BFP_EXT_C2X


56 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT
è|| __GLIBC_USE (
ISOC2X
)

57 
	#__GLIBC_USE_IEC_60559_BFP_EXT_C2X
 1

	)

59 
	#__GLIBC_USE_IEC_60559_BFP_EXT_C2X
 0

	)

66 #undeà
__GLIBC_USE_IEC_60559_FUNCS_EXT


67 #ià
defšed
 
__USE_GNU
 || defšed 
__STDC_WANT_IEC_60559_FUNCS_EXT__


68 
	#__GLIBC_USE_IEC_60559_FUNCS_EXT
 1

	)

70 
	#__GLIBC_USE_IEC_60559_FUNCS_EXT
 0

	)

72 #undeà
__GLIBC_USE_IEC_60559_FUNCS_EXT_C2X


73 #ià
__GLIBC_USE
 (
IEC_60559_FUNCS_EXT
è|| __GLIBC_USE (
ISOC2X
)

74 
	#__GLIBC_USE_IEC_60559_FUNCS_EXT_C2X
 1

	)

76 
	#__GLIBC_USE_IEC_60559_FUNCS_EXT_C2X
 0

	)

81 #undeà
__GLIBC_USE_IEC_60559_TYPES_EXT


82 #ià
defšed
 
__USE_GNU
 || defšed 
__STDC_WANT_IEC_60559_TYPES_EXT__


83 
	#__GLIBC_USE_IEC_60559_TYPES_EXT
 1

	)

85 
	#__GLIBC_USE_IEC_60559_TYPES_EXT
 0

	)

	@/usr/include/bits/posix_opt.h

19 #iâdef 
_BITS_POSIX_OPT_H


20 
	#_BITS_POSIX_OPT_H
 1

	)

23 
	#_POSIX_JOB_CONTROL
 1

	)

26 
	#_POSIX_SAVED_IDS
 1

	)

32 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

35 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

38 
	#_POSIX_FSYNC
 200809L

	)

41 
	#_POSIX_MAPPED_FILES
 200809L

	)

44 
	#_POSIX_MEMLOCK
 200809L

	)

47 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

50 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

53 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

57 
	#_POSIX_VDISABLE
 '\0'

	)

60 
	#_POSIX_NO_TRUNC
 1

	)

63 
	#_XOPEN_REALTIME
 1

	)

66 
	#_XOPEN_REALTIME_THREADS
 1

	)

69 
	#_XOPEN_SHM
 1

	)

72 
	#_POSIX_THREADS
 200809L

	)

75 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

76 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

79 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

82 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

85 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

88 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

92 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

94 #ifdeà
__USE_XOPEN2K8


96 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

99 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

103 
	#_POSIX_SEMAPHORES
 200809L

	)

106 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

109 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

110 
	#_POSIX_ASYNC_IO
 1

	)

112 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

114 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

117 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

120 
	#_LFS_LARGEFILE
 1

	)

121 
	#_LFS64_LARGEFILE
 1

	)

122 
	#_LFS64_STDIO
 1

	)

125 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

128 
	#_POSIX_CPUTIME
 0

	)

131 
	#_POSIX_THREAD_CPUTIME
 0

	)

134 
	#_POSIX_REGEXP
 1

	)

137 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

140 
	#_POSIX_SHELL
 1

	)

143 
	#_POSIX_TIMEOUTS
 200809L

	)

146 
	#_POSIX_SPIN_LOCKS
 200809L

	)

149 
	#_POSIX_SPAWN
 200809L

	)

152 
	#_POSIX_TIMERS
 200809L

	)

155 
	#_POSIX_BARRIERS
 200809L

	)

158 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

161 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

164 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

167 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

170 
	#_POSIX_ADVISORY_INFO
 200809L

	)

173 
	#_POSIX_IPV6
 200809L

	)

176 
	#_POSIX_RAW_SOCKETS
 200809L

	)

179 
	#_POSIX2_CHAR_TERM
 200809L

	)

182 
	#_POSIX_SPORADIC_SERVER
 -1

	)

183 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

186 
	#_POSIX_TRACE
 -1

	)

187 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

188 
	#_POSIX_TRACE_INHERIT
 -1

	)

189 
	#_POSIX_TRACE_LOG
 -1

	)

192 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

19 #iâdeà
_BITS_PTHREADTYPES_COMMON_H


20 
	#_BITS_PTHREADTYPES_COMMON_H
 1

	)

23 
	~<b™s/th»ad-sh¬ed-ty³s.h
>

27 
	t±h»ad_t
;

34 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

35 
	m__®ign
;

36 } 
	t±h»ad_mu‹x©Œ_t
;

43 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

44 
	m__®ign
;

45 } 
	t±h»ad_cÚd©Œ_t
;

49 
	t±h»ad_key_t
;

53 
	t__ONCE_ALIGNMENT
 
	t±h»ad_Úû_t
;

56 
	u±h»ad_©Œ_t


58 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

59 
	m__®ign
;

61 #iâdeà
__have_±h»ad_©Œ_t


62 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

63 
	#__have_±h»ad_©Œ_t
 1

	)

69 
__±h»ad_mu‹x_s
 
	m__d©a
;

70 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

71 
	m__®ign
;

72 } 
	t±h»ad_mu‹x_t
;

77 
__±h»ad_cÚd_s
 
	m__d©a
;

78 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

79 
__ex‹nsiÚ__
 
	m__®ign
;

80 } 
	t±h»ad_cÚd_t
;

83 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


88 
__±h»ad_rwlock_¬ch_t
 
	m__d©a
;

89 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

90 
	m__®ign
;

91 } 
	t±h»ad_rwlock_t
;

95 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

96 
	m__®ign
;

97 } 
	t±h»ad_rwlock©Œ_t
;

101 #ifdeà
__USE_XOPEN2K


103 vŞ©
	t±h»ad_¥šlock_t
;

110 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

111 
	m__®ign
;

112 } 
	t±h»ad_b¬r›r_t
;

116 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

117 
	m__®ign
;

118 } 
	t±h»ad_b¬r›¿‰r_t
;

	@/usr/include/bits/sched.h

20 #iâdeà
_BITS_SCHED_H


21 
	#_BITS_SCHED_H
 1

	)

23 #iâdeà
_SCHED_H


28 
	#SCHED_OTHER
 0

	)

29 
	#SCHED_FIFO
 1

	)

30 
	#SCHED_RR
 2

	)

31 #ifdeà
__USE_GNU


32 
	#SCHED_BATCH
 3

	)

33 
	#SCHED_ISO
 4

	)

34 
	#SCHED_IDLE
 5

	)

35 
	#SCHED_DEADLINE
 6

	)

37 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

40 #ifdeà
__USE_GNU


42 
	#CSIGNAL
 0x000000fà

	)

43 
	#CLONE_VM
 0x00000100

	)

44 
	#CLONE_FS
 0x00000200

	)

45 
	#CLONE_FILES
 0x00000400

	)

46 
	#CLONE_SIGHAND
 0x00000800

	)

47 
	#CLONE_PIDFD
 0x00001000

	)

49 
	#CLONE_PTRACE
 0x00002000

	)

50 
	#CLONE_VFORK
 0x00004000

	)

52 
	#CLONE_PARENT
 0x00008000

	)

54 
	#CLONE_THREAD
 0x00010000

	)

55 
	#CLONE_NEWNS
 0x00020000

	)

56 
	#CLONE_SYSVSEM
 0x00040000

	)

57 
	#CLONE_SETTLS
 0x00080000

	)

58 
	#CLONE_PARENT_SETTID
 0x00100000

	)

60 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

62 
	#CLONE_DETACHED
 0x00400000

	)

63 
	#CLONE_UNTRACED
 0x00800000

	)

65 
	#CLONE_CHILD_SETTID
 0x01000000

	)

67 
	#CLONE_NEWCGROUP
 0x02000000

	)

68 
	#CLONE_NEWUTS
 0x04000000

	)

69 
	#CLONE_NEWIPC
 0x08000000

	)

70 
	#CLONE_NEWUSER
 0x10000000

	)

71 
	#CLONE_NEWPID
 0x20000000

	)

72 
	#CLONE_NEWNET
 0x40000000

	)

73 
	#CLONE_IO
 0x80000000

	)

76 
	~<b™s/ty³s/¡ruù_sched_·¿m.h
>

78 
	g__BEGIN_DECLS


80 #ifdeà
__USE_GNU


82 
	$şÚe
 ((*
__â
è(*
__¬g
), *
__chd_¡ack
,

83 
__æags
, *
__¬g
, ...è
__THROW
;

86 
	$unsh¬e
 (
__æags
è
__THROW
;

89 
	$sched_g‘ıu
 (è
__THROW
;

92 
	$g‘ıu
 (*, *è
__THROW
;

95 
	$£Šs
 (
__fd
, 
__n¡y³
è
__THROW
;

98 
__END_DECLS


	@/usr/include/bits/stdint-intn.h

19 #iâdeà
_BITS_STDINT_INTN_H


20 
	#_BITS_STDINT_INTN_H
 1

	)

22 
	~<b™s/ty³s.h
>

24 
__št8_t
 
	tšt8_t
;

25 
__št16_t
 
	tšt16_t
;

26 
__št32_t
 
	tšt32_t
;

27 
__št64_t
 
	tšt64_t
;

	@/usr/include/bits/stdint-uintn.h

19 #iâdeà
_BITS_STDINT_UINTN_H


20 
	#_BITS_STDINT_UINTN_H
 1

	)

22 
	~<b™s/ty³s.h
>

24 
__ušt8_t
 
	tušt8_t
;

25 
__ušt16_t
 
	tušt16_t
;

26 
__ušt32_t
 
	tušt32_t
;

27 
__ušt64_t
 
	tušt64_t
;

	@/usr/include/bits/stdio-ldbl.h

19 #iâdeà
_STDIO_H


23 
	$__LDBL_REDIR_DECL
 (
årštf
)

24 
	$__LDBL_REDIR_DECL
 (
´štf
)

25 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

26 
	$__LDBL_REDIR_DECL
 (
vårštf
)

27 
	$__LDBL_REDIR_DECL
 (
v´štf
)

28 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

29 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
)

30 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

31 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

32 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

34 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

35 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

36 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

39 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_UNIX98


40 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

41 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

44 #ifdef 
__USE_ISOC99


45 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
)

46 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

47 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

48 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

50 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

51 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

52 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

56 #ifdeà
__USE_XOPEN2K8


57 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

58 
	$__LDBL_REDIR_DECL
 (
d´štf
)

61 #ifdeà
__USE_GNU


62 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

63 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

64 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

65 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

66 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

69 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


70 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

72 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_UNIX98


73 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

74 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

76 #ià
__USE_FORTIFY_LEVEL
 > 1

77 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

78 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

79 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

80 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

81 #ifdeà
__USE_XOPEN2K8


82 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

83 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

85 #ifdeà
__USE_GNU


86 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

88 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

89 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

19 #iâdeà
_BITS_STDIO_H


20 
	#_BITS_STDIO_H
 1

	)

22 #iâdeà
_STDIO_H


26 #iâdeà
__ex‹º_šlše


27 
	#__STDIO_INLINE
 
šlše


	)

29 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

33 #ifdeà
__USE_EXTERN_INLINES


36 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
)

38 
__STDIO_INLINE
 

39 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__¬g
)

41  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

42 
	}
}

46 
__STDIO_INLINE
 

47 
	$g‘ch¬
 ()

49  
	`g‘c
 (
¡dš
);

50 
	}
}

53 #ifdeà
__USE_MISC


55 
__STDIO_INLINE
 

56 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

58  
	`__g‘c_uÆocked_body
 (
__å
);

59 
	}
}

63 #ifdeà
__USE_POSIX


65 
__STDIO_INLINE
 

66 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

68  
	`__g‘c_uÆocked_body
 (
__å
);

69 
	}
}

72 
__STDIO_INLINE
 

73 
	$g‘ch¬_uÆocked
 ()

75  
	`__g‘c_uÆocked_body
 (
¡dš
);

76 
	}
}

81 
__STDIO_INLINE
 

82 
	$putch¬
 (
__c
)

84  
	`putc
 (
__c
, 
¡dout
);

85 
	}
}

88 #ifdeà
__USE_MISC


90 
__STDIO_INLINE
 

91 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

93  
	`__putc_uÆocked_body
 (
__c
, 
__¡»am
);

94 
	}
}

98 #ifdeà
__USE_POSIX


100 
__STDIO_INLINE
 

101 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

103  
	`__putc_uÆocked_body
 (
__c
, 
__¡»am
);

104 
	}
}

107 
__STDIO_INLINE
 

108 
	$putch¬_uÆocked
 (
__c
)

110  
	`__putc_uÆocked_body
 (
__c
, 
¡dout
);

111 
	}
}

115 #ifdef 
__USE_GNU


117 
__STDIO_INLINE
 
__ssize_t


118 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

120  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

121 
	}
}

125 #ifdeà
__USE_MISC


127 
__STDIO_INLINE
 

128 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

130  
	`__ãof_uÆocked_body
 (
__¡»am
);

131 
	}
}

134 
__STDIO_INLINE
 

135 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

137  
	`__ã¼Ü_uÆocked_body
 (
__¡»am
);

138 
	}
}

144 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

145 && !
defšed
 
	g__ılu¥lus


147 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

148 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

149 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

150 && (
size_t
è(
size
) != 0) \

151 ? ({ *
__±r
 = (*è(
±r
); \

152 
FILE
 *
__¡»am
 = (
¡»am
); \

153 
size_t
 
__út
; \

154 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

155 
__út
 > 0; --__cnt) \

157 
__c
 = 
	`g‘c_uÆocked
 (
__¡»am
); \

158 ià(
__c
 =ğ
EOF
) \

160 *
__±r
++ = 
__c
; \

162 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

163 / (
size_t
è(
size
); }) \

164 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

165 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

167 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

168 (è(
n
), (
size_t
) 0) \

169 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

171 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

172 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

173 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

174 && (
size_t
è(
size
) != 0) \

175 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

176 
FILE
 *
__¡»am
 = (
¡»am
); \

177 
size_t
 
__út
; \

178 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

179 
__út
 > 0; --__cnt) \

180 ià(
	`putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ğ
EOF
) \

182 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

183 / (
size_t
è(
size
); }) \

184 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

185 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

187 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

188 (è(
n
), (
size_t
) 0) \

189 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

193 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

19 #iâdeà
_BITS_STDIO2_H


20 
	#_BITS_STDIO2_H
 1

	)

22 #iâdeà
_STDIO_H


26 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

27 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

28 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

29 cÚ¡ *
__»¡riù
 
__fÜm©
,

30 
__gnuc_va_li¡
 
__­
è
__THROW
;

32 #ifdeà
__va_¬g_·ck


33 
__fÜtify_funùiÚ
 

34 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
, ...))

36  
	`__butš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

37 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

38 
	}
}

39 #–ià!
defšed
 
__ılu¥lus


40 
	#¥rštf
(
¡r
, ...) \

41 
	`__butš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

42 
__VA_ARGS__
)

	)

45 
__fÜtify_funùiÚ
 

46 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
,

47 
__gnuc_va_li¡
 
__­
))

49  
	`__butš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

50 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

51 
	}
}

53 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_UNIX98


55 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

56 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

57 ...è
__THROW
;

58 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

59 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

60 
__gnuc_va_li¡
 
__­
è
__THROW
;

62 #ifdeà
__va_¬g_·ck


63 
__fÜtify_funùiÚ
 

64 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

65 cÚ¡ *
__»¡riù
 
__fmt
, ...))

67  
	`__butš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

68 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

69 
	}
}

70 #–ià!
defšed
 
__ılu¥lus


71 
	#¢´štf
(
¡r
, 
Ën
, ...) \

72 
	`__butš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

73 
__VA_ARGS__
)

	)

76 
__fÜtify_funùiÚ
 

77 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

78 cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

80  
	`__butš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

81 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

82 
	}
}

86 #ià
__USE_FORTIFY_LEVEL
 > 1

88 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

89 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

90 
__´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

91 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

92 cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__­
);

93 
__v´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

94 
__gnuc_va_li¡
 
__­
);

96 #ifdeà
__va_¬g_·ck


97 
__fÜtify_funùiÚ
 

98 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, cÚ¡ *__»¡riù 
__fmt
, ...)

100  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

101 
	`__va_¬g_·ck
 ());

102 
	}
}

104 
__fÜtify_funùiÚ
 

105 
	$´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, ...)

107  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

108 
	}
}

109 #–ià!
defšed
 
__ılu¥lus


110 
	#´štf
(...) \

111 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

112 
	#årštf
(
¡»am
, ...) \

113 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

116 
__fÜtify_funùiÚ
 

117 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

119 #ifdeà
__USE_EXTERN_INLINES


120  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

122  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

124 
	}
}

126 
__fÜtify_funùiÚ
 

127 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

128 cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

130  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

131 
	}
}

133 #ifdeà
__USE_XOPEN2K8


134 
	$__d´štf_chk
 (
__fd
, 
__æag
, cÚ¡ *
__»¡riù
 
__fmt
,

135 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

136 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

137 cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__¬g
)

138 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

140 #ifdeà
__va_¬g_·ck


141 
__fÜtify_funùiÚ
 

142 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

144  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

145 
	`__va_¬g_·ck
 ());

146 
	}
}

147 #–ià!
defšed
 
__ılu¥lus


148 
	#d´štf
(
fd
, ...) \

149 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

152 
__fÜtify_funùiÚ
 

153 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

155  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

156 
	}
}

159 #ifdeà
__USE_GNU


161 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

162 cÚ¡ *
__»¡riù
 
__fmt
, ...)

163 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

164 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

165 cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__¬g
)

166 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

167 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

168 
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

170 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

171 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

172 
__æag
,

173 cÚ¡ *
__»¡riù
 
__fÜm©
,

174 
__gnuc_va_li¡
 
__¬gs
)

175 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

177 #ifdeà
__va_¬g_·ck


178 
__fÜtify_funùiÚ
 

179 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
, ...))

181  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

182 
	`__va_¬g_·ck
 ());

183 
	}
}

185 
__fÜtify_funùiÚ
 

186 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

189  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

190 
	`__va_¬g_·ck
 ());

191 
	}
}

193 
__fÜtify_funùiÚ
 

194 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

195 cÚ¡ *
__»¡riù
 
__fmt
, ...))

197  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

198 
	`__va_¬g_·ck
 ());

199 
	}
}

200 #–ià!
defšed
 
__ılu¥lus


201 
	#a¥rštf
(
±r
, ...) \

202 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

203 
	#__a¥rštf
(
±r
, ...) \

204 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

205 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

206 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

209 
__fÜtify_funùiÚ
 

210 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

211 
__gnuc_va_li¡
 
__­
))

213  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

214 
	}
}

216 
__fÜtify_funùiÚ
 

217 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

218 cÚ¡ *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

220  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

221 
__­
);

222 
	}
}

228 #ià
__GLIBC_USE
 (
DEPRECATED_GETS
)

229 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

230 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

231 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

234 
__fÜtify_funùiÚ
 
__wur
 *

235 
	$g‘s
 (*
__¡r
)

237 ià(
	`__bos
 (
__¡r
è!ğ(
size_t
) -1)

238  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

239  
	`__g‘s_w¬n
 (
__¡r
);

240 
	}
}

243 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

244 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

245 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

246 (*
__»¡riù
 
__s
, 
__n
,

247 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

248 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

249 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

250 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

251 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

254 
__fÜtify_funùiÚ
 
__wur
 *

255 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

257 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

259 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

260  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

262 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

263  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

265  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

266 
	}
}

268 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

269 
size_t
 
__size
, size_ˆ
__n
,

270 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

271 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

272 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

273 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

274 
ä—d
è
__wur
;

275 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

276 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

277 
size_t
 
__size
, size_ˆ
__n
,

278 
FILE
 *
__»¡riù
 
__¡»am
),

279 
__ä—d_chk
)

280 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

283 
__fÜtify_funùiÚ
 
__wur
 
size_t


284 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

285 
FILE
 *
__»¡riù
 
__¡»am
)

287 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

289 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

290 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

291 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

292  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

294 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

295  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

297  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

298 
	}
}

300 #ifdeà
__USE_GNU


301 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

302 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

303 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

304 (*
__»¡riù
 
__s
, 
__n
,

305 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

306 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

307 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

308 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

309 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

312 
__fÜtify_funùiÚ
 
__wur
 *

313 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

315 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

317 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

318  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

320 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

321  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

323  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

324 
	}
}

327 #ifdeà
__USE_MISC


328 #undeà
ä—d_uÆocked


329 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

330 
size_t
 
__size
, size_ˆ
__n
,

331 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

332 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

333 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

334 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

335 
ä—d_uÆocked
è
__wur
;

336 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

337 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

338 
size_t
 
__size
, size_ˆ
__n
,

339 
FILE
 *
__»¡riù
 
__¡»am
),

340 
__ä—d_uÆocked_chk
)

341 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

344 
__fÜtify_funùiÚ
 
__wur
 
size_t


345 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

346 
FILE
 *
__»¡riù
 
__¡»am
)

348 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

350 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

351 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

352 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

353  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

354 
__¡»am
);

356 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

357  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

358 
__¡»am
);

361 #ifdeà
__USE_EXTERN_INLINES


362 ià(
	`__butš_cÚ¡ªt_p
 (
__size
)

363 && 
	`__butš_cÚ¡ªt_p
 (
__n
)

364 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

365 && 
__size
 * 
__n
 <= 8)

367 
size_t
 
__út
 = 
__size
 * 
__n
;

368 *
__ıŒ
 = (*è
__±r
;

369 ià(
__út
 == 0)

372 ; 
__út
 > 0; --__cnt)

374 
__c
 = 
	`g‘c_uÆocked
 (
__¡»am
);

375 ià(
__c
 =ğ
EOF
)

377 *
__ıŒ
++ = 
__c
;

379  (
__ıŒ
 - (*è
__±r
è/ 
__size
;

382  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

383 
	}
}

	@/usr/include/bits/stdio_lim.h

18 #iâdeà
_BITS_STDIO_LIM_H


19 
	#_BITS_STDIO_LIM_H
 1

	)

21 #iâdeà
_STDIO_H


25 
	#L_tm²am
 20

	)

26 
	#TMP_MAX
 238328

	)

27 
	#FILENAME_MAX
 4096

	)

29 #ifdeà
__USE_POSIX


30 
	#L_ù”mid
 9

	)

31 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


32 
	#L_cu£rid
 9

	)

36 #undeà
FOPEN_MAX


37 
	#FOPEN_MAX
 16

	)

	@/usr/include/bits/stdlib-bsearch.h

19 
__ex‹º_šlše
 *

20 
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

21 
__com·r_â_t
 
__com·r
)

23 
size_t
 
__l
, 
__u
, 
__idx
;

24 cÚ¡ *
__p
;

25 
__com·risÚ
;

27 
__l
 = 0;

28 
__u
 = 
__nmemb
;

29 
__l
 < 
__u
)

31 
__idx
 = (
__l
 + 
__u
) / 2;

32 
__p
 = (*è(((cÚ¡ *è
__ba£
è+ (
__idx
 * 
__size
));

33 
__com·risÚ
 = (*
__com·r
è(
__key
, 
__p
);

34 ià(
__com·risÚ
 < 0)

35 
__u
 = 
__idx
;

36 ià(
__com·risÚ
 > 0)

37 
__l
 = 
__idx
 + 1;

39  (*è
__p
;

42  
NULL
;

43 
	}
}

	@/usr/include/bits/stdlib-float.h

19 #iâdeà
_STDLIB_H


23 #ifdeà
__USE_EXTERN_INLINES


24 
__ex‹º_šlše
 

25 
__NTH
 (
	$©of
 (cÚ¡ *
__ÅŒ
))

27  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

28 
	}
}

	@/usr/include/bits/stdlib-ldbl.h

19 #iâdeà
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

27 #ifdeà
__USE_GNU


28 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

31 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

32 
	$__LDBL_REDIR1_DECL
 (
¡räoml
, 
¡räomd
)

35 #ifdeà
__USE_MISC


36 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

39 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

40 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #iâdeà
_STDLIB_H


23 *
	$__»®·th_chk
 (cÚ¡ *
__»¡riù
 
__Çme
,

24 *
__»¡riù
 
__»sŞved
,

25 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

27 (cÚ¡ *
__»¡riù
 
__Çme
,

28 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

29 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

30 (cÚ¡ *
__»¡riù
 
__Çme
,

31 *
__»¡riù
 
__»sŞved
,

32 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


33 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

36 
__fÜtify_funùiÚ
 
__wur
 *

37 
	`__NTH
 (
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

39 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

41 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


42 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

43  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

45  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

48  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

53 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

55 
size_t
 
__buæ’
), 
±¢ame_r
)

56 
	`__nÚnuÎ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

59 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

60 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

63 
__fÜtify_funùiÚ
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

66 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

68 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

70 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

74 
	}
}

77 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

80 
wùomb
è
__wur
;

82 
__fÜtify_funùiÚ
 
__wur
 

83 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


92 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

94  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

95 
	}
}

98 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

99 cÚ¡ *
__»¡riù
 
__¤c
,

100 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

102 (
wch¬_t
 *
__»¡riù
 
__d¡
,

103 cÚ¡ *
__»¡riù
 
__¤c
,

104 
size_t
 
__Ën
), 
mb¡owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

106 (
wch¬_t
 *
__»¡riù
 
__d¡
,

107 cÚ¡ *
__»¡riù
 
__¤c
,

108 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

109 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

112 
__fÜtify_funùiÚ
 
size_t


113 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ *__»¡riù 
__¤c
,

114 
size_t
 
__Ën
))

116 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

118 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

119  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

120 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

122 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

123  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

124 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

126  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

127 
	}
}

130 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

131 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

132 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

134 (*
__»¡riù
 
__d¡
,

135 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

136 
size_t
 
__Ën
), 
wc¡ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

138 (*
__»¡riù
 
__d¡
,

139 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

140 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

141 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

143 
__fÜtify_funùiÚ
 
size_t


144 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 *__»¡riù 
__¤c
,

145 
size_t
 
__Ën
))

147 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

149 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

150  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

151 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

152  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

154  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

155 
	}
}

	@/usr/include/bits/string_fortified.h

18 #iâdeà
_BITS_STRING_FORTIFIED_H


19 
	#_BITS_STRING_FORTIFIED_H
 1

	)

21 #iâdeà
_STRING_H


25 #ià!
__GNUC_PREREQ
 (5,0)

26 
__w¬ndeş
 (
__w¬n_mem£t_z”o_Ën
,

30 
__fÜtify_funùiÚ
 *

31 
__NTH
 (
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

32 
size_t
 
__Ën
))

34  
	`__butš___memıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

35 
	}
}

37 
__fÜtify_funùiÚ
 *

38 
__NTH
 (
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__Ën
))

40  
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

41 
	}
}

43 #ifdeà
__USE_GNU


44 
__fÜtify_funùiÚ
 *

45 
__NTH
 (
	$mempıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

46 
size_t
 
__Ën
))

48  
	`__butš___mempıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

49 
	}
}

58 
__fÜtify_funùiÚ
 *

59 
__NTH
 (
	$mem£t
 (*
__de¡
, 
__ch
, 
size_t
 
__Ën
))

63 #ià!
	`__GNUC_PREREQ
 (5,0)

64 ià(
	`__butš_cÚ¡ªt_p
 (
__Ën
) && __len == 0

65 && (!
	`__butš_cÚ¡ªt_p
 (
__ch
) || __ch != 0))

67 
	`__w¬n_mem£t_z”o_Ën
 ();

68  
__de¡
;

71  
	`__butš___mem£t_chk
 (
__de¡
, 
__ch
, 
__Ën
, 
	`__bos0
 (__dest));

72 
	}
}

74 #ifdeà
__USE_MISC


75 
	~<b™s/¡ršgs_fÜtif›d.h
>

77 
	$__ex¶ic™_bz”o_chk
 (*
__de¡
, 
size_t
 
__Ën
, size_ˆ
__de¡Ën
)

78 
__THROW
 
	`__nÚnuÎ
 ((1));

80 
__fÜtify_funùiÚ
 

81 
	`__NTH
 (
	$ex¶ic™_bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

83 
	`__ex¶ic™_bz”o_chk
 (
__de¡
, 
__Ën
, 
	`__bos0
 (__dest));

84 
	}
}

87 
__fÜtify_funùiÚ
 *

88 
__NTH
 (
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

90  
	`__butš___¡rıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

91 
	}
}

93 #ifdeà
__USE_GNU


94 
__fÜtify_funùiÚ
 *

95 
__NTH
 (
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

97  
	`__butš___¡pıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

98 
	}
}

102 
__fÜtify_funùiÚ
 *

103 
__NTH
 (
	$¡ºıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

104 
size_t
 
__Ën
))

106  
	`__butš___¡ºıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

107 
	}
}

110 *
	$__¡²ıy_chk
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

111 
size_t
 
__de¡Ën
è
__THROW
;

112 *
	`__REDIRECT_NTH
 (
__¡²ıy_®Ÿs
, (*
__de¡
, cÚ¡ *
__¤c
,

113 
size_t
 
__n
), 
¡²ıy
);

115 
__fÜtify_funùiÚ
 *

116 
	`__NTH
 (
	$¡²ıy
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
))

118 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1

119 && (!
	`__butš_cÚ¡ªt_p
 (
__n
è|| __À> 
	`__bos
 (
__de¡
)))

120  
	`__¡²ıy_chk
 (
__de¡
, 
__¤c
, 
__n
, 
	`__bos
 (__dest));

121  
	`__¡²ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

122 
	}
}

125 
__fÜtify_funùiÚ
 *

126 
__NTH
 (
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

128  
	`__butš___¡rÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

129 
	}
}

132 
__fÜtify_funùiÚ
 *

133 
__NTH
 (
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

134 
size_t
 
__Ën
))

136  
	`__butš___¡ºÿt_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

137 
	}
}

	@/usr/include/bits/sys_errlist.h

19 #iâdeà
_STDIO_H


25 #ifdeà 
__USE_MISC


26 
sys_Ã¼
;

27 cÚ¡ *cÚ¡ 
sys_”¾i¡
[];

29 #ifdeà 
__USE_GNU


30 
_sys_Ã¼
;

31 cÚ¡ *cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/syscall.h

4 #iâdeà
_SYSCALL_H


8 
	#__GLIBC_LINUX_VERSION_CODE
 328960

	)

10 #ifdeà
__NR_FAST_©omic_upd©e


11 
	#SYS_FAST_©omic_upd©e
 
__NR_FAST_©omic_upd©e


	)

14 #ifdeà
__NR_FAST_cmpxchg


15 
	#SYS_FAST_cmpxchg
 
__NR_FAST_cmpxchg


	)

18 #ifdeà
__NR_FAST_cmpxchg64


19 
	#SYS_FAST_cmpxchg64
 
__NR_FAST_cmpxchg64


	)

22 #ifdeà
__NR__Î£ek


23 
	#SYS__Î£ek
 
__NR__Î£ek


	)

26 #ifdeà
__NR__Ãw£Ëù


27 
	#SYS__Ãw£Ëù
 
__NR__Ãw£Ëù


	)

30 #ifdeà
__NR__sysùl


31 
	#SYS__sysùl
 
__NR__sysùl


	)

34 #ifdeà
__NR_acû±


35 
	#SYS_acû±
 
__NR_acû±


	)

38 #ifdeà
__NR_acû±4


39 
	#SYS_acû±4
 
__NR_acû±4


	)

42 #ifdeà
__NR_acûss


43 
	#SYS_acûss
 
__NR_acûss


	)

46 #ifdeà
__NR_acù


47 
	#SYS_acù
 
__NR_acù


	)

50 #ifdeà
__NR_aş_g‘


51 
	#SYS_aş_g‘
 
__NR_aş_g‘


	)

54 #ifdeà
__NR_aş_£t


55 
	#SYS_aş_£t
 
__NR_aş_£t


	)

58 #ifdeà
__NR_add_key


59 
	#SYS_add_key
 
__NR_add_key


	)

62 #ifdeà
__NR_adjtimex


63 
	#SYS_adjtimex
 
__NR_adjtimex


	)

66 #ifdeà
__NR_afs_sysÿÎ


67 
	#SYS_afs_sysÿÎ
 
__NR_afs_sysÿÎ


	)

70 #ifdeà
__NR_®¬m


71 
	#SYS_®¬m
 
__NR_®¬m


	)

74 #ifdeà
__NR_®loc_hug•ages


75 
	#SYS_®loc_hug•ages
 
__NR_®loc_hug•ages


	)

78 #ifdeà
__NR_¬ch_´ùl


79 
	#SYS_¬ch_´ùl
 
__NR_¬ch_´ùl


	)

82 #ifdeà
__NR_¬m_çdvi£64_64


83 
	#SYS_¬m_çdvi£64_64
 
__NR_¬m_çdvi£64_64


	)

86 #ifdeà
__NR_¬m_sync_fe_¿nge


87 
	#SYS_¬m_sync_fe_¿nge
 
__NR_¬m_sync_fe_¿nge


	)

90 #ifdeà
__NR_©omic_b¬r›r


91 
	#SYS_©omic_b¬r›r
 
__NR_©omic_b¬r›r


	)

94 #ifdeà
__NR_©omic_cmpxchg_32


95 
	#SYS_©omic_cmpxchg_32
 
__NR_©omic_cmpxchg_32


	)

98 #ifdeà
__NR_©Œùl


99 
	#SYS_©Œùl
 
__NR_©Œùl


	)

102 #ifdeà
__NR_bdæush


103 
	#SYS_bdæush
 
__NR_bdæush


	)

106 #ifdeà
__NR_bšd


107 
	#SYS_bšd
 
__NR_bšd


	)

110 #ifdeà
__NR_bpf


111 
	#SYS_bpf
 
__NR_bpf


	)

114 #ifdeà
__NR_b»ak


115 
	#SYS_b»ak
 
__NR_b»ak


	)

118 #ifdeà
__NR_b»akpošt


119 
	#SYS_b»akpošt
 
__NR_b»akpošt


	)

122 #ifdeà
__NR_brk


123 
	#SYS_brk
 
__NR_brk


	)

126 #ifdeà
__NR_ÿcheùl


127 
	#SYS_ÿcheùl
 
__NR_ÿcheùl


	)

130 #ifdeà
__NR_ÿcheæush


131 
	#SYS_ÿcheæush
 
__NR_ÿcheæush


	)

134 #ifdeà
__NR_ÿpg‘


135 
	#SYS_ÿpg‘
 
__NR_ÿpg‘


	)

138 #ifdeà
__NR_ÿp£t


139 
	#SYS_ÿp£t
 
__NR_ÿp£t


	)

142 #ifdeà
__NR_chdœ


143 
	#SYS_chdœ
 
__NR_chdœ


	)

146 #ifdeà
__NR_chmod


147 
	#SYS_chmod
 
__NR_chmod


	)

150 #ifdeà
__NR_chown


151 
	#SYS_chown
 
__NR_chown


	)

154 #ifdeà
__NR_chown32


155 
	#SYS_chown32
 
__NR_chown32


	)

158 #ifdeà
__NR_chroÙ


159 
	#SYS_chroÙ
 
__NR_chroÙ


	)

162 #ifdeà
__NR_şock_adjtime


163 
	#SYS_şock_adjtime
 
__NR_şock_adjtime


	)

166 #ifdeà
__NR_şock_adjtime64


167 
	#SYS_şock_adjtime64
 
__NR_şock_adjtime64


	)

170 #ifdeà
__NR_şock_g‘»s


171 
	#SYS_şock_g‘»s
 
__NR_şock_g‘»s


	)

174 #ifdeà
__NR_şock_g‘»s_time64


175 
	#SYS_şock_g‘»s_time64
 
__NR_şock_g‘»s_time64


	)

178 #ifdeà
__NR_şock_g‘time


179 
	#SYS_şock_g‘time
 
__NR_şock_g‘time


	)

182 #ifdeà
__NR_şock_g‘time64


183 
	#SYS_şock_g‘time64
 
__NR_şock_g‘time64


	)

186 #ifdeà
__NR_şock_Çno¦“p


187 
	#SYS_şock_Çno¦“p
 
__NR_şock_Çno¦“p


	)

190 #ifdeà
__NR_şock_Çno¦“p_time64


191 
	#SYS_şock_Çno¦“p_time64
 
__NR_şock_Çno¦“p_time64


	)

194 #ifdeà
__NR_şock_£‰ime


195 
	#SYS_şock_£‰ime
 
__NR_şock_£‰ime


	)

198 #ifdeà
__NR_şock_£‰ime64


199 
	#SYS_şock_£‰ime64
 
__NR_şock_£‰ime64


	)

202 #ifdeà
__NR_şÚe


203 
	#SYS_şÚe
 
__NR_şÚe


	)

206 #ifdeà
__NR_şÚe2


207 
	#SYS_şÚe2
 
__NR_şÚe2


	)

210 #ifdeà
__NR_şÚe3


211 
	#SYS_şÚe3
 
__NR_şÚe3


	)

214 #ifdeà
__NR_şo£


215 
	#SYS_şo£
 
__NR_şo£


	)

218 #ifdeà
__NR_cmpxchg_badaddr


219 
	#SYS_cmpxchg_badaddr
 
__NR_cmpxchg_badaddr


	)

222 #ifdeà
__NR_cÚÃù


223 
	#SYS_cÚÃù
 
__NR_cÚÃù


	)

226 #ifdeà
__NR_cİy_fe_¿nge


227 
	#SYS_cİy_fe_¿nge
 
__NR_cİy_fe_¿nge


	)

230 #ifdeà
__NR_ü—t


231 
	#SYS_ü—t
 
__NR_ü—t


	)

234 #ifdeà
__NR_ü—‹_moduË


235 
	#SYS_ü—‹_moduË
 
__NR_ü—‹_moduË


	)

238 #ifdeà
__NR_d–‘e_moduË


239 
	#SYS_d–‘e_moduË
 
__NR_d–‘e_moduË


	)

242 #ifdeà
__NR_dc


243 
	#SYS_dc
 
__NR_dc


	)

246 #ifdeà
__NR_dup


247 
	#SYS_dup
 
__NR_dup


	)

250 #ifdeà
__NR_dup2


251 
	#SYS_dup2
 
__NR_dup2


	)

254 #ifdeà
__NR_dup3


255 
	#SYS_dup3
 
__NR_dup3


	)

258 #ifdeà
__NR_•Şl_ü—‹


259 
	#SYS_•Şl_ü—‹
 
__NR_•Şl_ü—‹


	)

262 #ifdeà
__NR_•Şl_ü—‹1


263 
	#SYS_•Şl_ü—‹1
 
__NR_•Şl_ü—‹1


	)

266 #ifdeà
__NR_•Şl_ùl


267 
	#SYS_•Şl_ùl
 
__NR_•Şl_ùl


	)

270 #ifdeà
__NR_•Şl_ùl_Şd


271 
	#SYS_•Şl_ùl_Şd
 
__NR_•Şl_ùl_Şd


	)

274 #ifdeà
__NR_•Şl_pwa™


275 
	#SYS_•Şl_pwa™
 
__NR_•Şl_pwa™


	)

278 #ifdeà
__NR_•Şl_wa™


279 
	#SYS_•Şl_wa™
 
__NR_•Şl_wa™


	)

282 #ifdeà
__NR_•Şl_wa™_Şd


283 
	#SYS_•Şl_wa™_Şd
 
__NR_•Şl_wa™_Şd


	)

286 #ifdeà
__NR_ev’tfd


287 
	#SYS_ev’tfd
 
__NR_ev’tfd


	)

290 #ifdeà
__NR_ev’tfd2


291 
	#SYS_ev’tfd2
 
__NR_ev’tfd2


	)

294 #ifdeà
__NR_exec_w™h_lßd”


295 
	#SYS_exec_w™h_lßd”
 
__NR_exec_w™h_lßd”


	)

298 #ifdeà
__NR_execv


299 
	#SYS_execv
 
__NR_execv


	)

302 #ifdeà
__NR_execve


303 
	#SYS_execve
 
__NR_execve


	)

306 #ifdeà
__NR_execv—t


307 
	#SYS_execv—t
 
__NR_execv—t


	)

310 #ifdeà
__NR_ex™


311 
	#SYS_ex™
 
__NR_ex™


	)

314 #ifdeà
__NR_ex™_group


315 
	#SYS_ex™_group
 
__NR_ex™_group


	)

318 #ifdeà
__NR_çcûs§t


319 
	#SYS_çcûs§t
 
__NR_çcûs§t


	)

322 #ifdeà
__NR_çdvi£64


323 
	#SYS_çdvi£64
 
__NR_çdvi£64


	)

326 #ifdeà
__NR_çdvi£64_64


327 
	#SYS_çdvi£64_64
 
__NR_çdvi£64_64


	)

330 #ifdeà
__NR_çÎoÿ‹


331 
	#SYS_çÎoÿ‹
 
__NR_çÎoÿ‹


	)

334 #ifdeà
__NR_çnÙify_š™


335 
	#SYS_çnÙify_š™
 
__NR_çnÙify_š™


	)

338 #ifdeà
__NR_çnÙify_m¬k


339 
	#SYS_çnÙify_m¬k
 
__NR_çnÙify_m¬k


	)

342 #ifdeà
__NR_fchdœ


343 
	#SYS_fchdœ
 
__NR_fchdœ


	)

346 #ifdeà
__NR_fchmod


347 
	#SYS_fchmod
 
__NR_fchmod


	)

350 #ifdeà
__NR_fchmod©


351 
	#SYS_fchmod©
 
__NR_fchmod©


	)

354 #ifdeà
__NR_fchown


355 
	#SYS_fchown
 
__NR_fchown


	)

358 #ifdeà
__NR_fchown32


359 
	#SYS_fchown32
 
__NR_fchown32


	)

362 #ifdeà
__NR_fchowÇt


363 
	#SYS_fchowÇt
 
__NR_fchowÇt


	)

366 #ifdeà
__NR_fú


367 
	#SYS_fú
 
__NR_fú


	)

370 #ifdeà
__NR_fú64


371 
	#SYS_fú64
 
__NR_fú64


	)

374 #ifdeà
__NR_fd©async


375 
	#SYS_fd©async
 
__NR_fd©async


	)

378 #ifdeà
__NR_fg‘x©Œ


379 
	#SYS_fg‘x©Œ
 
__NR_fg‘x©Œ


	)

382 #ifdeà
__NR_fš™_moduË


383 
	#SYS_fš™_moduË
 
__NR_fš™_moduË


	)

386 #ifdeà
__NR_æi¡x©Œ


387 
	#SYS_æi¡x©Œ
 
__NR_æi¡x©Œ


	)

390 #ifdeà
__NR_æock


391 
	#SYS_æock
 
__NR_æock


	)

394 #ifdeà
__NR_fÜk


395 
	#SYS_fÜk
 
__NR_fÜk


	)

398 #ifdeà
__NR_å_udf›x_ü


399 
	#SYS_å_udf›x_ü
 
__NR_å_udf›x_ü


	)

402 #ifdeà
__NR_ä“_hug•ages


403 
	#SYS_ä“_hug•ages
 
__NR_ä“_hug•ages


	)

406 #ifdeà
__NR_äemovex©Œ


407 
	#SYS_äemovex©Œ
 
__NR_äemovex©Œ


	)

410 #ifdeà
__NR_fscÚfig


411 
	#SYS_fscÚfig
 
__NR_fscÚfig


	)

414 #ifdeà
__NR_f£tx©Œ


415 
	#SYS_f£tx©Œ
 
__NR_f£tx©Œ


	)

418 #ifdeà
__NR_fsmouÁ


419 
	#SYS_fsmouÁ
 
__NR_fsmouÁ


	)

422 #ifdeà
__NR_fsİ’


423 
	#SYS_fsİ’
 
__NR_fsİ’


	)

426 #ifdeà
__NR_f¥ick


427 
	#SYS_f¥ick
 
__NR_f¥ick


	)

430 #ifdeà
__NR_f¡©


431 
	#SYS_f¡©
 
__NR_f¡©


	)

434 #ifdeà
__NR_f¡©64


435 
	#SYS_f¡©64
 
__NR_f¡©64


	)

438 #ifdeà
__NR_f¡©©64


439 
	#SYS_f¡©©64
 
__NR_f¡©©64


	)

442 #ifdeà
__NR_f¡©fs


443 
	#SYS_f¡©fs
 
__NR_f¡©fs


	)

446 #ifdeà
__NR_f¡©fs64


447 
	#SYS_f¡©fs64
 
__NR_f¡©fs64


	)

450 #ifdeà
__NR_fsync


451 
	#SYS_fsync
 
__NR_fsync


	)

454 #ifdeà
__NR_áime


455 
	#SYS_áime
 
__NR_áime


	)

458 #ifdeà
__NR_árunÿ‹


459 
	#SYS_árunÿ‹
 
__NR_árunÿ‹


	)

462 #ifdeà
__NR_árunÿ‹64


463 
	#SYS_árunÿ‹64
 
__NR_árunÿ‹64


	)

466 #ifdeà
__NR_fu‹x


467 
	#SYS_fu‹x
 
__NR_fu‹x


	)

470 #ifdeà
__NR_fu‹x_time64


471 
	#SYS_fu‹x_time64
 
__NR_fu‹x_time64


	)

474 #ifdeà
__NR_futime§t


475 
	#SYS_futime§t
 
__NR_futime§t


	)

478 #ifdeà
__NR_g‘_k”Ãl_syms


479 
	#SYS_g‘_k”Ãl_syms
 
__NR_g‘_k”Ãl_syms


	)

482 #ifdeà
__NR_g‘_mempŞicy


483 
	#SYS_g‘_mempŞicy
 
__NR_g‘_mempŞicy


	)

486 #ifdeà
__NR_g‘_robu¡_li¡


487 
	#SYS_g‘_robu¡_li¡
 
__NR_g‘_robu¡_li¡


	)

490 #ifdeà
__NR_g‘_th»ad_¬—


491 
	#SYS_g‘_th»ad_¬—
 
__NR_g‘_th»ad_¬—


	)

494 #ifdeà
__NR_g‘_s


495 
	#SYS_g‘_s
 
__NR_g‘_s


	)

498 #ifdeà
__NR_g‘ıu


499 
	#SYS_g‘ıu
 
__NR_g‘ıu


	)

502 #ifdeà
__NR_g‘cwd


503 
	#SYS_g‘cwd
 
__NR_g‘cwd


	)

506 #ifdeà
__NR_g‘d’ts


507 
	#SYS_g‘d’ts
 
__NR_g‘d’ts


	)

510 #ifdeà
__NR_g‘d’ts64


511 
	#SYS_g‘d’ts64
 
__NR_g‘d’ts64


	)

514 #ifdeà
__NR_g‘domašÇme


515 
	#SYS_g‘domašÇme
 
__NR_g‘domašÇme


	)

518 #ifdeà
__NR_g‘dbËsize


519 
	#SYS_g‘dbËsize
 
__NR_g‘dbËsize


	)

522 #ifdeà
__NR_g‘egid


523 
	#SYS_g‘egid
 
__NR_g‘egid


	)

526 #ifdeà
__NR_g‘egid32


527 
	#SYS_g‘egid32
 
__NR_g‘egid32


	)

530 #ifdeà
__NR_g‘euid


531 
	#SYS_g‘euid
 
__NR_g‘euid


	)

534 #ifdeà
__NR_g‘euid32


535 
	#SYS_g‘euid32
 
__NR_g‘euid32


	)

538 #ifdeà
__NR_g‘gid


539 
	#SYS_g‘gid
 
__NR_g‘gid


	)

542 #ifdeà
__NR_g‘gid32


543 
	#SYS_g‘gid32
 
__NR_g‘gid32


	)

546 #ifdeà
__NR_g‘groups


547 
	#SYS_g‘groups
 
__NR_g‘groups


	)

550 #ifdeà
__NR_g‘groups32


551 
	#SYS_g‘groups32
 
__NR_g‘groups32


	)

554 #ifdeà
__NR_g‘ho¡Çme


555 
	#SYS_g‘ho¡Çme
 
__NR_g‘ho¡Çme


	)

558 #ifdeà
__NR_g‘™im”


559 
	#SYS_g‘™im”
 
__NR_g‘™im”


	)

562 #ifdeà
__NR_g‘·gesize


563 
	#SYS_g‘·gesize
 
__NR_g‘·gesize


	)

566 #ifdeà
__NR_g‘³”Çme


567 
	#SYS_g‘³”Çme
 
__NR_g‘³”Çme


	)

570 #ifdeà
__NR_g‘pgid


571 
	#SYS_g‘pgid
 
__NR_g‘pgid


	)

574 #ifdeà
__NR_g‘pg½


575 
	#SYS_g‘pg½
 
__NR_g‘pg½


	)

578 #ifdeà
__NR_g‘pid


579 
	#SYS_g‘pid
 
__NR_g‘pid


	)

582 #ifdeà
__NR_g‘pmsg


583 
	#SYS_g‘pmsg
 
__NR_g‘pmsg


	)

586 #ifdeà
__NR_g‘µid


587 
	#SYS_g‘µid
 
__NR_g‘µid


	)

590 #ifdeà
__NR_g‘´iÜ™y


591 
	#SYS_g‘´iÜ™y
 
__NR_g‘´iÜ™y


	)

594 #ifdeà
__NR_g‘¿ndom


595 
	#SYS_g‘¿ndom
 
__NR_g‘¿ndom


	)

598 #ifdeà
__NR_g‘»sgid


599 
	#SYS_g‘»sgid
 
__NR_g‘»sgid


	)

602 #ifdeà
__NR_g‘»sgid32


603 
	#SYS_g‘»sgid32
 
__NR_g‘»sgid32


	)

606 #ifdeà
__NR_g‘»suid


607 
	#SYS_g‘»suid
 
__NR_g‘»suid


	)

610 #ifdeà
__NR_g‘»suid32


611 
	#SYS_g‘»suid32
 
__NR_g‘»suid32


	)

614 #ifdeà
__NR_g‘¾im™


615 
	#SYS_g‘¾im™
 
__NR_g‘¾im™


	)

618 #ifdeà
__NR_g‘ru§ge


619 
	#SYS_g‘ru§ge
 
__NR_g‘ru§ge


	)

622 #ifdeà
__NR_g‘sid


623 
	#SYS_g‘sid
 
__NR_g‘sid


	)

626 #ifdeà
__NR_g‘sockÇme


627 
	#SYS_g‘sockÇme
 
__NR_g‘sockÇme


	)

630 #ifdeà
__NR_g‘sockİt


631 
	#SYS_g‘sockİt
 
__NR_g‘sockİt


	)

634 #ifdeà
__NR_g‘tid


635 
	#SYS_g‘tid
 
__NR_g‘tid


	)

638 #ifdeà
__NR_g‘timeofday


639 
	#SYS_g‘timeofday
 
__NR_g‘timeofday


	)

642 #ifdeà
__NR_g‘uid


643 
	#SYS_g‘uid
 
__NR_g‘uid


	)

646 #ifdeà
__NR_g‘uid32


647 
	#SYS_g‘uid32
 
__NR_g‘uid32


	)

650 #ifdeà
__NR_g‘unwšd


651 
	#SYS_g‘unwšd
 
__NR_g‘unwšd


	)

654 #ifdeà
__NR_g‘x©Œ


655 
	#SYS_g‘x©Œ
 
__NR_g‘x©Œ


	)

658 #ifdeà
__NR_g‘xgid


659 
	#SYS_g‘xgid
 
__NR_g‘xgid


	)

662 #ifdeà
__NR_g‘xpid


663 
	#SYS_g‘xpid
 
__NR_g‘xpid


	)

666 #ifdeà
__NR_g‘xuid


667 
	#SYS_g‘xuid
 
__NR_g‘xuid


	)

670 #ifdeà
__NR_g‰y


671 
	#SYS_g‰y
 
__NR_g‰y


	)

674 #ifdeà
__NR_idË


675 
	#SYS_idË
 
__NR_idË


	)

678 #ifdeà
__NR_š™_moduË


679 
	#SYS_š™_moduË
 
__NR_š™_moduË


	)

682 #ifdeà
__NR_šÙify_add_w©ch


683 
	#SYS_šÙify_add_w©ch
 
__NR_šÙify_add_w©ch


	)

686 #ifdeà
__NR_šÙify_š™


687 
	#SYS_šÙify_š™
 
__NR_šÙify_š™


	)

690 #ifdeà
__NR_šÙify_š™1


691 
	#SYS_šÙify_š™1
 
__NR_šÙify_š™1


	)

694 #ifdeà
__NR_šÙify_rm_w©ch


695 
	#SYS_šÙify_rm_w©ch
 
__NR_šÙify_rm_w©ch


	)

698 #ifdeà
__NR_io_ÿnûl


699 
	#SYS_io_ÿnûl
 
__NR_io_ÿnûl


	)

702 #ifdeà
__NR_io_de¡roy


703 
	#SYS_io_de¡roy
 
__NR_io_de¡roy


	)

706 #ifdeà
__NR_io_g‘ev’ts


707 
	#SYS_io_g‘ev’ts
 
__NR_io_g‘ev’ts


	)

710 #ifdeà
__NR_io_pg‘ev’ts


711 
	#SYS_io_pg‘ev’ts
 
__NR_io_pg‘ev’ts


	)

714 #ifdeà
__NR_io_pg‘ev’ts_time64


715 
	#SYS_io_pg‘ev’ts_time64
 
__NR_io_pg‘ev’ts_time64


	)

718 #ifdeà
__NR_io_£tup


719 
	#SYS_io_£tup
 
__NR_io_£tup


	)

722 #ifdeà
__NR_io_subm™


723 
	#SYS_io_subm™
 
__NR_io_subm™


	)

726 #ifdeà
__NR_io_uršg_’‹r


727 
	#SYS_io_uršg_’‹r
 
__NR_io_uršg_’‹r


	)

730 #ifdeà
__NR_io_uršg_»gi¡”


731 
	#SYS_io_uršg_»gi¡”
 
__NR_io_uršg_»gi¡”


	)

734 #ifdeà
__NR_io_uršg_£tup


735 
	#SYS_io_uršg_£tup
 
__NR_io_uršg_£tup


	)

738 #ifdeà
__NR_ioùl


739 
	#SYS_ioùl
 
__NR_ioùl


	)

742 #ifdeà
__NR_iİ”m


743 
	#SYS_iİ”m
 
__NR_iİ”m


	)

746 #ifdeà
__NR_iİl


747 
	#SYS_iİl
 
__NR_iİl


	)

750 #ifdeà
__NR_iİrio_g‘


751 
	#SYS_iİrio_g‘
 
__NR_iİrio_g‘


	)

754 #ifdeà
__NR_iİrio_£t


755 
	#SYS_iİrio_£t
 
__NR_iİrio_£t


	)

758 #ifdeà
__NR_c


759 
	#SYS_c
 
__NR_c


	)

762 #ifdeà
__NR_kcmp


763 
	#SYS_kcmp
 
__NR_kcmp


	)

766 #ifdeà
__NR_k”n_ã©u»s


767 
	#SYS_k”n_ã©u»s
 
__NR_k”n_ã©u»s


	)

770 #ifdeà
__NR_kexec_fe_lßd


771 
	#SYS_kexec_fe_lßd
 
__NR_kexec_fe_lßd


	)

774 #ifdeà
__NR_kexec_lßd


775 
	#SYS_kexec_lßd
 
__NR_kexec_lßd


	)

778 #ifdeà
__NR_keyùl


779 
	#SYS_keyùl
 
__NR_keyùl


	)

782 #ifdeà
__NR_kl


783 
	#SYS_kl
 
__NR_kl


	)

786 #ifdeà
__NR_lchown


787 
	#SYS_lchown
 
__NR_lchown


	)

790 #ifdeà
__NR_lchown32


791 
	#SYS_lchown32
 
__NR_lchown32


	)

794 #ifdeà
__NR_lg‘x©Œ


795 
	#SYS_lg‘x©Œ
 
__NR_lg‘x©Œ


	)

798 #ifdeà
__NR_lšk


799 
	#SYS_lšk
 
__NR_lšk


	)

802 #ifdeà
__NR_lšk©


803 
	#SYS_lšk©
 
__NR_lšk©


	)

806 #ifdeà
__NR_li¡’


807 
	#SYS_li¡’
 
__NR_li¡’


	)

810 #ifdeà
__NR_li¡x©Œ


811 
	#SYS_li¡x©Œ
 
__NR_li¡x©Œ


	)

814 #ifdeà
__NR_Îi¡x©Œ


815 
	#SYS_Îi¡x©Œ
 
__NR_Îi¡x©Œ


	)

818 #ifdeà
__NR_Î£ek


819 
	#SYS_Î£ek
 
__NR_Î£ek


	)

822 #ifdeà
__NR_lock


823 
	#SYS_lock
 
__NR_lock


	)

826 #ifdeà
__NR_lookup_dcook›


827 
	#SYS_lookup_dcook›
 
__NR_lookup_dcook›


	)

830 #ifdeà
__NR_Ìemovex©Œ


831 
	#SYS_Ìemovex©Œ
 
__NR_Ìemovex©Œ


	)

834 #ifdeà
__NR_l£ek


835 
	#SYS_l£ek
 
__NR_l£ek


	)

838 #ifdeà
__NR_l£tx©Œ


839 
	#SYS_l£tx©Œ
 
__NR_l£tx©Œ


	)

842 #ifdeà
__NR_l¡©


843 
	#SYS_l¡©
 
__NR_l¡©


	)

846 #ifdeà
__NR_l¡©64


847 
	#SYS_l¡©64
 
__NR_l¡©64


	)

850 #ifdeà
__NR_madvi£


851 
	#SYS_madvi£
 
__NR_madvi£


	)

854 #ifdeà
__NR_mbšd


855 
	#SYS_mbšd
 
__NR_mbšd


	)

858 #ifdeà
__NR_memb¬r›r


859 
	#SYS_memb¬r›r
 
__NR_memb¬r›r


	)

862 #ifdeà
__NR_memfd_ü—‹


863 
	#SYS_memfd_ü—‹
 
__NR_memfd_ü—‹


	)

866 #ifdeà
__NR_memÜy_Üd”šg


867 
	#SYS_memÜy_Üd”šg
 
__NR_memÜy_Üd”šg


	)

870 #ifdeà
__NR_mig¿‹_·ges


871 
	#SYS_mig¿‹_·ges
 
__NR_mig¿‹_·ges


	)

874 #ifdeà
__NR_mšcÜe


875 
	#SYS_mšcÜe
 
__NR_mšcÜe


	)

878 #ifdeà
__NR_mkdœ


879 
	#SYS_mkdœ
 
__NR_mkdœ


	)

882 #ifdeà
__NR_mkdœ©


883 
	#SYS_mkdœ©
 
__NR_mkdœ©


	)

886 #ifdeà
__NR_mknod


887 
	#SYS_mknod
 
__NR_mknod


	)

890 #ifdeà
__NR_mknod©


891 
	#SYS_mknod©
 
__NR_mknod©


	)

894 #ifdeà
__NR_mlock


895 
	#SYS_mlock
 
__NR_mlock


	)

898 #ifdeà
__NR_mlock2


899 
	#SYS_mlock2
 
__NR_mlock2


	)

902 #ifdeà
__NR_mlock®l


903 
	#SYS_mlock®l
 
__NR_mlock®l


	)

906 #ifdeà
__NR_mm­


907 
	#SYS_mm­
 
__NR_mm­


	)

910 #ifdeà
__NR_mm­2


911 
	#SYS_mm­2
 
__NR_mm­2


	)

914 #ifdeà
__NR_modify_ldt


915 
	#SYS_modify_ldt
 
__NR_modify_ldt


	)

918 #ifdeà
__NR_mouÁ


919 
	#SYS_mouÁ
 
__NR_mouÁ


	)

922 #ifdeà
__NR_move_mouÁ


923 
	#SYS_move_mouÁ
 
__NR_move_mouÁ


	)

926 #ifdeà
__NR_move_·ges


927 
	#SYS_move_·ges
 
__NR_move_·ges


	)

930 #ifdeà
__NR_m´Ùeù


931 
	#SYS_m´Ùeù
 
__NR_m´Ùeù


	)

934 #ifdeà
__NR_mpx


935 
	#SYS_mpx
 
__NR_mpx


	)

938 #ifdeà
__NR_mq_g‘£‰r


939 
	#SYS_mq_g‘£‰r
 
__NR_mq_g‘£‰r


	)

942 #ifdeà
__NR_mq_nÙify


943 
	#SYS_mq_nÙify
 
__NR_mq_nÙify


	)

946 #ifdeà
__NR_mq_İ’


947 
	#SYS_mq_İ’
 
__NR_mq_İ’


	)

950 #ifdeà
__NR_mq_timed»ûive


951 
	#SYS_mq_timed»ûive
 
__NR_mq_timed»ûive


	)

954 #ifdeà
__NR_mq_timed»ûive_time64


955 
	#SYS_mq_timed»ûive_time64
 
__NR_mq_timed»ûive_time64


	)

958 #ifdeà
__NR_mq_timed£nd


959 
	#SYS_mq_timed£nd
 
__NR_mq_timed£nd


	)

962 #ifdeà
__NR_mq_timed£nd_time64


963 
	#SYS_mq_timed£nd_time64
 
__NR_mq_timed£nd_time64


	)

966 #ifdeà
__NR_mq_uÆšk


967 
	#SYS_mq_uÆšk
 
__NR_mq_uÆšk


	)

970 #ifdeà
__NR_m»m­


971 
	#SYS_m»m­
 
__NR_m»m­


	)

974 #ifdeà
__NR_msgùl


975 
	#SYS_msgùl
 
__NR_msgùl


	)

978 #ifdeà
__NR_msgg‘


979 
	#SYS_msgg‘
 
__NR_msgg‘


	)

982 #ifdeà
__NR_msgrcv


983 
	#SYS_msgrcv
 
__NR_msgrcv


	)

986 #ifdeà
__NR_msg¢d


987 
	#SYS_msg¢d
 
__NR_msg¢d


	)

990 #ifdeà
__NR_msync


991 
	#SYS_msync
 
__NR_msync


	)

994 #ifdeà
__NR_muÉËx”


995 
	#SYS_muÉËx”
 
__NR_muÉËx”


	)

998 #ifdeà
__NR_muÆock


999 
	#SYS_muÆock
 
__NR_muÆock


	)

1002 #ifdeà
__NR_muÆock®l


1003 
	#SYS_muÆock®l
 
__NR_muÆock®l


	)

1006 #ifdeà
__NR_munm­


1007 
	#SYS_munm­
 
__NR_munm­


	)

1010 #ifdeà
__NR_Çme_to_hªdË_©


1011 
	#SYS_Çme_to_hªdË_©
 
__NR_Çme_to_hªdË_©


	)

1014 #ifdeà
__NR_Çno¦“p


1015 
	#SYS_Çno¦“p
 
__NR_Çno¦“p


	)

1018 #ifdeà
__NR_Ãwf¡©©


1019 
	#SYS_Ãwf¡©©
 
__NR_Ãwf¡©©


	)

1022 #ifdeà
__NR_nfs£rvùl


1023 
	#SYS_nfs£rvùl
 
__NR_nfs£rvùl


	)

1026 #ifdeà
__NR_ni_sysÿÎ


1027 
	#SYS_ni_sysÿÎ
 
__NR_ni_sysÿÎ


	)

1030 #ifdeà
__NR_niû


1031 
	#SYS_niû
 
__NR_niû


	)

1034 #ifdeà
__NR_Şd_adjtimex


1035 
	#SYS_Şd_adjtimex
 
__NR_Şd_adjtimex


	)

1038 #ifdeà
__NR_Şd_g‘·gesize


1039 
	#SYS_Şd_g‘·gesize
 
__NR_Şd_g‘·gesize


	)

1042 #ifdeà
__NR_Şdf¡©


1043 
	#SYS_Şdf¡©
 
__NR_Şdf¡©


	)

1046 #ifdeà
__NR_Şdl¡©


1047 
	#SYS_Şdl¡©
 
__NR_Şdl¡©


	)

1050 #ifdeà
__NR_ŞdŞduÇme


1051 
	#SYS_ŞdŞduÇme
 
__NR_ŞdŞduÇme


	)

1054 #ifdeà
__NR_Şd¡©


1055 
	#SYS_Şd¡©
 
__NR_Şd¡©


	)

1058 #ifdeà
__NR_ŞdumouÁ


1059 
	#SYS_ŞdumouÁ
 
__NR_ŞdumouÁ


	)

1062 #ifdeà
__NR_ŞduÇme


1063 
	#SYS_ŞduÇme
 
__NR_ŞduÇme


	)

1066 #ifdeà
__NR_İ’


1067 
	#SYS_İ’
 
__NR_İ’


	)

1070 #ifdeà
__NR_İ’_by_hªdË_©


1071 
	#SYS_İ’_by_hªdË_©
 
__NR_İ’_by_hªdË_©


	)

1074 #ifdeà
__NR_İ’_Œ“


1075 
	#SYS_İ’_Œ“
 
__NR_İ’_Œ“


	)

1078 #ifdeà
__NR_İ’©


1079 
	#SYS_İ’©
 
__NR_İ’©


	)

1082 #ifdeà
__NR_osf_adjtime


1083 
	#SYS_osf_adjtime
 
__NR_osf_adjtime


	)

1086 #ifdeà
__NR_osf_afs_sysÿÎ


1087 
	#SYS_osf_afs_sysÿÎ
 
__NR_osf_afs_sysÿÎ


	)

1090 #ifdeà
__NR_osf_®t_¶ock


1091 
	#SYS_osf_®t_¶ock
 
__NR_osf_®t_¶ock


	)

1094 #ifdeà
__NR_osf_®t_£tsid


1095 
	#SYS_osf_®t_£tsid
 
__NR_osf_®t_£tsid


	)

1098 #ifdeà
__NR_osf_®t_sig³ndšg


1099 
	#SYS_osf_®t_sig³ndšg
 
__NR_osf_®t_sig³ndšg


	)

1102 #ifdeà
__NR_osf_asynch_d«mÚ


1103 
	#SYS_osf_asynch_d«mÚ
 
__NR_osf_asynch_d«mÚ


	)

1106 #ifdeà
__NR_osf_audú


1107 
	#SYS_osf_audú
 
__NR_osf_audú


	)

1110 #ifdeà
__NR_osf_audg’


1111 
	#SYS_osf_audg’
 
__NR_osf_audg’


	)

1114 #ifdeà
__NR_osf_chæags


1115 
	#SYS_osf_chæags
 
__NR_osf_chæags


	)

1118 #ifdeà
__NR_osf_execve


1119 
	#SYS_osf_execve
 
__NR_osf_execve


	)

1122 #ifdeà
__NR_osf_expÜtfs


1123 
	#SYS_osf_expÜtfs
 
__NR_osf_expÜtfs


	)

1126 #ifdeà
__NR_osf_fchæags


1127 
	#SYS_osf_fchæags
 
__NR_osf_fchæags


	)

1130 #ifdeà
__NR_osf_fd©async


1131 
	#SYS_osf_fd©async
 
__NR_osf_fd©async


	)

1134 #ifdeà
__NR_osf_å©hcÚf


1135 
	#SYS_osf_å©hcÚf
 
__NR_osf_å©hcÚf


	)

1138 #ifdeà
__NR_osf_f¡©


1139 
	#SYS_osf_f¡©
 
__NR_osf_f¡©


	)

1142 #ifdeà
__NR_osf_f¡©fs


1143 
	#SYS_osf_f¡©fs
 
__NR_osf_f¡©fs


	)

1146 #ifdeà
__NR_osf_f¡©fs64


1147 
	#SYS_osf_f¡©fs64
 
__NR_osf_f¡©fs64


	)

1150 #ifdeà
__NR_osf_fu£r


1151 
	#SYS_osf_fu£r
 
__NR_osf_fu£r


	)

1154 #ifdeà
__NR_osf_g‘add»sscÚf


1155 
	#SYS_osf_g‘add»sscÚf
 
__NR_osf_g‘add»sscÚf


	)

1158 #ifdeà
__NR_osf_g‘dœ’Œ›s


1159 
	#SYS_osf_g‘dœ’Œ›s
 
__NR_osf_g‘dœ’Œ›s


	)

1162 #ifdeà
__NR_osf_g‘domašÇme


1163 
	#SYS_osf_g‘domašÇme
 
__NR_osf_g‘domašÇme


	)

1166 #ifdeà
__NR_osf_g‘fh


1167 
	#SYS_osf_g‘fh
 
__NR_osf_g‘fh


	)

1170 #ifdeà
__NR_osf_g‘fs¡©


1171 
	#SYS_osf_g‘fs¡©
 
__NR_osf_g‘fs¡©


	)

1174 #ifdeà
__NR_osf_g‘ho¡id


1175 
	#SYS_osf_g‘ho¡id
 
__NR_osf_g‘ho¡id


	)

1178 #ifdeà
__NR_osf_g‘™im”


1179 
	#SYS_osf_g‘™im”
 
__NR_osf_g‘™im”


	)

1182 #ifdeà
__NR_osf_g‘logš


1183 
	#SYS_osf_g‘logš
 
__NR_osf_g‘logš


	)

1186 #ifdeà
__NR_osf_g‘mÁ


1187 
	#SYS_osf_g‘mÁ
 
__NR_osf_g‘mÁ


	)

1190 #ifdeà
__NR_osf_g‘ru§ge


1191 
	#SYS_osf_g‘ru§ge
 
__NR_osf_g‘ru§ge


	)

1194 #ifdeà
__NR_osf_g‘sysšfo


1195 
	#SYS_osf_g‘sysšfo
 
__NR_osf_g‘sysšfo


	)

1198 #ifdeà
__NR_osf_g‘timeofday


1199 
	#SYS_osf_g‘timeofday
 
__NR_osf_g‘timeofday


	)

1202 #ifdeà
__NR_osf_klßdÿÎ


1203 
	#SYS_osf_klßdÿÎ
 
__NR_osf_klßdÿÎ


	)

1206 #ifdeà
__NR_osf_kmodÿÎ


1207 
	#SYS_osf_kmodÿÎ
 
__NR_osf_kmodÿÎ


	)

1210 #ifdeà
__NR_osf_l¡©


1211 
	#SYS_osf_l¡©
 
__NR_osf_l¡©


	)

1214 #ifdeà
__NR_osf_memú


1215 
	#SYS_osf_memú
 
__NR_osf_memú


	)

1218 #ifdeà
__NR_osf_mšcÜe


1219 
	#SYS_osf_mšcÜe
 
__NR_osf_mšcÜe


	)

1222 #ifdeà
__NR_osf_mouÁ


1223 
	#SYS_osf_mouÁ
 
__NR_osf_mouÁ


	)

1226 #ifdeà
__NR_osf_m»m­


1227 
	#SYS_osf_m»m­
 
__NR_osf_m»m­


	)

1230 #ifdeà
__NR_osf_msfs_sysÿÎ


1231 
	#SYS_osf_msfs_sysÿÎ
 
__NR_osf_msfs_sysÿÎ


	)

1234 #ifdeà
__NR_osf_m¦“p


1235 
	#SYS_osf_m¦“p
 
__NR_osf_m¦“p


	)

1238 #ifdeà
__NR_osf_mv®id


1239 
	#SYS_osf_mv®id
 
__NR_osf_mv®id


	)

1242 #ifdeà
__NR_osf_mwakeup


1243 
	#SYS_osf_mwakeup
 
__NR_osf_mwakeup


	)

1246 #ifdeà
__NR_osf_Çcû±


1247 
	#SYS_osf_Çcû±
 
__NR_osf_Çcû±


	)

1250 #ifdeà
__NR_osf_nfssvc


1251 
	#SYS_osf_nfssvc
 
__NR_osf_nfssvc


	)

1254 #ifdeà
__NR_osf_ng‘³”Çme


1255 
	#SYS_osf_ng‘³”Çme
 
__NR_osf_ng‘³”Çme


	)

1258 #ifdeà
__NR_osf_ng‘sockÇme


1259 
	#SYS_osf_ng‘sockÇme
 
__NR_osf_ng‘sockÇme


	)

1262 #ifdeà
__NR_osf_Äecväom


1263 
	#SYS_osf_Äecväom
 
__NR_osf_Äecväom


	)

1266 #ifdeà
__NR_osf_Äecvmsg


1267 
	#SYS_osf_Äecvmsg
 
__NR_osf_Äecvmsg


	)

1270 #ifdeà
__NR_osf_n£ndmsg


1271 
	#SYS_osf_n£ndmsg
 
__NR_osf_n£ndmsg


	)

1274 #ifdeà
__NR_osf_Áp_adjtime


1275 
	#SYS_osf_Áp_adjtime
 
__NR_osf_Áp_adjtime


	)

1278 #ifdeà
__NR_osf_Áp_g‘time


1279 
	#SYS_osf_Áp_g‘time
 
__NR_osf_Áp_g‘time


	)

1282 #ifdeà
__NR_osf_Şd_ü—t


1283 
	#SYS_osf_Şd_ü—t
 
__NR_osf_Şd_ü—t


	)

1286 #ifdeà
__NR_osf_Şd_f¡©


1287 
	#SYS_osf_Şd_f¡©
 
__NR_osf_Şd_f¡©


	)

1290 #ifdeà
__NR_osf_Şd_g‘pg½


1291 
	#SYS_osf_Şd_g‘pg½
 
__NR_osf_Şd_g‘pg½


	)

1294 #ifdeà
__NR_osf_Şd_kÍg


1295 
	#SYS_osf_Şd_kÍg
 
__NR_osf_Şd_kÍg


	)

1298 #ifdeà
__NR_osf_Şd_l¡©


1299 
	#SYS_osf_Şd_l¡©
 
__NR_osf_Şd_l¡©


	)

1302 #ifdeà
__NR_osf_Şd_İ’


1303 
	#SYS_osf_Şd_İ’
 
__NR_osf_Şd_İ’


	)

1306 #ifdeà
__NR_osf_Şd_sigaùiÚ


1307 
	#SYS_osf_Şd_sigaùiÚ
 
__NR_osf_Şd_sigaùiÚ


	)

1310 #ifdeà
__NR_osf_Şd_sigblock


1311 
	#SYS_osf_Şd_sigblock
 
__NR_osf_Şd_sigblock


	)

1314 #ifdeà
__NR_osf_Şd_sig»tuº


1315 
	#SYS_osf_Şd_sig»tuº
 
__NR_osf_Şd_sig»tuº


	)

1318 #ifdeà
__NR_osf_Şd_sig£tmask


1319 
	#SYS_osf_Şd_sig£tmask
 
__NR_osf_Şd_sig£tmask


	)

1322 #ifdeà
__NR_osf_Şd_sigvec


1323 
	#SYS_osf_Şd_sigvec
 
__NR_osf_Şd_sigvec


	)

1326 #ifdeà
__NR_osf_Şd_¡©


1327 
	#SYS_osf_Şd_¡©
 
__NR_osf_Şd_¡©


	)

1330 #ifdeà
__NR_osf_Şd_vadvi£


1331 
	#SYS_osf_Şd_vadvi£
 
__NR_osf_Şd_vadvi£


	)

1334 #ifdeà
__NR_osf_Şd_vŒaû


1335 
	#SYS_osf_Şd_vŒaû
 
__NR_osf_Şd_vŒaû


	)

1338 #ifdeà
__NR_osf_Şd_wa™


1339 
	#SYS_osf_Şd_wa™
 
__NR_osf_Şd_wa™


	)

1342 #ifdeà
__NR_osf_ŞdquÙa


1343 
	#SYS_osf_ŞdquÙa
 
__NR_osf_ŞdquÙa


	)

1346 #ifdeà
__NR_osf_·thcÚf


1347 
	#SYS_osf_·thcÚf
 
__NR_osf_·thcÚf


	)

1350 #ifdeà
__NR_osf_pid_block


1351 
	#SYS_osf_pid_block
 
__NR_osf_pid_block


	)

1354 #ifdeà
__NR_osf_pid_unblock


1355 
	#SYS_osf_pid_unblock
 
__NR_osf_pid_unblock


	)

1358 #ifdeà
__NR_osf_¶ock


1359 
	#SYS_osf_¶ock
 
__NR_osf_¶ock


	)

1362 #ifdeà
__NR_osf_´ioú£t


1363 
	#SYS_osf_´ioú£t
 
__NR_osf_´ioú£t


	)

1366 #ifdeà
__NR_osf_´of


1367 
	#SYS_osf_´of
 
__NR_osf_´of


	)

1370 #ifdeà
__NR_osf_´İli¡_sysÿÎ


1371 
	#SYS_osf_´İli¡_sysÿÎ
 
__NR_osf_´İli¡_sysÿÎ


	)

1374 #ifdeà
__NR_osf_»boÙ


1375 
	#SYS_osf_»boÙ
 
__NR_osf_»boÙ


	)

1378 #ifdeà
__NR_osf_»voke


1379 
	#SYS_osf_»voke
 
__NR_osf_»voke


	)

1382 #ifdeà
__NR_osf_sbrk


1383 
	#SYS_osf_sbrk
 
__NR_osf_sbrk


	)

1386 #ifdeà
__NR_osf_£cur™y


1387 
	#SYS_osf_£cur™y
 
__NR_osf_£cur™y


	)

1390 #ifdeà
__NR_osf_£Ëù


1391 
	#SYS_osf_£Ëù
 
__NR_osf_£Ëù


	)

1394 #ifdeà
__NR_osf_£t_´og¿m_©Œibu‹s


1395 
	#SYS_osf_£t_´og¿m_©Œibu‹s
 
__NR_osf_£t_´og¿m_©Œibu‹s


	)

1398 #ifdeà
__NR_osf_£t_¥ecuÏtive


1399 
	#SYS_osf_£t_¥ecuÏtive
 
__NR_osf_£t_¥ecuÏtive


	)

1402 #ifdeà
__NR_osf_£tho¡id


1403 
	#SYS_osf_£tho¡id
 
__NR_osf_£tho¡id


	)

1406 #ifdeà
__NR_osf_£t™im”


1407 
	#SYS_osf_£t™im”
 
__NR_osf_£t™im”


	)

1410 #ifdeà
__NR_osf_£ogš


1411 
	#SYS_osf_£ogš
 
__NR_osf_£ogš


	)

1414 #ifdeà
__NR_osf_£tsysšfo


1415 
	#SYS_osf_£tsysšfo
 
__NR_osf_£tsysšfo


	)

1418 #ifdeà
__NR_osf_£‰imeofday


1419 
	#SYS_osf_£‰imeofday
 
__NR_osf_£‰imeofday


	)

1422 #ifdeà
__NR_osf_shm©


1423 
	#SYS_osf_shm©
 
__NR_osf_shm©


	)

1426 #ifdeà
__NR_osf_sigÇl


1427 
	#SYS_osf_sigÇl
 
__NR_osf_sigÇl


	)

1430 #ifdeà
__NR_osf_sig´ocmask


1431 
	#SYS_osf_sig´ocmask
 
__NR_osf_sig´ocmask


	)

1434 #ifdeà
__NR_osf_sig£nd£t


1435 
	#SYS_osf_sig£nd£t
 
__NR_osf_sig£nd£t


	)

1438 #ifdeà
__NR_osf_sig¡ack


1439 
	#SYS_osf_sig¡ack
 
__NR_osf_sig¡ack


	)

1442 #ifdeà
__NR_osf_sigwa™´im


1443 
	#SYS_osf_sigwa™´im
 
__NR_osf_sigwa™´im


	)

1446 #ifdeà
__NR_osf_s¡k


1447 
	#SYS_osf_s¡k
 
__NR_osf_s¡k


	)

1450 #ifdeà
__NR_osf_¡©


1451 
	#SYS_osf_¡©
 
__NR_osf_¡©


	)

1454 #ifdeà
__NR_osf_¡©fs


1455 
	#SYS_osf_¡©fs
 
__NR_osf_¡©fs


	)

1458 #ifdeà
__NR_osf_¡©fs64


1459 
	#SYS_osf_¡©fs64
 
__NR_osf_¡©fs64


	)

1462 #ifdeà
__NR_osf_subsys_šfo


1463 
	#SYS_osf_subsys_šfo
 
__NR_osf_subsys_šfo


	)

1466 #ifdeà
__NR_osf_sw­ùl


1467 
	#SYS_osf_sw­ùl
 
__NR_osf_sw­ùl


	)

1470 #ifdeà
__NR_osf_sw­Ú


1471 
	#SYS_osf_sw­Ú
 
__NR_osf_sw­Ú


	)

1474 #ifdeà
__NR_osf_sysÿÎ


1475 
	#SYS_osf_sysÿÎ
 
__NR_osf_sysÿÎ


	)

1478 #ifdeà
__NR_osf_sysšfo


1479 
	#SYS_osf_sysšfo
 
__NR_osf_sysšfo


	)

1482 #ifdeà
__NR_osf_bË


1483 
	#SYS_osf_bË
 
__NR_osf_bË


	)

1486 #ifdeà
__NR_osf_uadmš


1487 
	#SYS_osf_uadmš
 
__NR_osf_uadmš


	)

1490 #ifdeà
__NR_osf_u¦“p_th»ad


1491 
	#SYS_osf_u¦“p_th»ad
 
__NR_osf_u¦“p_th»ad


	)

1494 #ifdeà
__NR_osf_usw™ch


1495 
	#SYS_osf_usw™ch
 
__NR_osf_usw™ch


	)

1498 #ifdeà
__NR_osf_utc_adjtime


1499 
	#SYS_osf_utc_adjtime
 
__NR_osf_utc_adjtime


	)

1502 #ifdeà
__NR_osf_utc_g‘time


1503 
	#SYS_osf_utc_g‘time
 
__NR_osf_utc_g‘time


	)

1506 #ifdeà
__NR_osf_utimes


1507 
	#SYS_osf_utimes
 
__NR_osf_utimes


	)

1510 #ifdeà
__NR_osf_ut¢ame


1511 
	#SYS_osf_ut¢ame
 
__NR_osf_ut¢ame


	)

1514 #ifdeà
__NR_osf_wa™4


1515 
	#SYS_osf_wa™4
 
__NR_osf_wa™4


	)

1518 #ifdeà
__NR_osf_wa™id


1519 
	#SYS_osf_wa™id
 
__NR_osf_wa™id


	)

1522 #ifdeà
__NR_·u£


1523 
	#SYS_·u£
 
__NR_·u£


	)

1526 #ifdeà
__NR_pcicÚfig_ioba£


1527 
	#SYS_pcicÚfig_ioba£
 
__NR_pcicÚfig_ioba£


	)

1530 #ifdeà
__NR_pcicÚfig_»ad


1531 
	#SYS_pcicÚfig_»ad
 
__NR_pcicÚfig_»ad


	)

1534 #ifdeà
__NR_pcicÚfig_wr™e


1535 
	#SYS_pcicÚfig_wr™e
 
__NR_pcicÚfig_wr™e


	)

1538 #ifdeà
__NR_³rf_ev’t_İ’


1539 
	#SYS_³rf_ev’t_İ’
 
__NR_³rf_ev’t_İ’


	)

1542 #ifdeà
__NR_³rfùr


1543 
	#SYS_³rfùr
 
__NR_³rfùr


	)

1546 #ifdeà
__NR_³rfmÚùl


1547 
	#SYS_³rfmÚùl
 
__NR_³rfmÚùl


	)

1550 #ifdeà
__NR_³rsÚ®™y


1551 
	#SYS_³rsÚ®™y
 
__NR_³rsÚ®™y


	)

1554 #ifdeà
__NR_pidfd_İ’


1555 
	#SYS_pidfd_İ’
 
__NR_pidfd_İ’


	)

1558 #ifdeà
__NR_pidfd_£nd_sigÇl


1559 
	#SYS_pidfd_£nd_sigÇl
 
__NR_pidfd_£nd_sigÇl


	)

1562 #ifdeà
__NR_pe


1563 
	#SYS_pe
 
__NR_pe


	)

1566 #ifdeà
__NR_pe2


1567 
	#SYS_pe2
 
__NR_pe2


	)

1570 #ifdeà
__NR_pivÙ_roÙ


1571 
	#SYS_pivÙ_roÙ
 
__NR_pivÙ_roÙ


	)

1574 #ifdeà
__NR_pkey_®loc


1575 
	#SYS_pkey_®loc
 
__NR_pkey_®loc


	)

1578 #ifdeà
__NR_pkey_ä“


1579 
	#SYS_pkey_ä“
 
__NR_pkey_ä“


	)

1582 #ifdeà
__NR_pkey_m´Ùeù


1583 
	#SYS_pkey_m´Ùeù
 
__NR_pkey_m´Ùeù


	)

1586 #ifdeà
__NR_pŞl


1587 
	#SYS_pŞl
 
__NR_pŞl


	)

1590 #ifdeà
__NR_µŞl


1591 
	#SYS_µŞl
 
__NR_µŞl


	)

1594 #ifdeà
__NR_µŞl_time64


1595 
	#SYS_µŞl_time64
 
__NR_µŞl_time64


	)

1598 #ifdeà
__NR_´ùl


1599 
	#SYS_´ùl
 
__NR_´ùl


	)

1602 #ifdeà
__NR_´—d64


1603 
	#SYS_´—d64
 
__NR_´—d64


	)

1606 #ifdeà
__NR_´—dv


1607 
	#SYS_´—dv
 
__NR_´—dv


	)

1610 #ifdeà
__NR_´—dv2


1611 
	#SYS_´—dv2
 
__NR_´—dv2


	)

1614 #ifdeà
__NR_´lim™64


1615 
	#SYS_´lim™64
 
__NR_´lim™64


	)

1618 #ifdeà
__NR_´oûss_vm_»adv


1619 
	#SYS_´oûss_vm_»adv
 
__NR_´oûss_vm_»adv


	)

1622 #ifdeà
__NR_´oûss_vm_wr™ev


1623 
	#SYS_´oûss_vm_wr™ev
 
__NR_´oûss_vm_wr™ev


	)

1626 #ifdeà
__NR_´of


1627 
	#SYS_´of
 
__NR_´of


	)

1630 #ifdeà
__NR_´of


1631 
	#SYS_´of
 
__NR_´of


	)

1634 #ifdeà
__NR_p£Ëù6


1635 
	#SYS_p£Ëù6
 
__NR_p£Ëù6


	)

1638 #ifdeà
__NR_p£Ëù6_time64


1639 
	#SYS_p£Ëù6_time64
 
__NR_p£Ëù6_time64


	)

1642 #ifdeà
__NR_±¿û


1643 
	#SYS_±¿û
 
__NR_±¿û


	)

1646 #ifdeà
__NR_pumsg


1647 
	#SYS_pumsg
 
__NR_pumsg


	)

1650 #ifdeà
__NR_pwr™e64


1651 
	#SYS_pwr™e64
 
__NR_pwr™e64


	)

1654 #ifdeà
__NR_pwr™ev


1655 
	#SYS_pwr™ev
 
__NR_pwr™ev


	)

1658 #ifdeà
__NR_pwr™ev2


1659 
	#SYS_pwr™ev2
 
__NR_pwr™ev2


	)

1662 #ifdeà
__NR_qu”y_moduË


1663 
	#SYS_qu”y_moduË
 
__NR_qu”y_moduË


	)

1666 #ifdeà
__NR_quÙaùl


1667 
	#SYS_quÙaùl
 
__NR_quÙaùl


	)

1670 #ifdeà
__NR_»ad


1671 
	#SYS_»ad
 
__NR_»ad


	)

1674 #ifdeà
__NR_»adah—d


1675 
	#SYS_»adah—d
 
__NR_»adah—d


	)

1678 #ifdeà
__NR_»addœ


1679 
	#SYS_»addœ
 
__NR_»addœ


	)

1682 #ifdeà
__NR_»adlšk


1683 
	#SYS_»adlšk
 
__NR_»adlšk


	)

1686 #ifdeà
__NR_»adlšk©


1687 
	#SYS_»adlšk©
 
__NR_»adlšk©


	)

1690 #ifdeà
__NR_»adv


1691 
	#SYS_»adv
 
__NR_»adv


	)

1694 #ifdeà
__NR_»boÙ


1695 
	#SYS_»boÙ
 
__NR_»boÙ


	)

1698 #ifdeà
__NR_»cv


1699 
	#SYS_»cv
 
__NR_»cv


	)

1702 #ifdeà
__NR_»cväom


1703 
	#SYS_»cväom
 
__NR_»cväom


	)

1706 #ifdeà
__NR_»cvmmsg


1707 
	#SYS_»cvmmsg
 
__NR_»cvmmsg


	)

1710 #ifdeà
__NR_»cvmmsg_time64


1711 
	#SYS_»cvmmsg_time64
 
__NR_»cvmmsg_time64


	)

1714 #ifdeà
__NR_»cvmsg


1715 
	#SYS_»cvmsg
 
__NR_»cvmsg


	)

1718 #ifdeà
__NR_»m­_fe_·ges


1719 
	#SYS_»m­_fe_·ges
 
__NR_»m­_fe_·ges


	)

1722 #ifdeà
__NR_»movex©Œ


1723 
	#SYS_»movex©Œ
 
__NR_»movex©Œ


	)

1726 #ifdeà
__NR_»Çme


1727 
	#SYS_»Çme
 
__NR_»Çme


	)

1730 #ifdeà
__NR_»Çm—t


1731 
	#SYS_»Çm—t
 
__NR_»Çm—t


	)

1734 #ifdeà
__NR_»Çm—t2


1735 
	#SYS_»Çm—t2
 
__NR_»Çm—t2


	)

1738 #ifdeà
__NR_»que¡_key


1739 
	#SYS_»que¡_key
 
__NR_»que¡_key


	)

1742 #ifdeà
__NR_»¡¬t_sysÿÎ


1743 
	#SYS_»¡¬t_sysÿÎ
 
__NR_»¡¬t_sysÿÎ


	)

1746 #ifdeà
__NR_riscv_æush_iÿche


1747 
	#SYS_riscv_æush_iÿche
 
__NR_riscv_æush_iÿche


	)

1750 #ifdeà
__NR_rmdœ


1751 
	#SYS_rmdœ
 
__NR_rmdœ


	)

1754 #ifdeà
__NR_r£q


1755 
	#SYS_r£q
 
__NR_r£q


	)

1758 #ifdeà
__NR_¹_sigaùiÚ


1759 
	#SYS_¹_sigaùiÚ
 
__NR_¹_sigaùiÚ


	)

1762 #ifdeà
__NR_¹_sig³ndšg


1763 
	#SYS_¹_sig³ndšg
 
__NR_¹_sig³ndšg


	)

1766 #ifdeà
__NR_¹_sig´ocmask


1767 
	#SYS_¹_sig´ocmask
 
__NR_¹_sig´ocmask


	)

1770 #ifdeà
__NR_¹_sigqueuešfo


1771 
	#SYS_¹_sigqueuešfo
 
__NR_¹_sigqueuešfo


	)

1774 #ifdeà
__NR_¹_sig»tuº


1775 
	#SYS_¹_sig»tuº
 
__NR_¹_sig»tuº


	)

1778 #ifdeà
__NR_¹_sigsu¥’d


1779 
	#SYS_¹_sigsu¥’d
 
__NR_¹_sigsu¥’d


	)

1782 #ifdeà
__NR_¹_sigtimedwa™


1783 
	#SYS_¹_sigtimedwa™
 
__NR_¹_sigtimedwa™


	)

1786 #ifdeà
__NR_¹_sigtimedwa™_time64


1787 
	#SYS_¹_sigtimedwa™_time64
 
__NR_¹_sigtimedwa™_time64


	)

1790 #ifdeà
__NR_¹_tgsigqueuešfo


1791 
	#SYS_¹_tgsigqueuešfo
 
__NR_¹_tgsigqueuešfo


	)

1794 #ifdeà
__NR_¹as


1795 
	#SYS_¹as
 
__NR_¹as


	)

1798 #ifdeà
__NR_s390_gu¬ded_¡Üage


1799 
	#SYS_s390_gu¬ded_¡Üage
 
__NR_s390_gu¬ded_¡Üage


	)

1802 #ifdeà
__NR_s390_pci_mmio_»ad


1803 
	#SYS_s390_pci_mmio_»ad
 
__NR_s390_pci_mmio_»ad


	)

1806 #ifdeà
__NR_s390_pci_mmio_wr™e


1807 
	#SYS_s390_pci_mmio_wr™e
 
__NR_s390_pci_mmio_wr™e


	)

1810 #ifdeà
__NR_s390_ruÁime_š¡r


1811 
	#SYS_s390_ruÁime_š¡r
 
__NR_s390_ruÁime_š¡r


	)

1814 #ifdeà
__NR_s390_¡hyi


1815 
	#SYS_s390_¡hyi
 
__NR_s390_¡hyi


	)

1818 #ifdeà
__NR_sched_g‘_affš™y


1819 
	#SYS_sched_g‘_affš™y
 
__NR_sched_g‘_affš™y


	)

1822 #ifdeà
__NR_sched_g‘_´iÜ™y_max


1823 
	#SYS_sched_g‘_´iÜ™y_max
 
__NR_sched_g‘_´iÜ™y_max


	)

1826 #ifdeà
__NR_sched_g‘_´iÜ™y_mš


1827 
	#SYS_sched_g‘_´iÜ™y_mš
 
__NR_sched_g‘_´iÜ™y_mš


	)

1830 #ifdeà
__NR_sched_g‘affš™y


1831 
	#SYS_sched_g‘affš™y
 
__NR_sched_g‘affš™y


	)

1834 #ifdeà
__NR_sched_g‘©Œ


1835 
	#SYS_sched_g‘©Œ
 
__NR_sched_g‘©Œ


	)

1838 #ifdeà
__NR_sched_g‘·¿m


1839 
	#SYS_sched_g‘·¿m
 
__NR_sched_g‘·¿m


	)

1842 #ifdeà
__NR_sched_g‘scheduËr


1843 
	#SYS_sched_g‘scheduËr
 
__NR_sched_g‘scheduËr


	)

1846 #ifdeà
__NR_sched_¼_g‘_š‹rv®


1847 
	#SYS_sched_¼_g‘_š‹rv®
 
__NR_sched_¼_g‘_š‹rv®


	)

1850 #ifdeà
__NR_sched_¼_g‘_š‹rv®_time64


1851 
	#SYS_sched_¼_g‘_š‹rv®_time64
 
__NR_sched_¼_g‘_š‹rv®_time64


	)

1854 #ifdeà
__NR_sched_£t_affš™y


1855 
	#SYS_sched_£t_affš™y
 
__NR_sched_£t_affš™y


	)

1858 #ifdeà
__NR_sched_£ffš™y


1859 
	#SYS_sched_£ffš™y
 
__NR_sched_£ffš™y


	)

1862 #ifdeà
__NR_sched_£‰r


1863 
	#SYS_sched_£‰r
 
__NR_sched_£‰r


	)

1866 #ifdeà
__NR_sched_£¬am


1867 
	#SYS_sched_£¬am
 
__NR_sched_£¬am


	)

1870 #ifdeà
__NR_sched_£tscheduËr


1871 
	#SYS_sched_£tscheduËr
 
__NR_sched_£tscheduËr


	)

1874 #ifdeà
__NR_sched_y›ld


1875 
	#SYS_sched_y›ld
 
__NR_sched_y›ld


	)

1878 #ifdeà
__NR_£ccomp


1879 
	#SYS_£ccomp
 
__NR_£ccomp


	)

1882 #ifdeà
__NR_£cur™y


1883 
	#SYS_£cur™y
 
__NR_£cur™y


	)

1886 #ifdeà
__NR_£Ëù


1887 
	#SYS_£Ëù
 
__NR_£Ëù


	)

1890 #ifdeà
__NR_£mùl


1891 
	#SYS_£mùl
 
__NR_£mùl


	)

1894 #ifdeà
__NR_£mg‘


1895 
	#SYS_£mg‘
 
__NR_£mg‘


	)

1898 #ifdeà
__NR_£mİ


1899 
	#SYS_£mİ
 
__NR_£mİ


	)

1902 #ifdeà
__NR_£mtimedİ


1903 
	#SYS_£mtimedİ
 
__NR_£mtimedİ


	)

1906 #ifdeà
__NR_£mtimedİ_time64


1907 
	#SYS_£mtimedİ_time64
 
__NR_£mtimedİ_time64


	)

1910 #ifdeà
__NR_£nd


1911 
	#SYS_£nd
 
__NR_£nd


	)

1914 #ifdeà
__NR_£ndfe


1915 
	#SYS_£ndfe
 
__NR_£ndfe


	)

1918 #ifdeà
__NR_£ndfe64


1919 
	#SYS_£ndfe64
 
__NR_£ndfe64


	)

1922 #ifdeà
__NR_£ndmmsg


1923 
	#SYS_£ndmmsg
 
__NR_£ndmmsg


	)

1926 #ifdeà
__NR_£ndmsg


1927 
	#SYS_£ndmsg
 
__NR_£ndmsg


	)

1930 #ifdeà
__NR_£ndto


1931 
	#SYS_£ndto
 
__NR_£ndto


	)

1934 #ifdeà
__NR_£t_mempŞicy


1935 
	#SYS_£t_mempŞicy
 
__NR_£t_mempŞicy


	)

1938 #ifdeà
__NR_£t_robu¡_li¡


1939 
	#SYS_£t_robu¡_li¡
 
__NR_£t_robu¡_li¡


	)

1942 #ifdeà
__NR_£t_th»ad_¬—


1943 
	#SYS_£t_th»ad_¬—
 
__NR_£t_th»ad_¬—


	)

1946 #ifdeà
__NR_£t_tid_add»ss


1947 
	#SYS_£t_tid_add»ss
 
__NR_£t_tid_add»ss


	)

1950 #ifdeà
__NR_£t_s


1951 
	#SYS_£t_s
 
__NR_£t_s


	)

1954 #ifdeà
__NR_£tdomašÇme


1955 
	#SYS_£tdomašÇme
 
__NR_£tdomašÇme


	)

1958 #ifdeà
__NR_£tfsgid


1959 
	#SYS_£tfsgid
 
__NR_£tfsgid


	)

1962 #ifdeà
__NR_£tfsgid32


1963 
	#SYS_£tfsgid32
 
__NR_£tfsgid32


	)

1966 #ifdeà
__NR_£tfsuid


1967 
	#SYS_£tfsuid
 
__NR_£tfsuid


	)

1970 #ifdeà
__NR_£tfsuid32


1971 
	#SYS_£tfsuid32
 
__NR_£tfsuid32


	)

1974 #ifdeà
__NR_£tgid


1975 
	#SYS_£tgid
 
__NR_£tgid


	)

1978 #ifdeà
__NR_£tgid32


1979 
	#SYS_£tgid32
 
__NR_£tgid32


	)

1982 #ifdeà
__NR_£tgroups


1983 
	#SYS_£tgroups
 
__NR_£tgroups


	)

1986 #ifdeà
__NR_£tgroups32


1987 
	#SYS_£tgroups32
 
__NR_£tgroups32


	)

1990 #ifdeà
__NR_£th«


1991 
	#SYS_£th«
 
__NR_£th«


	)

1994 #ifdeà
__NR_£tho¡Çme


1995 
	#SYS_£tho¡Çme
 
__NR_£tho¡Çme


	)

1998 #ifdeà
__NR_£t™im”


1999 
	#SYS_£t™im”
 
__NR_£t™im”


	)

2002 #ifdeà
__NR_£Šs


2003 
	#SYS_£Šs
 
__NR_£Šs


	)

2006 #ifdeà
__NR_£gid


2007 
	#SYS_£gid
 
__NR_£gid


	)

2010 #ifdeà
__NR_£g½


2011 
	#SYS_£g½
 
__NR_£g½


	)

2014 #ifdeà
__NR_£riÜ™y


2015 
	#SYS_£riÜ™y
 
__NR_£riÜ™y


	)

2018 #ifdeà
__NR_£Œegid


2019 
	#SYS_£Œegid
 
__NR_£Œegid


	)

2022 #ifdeà
__NR_£Œegid32


2023 
	#SYS_£Œegid32
 
__NR_£Œegid32


	)

2026 #ifdeà
__NR_£Œesgid


2027 
	#SYS_£Œesgid
 
__NR_£Œesgid


	)

2030 #ifdeà
__NR_£Œesgid32


2031 
	#SYS_£Œesgid32
 
__NR_£Œesgid32


	)

2034 #ifdeà
__NR_£Œesuid


2035 
	#SYS_£Œesuid
 
__NR_£Œesuid


	)

2038 #ifdeà
__NR_£Œesuid32


2039 
	#SYS_£Œesuid32
 
__NR_£Œesuid32


	)

2042 #ifdeà
__NR_£Œeuid


2043 
	#SYS_£Œeuid
 
__NR_£Œeuid


	)

2046 #ifdeà
__NR_£Œeuid32


2047 
	#SYS_£Œeuid32
 
__NR_£Œeuid32


	)

2050 #ifdeà
__NR_£Œlim™


2051 
	#SYS_£Œlim™
 
__NR_£Œlim™


	)

2054 #ifdeà
__NR_£tsid


2055 
	#SYS_£tsid
 
__NR_£tsid


	)

2058 #ifdeà
__NR_£tsockİt


2059 
	#SYS_£tsockİt
 
__NR_£tsockİt


	)

2062 #ifdeà
__NR_£‰imeofday


2063 
	#SYS_£‰imeofday
 
__NR_£‰imeofday


	)

2066 #ifdeà
__NR_£tuid


2067 
	#SYS_£tuid
 
__NR_£tuid


	)

2070 #ifdeà
__NR_£tuid32


2071 
	#SYS_£tuid32
 
__NR_£tuid32


	)

2074 #ifdeà
__NR_£tx©Œ


2075 
	#SYS_£tx©Œ
 
__NR_£tx©Œ


	)

2078 #ifdeà
__NR_sg‘mask


2079 
	#SYS_sg‘mask
 
__NR_sg‘mask


	)

2082 #ifdeà
__NR_shm©


2083 
	#SYS_shm©
 
__NR_shm©


	)

2086 #ifdeà
__NR_shmùl


2087 
	#SYS_shmùl
 
__NR_shmùl


	)

2090 #ifdeà
__NR_shmdt


2091 
	#SYS_shmdt
 
__NR_shmdt


	)

2094 #ifdeà
__NR_shmg‘


2095 
	#SYS_shmg‘
 
__NR_shmg‘


	)

2098 #ifdeà
__NR_shutdown


2099 
	#SYS_shutdown
 
__NR_shutdown


	)

2102 #ifdeà
__NR_sigaùiÚ


2103 
	#SYS_sigaùiÚ
 
__NR_sigaùiÚ


	)

2106 #ifdeà
__NR_sig®t¡ack


2107 
	#SYS_sig®t¡ack
 
__NR_sig®t¡ack


	)

2110 #ifdeà
__NR_sigÇl


2111 
	#SYS_sigÇl
 
__NR_sigÇl


	)

2114 #ifdeà
__NR_sigÇlfd


2115 
	#SYS_sigÇlfd
 
__NR_sigÇlfd


	)

2118 #ifdeà
__NR_sigÇlfd4


2119 
	#SYS_sigÇlfd4
 
__NR_sigÇlfd4


	)

2122 #ifdeà
__NR_sig³ndšg


2123 
	#SYS_sig³ndšg
 
__NR_sig³ndšg


	)

2126 #ifdeà
__NR_sig´ocmask


2127 
	#SYS_sig´ocmask
 
__NR_sig´ocmask


	)

2130 #ifdeà
__NR_sig»tuº


2131 
	#SYS_sig»tuº
 
__NR_sig»tuº


	)

2134 #ifdeà
__NR_sigsu¥’d


2135 
	#SYS_sigsu¥’d
 
__NR_sigsu¥’d


	)

2138 #ifdeà
__NR_sock‘


2139 
	#SYS_sock‘
 
__NR_sock‘


	)

2142 #ifdeà
__NR_sock‘ÿÎ


2143 
	#SYS_sock‘ÿÎ
 
__NR_sock‘ÿÎ


	)

2146 #ifdeà
__NR_sock‘·œ


2147 
	#SYS_sock‘·œ
 
__NR_sock‘·œ


	)

2150 #ifdeà
__NR_¥liû


2151 
	#SYS_¥liû
 
__NR_¥liû


	)

2154 #ifdeà
__NR_¥u_ü—‹


2155 
	#SYS_¥u_ü—‹
 
__NR_¥u_ü—‹


	)

2158 #ifdeà
__NR_¥u_run


2159 
	#SYS_¥u_run
 
__NR_¥u_run


	)

2162 #ifdeà
__NR_s£tmask


2163 
	#SYS_s£tmask
 
__NR_s£tmask


	)

2166 #ifdeà
__NR_¡©


2167 
	#SYS_¡©
 
__NR_¡©


	)

2170 #ifdeà
__NR_¡©64


2171 
	#SYS_¡©64
 
__NR_¡©64


	)

2174 #ifdeà
__NR_¡©fs


2175 
	#SYS_¡©fs
 
__NR_¡©fs


	)

2178 #ifdeà
__NR_¡©fs64


2179 
	#SYS_¡©fs64
 
__NR_¡©fs64


	)

2182 #ifdeà
__NR_¡©x


2183 
	#SYS_¡©x
 
__NR_¡©x


	)

2186 #ifdeà
__NR_¡ime


2187 
	#SYS_¡ime
 
__NR_¡ime


	)

2190 #ifdeà
__NR_¡ty


2191 
	#SYS_¡ty
 
__NR_¡ty


	)

2194 #ifdeà
__NR_sub·ge_´Ù


2195 
	#SYS_sub·ge_´Ù
 
__NR_sub·ge_´Ù


	)

2198 #ifdeà
__NR_sw­cÚ‹xt


2199 
	#SYS_sw­cÚ‹xt
 
__NR_sw­cÚ‹xt


	)

2202 #ifdeà
__NR_sw­off


2203 
	#SYS_sw­off
 
__NR_sw­off


	)

2206 #ifdeà
__NR_sw­Ú


2207 
	#SYS_sw­Ú
 
__NR_sw­Ú


	)

2210 #ifdeà
__NR_sw™ch_’dŸn


2211 
	#SYS_sw™ch_’dŸn
 
__NR_sw™ch_’dŸn


	)

2214 #ifdeà
__NR_symlšk


2215 
	#SYS_symlšk
 
__NR_symlšk


	)

2218 #ifdeà
__NR_symlšk©


2219 
	#SYS_symlšk©
 
__NR_symlšk©


	)

2222 #ifdeà
__NR_sync


2223 
	#SYS_sync
 
__NR_sync


	)

2226 #ifdeà
__NR_sync_fe_¿nge


2227 
	#SYS_sync_fe_¿nge
 
__NR_sync_fe_¿nge


	)

2230 #ifdeà
__NR_sync_fe_¿nge2


2231 
	#SYS_sync_fe_¿nge2
 
__NR_sync_fe_¿nge2


	)

2234 #ifdeà
__NR_syncfs


2235 
	#SYS_syncfs
 
__NR_syncfs


	)

2238 #ifdeà
__NR_sys_debug_£tcÚ‹xt


2239 
	#SYS_sys_debug_£tcÚ‹xt
 
__NR_sys_debug_£tcÚ‹xt


	)

2242 #ifdeà
__NR_sys_•Şl_ü—‹


2243 
	#SYS_sys_•Şl_ü—‹
 
__NR_sys_•Şl_ü—‹


	)

2246 #ifdeà
__NR_sys_•Şl_ùl


2247 
	#SYS_sys_•Şl_ùl
 
__NR_sys_•Şl_ùl


	)

2250 #ifdeà
__NR_sys_•Şl_wa™


2251 
	#SYS_sys_•Şl_wa™
 
__NR_sys_•Şl_wa™


	)

2254 #ifdeà
__NR_sysÿÎ


2255 
	#SYS_sysÿÎ
 
__NR_sysÿÎ


	)

2258 #ifdeà
__NR_sysfs


2259 
	#SYS_sysfs
 
__NR_sysfs


	)

2262 #ifdeà
__NR_sysšfo


2263 
	#SYS_sysšfo
 
__NR_sysšfo


	)

2266 #ifdeà
__NR_sy¦og


2267 
	#SYS_sy¦og
 
__NR_sy¦og


	)

2270 #ifdeà
__NR_sysms


2271 
	#SYS_sysms
 
__NR_sysms


	)

2274 #ifdeà
__NR_‹e


2275 
	#SYS_‹e
 
__NR_‹e


	)

2278 #ifdeà
__NR_tgkl


2279 
	#SYS_tgkl
 
__NR_tgkl


	)

2282 #ifdeà
__NR_time


2283 
	#SYS_time
 
__NR_time


	)

2286 #ifdeà
__NR_tim”_ü—‹


2287 
	#SYS_tim”_ü—‹
 
__NR_tim”_ü—‹


	)

2290 #ifdeà
__NR_tim”_d–‘e


2291 
	#SYS_tim”_d–‘e
 
__NR_tim”_d–‘e


	)

2294 #ifdeà
__NR_tim”_g‘ov”run


2295 
	#SYS_tim”_g‘ov”run
 
__NR_tim”_g‘ov”run


	)

2298 #ifdeà
__NR_tim”_g‘time


2299 
	#SYS_tim”_g‘time
 
__NR_tim”_g‘time


	)

2302 #ifdeà
__NR_tim”_g‘time64


2303 
	#SYS_tim”_g‘time64
 
__NR_tim”_g‘time64


	)

2306 #ifdeà
__NR_tim”_£‰ime


2307 
	#SYS_tim”_£‰ime
 
__NR_tim”_£‰ime


	)

2310 #ifdeà
__NR_tim”_£‰ime64


2311 
	#SYS_tim”_£‰ime64
 
__NR_tim”_£‰ime64


	)

2314 #ifdeà
__NR_tim”fd


2315 
	#SYS_tim”fd
 
__NR_tim”fd


	)

2318 #ifdeà
__NR_tim”fd_ü—‹


2319 
	#SYS_tim”fd_ü—‹
 
__NR_tim”fd_ü—‹


	)

2322 #ifdeà
__NR_tim”fd_g‘time


2323 
	#SYS_tim”fd_g‘time
 
__NR_tim”fd_g‘time


	)

2326 #ifdeà
__NR_tim”fd_g‘time64


2327 
	#SYS_tim”fd_g‘time64
 
__NR_tim”fd_g‘time64


	)

2330 #ifdeà
__NR_tim”fd_£‰ime


2331 
	#SYS_tim”fd_£‰ime
 
__NR_tim”fd_£‰ime


	)

2334 #ifdeà
__NR_tim”fd_£‰ime64


2335 
	#SYS_tim”fd_£‰ime64
 
__NR_tim”fd_£‰ime64


	)

2338 #ifdeà
__NR_times


2339 
	#SYS_times
 
__NR_times


	)

2342 #ifdeà
__NR_tkl


2343 
	#SYS_tkl
 
__NR_tkl


	)

2346 #ifdeà
__NR_Œunÿ‹


2347 
	#SYS_Œunÿ‹
 
__NR_Œunÿ‹


	)

2350 #ifdeà
__NR_Œunÿ‹64


2351 
	#SYS_Œunÿ‹64
 
__NR_Œunÿ‹64


	)

2354 #ifdeà
__NR_tuxÿÎ


2355 
	#SYS_tuxÿÎ
 
__NR_tuxÿÎ


	)

2358 #ifdeà
__NR_udá¿p


2359 
	#SYS_udá¿p
 
__NR_udá¿p


	)

2362 #ifdeà
__NR_ug‘¾im™


2363 
	#SYS_ug‘¾im™
 
__NR_ug‘¾im™


	)

2366 #ifdeà
__NR_ulim™


2367 
	#SYS_ulim™
 
__NR_ulim™


	)

2370 #ifdeà
__NR_umask


2371 
	#SYS_umask
 
__NR_umask


	)

2374 #ifdeà
__NR_umouÁ


2375 
	#SYS_umouÁ
 
__NR_umouÁ


	)

2378 #ifdeà
__NR_umouÁ2


2379 
	#SYS_umouÁ2
 
__NR_umouÁ2


	)

2382 #ifdeà
__NR_uÇme


2383 
	#SYS_uÇme
 
__NR_uÇme


	)

2386 #ifdeà
__NR_uÆšk


2387 
	#SYS_uÆšk
 
__NR_uÆšk


	)

2390 #ifdeà
__NR_uÆšk©


2391 
	#SYS_uÆšk©
 
__NR_uÆšk©


	)

2394 #ifdeà
__NR_unsh¬e


2395 
	#SYS_unsh¬e
 
__NR_unsh¬e


	)

2398 #ifdeà
__NR_u£lib


2399 
	#SYS_u£lib
 
__NR_u£lib


	)

2402 #ifdeà
__NR_u£rçuÉfd


2403 
	#SYS_u£rçuÉfd
 
__NR_u£rçuÉfd


	)

2406 #ifdeà
__NR_u¤26


2407 
	#SYS_u¤26
 
__NR_u¤26


	)

2410 #ifdeà
__NR_u¤32


2411 
	#SYS_u¤32
 
__NR_u¤32


	)

2414 #ifdeà
__NR_u¡©


2415 
	#SYS_u¡©
 
__NR_u¡©


	)

2418 #ifdeà
__NR_utime


2419 
	#SYS_utime
 
__NR_utime


	)

2422 #ifdeà
__NR_utim’§t


2423 
	#SYS_utim’§t
 
__NR_utim’§t


	)

2426 #ifdeà
__NR_utim’§t_time64


2427 
	#SYS_utim’§t_time64
 
__NR_utim’§t_time64


	)

2430 #ifdeà
__NR_utimes


2431 
	#SYS_utimes
 
__NR_utimes


	)

2434 #ifdeà
__NR_uŒ­_š¡®l


2435 
	#SYS_uŒ­_š¡®l
 
__NR_uŒ­_š¡®l


	)

2438 #ifdeà
__NR_vfÜk


2439 
	#SYS_vfÜk
 
__NR_vfÜk


	)

2442 #ifdeà
__NR_vhªgup


2443 
	#SYS_vhªgup
 
__NR_vhªgup


	)

2446 #ifdeà
__NR_vm86


2447 
	#SYS_vm86
 
__NR_vm86


	)

2450 #ifdeà
__NR_vm86Şd


2451 
	#SYS_vm86Şd
 
__NR_vm86Şd


	)

2454 #ifdeà
__NR_vm¥liû


2455 
	#SYS_vm¥liû
 
__NR_vm¥liû


	)

2458 #ifdeà
__NR_v£rv”


2459 
	#SYS_v£rv”
 
__NR_v£rv”


	)

2462 #ifdeà
__NR_wa™4


2463 
	#SYS_wa™4
 
__NR_wa™4


	)

2466 #ifdeà
__NR_wa™id


2467 
	#SYS_wa™id
 
__NR_wa™id


	)

2470 #ifdeà
__NR_wa™pid


2471 
	#SYS_wa™pid
 
__NR_wa™pid


	)

2474 #ifdeà
__NR_wr™e


2475 
	#SYS_wr™e
 
__NR_wr™e


	)

2478 #ifdeà
__NR_wr™ev


2479 
	#SYS_wr™ev
 
__NR_wr™ev


	)

	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

28 
	~<b™s/timesize.h
>

31 
	t__u_ch¬
;

32 
	t__u_shÜt
;

33 
	t__u_št
;

34 
	t__u_lÚg
;

37 sigÃd 
	t__št8_t
;

38 
	t__ušt8_t
;

39 sigÃd 
	t__št16_t
;

40 
	t__ušt16_t
;

41 sigÃd 
	t__št32_t
;

42 
	t__ušt32_t
;

43 #ià
__WORDSIZE
 == 64

44 sigÃd 
	t__št64_t
;

45 
	t__ušt64_t
;

47 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

48 
__ex‹nsiÚ__
 
	t__ušt64_t
;

52 
__št8_t
 
	t__št_Ëa¡8_t
;

53 
__ušt8_t
 
	t__ušt_Ëa¡8_t
;

54 
__št16_t
 
	t__št_Ëa¡16_t
;

55 
__ušt16_t
 
	t__ušt_Ëa¡16_t
;

56 
__št32_t
 
	t__št_Ëa¡32_t
;

57 
__ušt32_t
 
	t__ušt_Ëa¡32_t
;

58 
__št64_t
 
	t__št_Ëa¡64_t
;

59 
__ušt64_t
 
	t__ušt_Ëa¡64_t
;

62 #ià
__WORDSIZE
 == 64

63 
	t__quad_t
;

64 
	t__u_quad_t
;

66 
__ex‹nsiÚ__
 
	t__quad_t
;

67 
__ex‹nsiÚ__
 
	t__u_quad_t
;

71 #ià
__WORDSIZE
 == 64

72 
	t__štmax_t
;

73 
	t__uštmax_t
;

75 
__ex‹nsiÚ__
 
	t__štmax_t
;

76 
__ex‹nsiÚ__
 
	t__uštmax_t
;

109 
	#__S16_TYPE
 

	)

110 
	#__U16_TYPE
 

	)

111 
	#__S32_TYPE
 

	)

112 
	#__U32_TYPE
 

	)

113 
	#__SLONGWORD_TYPE
 

	)

114 
	#__ULONGWORD_TYPE
 

	)

115 #ià
__WORDSIZE
 == 32

116 
	#__SQUAD_TYPE
 
__št64_t


	)

117 
	#__UQUAD_TYPE
 
__ušt64_t


	)

118 
	#__SWORD_TYPE
 

	)

119 
	#__UWORD_TYPE
 

	)

120 
	#__SLONG32_TYPE
 

	)

121 
	#__ULONG32_TYPE
 

	)

122 
	#__S64_TYPE
 
__št64_t


	)

123 
	#__U64_TYPE
 
__ušt64_t


	)

126 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

127 #–ià
__WORDSIZE
 == 64

128 
	t__SQUAD_TYPE
 

	)

129 
	t__UQUAD_TYPE
 

	)

130 
	t__SWORD_TYPE
 

	)

131 
	t__UWORD_TYPE
 

	)

132 
	t__SLONG32_TYPE
 

	)

133 
	t__ULONG32_TYPE
 

	)

134 
	t__S64_TYPE
 

	)

135 
	t__U64_TYPE
 

	)

137 
	t__STD_TYPE
 

	)

141 
	~<b™s/ty³sizes.h
>

142 
	~<b™s/time64.h
>

145 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

146 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

147 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

148 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

149 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

150 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

151 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

152 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

153 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

154 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

155 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

156 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

157 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

158 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

159 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

160 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

161 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

162 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

164 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

165 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

168 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

171 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

174 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

179 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

180 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

183 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

184 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

187 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

188 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

191 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

193 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

196 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

198 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

202 
__off64_t
 
	t__loff_t
;

203 *
	t__ÿddr_t
;

206 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

209 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

214 
	t__sig_©omic_t
;

219 #ià
__TIMESIZE
 =ğ64 && 
defšed
 
__LIBC


220 
	#__time64_t
 
__time_t


	)

221 #–ià
__TIMESIZE
 != 64

222 
__STD_TYPE
 
__TIME64_T_TYPE
 
	g__time64_t
;

225 #undeà
__STD_TYPE


	@/usr/include/bits/types/FILE.h

1 #iâdeà
__FILE_defšed


2 
	#__FILE_defšed
 1

	)

4 
	g_IO_FILE
;

7 
_IO_FILE
 
	tFILE
;

	@/usr/include/bits/types/__FILE.h

1 #iâdeà
____FILE_defšed


2 
	#____FILE_defšed
 1

	)

4 
	g_IO_FILE
;

5 
_IO_FILE
 
	t__FILE
;

	@/usr/include/bits/types/__fpos64_t.h

1 #iâdeà
_____åos64_t_defšed


2 
	#_____åos64_t_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

5 
	~<b™s/ty³s/__mb¡©e_t.h
>

10 
	s_G_åos64_t


12 
__off64_t
 
	m__pos
;

13 
__mb¡©e_t
 
	m__¡©e
;

14 } 
	t__åos64_t
;

	@/usr/include/bits/types/__fpos_t.h

1 #iâdeà
_____åos_t_defšed


2 
	#_____åos_t_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

5 
	~<b™s/ty³s/__mb¡©e_t.h
>

10 
	s_G_åos_t


12 
__off_t
 
	m__pos
;

13 
__mb¡©e_t
 
	m__¡©e
;

14 } 
	t__åos_t
;

	@/usr/include/bits/types/clock_t.h

1 #iâdeà
__şock_t_defšed


2 
	#__şock_t_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

7 
__şock_t
 
	tşock_t
;

	@/usr/include/bits/types/clockid_t.h

1 #iâdeà
__şockid_t_defšed


2 
	#__şockid_t_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

7 
__şockid_t
 
	tşockid_t
;

	@/usr/include/bits/types/cookie_io_functions_t.h

18 #iâdeà
__cook›_io_funùiÚs_t_defšed


19 
	#__cook›_io_funùiÚs_t_defšed
 1

	)

21 
	~<b™s/ty³s.h
>

27 
__ssize_t
 
	tcook›_»ad_funùiÚ_t
 (*
	t__cook›
, *
	t__buf
,

28 
	tsize_t
 
	t__nby‹s
);

36 
__ssize_t
 
	tcook›_wr™e_funùiÚ_t
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

37 
	tsize_t
 
	t__nby‹s
);

45 
	tcook›_£ek_funùiÚ_t
 (*
	t__cook›
, 
	t__off64_t
 *
	t__pos
, 
	t__w
);

48 
	tcook›_şo£_funùiÚ_t
 (*
	t__cook›
);

55 
	s_IO_cook›_io_funùiÚs_t


57 
cook›_»ad_funùiÚ_t
 *
	m»ad
;

58 
cook›_wr™e_funùiÚ_t
 *
	mwr™e
;

59 
cook›_£ek_funùiÚ_t
 *
	m£ek
;

60 
cook›_şo£_funùiÚ_t
 *
	mşo£
;

61 } 
	tcook›_io_funùiÚs_t
;

	@/usr/include/bits/types/locale_t.h

19 #iâdeà
_BITS_TYPES_LOCALE_T_H


20 
	#_BITS_TYPES_LOCALE_T_H
 1

	)

22 
	~<b™s/ty³s/__loÿË_t.h
>

24 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/bits/types/struct_FILE.h

18 #iâdeà
__¡ruù_FILE_defšed


19 
	#__¡ruù_FILE_defšed
 1

	)

25 #ià
defšed
 
_IO_USE_OLD_IO_FILE
 && !defšed 
_LIBC


29 #ià
defšed
 
_IO_lock_t_defšed
 && !defšed 
_LIBC


33 
	~<b™s/ty³s.h
>

35 
	g_IO_FILE
;

36 
	g_IO_m¬k”
;

37 
	g_IO_codecvt
;

38 
	g_IO_wide_d©a
;

42 #iâdeà
_IO_lock_t_defšed


43 
	t_IO_lock_t
;

49 
	s_IO_FILE


51 
	m_æags
;

54 *
	m_IO_»ad_±r
;

55 *
	m_IO_»ad_’d
;

56 *
	m_IO_»ad_ba£
;

57 *
	m_IO_wr™e_ba£
;

58 *
	m_IO_wr™e_±r
;

59 *
	m_IO_wr™e_’d
;

60 *
	m_IO_buf_ba£
;

61 *
	m_IO_buf_’d
;

64 *
	m_IO_§ve_ba£
;

65 *
	m_IO_backup_ba£
;

66 *
	m_IO_§ve_’d
;

68 
_IO_m¬k”
 *
	m_m¬k”s
;

70 
_IO_FILE
 *
	m_chaš
;

72 
	m_f’o
;

73 
	m_æags2
;

74 
__off_t
 
	m_Şd_off£t
;

77 
	m_cur_cŞumn
;

78 sigÃd 
	m_vbË_off£t
;

79 
	m_shÜtbuf
[1];

81 
_IO_lock_t
 *
	m_lock
;

82 #ifdeà
_IO_USE_OLD_IO_FILE


85 
	s_IO_FILE_com¶‘e


87 
_IO_FILE
 
	m_fe
;

89 
__off64_t
 
	m_off£t
;

91 
_IO_codecvt
 *
	m_codecvt
;

92 
_IO_wide_d©a
 *
	m_wide_d©a
;

93 
_IO_FILE
 *
	m_ä“»s_li¡
;

94 *
	m_ä“»s_buf
;

95 
size_t
 
	m__·d5
;

96 
	m_mode
;

98 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

102 
	#__g‘c_uÆocked_body
(
_å
) \

103 (
	`__glibc_uÆik–y
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
) \

104 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

106 
	#__putc_uÆocked_body
(
_ch
, 
_å
) \

107 (
	`__glibc_uÆik–y
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
) \

108 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

109 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

111 
	#_IO_EOF_SEEN
 0x0010

	)

112 
	#__ãof_uÆocked_body
(
_å
è(((_å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

114 
	#_IO_ERR_SEEN
 0x0020

	)

115 
	#__ã¼Ü_uÆocked_body
(
_å
è(((_å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

117 
	#_IO_USER_LOCK
 0x8000

	)

	@/usr/include/bits/types/struct_timespec.h

2 #iâdeà
_STRUCT_TIMESPEC


3 
	#_STRUCT_TIMESPEC
 1

	)

5 
	~<b™s/ty³s.h
>

6 
	~<b™s/’dŸn.h
>

10 
	stime¥ec


12 
__time_t
 
	mtv_£c
;

13 #ià
__WORDSIZE
 == 64 \

14 || (
defšed
 
	m__SYSCALL_WORDSIZE
 && __SYSCALL_WORDSIZE == 64) \

15 || 
__TIMESIZE
 == 32

16 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

18 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


20 
	mtv_n£c
;

22 
	mtv_n£c
;

	@/usr/include/bits/types/time_t.h

1 #iâdeà
__time_t_defšed


2 
	#__time_t_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

7 
__time_t
 
	ttime_t
;

	@/usr/include/bits/types/timer_t.h

1 #iâdeà
__tim”_t_defšed


2 
	#__tim”_t_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

7 
__tim”_t
 
	ttim”_t
;

	@/usr/include/bits/uintn-identity.h

19 #ià!
defšed
 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_UINTN_IDENTITY_H


24 
	#_BITS_UINTN_IDENTITY_H
 1

	)

26 
	~<b™s/ty³s.h
>

32 
__šlše
 
__ušt16_t


33 
	$__ušt16_id’t™y
 (
__ušt16_t
 
__x
)

35  
__x
;

36 
	}
}

38 
__šlše
 
__ušt32_t


39 
	$__ušt32_id’t™y
 (
__ušt32_t
 
__x
)

41  
__x
;

42 
	}
}

44 
__šlše
 
__ušt64_t


45 
	$__ušt64_id’t™y
 (
__ušt64_t
 
__x
)

47  
__x
;

48 
	}
}

	@/usr/include/bits/unistd.h

19 #iâdeà
_UNISTD_H


23 
ssize_t
 
	$__»ad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

24 
size_t
 
__buæ’
è
__wur
;

25 
ssize_t
 
	`__REDIRECT
 (
__»ad_®Ÿs
, (
__fd
, *
__buf
,

26 
size_t
 
__nby‹s
), 
»ad
è
__wur
;

27 
ssize_t
 
	`__REDIRECT
 (
__»ad_chk_w¬n
,

28 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

29 
size_t
 
__buæ’
), 
__»ad_chk
)

30 
__wur
 
	`__w¬Ç‰r
 ("read called with bigger†engthhan size of "

33 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


34 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
)

36 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

38 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

39  
	`__»ad_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

41 ià(
__nby‹s
 > 
	`__bos0
 (
__buf
))

42  
	`__»ad_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

44  
	`__»ad_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
);

45 
	}
}

47 #ifdeà
__USE_UNIX98


48 
ssize_t
 
	$__´—d_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

49 
__off_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

50 
ssize_t
 
	$__´—d64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

51 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

52 
ssize_t
 
	`__REDIRECT
 (
__´—d_®Ÿs
,

53 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

54 
__off_t
 
__off£t
), 
´—d
è
__wur
;

55 
ssize_t
 
	`__REDIRECT
 (
__´—d64_®Ÿs
,

56 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

57 
__off64_t
 
__off£t
), 
´—d64
è
__wur
;

58 
ssize_t
 
	`__REDIRECT
 (
__´—d_chk_w¬n
,

59 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

60 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__´—d_chk
)

61 
__wur
 
	`__w¬Ç‰r
 ("pread called with bigger†engthhan size of "

63 
ssize_t
 
	`__REDIRECT
 (
__´—d64_chk_w¬n
,

64 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

65 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

66 
__´—d64_chk
)

67 
__wur
 
	`__w¬Ç‰r
 ("pread64 called with bigger†engthhan size of "

70 #iâdeà
__USE_FILE_OFFSET64


71 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


72 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off_t
 
__off£t
)

74 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

76 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

77  
	`__´—d_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

79 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

80  
	`__´—d_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

81 
	`__bos0
 (
__buf
));

83  
	`__´—d_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

84 
	}
}

86 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


87 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

89 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

91 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

92  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

94 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

95  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

96 
	`__bos0
 (
__buf
));

99  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

100 
	}
}

103 #ifdeà
__USE_LARGEFILE64


104 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


105 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

107 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

109 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

110  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

112 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

113  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

114 
	`__bos0
 (
__buf
));

117  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

118 
	}
}

122 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


123 
ssize_t
 
	$__»adlšk_chk
 (cÚ¡ *
__»¡riù
 
__·th
,

124 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

125 
size_t
 
__buæ’
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

127 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_®Ÿs
,

128 (cÚ¡ *
__»¡riù
 
__·th
,

129 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
), 
»adlšk
)

130 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

131 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_chk_w¬n
,

132 (cÚ¡ *
__»¡riù
 
__·th
,

133 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

134 
size_t
 
__buæ’
), 
__»adlšk_chk
)

135 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
	`__w¬Ç‰r
 ("readlink called with bigger†ength "

138 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
ssize_t


139 
	`__NTH
 (
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
, *__»¡riù 
__buf
,

140 
size_t
 
__Ën
))

142 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

144 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

145  
	`__»adlšk_chk
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

147 iàĞ
__Ën
 > 
	`__bos
 (
__buf
))

148  
	`__»adlšk_chk_w¬n
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

150  
	`__»adlšk_®Ÿs
 (
__·th
, 
__buf
, 
__Ën
);

151 
	}
}

154 #ifdeà
__USE_ATFILE


155 
ssize_t
 
	$__»adlšk©_chk
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

156 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

157 
size_t
 
__buæ’
)

158 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

159 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_®Ÿs
,

160 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

161 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
),

162 
»adlšk©
)

163 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

164 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_chk_w¬n
,

165 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

166 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

167 
size_t
 
__buæ’
), 
__»adlšk©_chk
)

168 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
	`__w¬Ç‰r
 ("readlinkat called with bigger "

172 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
ssize_t


173 
	`__NTH
 (
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

174 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
))

176 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

178 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

179  
	`__»adlšk©_chk
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

181 ià(
__Ën
 > 
	`__bos
 (
__buf
))

182  
	`__»adlšk©_chk_w¬n
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
,

183 
	`__bos
 (
__buf
));

185  
	`__»adlšk©_®Ÿs
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
);

186 
	}
}

189 *
	$__g‘cwd_chk
 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
)

190 
__THROW
 
__wur
;

191 *
	`__REDIRECT_NTH
 (
__g‘cwd_®Ÿs
,

192 (*
__buf
, 
size_t
 
__size
), 
g‘cwd
è
__wur
;

193 *
	`__REDIRECT_NTH
 (
__g‘cwd_chk_w¬n
,

194 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
),

195 
__g‘cwd_chk
)

196 
__wur
 
	`__w¬Ç‰r
 ("getcwd caller with bigger†engthhan size of "

199 
__fÜtify_funùiÚ
 
__wur
 *

200 
	`__NTH
 (
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
))

202 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

204 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
))

205  
	`__g‘cwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

207 ià(
__size
 > 
	`__bos
 (
__buf
))

208  
	`__g‘cwd_chk_w¬n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

210  
	`__g‘cwd_®Ÿs
 (
__buf
, 
__size
);

211 
	}
}

213 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


214 *
	$__g‘wd_chk
 (*
__buf
, 
size_t
 
buæ’
)

215 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

216 *
	`__REDIRECT_NTH
 (
__g‘wd_w¬n
, (*
__buf
), 
g‘wd
)

217 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("please use getcwd instead,‡s getwd "

220 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
 *

221 
	`__NTH
 (
	$g‘wd
 (*
__buf
))

223 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

224  
	`__g‘wd_chk
 (
__buf
, 
	`__bos
 (__buf));

225  
	`__g‘wd_w¬n
 (
__buf
);

226 
	}
}

229 
size_t
 
	$__cÚf¡r_chk
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

230 
size_t
 
__buæ’
è
__THROW
;

231 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_®Ÿs
, (
__Çme
, *
__buf
,

232 
size_t
 
__Ën
), 
cÚf¡r
);

233 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_chk_w¬n
,

234 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

235 
size_t
 
__buæ’
), 
__cÚf¡r_chk
)

236 
	`__w¬Ç‰r
 ("confstr called with bigger†engthhan size of destination "

239 
__fÜtify_funùiÚ
 
size_t


240 
	`__NTH
 (
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
))

242 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

244 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

245  
	`__cÚf¡r_chk
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

247 ià(
	`__bos
 (
__buf
è< 
__Ën
)

248  
	`__cÚf¡r_chk_w¬n
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

250  
	`__cÚf¡r_®Ÿs
 (
__Çme
, 
__buf
, 
__Ën
);

251 
	}
}

254 
	$__g‘groups_chk
 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
)

255 
__THROW
 
__wur
;

256 
	`__REDIRECT_NTH
 (
__g‘groups_®Ÿs
, (
__size
, 
__gid_t
 
__li¡
[]),

257 
g‘groups
è
__wur
;

258 
	`__REDIRECT_NTH
 (
__g‘groups_chk_w¬n
,

259 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
),

260 
__g‘groups_chk
)

261 
__wur
 
	`__w¬Ç‰r
 ("getgroups called with bigger group counthan what "

264 
__fÜtify_funùiÚ
 

265 
	`__NTH
 (
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]))

267 ià(
	`__bos
 (
__li¡
è!ğ(
size_t
) -1)

269 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
) || __size < 0)

270  
	`__g‘groups_chk
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

272 ià(
__size
 *  (
__gid_t
è> 
	`__bos
 (
__li¡
))

273  
	`__g‘groups_chk_w¬n
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

275  
	`__g‘groups_®Ÿs
 (
__size
, 
__li¡
);

276 
	}
}

279 
	$__‰yÇme_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

280 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

281 
	`__REDIRECT_NTH
 (
__‰yÇme_r_®Ÿs
, (
__fd
, *
__buf
,

282 
size_t
 
__buæ’
), 
‰yÇme_r
)

283 
	`__nÚnuÎ
 ((2));

284 
	`__REDIRECT_NTH
 (
__‰yÇme_r_chk_w¬n
,

285 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

286 
size_t
 
__Ä—l
), 
__‰yÇme_r_chk
)

287 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ttyname_r called with bigger buflenhan "

290 
__fÜtify_funùiÚ
 

291 
	`__NTH
 (
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

293 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

295 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

296  
	`__‰yÇme_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

298 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

299  
	`__‰yÇme_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

301  
	`__‰yÇme_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

302 
	}
}

305 #ifdeà
__USE_POSIX199506


306 
	$__g‘logš_r_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

307 
	`__nÚnuÎ
 ((1));

308 
	`__REDIRECT
 (
__g‘logš_r_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

309 
g‘logš_r
è
	`__nÚnuÎ
 ((1));

310 
	`__REDIRECT
 (
__g‘logš_r_chk_w¬n
,

311 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

312 
__g‘logš_r_chk
)

313 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("getlogin_r called with bigger buflenhan "

316 
__fÜtify_funùiÚ
 

317 
	$g‘logš_r
 (*
__buf
, 
size_t
 
__buæ’
)

319 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

321 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

322  
	`__g‘logš_r_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

324 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

325  
	`__g‘logš_r_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

327  
	`__g‘logš_r_®Ÿs
 (
__buf
, 
__buæ’
);

328 
	}
}

332 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_UNIX98


333 
	$__g‘ho¡Çme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

334 
__THROW
 
	`__nÚnuÎ
 ((1));

335 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

336 
g‘ho¡Çme
è
	`__nÚnuÎ
 ((1));

337 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_chk_w¬n
,

338 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

339 
__g‘ho¡Çme_chk
)

340 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("gethostname called with bigger buflenhan "

343 
__fÜtify_funùiÚ
 

344 
	`__NTH
 (
	$g‘ho¡Çme
 (*
__buf
, 
size_t
 
__buæ’
))

346 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

348 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

349  
	`__g‘ho¡Çme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

351 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

352  
	`__g‘ho¡Çme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

354  
	`__g‘ho¡Çme_®Ÿs
 (
__buf
, 
__buæ’
);

355 
	}
}

359 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

360 
	$__g‘domašÇme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

361 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

362 
	`__REDIRECT_NTH
 (
__g‘domašÇme_®Ÿs
, (*
__buf
,

363 
size_t
 
__buæ’
),

364 
g‘domašÇme
è
	`__nÚnuÎ
 ((1)è
__wur
;

365 
	`__REDIRECT_NTH
 (
__g‘domašÇme_chk_w¬n
,

366 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

367 
__g‘domašÇme_chk
)

368 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("getdomainname called with bigger "

372 
__fÜtify_funùiÚ
 

373 
	`__NTH
 (
	$g‘domašÇme
 (*
__buf
, 
size_t
 
__buæ’
))

375 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

377 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

378  
	`__g‘domašÇme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

380 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

381  
	`__g‘domašÇme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

383  
	`__g‘domašÇme_®Ÿs
 (
__buf
, 
__buæ’
);

384 
	}
}

	@/usr/include/bits/unistd_ext.h

19 #iâdeà
_UNISTD_H


23 #ifdeà
__USE_GNU


34 
__pid_t
 
	$g‘tid
 (è
__THROW
;

	@/usr/include/bits/waitflags.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


30 
	#WSTOPPED
 2

	)

31 
	#WEXITED
 4

	)

32 
	#WCONTINUED
 8

	)

33 
	#WNOWAIT
 0x01000000

	)

36 
	#__WNOTHREAD
 0x20000000

	)

38 
	#__WALL
 0x40000000

	)

39 
	#__WCLONE
 0x80000000

	)

42 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


43 #iâdeà
__ENUM_IDTYPE_T


44 
	#__ENUM_IDTYPE_T
 1

	)

48 #undeà
P_ALL


49 #undeà
P_PID


50 #undeà
P_PGID


54 
	mP_ALL
,

55 
	mP_PID
,

56 
	mP_PGID


57 } 
	tidty³_t
;

	@/usr/include/bits/waitstatus.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

31 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

34 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

37 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

40 
	#__WIFSIGNALED
(
¡©us
) \

41 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

44 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

48 #ifdeà
WCONTINUED


49 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

	@/usr/include/bits/wchar.h

19 #iâdeà
_BITS_WCHAR_H


20 
	#_BITS_WCHAR_H
 1

	)

33 #ifdeà
__WCHAR_MAX__


34 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

35 #–ià
L
'\0' - 1 > 0

36 
	#__WCHAR_MAX
 (0xffffffffu + 
L
'\0')

	)

38 
	#__WCHAR_MAX
 (0x7ffffffà+ 
L
'\0')

	)

41 #ifdeà
__WCHAR_MIN__


42 
	#__WCHAR_MIN
 
__WCHAR_MIN__


	)

43 #–ià
L
'\0' - 1 > 0

44 
	#__WCHAR_MIN
 (
L
'\0' + 0)

	)

46 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

7 
	#__WORDSIZE32_SIZE_ULONG
 0

	)

8 
	#__WORDSIZE32_PTRDIFF_LONG
 0

	)

11 #ifdeà
__x86_64__


12 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

14 
	#__SYSCALL_WORDSIZE
 64

	)

16 
	#__WORDSIZE_TIME64_COMPAT32
 0

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

120 #undeà
__USE_ISOC11


121 #undeà
__USE_ISOC99


122 #undeà
__USE_ISOC95


123 #undeà
__USE_ISOCXX11


124 #undeà
__USE_POSIX


125 #undeà
__USE_POSIX2


126 #undeà
__USE_POSIX199309


127 #undeà
__USE_POSIX199506


128 #undeà
__USE_XOPEN


129 #undeà
__USE_XOPEN_EXTENDED


130 #undeà
__USE_UNIX98


131 #undeà
__USE_XOPEN2K


132 #undeà
__USE_XOPEN2KXSI


133 #undeà
__USE_XOPEN2K8


134 #undeà
__USE_XOPEN2K8XSI


135 #undeà
__USE_LARGEFILE


136 #undeà
__USE_LARGEFILE64


137 #undeà
__USE_FILE_OFFSET64


138 #undeà
__USE_MISC


139 #undeà
__USE_ATFILE


140 #undeà
__USE_GNU


141 #undeà
__USE_FORTIFY_LEVEL


142 #undeà
__KERNEL_STRICT_NAMES


143 #undeà
__GLIBC_USE_ISOC2X


144 #undeà
__GLIBC_USE_DEPRECATED_GETS


145 #undeà
__GLIBC_USE_DEPRECATED_SCANF


149 #iâdeà
_LOOSE_KERNEL_NAMES


150 
	#__KERNEL_STRICT_NAMES


	)

160 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


161 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

162 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

164 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

171 #ià
defšed
 
__şªg_majÜ__
 && defšed 
__şªg_mšÜ__


172 
	#__glibc_şªg_´”eq
(
maj
, 
mš
) \

173 ((
__şªg_majÜ__
 << 16è+ 
__şªg_mšÜ__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

175 
	#__glibc_şªg_´”eq
(
maj
, 
mš
è0

	)

179 
	#__GLIBC_USE
(
F
è
__GLIBC_USE_
 ## 
	)
F

185 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

186 && !
defšed
 
	g_DEFAULT_SOURCE


188 #undeà
_DEFAULT_SOURCE


189 
	#_DEFAULT_SOURCE
 1

	)

193 #ifdeà
_GNU_SOURCE


194 #undeà
_ISOC95_SOURCE


195 
	#_ISOC95_SOURCE
 1

	)

196 #undeà
_ISOC99_SOURCE


197 
	#_ISOC99_SOURCE
 1

	)

198 #undeà
_ISOC11_SOURCE


199 
	#_ISOC11_SOURCE
 1

	)

200 #undeà
_ISOC2X_SOURCE


201 
	#_ISOC2X_SOURCE
 1

	)

202 #undeà
_POSIX_SOURCE


203 
	#_POSIX_SOURCE
 1

	)

204 #undeà
_POSIX_C_SOURCE


205 
	#_POSIX_C_SOURCE
 200809L

	)

206 #undeà
_XOPEN_SOURCE


207 
	#_XOPEN_SOURCE
 700

	)

208 #undeà
_XOPEN_SOURCE_EXTENDED


209 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

210 #undeà
_LARGEFILE64_SOURCE


211 
	#_LARGEFILE64_SOURCE
 1

	)

212 #undeà
_DEFAULT_SOURCE


213 
	#_DEFAULT_SOURCE
 1

	)

214 #undeà
_ATFILE_SOURCE


215 
	#_ATFILE_SOURCE
 1

	)

220 #ià(
defšed
 
_DEFAULT_SOURCE
 \

221 || (!
defšed
 
	g__STRICT_ANSI__
 \

222 && !
defšed
 
	g_ISOC99_SOURCE
 && !defšed 
	g_ISOC11_SOURCE
 \

223 && !
defšed
 
	g_ISOC2X_SOURCE
 \

224 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

225 && !
defšed
 
	g_XOPEN_SOURCE
))

226 #undeà
_DEFAULT_SOURCE


227 
	#_DEFAULT_SOURCE
 1

	)

231 #ià(
defšed
 
_ISOC2X_SOURCE
 \

232 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ > 201710L))

233 
	#__GLIBC_USE_ISOC2X
 1

	)

235 
	#__GLIBC_USE_ISOC2X
 0

	)

239 #ià(
defšed
 
_ISOC11_SOURCE
 || defšed 
_ISOC2X_SOURCE
 \

240 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

241 
	#__USE_ISOC11
 1

	)

245 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

246 || 
defšed
 
_ISOC2X_SOURCE
 \

247 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

248 
	#__USE_ISOC99
 1

	)

252 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

253 || 
defšed
 
_ISOC2X_SOURCE
 \

254 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

255 
	#__USE_ISOC95
 1

	)

258 #ifdeà
__ılu¥lus


260 #ià
__ılu¥lus
 >= 201703L

261 
	#__USE_ISOC11
 1

	)

265 #ià
__ılu¥lus
 >ğ201103L || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__


266 
	#__USE_ISOCXX11
 1

	)

267 
	#__USE_ISOC99
 1

	)

274 #ifdeà
_DEFAULT_SOURCE


275 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


276 
	#__USE_POSIX_IMPLICITLY
 1

	)

278 #undeà
_POSIX_SOURCE


279 
	#_POSIX_SOURCE
 1

	)

280 #undeà
_POSIX_C_SOURCE


281 
	#_POSIX_C_SOURCE
 200809L

	)

284 #ià((!
defšed
 
__STRICT_ANSI__
 \

285 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

286 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

287 
	#_POSIX_SOURCE
 1

	)

288 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

289 
	#_POSIX_C_SOURCE
 2

	)

290 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

291 
	#_POSIX_C_SOURCE
 199506L

	)

292 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

293 
	#_POSIX_C_SOURCE
 200112L

	)

295 
	#_POSIX_C_SOURCE
 200809L

	)

297 
	#__USE_POSIX_IMPLICITLY
 1

	)

306 #ià((!
defšed
 
_POSIX_C_SOURCE
 || (_POSIX_C_SOURCE - 0) < 199506L) \

307 && (
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE
))

308 
	#_POSIX_SOURCE
 1

	)

309 #undeà
_POSIX_C_SOURCE


310 
	#_POSIX_C_SOURCE
 199506L

	)

313 #ià(
defšed
 
_POSIX_SOURCE
 \

314 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

315 || 
defšed
 
_XOPEN_SOURCE
)

316 
	#__USE_POSIX
 1

	)

319 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


320 
	#__USE_POSIX2
 1

	)

323 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

324 
	#__USE_POSIX199309
 1

	)

327 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

328 
	#__USE_POSIX199506
 1

	)

331 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

332 
	#__USE_XOPEN2K
 1

	)

333 #undeà
__USE_ISOC95


334 
	#__USE_ISOC95
 1

	)

335 #undeà
__USE_ISOC99


336 
	#__USE_ISOC99
 1

	)

339 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

340 
	#__USE_XOPEN2K8
 1

	)

341 #undeà
_ATFILE_SOURCE


342 
	#_ATFILE_SOURCE
 1

	)

345 #ifdef 
_XOPEN_SOURCE


346 
	#__USE_XOPEN
 1

	)

347 #ià(
_XOPEN_SOURCE
 - 0) >= 500

348 
	#__USE_XOPEN_EXTENDED
 1

	)

349 
	#__USE_UNIX98
 1

	)

350 #undeà
_LARGEFILE_SOURCE


351 
	#_LARGEFILE_SOURCE
 1

	)

352 #ià(
_XOPEN_SOURCE
 - 0) >= 600

353 #ià(
_XOPEN_SOURCE
 - 0) >= 700

354 
	#__USE_XOPEN2K8
 1

	)

355 
	#__USE_XOPEN2K8XSI
 1

	)

357 
	#__USE_XOPEN2K
 1

	)

358 
	#__USE_XOPEN2KXSI
 1

	)

359 #undeà
__USE_ISOC95


360 
	#__USE_ISOC95
 1

	)

361 #undeà
__USE_ISOC99


362 
	#__USE_ISOC99
 1

	)

365 #ifdeà
_XOPEN_SOURCE_EXTENDED


366 
	#__USE_XOPEN_EXTENDED
 1

	)

371 #ifdeà
_LARGEFILE_SOURCE


372 
	#__USE_LARGEFILE
 1

	)

375 #ifdeà
_LARGEFILE64_SOURCE


376 
	#__USE_LARGEFILE64
 1

	)

379 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

380 
	#__USE_FILE_OFFSET64
 1

	)

383 #ià
defšed
 
_DEFAULT_SOURCE


384 
	#__USE_MISC
 1

	)

387 #ifdef 
_ATFILE_SOURCE


388 
	#__USE_ATFILE
 1

	)

391 #ifdef 
_GNU_SOURCE


392 
	#__USE_GNU
 1

	)

395 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

396 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

397 #ià
_FORTIFY_SOURCE
 > 1

398 
	#__USE_FORTIFY_LEVEL
 2

	)

400 
	#__USE_FORTIFY_LEVEL
 1

	)

403 
	#__USE_FORTIFY_LEVEL
 0

	)

410 #ià
defšed
 
__ılu¥lus
 ? __ılu¥lu >ğ201402L : defšed 
__USE_ISOC11


411 
	#__GLIBC_USE_DEPRECATED_GETS
 0

	)

413 
	#__GLIBC_USE_DEPRECATED_GETS
 1

	)

428 #ià(
defšed
 
__USE_GNU
 \

429 && (
defšed
 
	g__ılu¥lus
 \

430 ? (
	g__ılu¥lus
 < 201103L && !
defšed
 
	g__GXX_EXPERIMENTAL_CXX0X__
) \

431 : (!
defšed
 
__STDC_VERSION__
 || __STDC_VERSION__ < 199901L)))

432 
	#__GLIBC_USE_DEPRECATED_SCANF
 1

	)

434 
	#__GLIBC_USE_DEPRECATED_SCANF
 0

	)

439 
	~<¡dc-´edef.h
>

447 #undeà
__GNU_LIBRARY__


448 
	#__GNU_LIBRARY__
 6

	)

452 
	#__GLIBC__
 2

	)

453 
	#__GLIBC_MINOR__
 31

	)

455 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

456 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

459 #iâdeà
__ASSEMBLER__


460 #iâdeà
_SYS_CDEFS_H


461 
	~<sys/cdefs.h
>

466 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


467 
	#__USE_LARGEFILE
 1

	)

468 
	#__USE_LARGEFILE64
 1

	)

474 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

475 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

476 && 
defšed
 
	g__ex‹º_šlše


477 
	#__USE_EXTERN_INLINES
 1

	)

485 
	~<gnu/¡ubs.h
>

	@/usr/include/gflags/gflags_declare.h

37 #iâdeà
GFLAGS_DECLARE_H_


38 
	#GFLAGS_DECLARE_H_


	)

43 
	#GFLAGS_NAMESPACE
 
googË


	)

53 #iâdeà
GFLAGS_IS_A_DLL


54 
	#GFLAGS_IS_A_DLL
 1

	)

58 #iâdeà
GFLAGS_DLL_DECL


59 #ià
GFLAGS_IS_A_DLL
 && 
defšed
(
_MSC_VER
)

60 
	#GFLAGS_DLL_DECL
 
	`__deş¥ec
(
dÎimpÜt
)

	)

61 #–ià
defšed
(
__GNUC__
) && __GNUC__ >= 4

62 
	#GFLAGS_DLL_DECL
 
	`__©Œibu‹__
((
	`visib™y
("deçuÉ")))

	)

64 
	#GFLAGS_DLL_DECL


	)

69 #iâdeà
GFLAGS_DLL_DECLARE_FLAG


70 #ià
GFLAGS_IS_A_DLL
 && 
defšed
(
_MSC_VER
)

71 
	#GFLAGS_DLL_DECLARE_FLAG
 
	`__deş¥ec
(
dÎimpÜt
)

	)

72 #–ià
defšed
(
__GNUC__
) && __GNUC__ >= 4

73 
	#GFLAGS_DLL_DECLARE_FLAG
 
	`__©Œibu‹__
((
	`visib™y
("deçuÉ")))

	)

75 
	#GFLAGS_DLL_DECLARE_FLAG


	)

81 
	~<¡ršg
>

83 
	~<¡dšt.h
>

85 
	~<sys/ty³s.h
>

87 
	~<š‰y³s.h
>

90 
Çme¥aû
 
	gGFLAGS_NAMESPACE
 {

93 
št32_t
 
	tšt32
;

94 
ušt32_t
 
	tušt32
;

95 
št64_t
 
	tšt64
;

96 
ušt64_t
 
	tušt64
;

98 
št32_t
 
	tšt32
;

99 
u_št32_t
 
	tušt32
;

100 
št64_t
 
	tšt64
;

101 
u_št64_t
 
	tušt64
;

103 
__št32
 
	tšt32
;

104 
	t__št32
 
	tušt32
;

105 
__št64
 
	tšt64
;

106 
	t__št64
 
	tušt64
;

108 #”rÜ 
Do
 
nÙ
 
know
 
how
 
to
 
defše
 
a
 32-
b™
 
š‹g”
 
quªt™y
 
Ú
 
your
 
sy¡em


114 
Çme¥aû
 
	gfLS
 {

120 
	g¡d
::
	t¡ršg
 
	tş¡ršg
;

125 
	#DECLARE_VARIABLE
(
ty³
, 
shÜ‰y³
, 
Çme
) \

127 
Çme¥aû
 
fL
##
shÜ‰y³
 { 
GFLAGS_DLL_DECLARE_FLAG
 
ty³
 
FLAGS_
##
Çme
; } \

128 
usšg
 
fL
##
shÜ‰y³
::
FLAGS_
##
Çme


	)

130 
	#DECLARE_boŞ
(
Çme
) \

131 
	`DECLARE_VARIABLE
(
boŞ
, 
B
, 
Çme
)

	)

133 
	#DECLARE_št32
(
Çme
) \

134 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
št32
, 
I
, 
Çme
)

	)

136 
	#DECLARE_ušt32
(
Çme
) \

137 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
ušt32
, 
U
, 
Çme
)

	)

139 
	#DECLARE_št64
(
Çme
) \

140 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
št64
, 
I64
, 
Çme
)

	)

142 
	#DECLARE_ušt64
(
Çme
) \

143 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
ušt64
, 
U64
, 
Çme
)

	)

145 
	#DECLARE_doubË
(
Çme
) \

146 
	`DECLARE_VARIABLE
(, 
D
, 
Çme
)

	)

148 
	#DECLARE_¡ršg
(
Çme
) \

150 
Çme¥aû
 
fLS
 { \

151 
GFLAGS_DLL_DECLARE_FLAG
 ::
fLS
::
ş¡ršg
& 
FLAGS_
##
Çme
; \

153 
usšg
 
fLS
::
FLAGS_
##
Çme


	)

	@/usr/include/limits.h

22 #iâdeà
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

32 
	#MB_LEN_MAX
 16

	)

37 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

42 #iâdeà
_LIMITS_H


43 
	#_LIMITS_H
 1

	)

45 
	~<b™s/wÜdsize.h
>

54 
	#CHAR_BIT
 8

	)

57 
	#SCHAR_MIN
 (-128)

	)

58 
	#SCHAR_MAX
 127

	)

61 
	#UCHAR_MAX
 255

	)

64 #ifdeà
__CHAR_UNSIGNED__


65 
	#CHAR_MIN
 0

	)

66 
	#CHAR_MAX
 
UCHAR_MAX


	)

68 
	#CHAR_MIN
 
SCHAR_MIN


	)

69 
	#CHAR_MAX
 
SCHAR_MAX


	)

73 
	#SHRT_MIN
 (-32768)

	)

74 
	#SHRT_MAX
 32767

	)

77 
	#USHRT_MAX
 65535

	)

80 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

81 
	#INT_MAX
 2147483647

	)

84 
	#UINT_MAX
 4294967295U

	)

87 #ià
__WORDSIZE
 == 64

88 
	#LONG_MAX
 9223372036854775807L

	)

90 
	#LONG_MAX
 2147483647L

	)

92 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

95 #ià
__WORDSIZE
 == 64

96 
	#ULONG_MAX
 18446744073709551615UL

	)

98 
	#ULONG_MAX
 4294967295UL

	)

101 #ifdeà
__USE_ISOC99


104 
	#LLONG_MAX
 9223372036854775807LL

	)

105 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

108 
	#ULLONG_MAX
 18446744073709551615ULL

	)

122 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


124 #šşude_Ãxˆ<
lim™s
.
h
>

130 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


131 #iâdeà
LLONG_MIN


132 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

134 #iâdeà
LLONG_MAX


135 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

137 #iâdeà
ULLONG_MAX


138 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

145 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

146 #iâdeà
CHAR_WIDTH


147 
	#CHAR_WIDTH
 8

	)

149 #iâdeà
SCHAR_WIDTH


150 
	#SCHAR_WIDTH
 8

	)

152 #iâdeà
UCHAR_WIDTH


153 
	#UCHAR_WIDTH
 8

	)

155 #iâdeà
SHRT_WIDTH


156 
	#SHRT_WIDTH
 16

	)

158 #iâdeà
USHRT_WIDTH


159 
	#USHRT_WIDTH
 16

	)

161 #iâdeà
INT_WIDTH


162 
	#INT_WIDTH
 32

	)

164 #iâdeà
UINT_WIDTH


165 
	#UINT_WIDTH
 32

	)

167 #iâdeà
LONG_WIDTH


168 
	#LONG_WIDTH
 
__WORDSIZE


	)

170 #iâdeà
ULONG_WIDTH


171 
	#ULONG_WIDTH
 
__WORDSIZE


	)

173 #iâdeà
LLONG_WIDTH


174 
	#LLONG_WIDTH
 64

	)

176 #iâdeà
ULLONG_WIDTH


177 
	#ULLONG_WIDTH
 64

	)

181 #ifdef 
__USE_POSIX


183 
	~<b™s/posix1_lim.h
>

186 #ifdef 
__USE_POSIX2


187 
	~<b™s/posix2_lim.h
>

190 #ifdef 
__USE_XOPEN


191 
	~<b™s/xİ’_lim.h
>

	@/usr/include/numacompat1.h

1 
	#numa_£t_š‹¾—ve_mask
(
m
è
	`numa_£t_š‹¾—ve_mask_com·t
(m)

	)

2 
	#numa_g‘_š‹¾—ve_mask
(è
	`numa_g‘_š‹¾—ve_mask_com·t
()

	)

3 
	#numa_bšd
(
m
è
	`numa_bšd_com·t
(m)

	)

4 
	#numa_g‘_membšd
(
m
è
	`numa_g‘_membšd_com·t
(m)

	)

5 
	#numa_£t_membšd
(
m
è
	`numa_£t_membšd_com·t
(m)

	)

6 
	#numa_®loc_š‹¾—ved_sub£t
(
s
,
m
è
	`numa_®loc_š‹¾—ved_sub£t_com·t
(s,m)

	)

7 
	#numa_run_Ú_node_mask
(
m
è
	`numa_run_Ú_node_mask_com·t
(m)

	)

8 
	#numa_g‘_run_node_mask
(è
	`numa_g‘_run_node_mask_com·t
()

	)

9 
	#numa_š‹¾—ve_memÜy
(
¡
,
si
,
m
è
	`numa_š‹¾—ve_memÜy_com·t
(¡,si,m)

	)

10 
	#numa_tÚodemask_memÜy
(
¡
,
si
,
m
è
	`numa_tÚodemask_memÜy_com·t
(¡,si,m)

	)

11 
	#numa_sched_g‘affš™y
(
p
,
l
,
m
è
	`numa_sched_g‘affš™y_com·t
Õ,l,m)

	)

12 
	#numa_sched_£ffš™y
(
p
,
l
,
m
è
	`numa_sched_£ffš™y_com·t
Õ,l,m)

	)

13 
	#numa_node_to_ıus
(
n
,
b
,
bl
è
	`numa_node_to_ıus_com·t
Ò,b,bl)

	)

14 
	#nodemask_z”o
(
m
è
	`nodemask_z”o_com·t
(m)

	)

15 
	#nodemask_£t
(
m
, 
n
è
	`nodemask_£t_com·t
(m,‚)

	)

16 
	#nodemask_şr
(
m
, 
n
è
	`nodemask_şr_com·t
(m,‚)

	)

17 
	#nodemask_is£t
(
m
, 
n
è
	`nodemask_is£t_com·t
(m,‚)

	)

18 
	#nodemask_equ®
(
a
, 
b
è
	`nodemask_equ®_com·t
×, b)

	)

	@/usr/include/strings.h

18 #iâdef 
_STRINGS_H


19 
	#_STRINGS_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	#__Ãed_size_t


	)

23 
	~<¡ddef.h
>

26 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

27 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

30 
	g__BEGIN_DECLS


32 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


34 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

35 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

38 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

39 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

42 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

45 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


48 *
	`šdex
 (*
__s
, 
__c
)

49 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

50 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

51 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

53 #ià
defšed
 
__OPTIMIZE__


54 
__ex‹º_®ways_šlše
 *

55 
	`šdex
 (*
__s
, 
__c
è
__THROW


57  
	`__butš_šdex
 (
__s
, 
__c
);

60 
__ex‹º_®ways_šlše
 const *

61 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


63  
	`__butš_šdex
 (
__s
, 
__c
);

66 
	}
}

68 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

69 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

73 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


76 *
	`ršdex
 (*
__s
, 
__c
)

77 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

79 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ià
defšed
 
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`ršdex
 (*
__s
, 
__c
è
__THROW


85  
	`__butš_ršdex
 (
__s
, 
__c
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


91  
	`__butš_ršdex
 (
__s
, 
__c
);

94 
	}
}

96 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

101 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8
 || defšed 
__USE_XOPEN2K8XSI


104 
	$ffs
 (
__i
è
__THROW
 
__©Œibu‹_cÚ¡__
;

109 #ifdef 
__USE_MISC


110 
	$ff¦
 (
__l
è
__THROW
 
__©Œibu‹_cÚ¡__
;

111 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

112 
__THROW
 
__©Œibu‹_cÚ¡__
;

116 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

117 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

120 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

123 #ifdef 
__USE_XOPEN2K8


125 
	~<b™s/ty³s/loÿË_t.h
>

128 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__loc
)

129 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

133 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

134 
size_t
 
__n
, 
loÿË_t
 
__loc
)

135 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

138 
__END_DECLS


140 #ià
	`__GNUC_PREREQ
 (3,4è&& 
__USE_FORTIFY_LEVEL
 > 0 \

141 && 
defšed
 
__fÜtify_funùiÚ


143 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


144 
	~<b™s/¡ršgs_fÜtif›d.h
>

	@/usr/include/sys/select.h

21 #iâdeà
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	~<b™s/£Ëù.h
>

33 
	~<b™s/ty³s/sig£t_t.h
>

36 
	~<b™s/ty³s/time_t.h
>

37 
	~<b™s/ty³s/¡ruù_timev®.h
>

38 #ifdeà
__USE_XOPEN2K


39 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

42 #iâdeà
__su£cÚds_t_defšed


43 
__su£cÚds_t
 
	tsu£cÚds_t
;

44 
	#__su£cÚds_t_defšed


	)

49 
	t__fd_mask
;

52 #undeà
__NFDBITS


54 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

55 
	#__FD_ELT
(
d
è((dè/ 
__NFDBITS
)

	)

56 
	#__FD_MASK
(
d
è((
__fd_mask
è(1UL << ((dè% 
__NFDBITS
)))

	)

63 #ifdeà
__USE_XOPEN


64 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

65 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

67 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

68 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

70 } 
	tfd_£t
;

73 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

75 #ifdeà
__USE_MISC


77 
__fd_mask
 
	tfd_mask
;

80 
	#NFDBITS
 
__NFDBITS


	)

85 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

86 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

87 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

88 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

91 
__BEGIN_DECLS


101 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

102 
fd_£t
 *
__»¡riù
 
__wr™efds
,

103 
fd_£t
 *
__»¡riù
 
__exû±fds
,

104 
timev®
 *
__»¡riù
 
__timeout
);

106 #ifdeà
__USE_XOPEN2K


113 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

114 
fd_£t
 *
__»¡riù
 
__wr™efds
,

115 
fd_£t
 *
__»¡riù
 
__exû±fds
,

116 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

117 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

122 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__GNUC__


123 
	~<b™s/£Ëù2.h
>

126 
	g__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


23 
	#_TIME_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 
	#__Ãed_NULL


	)

29 
	~<¡ddef.h
>

33 
	~<b™s/time.h
>

37 
	~<b™s/ty³s/şock_t.h
>

38 
	~<b™s/ty³s/time_t.h
>

39 
	~<b™s/ty³s/¡ruù_tm.h
>

41 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_ISOC11


42 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

45 #ifdeà
__USE_POSIX199309


46 
	~<b™s/ty³s/şockid_t.h
>

47 
	~<b™s/ty³s/tim”_t.h
>

48 
	~<b™s/ty³s/¡ruù_™im”¥ec.h
>

49 
	gsigev’t
;

52 #ifdeà
__USE_XOPEN2K


53 #iâdeà
__pid_t_defšed


54 
__pid_t
 
	tpid_t
;

55 
	#__pid_t_defšed


	)

59 #ifdeà
__USE_XOPEN2K8


60 
	~<b™s/ty³s/loÿË_t.h
>

63 #ifdeà
__USE_ISOC11


65 
	#TIME_UTC
 1

	)

68 
__BEGIN_DECLS


72 
şock_t
 
	$şock
 (è
__THROW
;

75 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

78 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

79 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

82 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

88 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

89 cÚ¡ *
__»¡riù
 
__fÜm©
,

90 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

92 #ifdeà
__USE_XOPEN


95 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

96 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

97 
__THROW
;

100 #ifdeà
__USE_XOPEN2K8


104 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

105 cÚ¡ *
__»¡riù
 
__fÜm©
,

106 cÚ¡ 
tm
 *
__»¡riù
 
__
,

107 
loÿË_t
 
__loc
è
__THROW
;

110 #ifdeà
__USE_GNU


111 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

112 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

113 
loÿË_t
 
__loc
è
__THROW
;

119 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

123 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

125 #ià
defšed
 
__USE_POSIX
 || 
	`__GLIBC_USE
 (
ISOC2X
)

128 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

129 
tm
 *
__»¡riù
 
__
è
__THROW
;

133 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

134 
tm
 *
__»¡riù
 
__
è
__THROW
;

139 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

142 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

144 #ià
defšed
 
__USE_POSIX
 || 
	`__GLIBC_USE
 (
ISOC2X
)

149 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

150 *
__»¡riù
 
__buf
è
__THROW
;

153 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

154 *
__»¡riù
 
__buf
è
__THROW
;

159 *
__tzÇme
[2];

160 
__daylight
;

161 
__timezÚe
;

164 #ifdef 
__USE_POSIX


166 *
tzÇme
[2];

170 
	$tz£t
 (è
__THROW
;

173 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


174 
daylight
;

175 
timezÚe
;

181 
	#__i¦—p
(
y—r
) \

182 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

185 #ifdeà
__USE_MISC


190 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

193 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

196 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

200 #ifdeà
__USE_POSIX199309


205 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

206 
time¥ec
 *
__»maššg
);

210 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

213 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

216 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

217 
__THROW
;

219 #ifdeà
__USE_XOPEN2K


224 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

225 cÚ¡ 
time¥ec
 *
__»q
,

226 
time¥ec
 *
__»m
);

229 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

234 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

235 
sigev’t
 *
__»¡riù
 
__evp
,

236 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

239 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

242 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

243 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

244 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

247 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

248 
__THROW
;

251 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

255 #ifdeà
__USE_ISOC11


257 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

258 
__THROW
 
	`__nÚnuÎ
 ((1));

262 #ifdeà
__USE_XOPEN_EXTENDED


274 
g‘d©e_”r
;

283 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

286 #ifdeà
__USE_GNU


297 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

298 
tm
 *
__»¡riù
 
__»sbuå
);

301 
__END_DECLS


	@/usr/include/asm/unistd_32.h

1 #iâdeà
_ASM_X86_UNISTD_32_H


2 
	#_ASM_X86_UNISTD_32_H
 1

	)

4 
	#__NR_»¡¬t_sysÿÎ
 0

	)

5 
	#__NR_ex™
 1

	)

6 
	#__NR_fÜk
 2

	)

7 
	#__NR_»ad
 3

	)

8 
	#__NR_wr™e
 4

	)

9 
	#__NR_İ’
 5

	)

10 
	#__NR_şo£
 6

	)

11 
	#__NR_wa™pid
 7

	)

12 
	#__NR_ü—t
 8

	)

13 
	#__NR_lšk
 9

	)

14 
	#__NR_uÆšk
 10

	)

15 
	#__NR_execve
 11

	)

16 
	#__NR_chdœ
 12

	)

17 
	#__NR_time
 13

	)

18 
	#__NR_mknod
 14

	)

19 
	#__NR_chmod
 15

	)

20 
	#__NR_lchown
 16

	)

21 
	#__NR_b»ak
 17

	)

22 
	#__NR_Şd¡©
 18

	)

23 
	#__NR_l£ek
 19

	)

24 
	#__NR_g‘pid
 20

	)

25 
	#__NR_mouÁ
 21

	)

26 
	#__NR_umouÁ
 22

	)

27 
	#__NR_£tuid
 23

	)

28 
	#__NR_g‘uid
 24

	)

29 
	#__NR_¡ime
 25

	)

30 
	#__NR_±¿û
 26

	)

31 
	#__NR_®¬m
 27

	)

32 
	#__NR_Şdf¡©
 28

	)

33 
	#__NR_·u£
 29

	)

34 
	#__NR_utime
 30

	)

35 
	#__NR_¡ty
 31

	)

36 
	#__NR_g‰y
 32

	)

37 
	#__NR_acûss
 33

	)

38 
	#__NR_niû
 34

	)

39 
	#__NR_áime
 35

	)

40 
	#__NR_sync
 36

	)

41 
	#__NR_kl
 37

	)

42 
	#__NR_»Çme
 38

	)

43 
	#__NR_mkdœ
 39

	)

44 
	#__NR_rmdœ
 40

	)

45 
	#__NR_dup
 41

	)

46 
	#__NR_pe
 42

	)

47 
	#__NR_times
 43

	)

48 
	#__NR_´of
 44

	)

49 
	#__NR_brk
 45

	)

50 
	#__NR_£tgid
 46

	)

51 
	#__NR_g‘gid
 47

	)

52 
	#__NR_sigÇl
 48

	)

53 
	#__NR_g‘euid
 49

	)

54 
	#__NR_g‘egid
 50

	)

55 
	#__NR_acù
 51

	)

56 
	#__NR_umouÁ2
 52

	)

57 
	#__NR_lock
 53

	)

58 
	#__NR_ioùl
 54

	)

59 
	#__NR_fú
 55

	)

60 
	#__NR_mpx
 56

	)

61 
	#__NR_£gid
 57

	)

62 
	#__NR_ulim™
 58

	)

63 
	#__NR_ŞdŞduÇme
 59

	)

64 
	#__NR_umask
 60

	)

65 
	#__NR_chroÙ
 61

	)

66 
	#__NR_u¡©
 62

	)

67 
	#__NR_dup2
 63

	)

68 
	#__NR_g‘µid
 64

	)

69 
	#__NR_g‘pg½
 65

	)

70 
	#__NR_£tsid
 66

	)

71 
	#__NR_sigaùiÚ
 67

	)

72 
	#__NR_sg‘mask
 68

	)

73 
	#__NR_s£tmask
 69

	)

74 
	#__NR_£Œeuid
 70

	)

75 
	#__NR_£Œegid
 71

	)

76 
	#__NR_sigsu¥’d
 72

	)

77 
	#__NR_sig³ndšg
 73

	)

78 
	#__NR_£tho¡Çme
 74

	)

79 
	#__NR_£Œlim™
 75

	)

80 
	#__NR_g‘¾im™
 76

	)

81 
	#__NR_g‘ru§ge
 77

	)

82 
	#__NR_g‘timeofday
 78

	)

83 
	#__NR_£‰imeofday
 79

	)

84 
	#__NR_g‘groups
 80

	)

85 
	#__NR_£tgroups
 81

	)

86 
	#__NR_£Ëù
 82

	)

87 
	#__NR_symlšk
 83

	)

88 
	#__NR_Şdl¡©
 84

	)

89 
	#__NR_»adlšk
 85

	)

90 
	#__NR_u£lib
 86

	)

91 
	#__NR_sw­Ú
 87

	)

92 
	#__NR_»boÙ
 88

	)

93 
	#__NR_»addœ
 89

	)

94 
	#__NR_mm­
 90

	)

95 
	#__NR_munm­
 91

	)

96 
	#__NR_Œunÿ‹
 92

	)

97 
	#__NR_árunÿ‹
 93

	)

98 
	#__NR_fchmod
 94

	)

99 
	#__NR_fchown
 95

	)

100 
	#__NR_g‘´iÜ™y
 96

	)

101 
	#__NR_£riÜ™y
 97

	)

102 
	#__NR_´of
 98

	)

103 
	#__NR_¡©fs
 99

	)

104 
	#__NR_f¡©fs
 100

	)

105 
	#__NR_iİ”m
 101

	)

106 
	#__NR_sock‘ÿÎ
 102

	)

107 
	#__NR_sy¦og
 103

	)

108 
	#__NR_£t™im”
 104

	)

109 
	#__NR_g‘™im”
 105

	)

110 
	#__NR_¡©
 106

	)

111 
	#__NR_l¡©
 107

	)

112 
	#__NR_f¡©
 108

	)

113 
	#__NR_ŞduÇme
 109

	)

114 
	#__NR_iİl
 110

	)

115 
	#__NR_vhªgup
 111

	)

116 
	#__NR_idË
 112

	)

117 
	#__NR_vm86Şd
 113

	)

118 
	#__NR_wa™4
 114

	)

119 
	#__NR_sw­off
 115

	)

120 
	#__NR_sysšfo
 116

	)

121 
	#__NR_c
 117

	)

122 
	#__NR_fsync
 118

	)

123 
	#__NR_sig»tuº
 119

	)

124 
	#__NR_şÚe
 120

	)

125 
	#__NR_£tdomašÇme
 121

	)

126 
	#__NR_uÇme
 122

	)

127 
	#__NR_modify_ldt
 123

	)

128 
	#__NR_adjtimex
 124

	)

129 
	#__NR_m´Ùeù
 125

	)

130 
	#__NR_sig´ocmask
 126

	)

131 
	#__NR_ü—‹_moduË
 127

	)

132 
	#__NR_š™_moduË
 128

	)

133 
	#__NR_d–‘e_moduË
 129

	)

134 
	#__NR_g‘_k”Ãl_syms
 130

	)

135 
	#__NR_quÙaùl
 131

	)

136 
	#__NR_g‘pgid
 132

	)

137 
	#__NR_fchdœ
 133

	)

138 
	#__NR_bdæush
 134

	)

139 
	#__NR_sysfs
 135

	)

140 
	#__NR_³rsÚ®™y
 136

	)

141 
	#__NR_afs_sysÿÎ
 137

	)

142 
	#__NR_£tfsuid
 138

	)

143 
	#__NR_£tfsgid
 139

	)

144 
	#__NR__Î£ek
 140

	)

145 
	#__NR_g‘d’ts
 141

	)

146 
	#__NR__Ãw£Ëù
 142

	)

147 
	#__NR_æock
 143

	)

148 
	#__NR_msync
 144

	)

149 
	#__NR_»adv
 145

	)

150 
	#__NR_wr™ev
 146

	)

151 
	#__NR_g‘sid
 147

	)

152 
	#__NR_fd©async
 148

	)

153 
	#__NR__sysùl
 149

	)

154 
	#__NR_mlock
 150

	)

155 
	#__NR_muÆock
 151

	)

156 
	#__NR_mlock®l
 152

	)

157 
	#__NR_muÆock®l
 153

	)

158 
	#__NR_sched_£¬am
 154

	)

159 
	#__NR_sched_g‘·¿m
 155

	)

160 
	#__NR_sched_£tscheduËr
 156

	)

161 
	#__NR_sched_g‘scheduËr
 157

	)

162 
	#__NR_sched_y›ld
 158

	)

163 
	#__NR_sched_g‘_´iÜ™y_max
 159

	)

164 
	#__NR_sched_g‘_´iÜ™y_mš
 160

	)

165 
	#__NR_sched_¼_g‘_š‹rv®
 161

	)

166 
	#__NR_Çno¦“p
 162

	)

167 
	#__NR_m»m­
 163

	)

168 
	#__NR_£Œesuid
 164

	)

169 
	#__NR_g‘»suid
 165

	)

170 
	#__NR_vm86
 166

	)

171 
	#__NR_qu”y_moduË
 167

	)

172 
	#__NR_pŞl
 168

	)

173 
	#__NR_nfs£rvùl
 169

	)

174 
	#__NR_£Œesgid
 170

	)

175 
	#__NR_g‘»sgid
 171

	)

176 
	#__NR_´ùl
 172

	)

177 
	#__NR_¹_sig»tuº
 173

	)

178 
	#__NR_¹_sigaùiÚ
 174

	)

179 
	#__NR_¹_sig´ocmask
 175

	)

180 
	#__NR_¹_sig³ndšg
 176

	)

181 
	#__NR_¹_sigtimedwa™
 177

	)

182 
	#__NR_¹_sigqueuešfo
 178

	)

183 
	#__NR_¹_sigsu¥’d
 179

	)

184 
	#__NR_´—d64
 180

	)

185 
	#__NR_pwr™e64
 181

	)

186 
	#__NR_chown
 182

	)

187 
	#__NR_g‘cwd
 183

	)

188 
	#__NR_ÿpg‘
 184

	)

189 
	#__NR_ÿp£t
 185

	)

190 
	#__NR_sig®t¡ack
 186

	)

191 
	#__NR_£ndfe
 187

	)

192 
	#__NR_g‘pmsg
 188

	)

193 
	#__NR_pumsg
 189

	)

194 
	#__NR_vfÜk
 190

	)

195 
	#__NR_ug‘¾im™
 191

	)

196 
	#__NR_mm­2
 192

	)

197 
	#__NR_Œunÿ‹64
 193

	)

198 
	#__NR_árunÿ‹64
 194

	)

199 
	#__NR_¡©64
 195

	)

200 
	#__NR_l¡©64
 196

	)

201 
	#__NR_f¡©64
 197

	)

202 
	#__NR_lchown32
 198

	)

203 
	#__NR_g‘uid32
 199

	)

204 
	#__NR_g‘gid32
 200

	)

205 
	#__NR_g‘euid32
 201

	)

206 
	#__NR_g‘egid32
 202

	)

207 
	#__NR_£Œeuid32
 203

	)

208 
	#__NR_£Œegid32
 204

	)

209 
	#__NR_g‘groups32
 205

	)

210 
	#__NR_£tgroups32
 206

	)

211 
	#__NR_fchown32
 207

	)

212 
	#__NR_£Œesuid32
 208

	)

213 
	#__NR_g‘»suid32
 209

	)

214 
	#__NR_£Œesgid32
 210

	)

215 
	#__NR_g‘»sgid32
 211

	)

216 
	#__NR_chown32
 212

	)

217 
	#__NR_£tuid32
 213

	)

218 
	#__NR_£tgid32
 214

	)

219 
	#__NR_£tfsuid32
 215

	)

220 
	#__NR_£tfsgid32
 216

	)

221 
	#__NR_pivÙ_roÙ
 217

	)

222 
	#__NR_mšcÜe
 218

	)

223 
	#__NR_madvi£
 219

	)

224 
	#__NR_g‘d’ts64
 220

	)

225 
	#__NR_fú64
 221

	)

226 
	#__NR_g‘tid
 224

	)

227 
	#__NR_»adah—d
 225

	)

228 
	#__NR_£tx©Œ
 226

	)

229 
	#__NR_l£tx©Œ
 227

	)

230 
	#__NR_f£tx©Œ
 228

	)

231 
	#__NR_g‘x©Œ
 229

	)

232 
	#__NR_lg‘x©Œ
 230

	)

233 
	#__NR_fg‘x©Œ
 231

	)

234 
	#__NR_li¡x©Œ
 232

	)

235 
	#__NR_Îi¡x©Œ
 233

	)

236 
	#__NR_æi¡x©Œ
 234

	)

237 
	#__NR_»movex©Œ
 235

	)

238 
	#__NR_Ìemovex©Œ
 236

	)

239 
	#__NR_äemovex©Œ
 237

	)

240 
	#__NR_tkl
 238

	)

241 
	#__NR_£ndfe64
 239

	)

242 
	#__NR_fu‹x
 240

	)

243 
	#__NR_sched_£ffš™y
 241

	)

244 
	#__NR_sched_g‘affš™y
 242

	)

245 
	#__NR_£t_th»ad_¬—
 243

	)

246 
	#__NR_g‘_th»ad_¬—
 244

	)

247 
	#__NR_io_£tup
 245

	)

248 
	#__NR_io_de¡roy
 246

	)

249 
	#__NR_io_g‘ev’ts
 247

	)

250 
	#__NR_io_subm™
 248

	)

251 
	#__NR_io_ÿnûl
 249

	)

252 
	#__NR_çdvi£64
 250

	)

253 
	#__NR_ex™_group
 252

	)

254 
	#__NR_lookup_dcook›
 253

	)

255 
	#__NR_•Şl_ü—‹
 254

	)

256 
	#__NR_•Şl_ùl
 255

	)

257 
	#__NR_•Şl_wa™
 256

	)

258 
	#__NR_»m­_fe_·ges
 257

	)

259 
	#__NR_£t_tid_add»ss
 258

	)

260 
	#__NR_tim”_ü—‹
 259

	)

261 
	#__NR_tim”_£‰ime
 260

	)

262 
	#__NR_tim”_g‘time
 261

	)

263 
	#__NR_tim”_g‘ov”run
 262

	)

264 
	#__NR_tim”_d–‘e
 263

	)

265 
	#__NR_şock_£‰ime
 264

	)

266 
	#__NR_şock_g‘time
 265

	)

267 
	#__NR_şock_g‘»s
 266

	)

268 
	#__NR_şock_Çno¦“p
 267

	)

269 
	#__NR_¡©fs64
 268

	)

270 
	#__NR_f¡©fs64
 269

	)

271 
	#__NR_tgkl
 270

	)

272 
	#__NR_utimes
 271

	)

273 
	#__NR_çdvi£64_64
 272

	)

274 
	#__NR_v£rv”
 273

	)

275 
	#__NR_mbšd
 274

	)

276 
	#__NR_g‘_mempŞicy
 275

	)

277 
	#__NR_£t_mempŞicy
 276

	)

278 
	#__NR_mq_İ’
 277

	)

279 
	#__NR_mq_uÆšk
 278

	)

280 
	#__NR_mq_timed£nd
 279

	)

281 
	#__NR_mq_timed»ûive
 280

	)

282 
	#__NR_mq_nÙify
 281

	)

283 
	#__NR_mq_g‘£‰r
 282

	)

284 
	#__NR_kexec_lßd
 283

	)

285 
	#__NR_wa™id
 284

	)

286 
	#__NR_add_key
 286

	)

287 
	#__NR_»que¡_key
 287

	)

288 
	#__NR_keyùl
 288

	)

289 
	#__NR_iİrio_£t
 289

	)

290 
	#__NR_iİrio_g‘
 290

	)

291 
	#__NR_šÙify_š™
 291

	)

292 
	#__NR_šÙify_add_w©ch
 292

	)

293 
	#__NR_šÙify_rm_w©ch
 293

	)

294 
	#__NR_mig¿‹_·ges
 294

	)

295 
	#__NR_İ’©
 295

	)

296 
	#__NR_mkdœ©
 296

	)

297 
	#__NR_mknod©
 297

	)

298 
	#__NR_fchowÇt
 298

	)

299 
	#__NR_futime§t
 299

	)

300 
	#__NR_f¡©©64
 300

	)

301 
	#__NR_uÆšk©
 301

	)

302 
	#__NR_»Çm—t
 302

	)

303 
	#__NR_lšk©
 303

	)

304 
	#__NR_symlšk©
 304

	)

305 
	#__NR_»adlšk©
 305

	)

306 
	#__NR_fchmod©
 306

	)

307 
	#__NR_çcûs§t
 307

	)

308 
	#__NR_p£Ëù6
 308

	)

309 
	#__NR_µŞl
 309

	)

310 
	#__NR_unsh¬e
 310

	)

311 
	#__NR_£t_robu¡_li¡
 311

	)

312 
	#__NR_g‘_robu¡_li¡
 312

	)

313 
	#__NR_¥liû
 313

	)

314 
	#__NR_sync_fe_¿nge
 314

	)

315 
	#__NR_‹e
 315

	)

316 
	#__NR_vm¥liû
 316

	)

317 
	#__NR_move_·ges
 317

	)

318 
	#__NR_g‘ıu
 318

	)

319 
	#__NR_•Şl_pwa™
 319

	)

320 
	#__NR_utim’§t
 320

	)

321 
	#__NR_sigÇlfd
 321

	)

322 
	#__NR_tim”fd_ü—‹
 322

	)

323 
	#__NR_ev’tfd
 323

	)

324 
	#__NR_çÎoÿ‹
 324

	)

325 
	#__NR_tim”fd_£‰ime
 325

	)

326 
	#__NR_tim”fd_g‘time
 326

	)

327 
	#__NR_sigÇlfd4
 327

	)

328 
	#__NR_ev’tfd2
 328

	)

329 
	#__NR_•Şl_ü—‹1
 329

	)

330 
	#__NR_dup3
 330

	)

331 
	#__NR_pe2
 331

	)

332 
	#__NR_šÙify_š™1
 332

	)

333 
	#__NR_´—dv
 333

	)

334 
	#__NR_pwr™ev
 334

	)

335 
	#__NR_¹_tgsigqueuešfo
 335

	)

336 
	#__NR_³rf_ev’t_İ’
 336

	)

337 
	#__NR_»cvmmsg
 337

	)

338 
	#__NR_çnÙify_š™
 338

	)

339 
	#__NR_çnÙify_m¬k
 339

	)

340 
	#__NR_´lim™64
 340

	)

341 
	#__NR_Çme_to_hªdË_©
 341

	)

342 
	#__NR_İ’_by_hªdË_©
 342

	)

343 
	#__NR_şock_adjtime
 343

	)

344 
	#__NR_syncfs
 344

	)

345 
	#__NR_£ndmmsg
 345

	)

346 
	#__NR_£Šs
 346

	)

347 
	#__NR_´oûss_vm_»adv
 347

	)

348 
	#__NR_´oûss_vm_wr™ev
 348

	)

349 
	#__NR_kcmp
 349

	)

350 
	#__NR_fš™_moduË
 350

	)

351 
	#__NR_sched_£‰r
 351

	)

352 
	#__NR_sched_g‘©Œ
 352

	)

353 
	#__NR_»Çm—t2
 353

	)

354 
	#__NR_£ccomp
 354

	)

355 
	#__NR_g‘¿ndom
 355

	)

356 
	#__NR_memfd_ü—‹
 356

	)

357 
	#__NR_bpf
 357

	)

358 
	#__NR_execv—t
 358

	)

359 
	#__NR_sock‘
 359

	)

360 
	#__NR_sock‘·œ
 360

	)

361 
	#__NR_bšd
 361

	)

362 
	#__NR_cÚÃù
 362

	)

363 
	#__NR_li¡’
 363

	)

364 
	#__NR_acû±4
 364

	)

365 
	#__NR_g‘sockİt
 365

	)

366 
	#__NR_£tsockİt
 366

	)

367 
	#__NR_g‘sockÇme
 367

	)

368 
	#__NR_g‘³”Çme
 368

	)

369 
	#__NR_£ndto
 369

	)

370 
	#__NR_£ndmsg
 370

	)

371 
	#__NR_»cväom
 371

	)

372 
	#__NR_»cvmsg
 372

	)

373 
	#__NR_shutdown
 373

	)

374 
	#__NR_u£rçuÉfd
 374

	)

375 
	#__NR_memb¬r›r
 375

	)

376 
	#__NR_mlock2
 376

	)

377 
	#__NR_cİy_fe_¿nge
 377

	)

378 
	#__NR_´—dv2
 378

	)

379 
	#__NR_pwr™ev2
 379

	)

380 
	#__NR_pkey_m´Ùeù
 380

	)

381 
	#__NR_pkey_®loc
 381

	)

382 
	#__NR_pkey_ä“
 382

	)

383 
	#__NR_¡©x
 383

	)

384 
	#__NR_¬ch_´ùl
 384

	)

385 
	#__NR_io_pg‘ev’ts
 385

	)

386 
	#__NR_r£q
 386

	)

387 
	#__NR_£mg‘
 393

	)

388 
	#__NR_£mùl
 394

	)

389 
	#__NR_shmg‘
 395

	)

390 
	#__NR_shmùl
 396

	)

391 
	#__NR_shm©
 397

	)

392 
	#__NR_shmdt
 398

	)

393 
	#__NR_msgg‘
 399

	)

394 
	#__NR_msg¢d
 400

	)

395 
	#__NR_msgrcv
 401

	)

396 
	#__NR_msgùl
 402

	)

397 
	#__NR_şock_g‘time64
 403

	)

398 
	#__NR_şock_£‰ime64
 404

	)

399 
	#__NR_şock_adjtime64
 405

	)

400 
	#__NR_şock_g‘»s_time64
 406

	)

401 
	#__NR_şock_Çno¦“p_time64
 407

	)

402 
	#__NR_tim”_g‘time64
 408

	)

403 
	#__NR_tim”_£‰ime64
 409

	)

404 
	#__NR_tim”fd_g‘time64
 410

	)

405 
	#__NR_tim”fd_£‰ime64
 411

	)

406 
	#__NR_utim’§t_time64
 412

	)

407 
	#__NR_p£Ëù6_time64
 413

	)

408 
	#__NR_µŞl_time64
 414

	)

409 
	#__NR_io_pg‘ev’ts_time64
 416

	)

410 
	#__NR_»cvmmsg_time64
 417

	)

411 
	#__NR_mq_timed£nd_time64
 418

	)

412 
	#__NR_mq_timed»ûive_time64
 419

	)

413 
	#__NR_£mtimedİ_time64
 420

	)

414 
	#__NR_¹_sigtimedwa™_time64
 421

	)

415 
	#__NR_fu‹x_time64
 422

	)

416 
	#__NR_sched_¼_g‘_š‹rv®_time64
 423

	)

417 
	#__NR_pidfd_£nd_sigÇl
 424

	)

418 
	#__NR_io_uršg_£tup
 425

	)

419 
	#__NR_io_uršg_’‹r
 426

	)

420 
	#__NR_io_uršg_»gi¡”
 427

	)

421 
	#__NR_İ’_Œ“
 428

	)

422 
	#__NR_move_mouÁ
 429

	)

423 
	#__NR_fsİ’
 430

	)

424 
	#__NR_fscÚfig
 431

	)

425 
	#__NR_fsmouÁ
 432

	)

426 
	#__NR_f¥ick
 433

	)

427 
	#__NR_pidfd_İ’
 434

	)

428 
	#__NR_şÚe3
 435

	)

	@/usr/include/asm/unistd_64.h

1 #iâdeà
_ASM_X86_UNISTD_64_H


2 
	#_ASM_X86_UNISTD_64_H
 1

	)

4 
	#__NR_»ad
 0

	)

5 
	#__NR_wr™e
 1

	)

6 
	#__NR_İ’
 2

	)

7 
	#__NR_şo£
 3

	)

8 
	#__NR_¡©
 4

	)

9 
	#__NR_f¡©
 5

	)

10 
	#__NR_l¡©
 6

	)

11 
	#__NR_pŞl
 7

	)

12 
	#__NR_l£ek
 8

	)

13 
	#__NR_mm­
 9

	)

14 
	#__NR_m´Ùeù
 10

	)

15 
	#__NR_munm­
 11

	)

16 
	#__NR_brk
 12

	)

17 
	#__NR_¹_sigaùiÚ
 13

	)

18 
	#__NR_¹_sig´ocmask
 14

	)

19 
	#__NR_¹_sig»tuº
 15

	)

20 
	#__NR_ioùl
 16

	)

21 
	#__NR_´—d64
 17

	)

22 
	#__NR_pwr™e64
 18

	)

23 
	#__NR_»adv
 19

	)

24 
	#__NR_wr™ev
 20

	)

25 
	#__NR_acûss
 21

	)

26 
	#__NR_pe
 22

	)

27 
	#__NR_£Ëù
 23

	)

28 
	#__NR_sched_y›ld
 24

	)

29 
	#__NR_m»m­
 25

	)

30 
	#__NR_msync
 26

	)

31 
	#__NR_mšcÜe
 27

	)

32 
	#__NR_madvi£
 28

	)

33 
	#__NR_shmg‘
 29

	)

34 
	#__NR_shm©
 30

	)

35 
	#__NR_shmùl
 31

	)

36 
	#__NR_dup
 32

	)

37 
	#__NR_dup2
 33

	)

38 
	#__NR_·u£
 34

	)

39 
	#__NR_Çno¦“p
 35

	)

40 
	#__NR_g‘™im”
 36

	)

41 
	#__NR_®¬m
 37

	)

42 
	#__NR_£t™im”
 38

	)

43 
	#__NR_g‘pid
 39

	)

44 
	#__NR_£ndfe
 40

	)

45 
	#__NR_sock‘
 41

	)

46 
	#__NR_cÚÃù
 42

	)

47 
	#__NR_acû±
 43

	)

48 
	#__NR_£ndto
 44

	)

49 
	#__NR_»cväom
 45

	)

50 
	#__NR_£ndmsg
 46

	)

51 
	#__NR_»cvmsg
 47

	)

52 
	#__NR_shutdown
 48

	)

53 
	#__NR_bšd
 49

	)

54 
	#__NR_li¡’
 50

	)

55 
	#__NR_g‘sockÇme
 51

	)

56 
	#__NR_g‘³”Çme
 52

	)

57 
	#__NR_sock‘·œ
 53

	)

58 
	#__NR_£tsockİt
 54

	)

59 
	#__NR_g‘sockİt
 55

	)

60 
	#__NR_şÚe
 56

	)

61 
	#__NR_fÜk
 57

	)

62 
	#__NR_vfÜk
 58

	)

63 
	#__NR_execve
 59

	)

64 
	#__NR_ex™
 60

	)

65 
	#__NR_wa™4
 61

	)

66 
	#__NR_kl
 62

	)

67 
	#__NR_uÇme
 63

	)

68 
	#__NR_£mg‘
 64

	)

69 
	#__NR_£mİ
 65

	)

70 
	#__NR_£mùl
 66

	)

71 
	#__NR_shmdt
 67

	)

72 
	#__NR_msgg‘
 68

	)

73 
	#__NR_msg¢d
 69

	)

74 
	#__NR_msgrcv
 70

	)

75 
	#__NR_msgùl
 71

	)

76 
	#__NR_fú
 72

	)

77 
	#__NR_æock
 73

	)

78 
	#__NR_fsync
 74

	)

79 
	#__NR_fd©async
 75

	)

80 
	#__NR_Œunÿ‹
 76

	)

81 
	#__NR_árunÿ‹
 77

	)

82 
	#__NR_g‘d’ts
 78

	)

83 
	#__NR_g‘cwd
 79

	)

84 
	#__NR_chdœ
 80

	)

85 
	#__NR_fchdœ
 81

	)

86 
	#__NR_»Çme
 82

	)

87 
	#__NR_mkdœ
 83

	)

88 
	#__NR_rmdœ
 84

	)

89 
	#__NR_ü—t
 85

	)

90 
	#__NR_lšk
 86

	)

91 
	#__NR_uÆšk
 87

	)

92 
	#__NR_symlšk
 88

	)

93 
	#__NR_»adlšk
 89

	)

94 
	#__NR_chmod
 90

	)

95 
	#__NR_fchmod
 91

	)

96 
	#__NR_chown
 92

	)

97 
	#__NR_fchown
 93

	)

98 
	#__NR_lchown
 94

	)

99 
	#__NR_umask
 95

	)

100 
	#__NR_g‘timeofday
 96

	)

101 
	#__NR_g‘¾im™
 97

	)

102 
	#__NR_g‘ru§ge
 98

	)

103 
	#__NR_sysšfo
 99

	)

104 
	#__NR_times
 100

	)

105 
	#__NR_±¿û
 101

	)

106 
	#__NR_g‘uid
 102

	)

107 
	#__NR_sy¦og
 103

	)

108 
	#__NR_g‘gid
 104

	)

109 
	#__NR_£tuid
 105

	)

110 
	#__NR_£tgid
 106

	)

111 
	#__NR_g‘euid
 107

	)

112 
	#__NR_g‘egid
 108

	)

113 
	#__NR_£gid
 109

	)

114 
	#__NR_g‘µid
 110

	)

115 
	#__NR_g‘pg½
 111

	)

116 
	#__NR_£tsid
 112

	)

117 
	#__NR_£Œeuid
 113

	)

118 
	#__NR_£Œegid
 114

	)

119 
	#__NR_g‘groups
 115

	)

120 
	#__NR_£tgroups
 116

	)

121 
	#__NR_£Œesuid
 117

	)

122 
	#__NR_g‘»suid
 118

	)

123 
	#__NR_£Œesgid
 119

	)

124 
	#__NR_g‘»sgid
 120

	)

125 
	#__NR_g‘pgid
 121

	)

126 
	#__NR_£tfsuid
 122

	)

127 
	#__NR_£tfsgid
 123

	)

128 
	#__NR_g‘sid
 124

	)

129 
	#__NR_ÿpg‘
 125

	)

130 
	#__NR_ÿp£t
 126

	)

131 
	#__NR_¹_sig³ndšg
 127

	)

132 
	#__NR_¹_sigtimedwa™
 128

	)

133 
	#__NR_¹_sigqueuešfo
 129

	)

134 
	#__NR_¹_sigsu¥’d
 130

	)

135 
	#__NR_sig®t¡ack
 131

	)

136 
	#__NR_utime
 132

	)

137 
	#__NR_mknod
 133

	)

138 
	#__NR_u£lib
 134

	)

139 
	#__NR_³rsÚ®™y
 135

	)

140 
	#__NR_u¡©
 136

	)

141 
	#__NR_¡©fs
 137

	)

142 
	#__NR_f¡©fs
 138

	)

143 
	#__NR_sysfs
 139

	)

144 
	#__NR_g‘´iÜ™y
 140

	)

145 
	#__NR_£riÜ™y
 141

	)

146 
	#__NR_sched_£¬am
 142

	)

147 
	#__NR_sched_g‘·¿m
 143

	)

148 
	#__NR_sched_£tscheduËr
 144

	)

149 
	#__NR_sched_g‘scheduËr
 145

	)

150 
	#__NR_sched_g‘_´iÜ™y_max
 146

	)

151 
	#__NR_sched_g‘_´iÜ™y_mš
 147

	)

152 
	#__NR_sched_¼_g‘_š‹rv®
 148

	)

153 
	#__NR_mlock
 149

	)

154 
	#__NR_muÆock
 150

	)

155 
	#__NR_mlock®l
 151

	)

156 
	#__NR_muÆock®l
 152

	)

157 
	#__NR_vhªgup
 153

	)

158 
	#__NR_modify_ldt
 154

	)

159 
	#__NR_pivÙ_roÙ
 155

	)

160 
	#__NR__sysùl
 156

	)

161 
	#__NR_´ùl
 157

	)

162 
	#__NR_¬ch_´ùl
 158

	)

163 
	#__NR_adjtimex
 159

	)

164 
	#__NR_£Œlim™
 160

	)

165 
	#__NR_chroÙ
 161

	)

166 
	#__NR_sync
 162

	)

167 
	#__NR_acù
 163

	)

168 
	#__NR_£‰imeofday
 164

	)

169 
	#__NR_mouÁ
 165

	)

170 
	#__NR_umouÁ2
 166

	)

171 
	#__NR_sw­Ú
 167

	)

172 
	#__NR_sw­off
 168

	)

173 
	#__NR_»boÙ
 169

	)

174 
	#__NR_£tho¡Çme
 170

	)

175 
	#__NR_£tdomašÇme
 171

	)

176 
	#__NR_iİl
 172

	)

177 
	#__NR_iİ”m
 173

	)

178 
	#__NR_ü—‹_moduË
 174

	)

179 
	#__NR_š™_moduË
 175

	)

180 
	#__NR_d–‘e_moduË
 176

	)

181 
	#__NR_g‘_k”Ãl_syms
 177

	)

182 
	#__NR_qu”y_moduË
 178

	)

183 
	#__NR_quÙaùl
 179

	)

184 
	#__NR_nfs£rvùl
 180

	)

185 
	#__NR_g‘pmsg
 181

	)

186 
	#__NR_pumsg
 182

	)

187 
	#__NR_afs_sysÿÎ
 183

	)

188 
	#__NR_tuxÿÎ
 184

	)

189 
	#__NR_£cur™y
 185

	)

190 
	#__NR_g‘tid
 186

	)

191 
	#__NR_»adah—d
 187

	)

192 
	#__NR_£tx©Œ
 188

	)

193 
	#__NR_l£tx©Œ
 189

	)

194 
	#__NR_f£tx©Œ
 190

	)

195 
	#__NR_g‘x©Œ
 191

	)

196 
	#__NR_lg‘x©Œ
 192

	)

197 
	#__NR_fg‘x©Œ
 193

	)

198 
	#__NR_li¡x©Œ
 194

	)

199 
	#__NR_Îi¡x©Œ
 195

	)

200 
	#__NR_æi¡x©Œ
 196

	)

201 
	#__NR_»movex©Œ
 197

	)

202 
	#__NR_Ìemovex©Œ
 198

	)

203 
	#__NR_äemovex©Œ
 199

	)

204 
	#__NR_tkl
 200

	)

205 
	#__NR_time
 201

	)

206 
	#__NR_fu‹x
 202

	)

207 
	#__NR_sched_£ffš™y
 203

	)

208 
	#__NR_sched_g‘affš™y
 204

	)

209 
	#__NR_£t_th»ad_¬—
 205

	)

210 
	#__NR_io_£tup
 206

	)

211 
	#__NR_io_de¡roy
 207

	)

212 
	#__NR_io_g‘ev’ts
 208

	)

213 
	#__NR_io_subm™
 209

	)

214 
	#__NR_io_ÿnûl
 210

	)

215 
	#__NR_g‘_th»ad_¬—
 211

	)

216 
	#__NR_lookup_dcook›
 212

	)

217 
	#__NR_•Şl_ü—‹
 213

	)

218 
	#__NR_•Şl_ùl_Şd
 214

	)

219 
	#__NR_•Şl_wa™_Şd
 215

	)

220 
	#__NR_»m­_fe_·ges
 216

	)

221 
	#__NR_g‘d’ts64
 217

	)

222 
	#__NR_£t_tid_add»ss
 218

	)

223 
	#__NR_»¡¬t_sysÿÎ
 219

	)

224 
	#__NR_£mtimedİ
 220

	)

225 
	#__NR_çdvi£64
 221

	)

226 
	#__NR_tim”_ü—‹
 222

	)

227 
	#__NR_tim”_£‰ime
 223

	)

228 
	#__NR_tim”_g‘time
 224

	)

229 
	#__NR_tim”_g‘ov”run
 225

	)

230 
	#__NR_tim”_d–‘e
 226

	)

231 
	#__NR_şock_£‰ime
 227

	)

232 
	#__NR_şock_g‘time
 228

	)

233 
	#__NR_şock_g‘»s
 229

	)

234 
	#__NR_şock_Çno¦“p
 230

	)

235 
	#__NR_ex™_group
 231

	)

236 
	#__NR_•Şl_wa™
 232

	)

237 
	#__NR_•Şl_ùl
 233

	)

238 
	#__NR_tgkl
 234

	)

239 
	#__NR_utimes
 235

	)

240 
	#__NR_v£rv”
 236

	)

241 
	#__NR_mbšd
 237

	)

242 
	#__NR_£t_mempŞicy
 238

	)

243 
	#__NR_g‘_mempŞicy
 239

	)

244 
	#__NR_mq_İ’
 240

	)

245 
	#__NR_mq_uÆšk
 241

	)

246 
	#__NR_mq_timed£nd
 242

	)

247 
	#__NR_mq_timed»ûive
 243

	)

248 
	#__NR_mq_nÙify
 244

	)

249 
	#__NR_mq_g‘£‰r
 245

	)

250 
	#__NR_kexec_lßd
 246

	)

251 
	#__NR_wa™id
 247

	)

252 
	#__NR_add_key
 248

	)

253 
	#__NR_»que¡_key
 249

	)

254 
	#__NR_keyùl
 250

	)

255 
	#__NR_iİrio_£t
 251

	)

256 
	#__NR_iİrio_g‘
 252

	)

257 
	#__NR_šÙify_š™
 253

	)

258 
	#__NR_šÙify_add_w©ch
 254

	)

259 
	#__NR_šÙify_rm_w©ch
 255

	)

260 
	#__NR_mig¿‹_·ges
 256

	)

261 
	#__NR_İ’©
 257

	)

262 
	#__NR_mkdœ©
 258

	)

263 
	#__NR_mknod©
 259

	)

264 
	#__NR_fchowÇt
 260

	)

265 
	#__NR_futime§t
 261

	)

266 
	#__NR_Ãwf¡©©
 262

	)

267 
	#__NR_uÆšk©
 263

	)

268 
	#__NR_»Çm—t
 264

	)

269 
	#__NR_lšk©
 265

	)

270 
	#__NR_symlšk©
 266

	)

271 
	#__NR_»adlšk©
 267

	)

272 
	#__NR_fchmod©
 268

	)

273 
	#__NR_çcûs§t
 269

	)

274 
	#__NR_p£Ëù6
 270

	)

275 
	#__NR_µŞl
 271

	)

276 
	#__NR_unsh¬e
 272

	)

277 
	#__NR_£t_robu¡_li¡
 273

	)

278 
	#__NR_g‘_robu¡_li¡
 274

	)

279 
	#__NR_¥liû
 275

	)

280 
	#__NR_‹e
 276

	)

281 
	#__NR_sync_fe_¿nge
 277

	)

282 
	#__NR_vm¥liû
 278

	)

283 
	#__NR_move_·ges
 279

	)

284 
	#__NR_utim’§t
 280

	)

285 
	#__NR_•Şl_pwa™
 281

	)

286 
	#__NR_sigÇlfd
 282

	)

287 
	#__NR_tim”fd_ü—‹
 283

	)

288 
	#__NR_ev’tfd
 284

	)

289 
	#__NR_çÎoÿ‹
 285

	)

290 
	#__NR_tim”fd_£‰ime
 286

	)

291 
	#__NR_tim”fd_g‘time
 287

	)

292 
	#__NR_acû±4
 288

	)

293 
	#__NR_sigÇlfd4
 289

	)

294 
	#__NR_ev’tfd2
 290

	)

295 
	#__NR_•Şl_ü—‹1
 291

	)

296 
	#__NR_dup3
 292

	)

297 
	#__NR_pe2
 293

	)

298 
	#__NR_šÙify_š™1
 294

	)

299 
	#__NR_´—dv
 295

	)

300 
	#__NR_pwr™ev
 296

	)

301 
	#__NR_¹_tgsigqueuešfo
 297

	)

302 
	#__NR_³rf_ev’t_İ’
 298

	)

303 
	#__NR_»cvmmsg
 299

	)

304 
	#__NR_çnÙify_š™
 300

	)

305 
	#__NR_çnÙify_m¬k
 301

	)

306 
	#__NR_´lim™64
 302

	)

307 
	#__NR_Çme_to_hªdË_©
 303

	)

308 
	#__NR_İ’_by_hªdË_©
 304

	)

309 
	#__NR_şock_adjtime
 305

	)

310 
	#__NR_syncfs
 306

	)

311 
	#__NR_£ndmmsg
 307

	)

312 
	#__NR_£Šs
 308

	)

313 
	#__NR_g‘ıu
 309

	)

314 
	#__NR_´oûss_vm_»adv
 310

	)

315 
	#__NR_´oûss_vm_wr™ev
 311

	)

316 
	#__NR_kcmp
 312

	)

317 
	#__NR_fš™_moduË
 313

	)

318 
	#__NR_sched_£‰r
 314

	)

319 
	#__NR_sched_g‘©Œ
 315

	)

320 
	#__NR_»Çm—t2
 316

	)

321 
	#__NR_£ccomp
 317

	)

322 
	#__NR_g‘¿ndom
 318

	)

323 
	#__NR_memfd_ü—‹
 319

	)

324 
	#__NR_kexec_fe_lßd
 320

	)

325 
	#__NR_bpf
 321

	)

326 
	#__NR_execv—t
 322

	)

327 
	#__NR_u£rçuÉfd
 323

	)

328 
	#__NR_memb¬r›r
 324

	)

329 
	#__NR_mlock2
 325

	)

330 
	#__NR_cİy_fe_¿nge
 326

	)

331 
	#__NR_´—dv2
 327

	)

332 
	#__NR_pwr™ev2
 328

	)

333 
	#__NR_pkey_m´Ùeù
 329

	)

334 
	#__NR_pkey_®loc
 330

	)

335 
	#__NR_pkey_ä“
 331

	)

336 
	#__NR_¡©x
 332

	)

337 
	#__NR_io_pg‘ev’ts
 333

	)

338 
	#__NR_r£q
 334

	)

339 
	#__NR_pidfd_£nd_sigÇl
 424

	)

340 
	#__NR_io_uršg_£tup
 425

	)

341 
	#__NR_io_uršg_’‹r
 426

	)

342 
	#__NR_io_uršg_»gi¡”
 427

	)

343 
	#__NR_İ’_Œ“
 428

	)

344 
	#__NR_move_mouÁ
 429

	)

345 
	#__NR_fsİ’
 430

	)

346 
	#__NR_fscÚfig
 431

	)

347 
	#__NR_fsmouÁ
 432

	)

348 
	#__NR_f¥ick
 433

	)

349 
	#__NR_pidfd_İ’
 434

	)

350 
	#__NR_şÚe3
 435

	)

	@/usr/include/asm/unistd_x32.h

1 #iâdeà
_ASM_X86_UNISTD_X32_H


2 
	#_ASM_X86_UNISTD_X32_H
 1

	)

4 
	#__NR_»ad
 (
__X32_SYSCALL_BIT
 + 0)

	)

5 
	#__NR_wr™e
 (
__X32_SYSCALL_BIT
 + 1)

	)

6 
	#__NR_İ’
 (
__X32_SYSCALL_BIT
 + 2)

	)

7 
	#__NR_şo£
 (
__X32_SYSCALL_BIT
 + 3)

	)

8 
	#__NR_¡©
 (
__X32_SYSCALL_BIT
 + 4)

	)

9 
	#__NR_f¡©
 (
__X32_SYSCALL_BIT
 + 5)

	)

10 
	#__NR_l¡©
 (
__X32_SYSCALL_BIT
 + 6)

	)

11 
	#__NR_pŞl
 (
__X32_SYSCALL_BIT
 + 7)

	)

12 
	#__NR_l£ek
 (
__X32_SYSCALL_BIT
 + 8)

	)

13 
	#__NR_mm­
 (
__X32_SYSCALL_BIT
 + 9)

	)

14 
	#__NR_m´Ùeù
 (
__X32_SYSCALL_BIT
 + 10)

	)

15 
	#__NR_munm­
 (
__X32_SYSCALL_BIT
 + 11)

	)

16 
	#__NR_brk
 (
__X32_SYSCALL_BIT
 + 12)

	)

17 
	#__NR_¹_sig´ocmask
 (
__X32_SYSCALL_BIT
 + 14)

	)

18 
	#__NR_´—d64
 (
__X32_SYSCALL_BIT
 + 17)

	)

19 
	#__NR_pwr™e64
 (
__X32_SYSCALL_BIT
 + 18)

	)

20 
	#__NR_acûss
 (
__X32_SYSCALL_BIT
 + 21)

	)

21 
	#__NR_pe
 (
__X32_SYSCALL_BIT
 + 22)

	)

22 
	#__NR_£Ëù
 (
__X32_SYSCALL_BIT
 + 23)

	)

23 
	#__NR_sched_y›ld
 (
__X32_SYSCALL_BIT
 + 24)

	)

24 
	#__NR_m»m­
 (
__X32_SYSCALL_BIT
 + 25)

	)

25 
	#__NR_msync
 (
__X32_SYSCALL_BIT
 + 26)

	)

26 
	#__NR_mšcÜe
 (
__X32_SYSCALL_BIT
 + 27)

	)

27 
	#__NR_madvi£
 (
__X32_SYSCALL_BIT
 + 28)

	)

28 
	#__NR_shmg‘
 (
__X32_SYSCALL_BIT
 + 29)

	)

29 
	#__NR_shm©
 (
__X32_SYSCALL_BIT
 + 30)

	)

30 
	#__NR_shmùl
 (
__X32_SYSCALL_BIT
 + 31)

	)

31 
	#__NR_dup
 (
__X32_SYSCALL_BIT
 + 32)

	)

32 
	#__NR_dup2
 (
__X32_SYSCALL_BIT
 + 33)

	)

33 
	#__NR_·u£
 (
__X32_SYSCALL_BIT
 + 34)

	)

34 
	#__NR_Çno¦“p
 (
__X32_SYSCALL_BIT
 + 35)

	)

35 
	#__NR_g‘™im”
 (
__X32_SYSCALL_BIT
 + 36)

	)

36 
	#__NR_®¬m
 (
__X32_SYSCALL_BIT
 + 37)

	)

37 
	#__NR_£t™im”
 (
__X32_SYSCALL_BIT
 + 38)

	)

38 
	#__NR_g‘pid
 (
__X32_SYSCALL_BIT
 + 39)

	)

39 
	#__NR_£ndfe
 (
__X32_SYSCALL_BIT
 + 40)

	)

40 
	#__NR_sock‘
 (
__X32_SYSCALL_BIT
 + 41)

	)

41 
	#__NR_cÚÃù
 (
__X32_SYSCALL_BIT
 + 42)

	)

42 
	#__NR_acû±
 (
__X32_SYSCALL_BIT
 + 43)

	)

43 
	#__NR_£ndto
 (
__X32_SYSCALL_BIT
 + 44)

	)

44 
	#__NR_shutdown
 (
__X32_SYSCALL_BIT
 + 48)

	)

45 
	#__NR_bšd
 (
__X32_SYSCALL_BIT
 + 49)

	)

46 
	#__NR_li¡’
 (
__X32_SYSCALL_BIT
 + 50)

	)

47 
	#__NR_g‘sockÇme
 (
__X32_SYSCALL_BIT
 + 51)

	)

48 
	#__NR_g‘³”Çme
 (
__X32_SYSCALL_BIT
 + 52)

	)

49 
	#__NR_sock‘·œ
 (
__X32_SYSCALL_BIT
 + 53)

	)

50 
	#__NR_şÚe
 (
__X32_SYSCALL_BIT
 + 56)

	)

51 
	#__NR_fÜk
 (
__X32_SYSCALL_BIT
 + 57)

	)

52 
	#__NR_vfÜk
 (
__X32_SYSCALL_BIT
 + 58)

	)

53 
	#__NR_ex™
 (
__X32_SYSCALL_BIT
 + 60)

	)

54 
	#__NR_wa™4
 (
__X32_SYSCALL_BIT
 + 61)

	)

55 
	#__NR_kl
 (
__X32_SYSCALL_BIT
 + 62)

	)

56 
	#__NR_uÇme
 (
__X32_SYSCALL_BIT
 + 63)

	)

57 
	#__NR_£mg‘
 (
__X32_SYSCALL_BIT
 + 64)

	)

58 
	#__NR_£mİ
 (
__X32_SYSCALL_BIT
 + 65)

	)

59 
	#__NR_£mùl
 (
__X32_SYSCALL_BIT
 + 66)

	)

60 
	#__NR_shmdt
 (
__X32_SYSCALL_BIT
 + 67)

	)

61 
	#__NR_msgg‘
 (
__X32_SYSCALL_BIT
 + 68)

	)

62 
	#__NR_msg¢d
 (
__X32_SYSCALL_BIT
 + 69)

	)

63 
	#__NR_msgrcv
 (
__X32_SYSCALL_BIT
 + 70)

	)

64 
	#__NR_msgùl
 (
__X32_SYSCALL_BIT
 + 71)

	)

65 
	#__NR_fú
 (
__X32_SYSCALL_BIT
 + 72)

	)

66 
	#__NR_æock
 (
__X32_SYSCALL_BIT
 + 73)

	)

67 
	#__NR_fsync
 (
__X32_SYSCALL_BIT
 + 74)

	)

68 
	#__NR_fd©async
 (
__X32_SYSCALL_BIT
 + 75)

	)

69 
	#__NR_Œunÿ‹
 (
__X32_SYSCALL_BIT
 + 76)

	)

70 
	#__NR_árunÿ‹
 (
__X32_SYSCALL_BIT
 + 77)

	)

71 
	#__NR_g‘d’ts
 (
__X32_SYSCALL_BIT
 + 78)

	)

72 
	#__NR_g‘cwd
 (
__X32_SYSCALL_BIT
 + 79)

	)

73 
	#__NR_chdœ
 (
__X32_SYSCALL_BIT
 + 80)

	)

74 
	#__NR_fchdœ
 (
__X32_SYSCALL_BIT
 + 81)

	)

75 
	#__NR_»Çme
 (
__X32_SYSCALL_BIT
 + 82)

	)

76 
	#__NR_mkdœ
 (
__X32_SYSCALL_BIT
 + 83)

	)

77 
	#__NR_rmdœ
 (
__X32_SYSCALL_BIT
 + 84)

	)

78 
	#__NR_ü—t
 (
__X32_SYSCALL_BIT
 + 85)

	)

79 
	#__NR_lšk
 (
__X32_SYSCALL_BIT
 + 86)

	)

80 
	#__NR_uÆšk
 (
__X32_SYSCALL_BIT
 + 87)

	)

81 
	#__NR_symlšk
 (
__X32_SYSCALL_BIT
 + 88)

	)

82 
	#__NR_»adlšk
 (
__X32_SYSCALL_BIT
 + 89)

	)

83 
	#__NR_chmod
 (
__X32_SYSCALL_BIT
 + 90)

	)

84 
	#__NR_fchmod
 (
__X32_SYSCALL_BIT
 + 91)

	)

85 
	#__NR_chown
 (
__X32_SYSCALL_BIT
 + 92)

	)

86 
	#__NR_fchown
 (
__X32_SYSCALL_BIT
 + 93)

	)

87 
	#__NR_lchown
 (
__X32_SYSCALL_BIT
 + 94)

	)

88 
	#__NR_umask
 (
__X32_SYSCALL_BIT
 + 95)

	)

89 
	#__NR_g‘timeofday
 (
__X32_SYSCALL_BIT
 + 96)

	)

90 
	#__NR_g‘¾im™
 (
__X32_SYSCALL_BIT
 + 97)

	)

91 
	#__NR_g‘ru§ge
 (
__X32_SYSCALL_BIT
 + 98)

	)

92 
	#__NR_sysšfo
 (
__X32_SYSCALL_BIT
 + 99)

	)

93 
	#__NR_times
 (
__X32_SYSCALL_BIT
 + 100)

	)

94 
	#__NR_g‘uid
 (
__X32_SYSCALL_BIT
 + 102)

	)

95 
	#__NR_sy¦og
 (
__X32_SYSCALL_BIT
 + 103)

	)

96 
	#__NR_g‘gid
 (
__X32_SYSCALL_BIT
 + 104)

	)

97 
	#__NR_£tuid
 (
__X32_SYSCALL_BIT
 + 105)

	)

98 
	#__NR_£tgid
 (
__X32_SYSCALL_BIT
 + 106)

	)

99 
	#__NR_g‘euid
 (
__X32_SYSCALL_BIT
 + 107)

	)

100 
	#__NR_g‘egid
 (
__X32_SYSCALL_BIT
 + 108)

	)

101 
	#__NR_£gid
 (
__X32_SYSCALL_BIT
 + 109)

	)

102 
	#__NR_g‘µid
 (
__X32_SYSCALL_BIT
 + 110)

	)

103 
	#__NR_g‘pg½
 (
__X32_SYSCALL_BIT
 + 111)

	)

104 
	#__NR_£tsid
 (
__X32_SYSCALL_BIT
 + 112)

	)

105 
	#__NR_£Œeuid
 (
__X32_SYSCALL_BIT
 + 113)

	)

106 
	#__NR_£Œegid
 (
__X32_SYSCALL_BIT
 + 114)

	)

107 
	#__NR_g‘groups
 (
__X32_SYSCALL_BIT
 + 115)

	)

108 
	#__NR_£tgroups
 (
__X32_SYSCALL_BIT
 + 116)

	)

109 
	#__NR_£Œesuid
 (
__X32_SYSCALL_BIT
 + 117)

	)

110 
	#__NR_g‘»suid
 (
__X32_SYSCALL_BIT
 + 118)

	)

111 
	#__NR_£Œesgid
 (
__X32_SYSCALL_BIT
 + 119)

	)

112 
	#__NR_g‘»sgid
 (
__X32_SYSCALL_BIT
 + 120)

	)

113 
	#__NR_g‘pgid
 (
__X32_SYSCALL_BIT
 + 121)

	)

114 
	#__NR_£tfsuid
 (
__X32_SYSCALL_BIT
 + 122)

	)

115 
	#__NR_£tfsgid
 (
__X32_SYSCALL_BIT
 + 123)

	)

116 
	#__NR_g‘sid
 (
__X32_SYSCALL_BIT
 + 124)

	)

117 
	#__NR_ÿpg‘
 (
__X32_SYSCALL_BIT
 + 125)

	)

118 
	#__NR_ÿp£t
 (
__X32_SYSCALL_BIT
 + 126)

	)

119 
	#__NR_¹_sigsu¥’d
 (
__X32_SYSCALL_BIT
 + 130)

	)

120 
	#__NR_utime
 (
__X32_SYSCALL_BIT
 + 132)

	)

121 
	#__NR_mknod
 (
__X32_SYSCALL_BIT
 + 133)

	)

122 
	#__NR_³rsÚ®™y
 (
__X32_SYSCALL_BIT
 + 135)

	)

123 
	#__NR_u¡©
 (
__X32_SYSCALL_BIT
 + 136)

	)

124 
	#__NR_¡©fs
 (
__X32_SYSCALL_BIT
 + 137)

	)

125 
	#__NR_f¡©fs
 (
__X32_SYSCALL_BIT
 + 138)

	)

126 
	#__NR_sysfs
 (
__X32_SYSCALL_BIT
 + 139)

	)

127 
	#__NR_g‘´iÜ™y
 (
__X32_SYSCALL_BIT
 + 140)

	)

128 
	#__NR_£riÜ™y
 (
__X32_SYSCALL_BIT
 + 141)

	)

129 
	#__NR_sched_£¬am
 (
__X32_SYSCALL_BIT
 + 142)

	)

130 
	#__NR_sched_g‘·¿m
 (
__X32_SYSCALL_BIT
 + 143)

	)

131 
	#__NR_sched_£tscheduËr
 (
__X32_SYSCALL_BIT
 + 144)

	)

132 
	#__NR_sched_g‘scheduËr
 (
__X32_SYSCALL_BIT
 + 145)

	)

133 
	#__NR_sched_g‘_´iÜ™y_max
 (
__X32_SYSCALL_BIT
 + 146)

	)

134 
	#__NR_sched_g‘_´iÜ™y_mš
 (
__X32_SYSCALL_BIT
 + 147)

	)

135 
	#__NR_sched_¼_g‘_š‹rv®
 (
__X32_SYSCALL_BIT
 + 148)

	)

136 
	#__NR_mlock
 (
__X32_SYSCALL_BIT
 + 149)

	)

137 
	#__NR_muÆock
 (
__X32_SYSCALL_BIT
 + 150)

	)

138 
	#__NR_mlock®l
 (
__X32_SYSCALL_BIT
 + 151)

	)

139 
	#__NR_muÆock®l
 (
__X32_SYSCALL_BIT
 + 152)

	)

140 
	#__NR_vhªgup
 (
__X32_SYSCALL_BIT
 + 153)

	)

141 
	#__NR_modify_ldt
 (
__X32_SYSCALL_BIT
 + 154)

	)

142 
	#__NR_pivÙ_roÙ
 (
__X32_SYSCALL_BIT
 + 155)

	)

143 
	#__NR_´ùl
 (
__X32_SYSCALL_BIT
 + 157)

	)

144 
	#__NR_¬ch_´ùl
 (
__X32_SYSCALL_BIT
 + 158)

	)

145 
	#__NR_adjtimex
 (
__X32_SYSCALL_BIT
 + 159)

	)

146 
	#__NR_£Œlim™
 (
__X32_SYSCALL_BIT
 + 160)

	)

147 
	#__NR_chroÙ
 (
__X32_SYSCALL_BIT
 + 161)

	)

148 
	#__NR_sync
 (
__X32_SYSCALL_BIT
 + 162)

	)

149 
	#__NR_acù
 (
__X32_SYSCALL_BIT
 + 163)

	)

150 
	#__NR_£‰imeofday
 (
__X32_SYSCALL_BIT
 + 164)

	)

151 
	#__NR_mouÁ
 (
__X32_SYSCALL_BIT
 + 165)

	)

152 
	#__NR_umouÁ2
 (
__X32_SYSCALL_BIT
 + 166)

	)

153 
	#__NR_sw­Ú
 (
__X32_SYSCALL_BIT
 + 167)

	)

154 
	#__NR_sw­off
 (
__X32_SYSCALL_BIT
 + 168)

	)

155 
	#__NR_»boÙ
 (
__X32_SYSCALL_BIT
 + 169)

	)

156 
	#__NR_£tho¡Çme
 (
__X32_SYSCALL_BIT
 + 170)

	)

157 
	#__NR_£tdomašÇme
 (
__X32_SYSCALL_BIT
 + 171)

	)

158 
	#__NR_iİl
 (
__X32_SYSCALL_BIT
 + 172)

	)

159 
	#__NR_iİ”m
 (
__X32_SYSCALL_BIT
 + 173)

	)

160 
	#__NR_š™_moduË
 (
__X32_SYSCALL_BIT
 + 175)

	)

161 
	#__NR_d–‘e_moduË
 (
__X32_SYSCALL_BIT
 + 176)

	)

162 
	#__NR_quÙaùl
 (
__X32_SYSCALL_BIT
 + 179)

	)

163 
	#__NR_g‘pmsg
 (
__X32_SYSCALL_BIT
 + 181)

	)

164 
	#__NR_pumsg
 (
__X32_SYSCALL_BIT
 + 182)

	)

165 
	#__NR_afs_sysÿÎ
 (
__X32_SYSCALL_BIT
 + 183)

	)

166 
	#__NR_tuxÿÎ
 (
__X32_SYSCALL_BIT
 + 184)

	)

167 
	#__NR_£cur™y
 (
__X32_SYSCALL_BIT
 + 185)

	)

168 
	#__NR_g‘tid
 (
__X32_SYSCALL_BIT
 + 186)

	)

169 
	#__NR_»adah—d
 (
__X32_SYSCALL_BIT
 + 187)

	)

170 
	#__NR_£tx©Œ
 (
__X32_SYSCALL_BIT
 + 188)

	)

171 
	#__NR_l£tx©Œ
 (
__X32_SYSCALL_BIT
 + 189)

	)

172 
	#__NR_f£tx©Œ
 (
__X32_SYSCALL_BIT
 + 190)

	)

173 
	#__NR_g‘x©Œ
 (
__X32_SYSCALL_BIT
 + 191)

	)

174 
	#__NR_lg‘x©Œ
 (
__X32_SYSCALL_BIT
 + 192)

	)

175 
	#__NR_fg‘x©Œ
 (
__X32_SYSCALL_BIT
 + 193)

	)

176 
	#__NR_li¡x©Œ
 (
__X32_SYSCALL_BIT
 + 194)

	)

177 
	#__NR_Îi¡x©Œ
 (
__X32_SYSCALL_BIT
 + 195)

	)

178 
	#__NR_æi¡x©Œ
 (
__X32_SYSCALL_BIT
 + 196)

	)

179 
	#__NR_»movex©Œ
 (
__X32_SYSCALL_BIT
 + 197)

	)

180 
	#__NR_Ìemovex©Œ
 (
__X32_SYSCALL_BIT
 + 198)

	)

181 
	#__NR_äemovex©Œ
 (
__X32_SYSCALL_BIT
 + 199)

	)

182 
	#__NR_tkl
 (
__X32_SYSCALL_BIT
 + 200)

	)

183 
	#__NR_time
 (
__X32_SYSCALL_BIT
 + 201)

	)

184 
	#__NR_fu‹x
 (
__X32_SYSCALL_BIT
 + 202)

	)

185 
	#__NR_sched_£ffš™y
 (
__X32_SYSCALL_BIT
 + 203)

	)

186 
	#__NR_sched_g‘affš™y
 (
__X32_SYSCALL_BIT
 + 204)

	)

187 
	#__NR_io_de¡roy
 (
__X32_SYSCALL_BIT
 + 207)

	)

188 
	#__NR_io_g‘ev’ts
 (
__X32_SYSCALL_BIT
 + 208)

	)

189 
	#__NR_io_ÿnûl
 (
__X32_SYSCALL_BIT
 + 210)

	)

190 
	#__NR_lookup_dcook›
 (
__X32_SYSCALL_BIT
 + 212)

	)

191 
	#__NR_•Şl_ü—‹
 (
__X32_SYSCALL_BIT
 + 213)

	)

192 
	#__NR_»m­_fe_·ges
 (
__X32_SYSCALL_BIT
 + 216)

	)

193 
	#__NR_g‘d’ts64
 (
__X32_SYSCALL_BIT
 + 217)

	)

194 
	#__NR_£t_tid_add»ss
 (
__X32_SYSCALL_BIT
 + 218)

	)

195 
	#__NR_»¡¬t_sysÿÎ
 (
__X32_SYSCALL_BIT
 + 219)

	)

196 
	#__NR_£mtimedİ
 (
__X32_SYSCALL_BIT
 + 220)

	)

197 
	#__NR_çdvi£64
 (
__X32_SYSCALL_BIT
 + 221)

	)

198 
	#__NR_tim”_£‰ime
 (
__X32_SYSCALL_BIT
 + 223)

	)

199 
	#__NR_tim”_g‘time
 (
__X32_SYSCALL_BIT
 + 224)

	)

200 
	#__NR_tim”_g‘ov”run
 (
__X32_SYSCALL_BIT
 + 225)

	)

201 
	#__NR_tim”_d–‘e
 (
__X32_SYSCALL_BIT
 + 226)

	)

202 
	#__NR_şock_£‰ime
 (
__X32_SYSCALL_BIT
 + 227)

	)

203 
	#__NR_şock_g‘time
 (
__X32_SYSCALL_BIT
 + 228)

	)

204 
	#__NR_şock_g‘»s
 (
__X32_SYSCALL_BIT
 + 229)

	)

205 
	#__NR_şock_Çno¦“p
 (
__X32_SYSCALL_BIT
 + 230)

	)

206 
	#__NR_ex™_group
 (
__X32_SYSCALL_BIT
 + 231)

	)

207 
	#__NR_•Şl_wa™
 (
__X32_SYSCALL_BIT
 + 232)

	)

208 
	#__NR_•Şl_ùl
 (
__X32_SYSCALL_BIT
 + 233)

	)

209 
	#__NR_tgkl
 (
__X32_SYSCALL_BIT
 + 234)

	)

210 
	#__NR_utimes
 (
__X32_SYSCALL_BIT
 + 235)

	)

211 
	#__NR_mbšd
 (
__X32_SYSCALL_BIT
 + 237)

	)

212 
	#__NR_£t_mempŞicy
 (
__X32_SYSCALL_BIT
 + 238)

	)

213 
	#__NR_g‘_mempŞicy
 (
__X32_SYSCALL_BIT
 + 239)

	)

214 
	#__NR_mq_İ’
 (
__X32_SYSCALL_BIT
 + 240)

	)

215 
	#__NR_mq_uÆšk
 (
__X32_SYSCALL_BIT
 + 241)

	)

216 
	#__NR_mq_timed£nd
 (
__X32_SYSCALL_BIT
 + 242)

	)

217 
	#__NR_mq_timed»ûive
 (
__X32_SYSCALL_BIT
 + 243)

	)

218 
	#__NR_mq_g‘£‰r
 (
__X32_SYSCALL_BIT
 + 245)

	)

219 
	#__NR_add_key
 (
__X32_SYSCALL_BIT
 + 248)

	)

220 
	#__NR_»que¡_key
 (
__X32_SYSCALL_BIT
 + 249)

	)

221 
	#__NR_keyùl
 (
__X32_SYSCALL_BIT
 + 250)

	)

222 
	#__NR_iİrio_£t
 (
__X32_SYSCALL_BIT
 + 251)

	)

223 
	#__NR_iİrio_g‘
 (
__X32_SYSCALL_BIT
 + 252)

	)

224 
	#__NR_šÙify_š™
 (
__X32_SYSCALL_BIT
 + 253)

	)

225 
	#__NR_šÙify_add_w©ch
 (
__X32_SYSCALL_BIT
 + 254)

	)

226 
	#__NR_šÙify_rm_w©ch
 (
__X32_SYSCALL_BIT
 + 255)

	)

227 
	#__NR_mig¿‹_·ges
 (
__X32_SYSCALL_BIT
 + 256)

	)

228 
	#__NR_İ’©
 (
__X32_SYSCALL_BIT
 + 257)

	)

229 
	#__NR_mkdœ©
 (
__X32_SYSCALL_BIT
 + 258)

	)

230 
	#__NR_mknod©
 (
__X32_SYSCALL_BIT
 + 259)

	)

231 
	#__NR_fchowÇt
 (
__X32_SYSCALL_BIT
 + 260)

	)

232 
	#__NR_futime§t
 (
__X32_SYSCALL_BIT
 + 261)

	)

233 
	#__NR_Ãwf¡©©
 (
__X32_SYSCALL_BIT
 + 262)

	)

234 
	#__NR_uÆšk©
 (
__X32_SYSCALL_BIT
 + 263)

	)

235 
	#__NR_»Çm—t
 (
__X32_SYSCALL_BIT
 + 264)

	)

236 
	#__NR_lšk©
 (
__X32_SYSCALL_BIT
 + 265)

	)

237 
	#__NR_symlšk©
 (
__X32_SYSCALL_BIT
 + 266)

	)

238 
	#__NR_»adlšk©
 (
__X32_SYSCALL_BIT
 + 267)

	)

239 
	#__NR_fchmod©
 (
__X32_SYSCALL_BIT
 + 268)

	)

240 
	#__NR_çcûs§t
 (
__X32_SYSCALL_BIT
 + 269)

	)

241 
	#__NR_p£Ëù6
 (
__X32_SYSCALL_BIT
 + 270)

	)

242 
	#__NR_µŞl
 (
__X32_SYSCALL_BIT
 + 271)

	)

243 
	#__NR_unsh¬e
 (
__X32_SYSCALL_BIT
 + 272)

	)

244 
	#__NR_¥liû
 (
__X32_SYSCALL_BIT
 + 275)

	)

245 
	#__NR_‹e
 (
__X32_SYSCALL_BIT
 + 276)

	)

246 
	#__NR_sync_fe_¿nge
 (
__X32_SYSCALL_BIT
 + 277)

	)

247 
	#__NR_utim’§t
 (
__X32_SYSCALL_BIT
 + 280)

	)

248 
	#__NR_•Şl_pwa™
 (
__X32_SYSCALL_BIT
 + 281)

	)

249 
	#__NR_sigÇlfd
 (
__X32_SYSCALL_BIT
 + 282)

	)

250 
	#__NR_tim”fd_ü—‹
 (
__X32_SYSCALL_BIT
 + 283)

	)

251 
	#__NR_ev’tfd
 (
__X32_SYSCALL_BIT
 + 284)

	)

252 
	#__NR_çÎoÿ‹
 (
__X32_SYSCALL_BIT
 + 285)

	)

253 
	#__NR_tim”fd_£‰ime
 (
__X32_SYSCALL_BIT
 + 286)

	)

254 
	#__NR_tim”fd_g‘time
 (
__X32_SYSCALL_BIT
 + 287)

	)

255 
	#__NR_acû±4
 (
__X32_SYSCALL_BIT
 + 288)

	)

256 
	#__NR_sigÇlfd4
 (
__X32_SYSCALL_BIT
 + 289)

	)

257 
	#__NR_ev’tfd2
 (
__X32_SYSCALL_BIT
 + 290)

	)

258 
	#__NR_•Şl_ü—‹1
 (
__X32_SYSCALL_BIT
 + 291)

	)

259 
	#__NR_dup3
 (
__X32_SYSCALL_BIT
 + 292)

	)

260 
	#__NR_pe2
 (
__X32_SYSCALL_BIT
 + 293)

	)

261 
	#__NR_šÙify_š™1
 (
__X32_SYSCALL_BIT
 + 294)

	)

262 
	#__NR_³rf_ev’t_İ’
 (
__X32_SYSCALL_BIT
 + 298)

	)

263 
	#__NR_çnÙify_š™
 (
__X32_SYSCALL_BIT
 + 300)

	)

264 
	#__NR_çnÙify_m¬k
 (
__X32_SYSCALL_BIT
 + 301)

	)

265 
	#__NR_´lim™64
 (
__X32_SYSCALL_BIT
 + 302)

	)

266 
	#__NR_Çme_to_hªdË_©
 (
__X32_SYSCALL_BIT
 + 303)

	)

267 
	#__NR_İ’_by_hªdË_©
 (
__X32_SYSCALL_BIT
 + 304)

	)

268 
	#__NR_şock_adjtime
 (
__X32_SYSCALL_BIT
 + 305)

	)

269 
	#__NR_syncfs
 (
__X32_SYSCALL_BIT
 + 306)

	)

270 
	#__NR_£Šs
 (
__X32_SYSCALL_BIT
 + 308)

	)

271 
	#__NR_g‘ıu
 (
__X32_SYSCALL_BIT
 + 309)

	)

272 
	#__NR_kcmp
 (
__X32_SYSCALL_BIT
 + 312)

	)

273 
	#__NR_fš™_moduË
 (
__X32_SYSCALL_BIT
 + 313)

	)

274 
	#__NR_sched_£‰r
 (
__X32_SYSCALL_BIT
 + 314)

	)

275 
	#__NR_sched_g‘©Œ
 (
__X32_SYSCALL_BIT
 + 315)

	)

276 
	#__NR_»Çm—t2
 (
__X32_SYSCALL_BIT
 + 316)

	)

277 
	#__NR_£ccomp
 (
__X32_SYSCALL_BIT
 + 317)

	)

278 
	#__NR_g‘¿ndom
 (
__X32_SYSCALL_BIT
 + 318)

	)

279 
	#__NR_memfd_ü—‹
 (
__X32_SYSCALL_BIT
 + 319)

	)

280 
	#__NR_kexec_fe_lßd
 (
__X32_SYSCALL_BIT
 + 320)

	)

281 
	#__NR_bpf
 (
__X32_SYSCALL_BIT
 + 321)

	)

282 
	#__NR_u£rçuÉfd
 (
__X32_SYSCALL_BIT
 + 323)

	)

283 
	#__NR_memb¬r›r
 (
__X32_SYSCALL_BIT
 + 324)

	)

284 
	#__NR_mlock2
 (
__X32_SYSCALL_BIT
 + 325)

	)

285 
	#__NR_cİy_fe_¿nge
 (
__X32_SYSCALL_BIT
 + 326)

	)

286 
	#__NR_pkey_m´Ùeù
 (
__X32_SYSCALL_BIT
 + 329)

	)

287 
	#__NR_pkey_®loc
 (
__X32_SYSCALL_BIT
 + 330)

	)

288 
	#__NR_pkey_ä“
 (
__X32_SYSCALL_BIT
 + 331)

	)

289 
	#__NR_¡©x
 (
__X32_SYSCALL_BIT
 + 332)

	)

290 
	#__NR_io_pg‘ev’ts
 (
__X32_SYSCALL_BIT
 + 333)

	)

291 
	#__NR_r£q
 (
__X32_SYSCALL_BIT
 + 334)

	)

292 
	#__NR_pidfd_£nd_sigÇl
 (
__X32_SYSCALL_BIT
 + 424)

	)

293 
	#__NR_io_uršg_£tup
 (
__X32_SYSCALL_BIT
 + 425)

	)

294 
	#__NR_io_uršg_’‹r
 (
__X32_SYSCALL_BIT
 + 426)

	)

295 
	#__NR_io_uršg_»gi¡”
 (
__X32_SYSCALL_BIT
 + 427)

	)

296 
	#__NR_İ’_Œ“
 (
__X32_SYSCALL_BIT
 + 428)

	)

297 
	#__NR_move_mouÁ
 (
__X32_SYSCALL_BIT
 + 429)

	)

298 
	#__NR_fsİ’
 (
__X32_SYSCALL_BIT
 + 430)

	)

299 
	#__NR_fscÚfig
 (
__X32_SYSCALL_BIT
 + 431)

	)

300 
	#__NR_fsmouÁ
 (
__X32_SYSCALL_BIT
 + 432)

	)

301 
	#__NR_f¥ick
 (
__X32_SYSCALL_BIT
 + 433)

	)

302 
	#__NR_pidfd_İ’
 (
__X32_SYSCALL_BIT
 + 434)

	)

303 
	#__NR_şÚe3
 (
__X32_SYSCALL_BIT
 + 435)

	)

304 
	#__NR_¹_sigaùiÚ
 (
__X32_SYSCALL_BIT
 + 512)

	)

305 
	#__NR_¹_sig»tuº
 (
__X32_SYSCALL_BIT
 + 513)

	)

306 
	#__NR_ioùl
 (
__X32_SYSCALL_BIT
 + 514)

	)

307 
	#__NR_»adv
 (
__X32_SYSCALL_BIT
 + 515)

	)

308 
	#__NR_wr™ev
 (
__X32_SYSCALL_BIT
 + 516)

	)

309 
	#__NR_»cväom
 (
__X32_SYSCALL_BIT
 + 517)

	)

310 
	#__NR_£ndmsg
 (
__X32_SYSCALL_BIT
 + 518)

	)

311 
	#__NR_»cvmsg
 (
__X32_SYSCALL_BIT
 + 519)

	)

312 
	#__NR_execve
 (
__X32_SYSCALL_BIT
 + 520)

	)

313 
	#__NR_±¿û
 (
__X32_SYSCALL_BIT
 + 521)

	)

314 
	#__NR_¹_sig³ndšg
 (
__X32_SYSCALL_BIT
 + 522)

	)

315 
	#__NR_¹_sigtimedwa™
 (
__X32_SYSCALL_BIT
 + 523)

	)

316 
	#__NR_¹_sigqueuešfo
 (
__X32_SYSCALL_BIT
 + 524)

	)

317 
	#__NR_sig®t¡ack
 (
__X32_SYSCALL_BIT
 + 525)

	)

318 
	#__NR_tim”_ü—‹
 (
__X32_SYSCALL_BIT
 + 526)

	)

319 
	#__NR_mq_nÙify
 (
__X32_SYSCALL_BIT
 + 527)

	)

320 
	#__NR_kexec_lßd
 (
__X32_SYSCALL_BIT
 + 528)

	)

321 
	#__NR_wa™id
 (
__X32_SYSCALL_BIT
 + 529)

	)

322 
	#__NR_£t_robu¡_li¡
 (
__X32_SYSCALL_BIT
 + 530)

	)

323 
	#__NR_g‘_robu¡_li¡
 (
__X32_SYSCALL_BIT
 + 531)

	)

324 
	#__NR_vm¥liû
 (
__X32_SYSCALL_BIT
 + 532)

	)

325 
	#__NR_move_·ges
 (
__X32_SYSCALL_BIT
 + 533)

	)

326 
	#__NR_´—dv
 (
__X32_SYSCALL_BIT
 + 534)

	)

327 
	#__NR_pwr™ev
 (
__X32_SYSCALL_BIT
 + 535)

	)

328 
	#__NR_¹_tgsigqueuešfo
 (
__X32_SYSCALL_BIT
 + 536)

	)

329 
	#__NR_»cvmmsg
 (
__X32_SYSCALL_BIT
 + 537)

	)

330 
	#__NR_£ndmmsg
 (
__X32_SYSCALL_BIT
 + 538)

	)

331 
	#__NR_´oûss_vm_»adv
 (
__X32_SYSCALL_BIT
 + 539)

	)

332 
	#__NR_´oûss_vm_wr™ev
 (
__X32_SYSCALL_BIT
 + 540)

	)

333 
	#__NR_£tsockİt
 (
__X32_SYSCALL_BIT
 + 541)

	)

334 
	#__NR_g‘sockİt
 (
__X32_SYSCALL_BIT
 + 542)

	)

335 
	#__NR_io_£tup
 (
__X32_SYSCALL_BIT
 + 543)

	)

336 
	#__NR_io_subm™
 (
__X32_SYSCALL_BIT
 + 544)

	)

337 
	#__NR_execv—t
 (
__X32_SYSCALL_BIT
 + 545)

	)

338 
	#__NR_´—dv2
 (
__X32_SYSCALL_BIT
 + 546)

	)

339 
	#__NR_pwr™ev2
 (
__X32_SYSCALL_BIT
 + 547)

	)

	@/usr/include/bits/endianness.h

1 #iâdeà
_BITS_ENDIANNESS_H


2 
	#_BITS_ENDIANNESS_H
 1

	)

4 #iâdeà
_BITS_ENDIAN_H


9 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/floatn-common.h

20 #iâdeà
_BITS_FLOATN_COMMON_H


21 
	#_BITS_FLOATN_COMMON_H


	)

23 
	~<ã©u»s.h
>

24 
	~<b™s/lÚg-doubË.h
>

34 
	#__HAVE_FLOAT16
 0

	)

35 
	#__HAVE_FLOAT32
 1

	)

36 
	#__HAVE_FLOAT64
 1

	)

37 
	#__HAVE_FLOAT32X
 1

	)

38 
	#__HAVE_FLOAT128X
 0

	)

52 
	#__HAVE_DISTINCT_FLOAT16
 
__HAVE_FLOAT16


	)

53 
	#__HAVE_DISTINCT_FLOAT32
 0

	)

54 
	#__HAVE_DISTINCT_FLOAT64
 0

	)

55 
	#__HAVE_DISTINCT_FLOAT32X
 0

	)

56 
	#__HAVE_DISTINCT_FLOAT64X
 0

	)

57 
	#__HAVE_DISTINCT_FLOAT128X
 
__HAVE_FLOAT128X


	)

63 
	#__HAVE_FLOAT128_UNLIKE_LDBL
 (
__HAVE_DISTINCT_FLOAT128
 \

64 && 
__LDBL_MANT_DIG__
 !ğ113)

	)

69 #ià
__GNUC_PREREQ
 (7, 0è&& !
defšed
 
__ılu¥lus


70 
	#__HAVE_FLOATN_NOT_TYPEDEF
 1

	)

72 
	#__HAVE_FLOATN_NOT_TYPEDEF
 0

	)

75 #iâdeà
__ASSEMBLER__


80 #ià
__HAVE_FLOAT16


81 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


83 
	#__f16
(
x
è((
_Flßt16
èx##
f
)

	)

85 
	#__f16
(
x
èx##
f16


	)

89 #ià
__HAVE_FLOAT32


90 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


91 
	#__f32
(
x
èx##
f


	)

93 
	#__f32
(
x
èx##
f32


	)

97 #ià
__HAVE_FLOAT64


98 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


99 #ifdeà
__NO_LONG_DOUBLE_MATH


100 
	#__f64
(
x
èx##
l


	)

102 
	#__f64
(
x
è
	)
x

105 
	#__f64
(
x
èx##
f64


	)

109 #ià
__HAVE_FLOAT32X


110 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


111 
	#__f32x
(
x
è
	)
x

113 
	#__f32x
(
x
èx##
f32x


	)

117 #ià
__HAVE_FLOAT64X


118 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


119 #ià
__HAVE_FLOAT64X_LONG_DOUBLE


120 
	#__f64x
(
x
èx##
l


	)

122 
	#__f64x
(
x
è
	`__f128
 (x)

	)

125 
	#__f64x
(
x
èx##
f64x


	)

129 #ià
__HAVE_FLOAT128X


130 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


133 
	#__f128x
(
x
èx##
f128x


	)

138 #ià
__HAVE_FLOAT16


139 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


140 
_Com¶ex
 
	t__cæßt16
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HC__
)));

141 
	#__CFLOAT16
 
__cæßt16


	)

143 
	#__CFLOAT16
 
_Com¶ex
 
_Flßt16


	)

147 #ià
__HAVE_FLOAT32


148 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


149 
	#__CFLOAT32
 
_Com¶ex
 

	)

151 
	#__CFLOAT32
 
_Com¶ex
 
_Flßt32


	)

155 #ià
__HAVE_FLOAT64


156 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


157 #ifdeà
__NO_LONG_DOUBLE_MATH


158 
	#__CFLOAT64
 
_Com¶ex
 

	)

160 
	#__CFLOAT64
 
_Com¶ex
 

	)

163 
	#__CFLOAT64
 
_Com¶ex
 
_Flßt64


	)

167 #ià
__HAVE_FLOAT32X


168 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


169 
	#__CFLOAT32X
 
_Com¶ex
 

	)

171 
	#__CFLOAT32X
 
_Com¶ex
 
_Flßt32x


	)

175 #ià
__HAVE_FLOAT64X


176 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


177 #ià
__HAVE_FLOAT64X_LONG_DOUBLE


178 
	#__CFLOAT64X
 
_Com¶ex
 

	)

180 
	#__CFLOAT64X
 
__CFLOAT128


	)

183 
	#__CFLOAT64X
 
_Com¶ex
 
_Flßt64x


	)

187 #ià
__HAVE_FLOAT128X


188 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


191 
	#__CFLOAT128X
 
_Com¶ex
 
_Flßt128x


	)

196 #ià
__HAVE_FLOAT16


198 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


199 
	t_Flßt16
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HF__
)));

202 #ià!
__GNUC_PREREQ
 (7, 0)

203 
	#__butš_huge_v®f16
(è((
_Flßt16
è
	`__butš_huge_v®
 ())

	)

204 
	#__butš_šff16
(è((
_Flßt16
è
	`__butš_šf
 ())

	)

205 
	#__butš_Çnf16
(
x
è((
_Flßt16
è
	`__butš_Çn
 (x))

	)

206 
	#__butš_Çnsf16
(
x
è((
_Flßt16
è
	`__butš_Çns
 (x))

	)

211 #ià
__HAVE_FLOAT32


213 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


214 
	t_Flßt32
;

217 #ià!
__GNUC_PREREQ
 (7, 0)

218 
	#__butš_huge_v®f32
(è(
	`__butš_huge_v®f
 ())

	)

219 
	#__butš_šff32
(è(
	`__butš_šff
 ())

	)

220 
	#__butš_Çnf32
(
x
è(
	`__butš_Çnf
 (x))

	)

221 
	#__butš_Çnsf32
(
x
è(
	`__butš_Çnsf
 (x))

	)

226 #ià
__HAVE_FLOAT64


235 #ifdeà
__NO_LONG_DOUBLE_MATH


237 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


238 
	t_Flßt64
;

241 #ià!
__GNUC_PREREQ
 (7, 0)

242 
	#__butš_huge_v®f64
(è(
	`__butš_huge_v®l
 ())

	)

243 
	#__butš_šff64
(è(
	`__butš_šæ
 ())

	)

244 
	#__butš_Çnf64
(
x
è(
	`__butš_ÇÆ
 (x))

	)

245 
	#__butš_Çnsf64
(
x
è(
	`__butš_Çn¦
 (x))

	)

250 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


251 
	t_Flßt64
;

254 #ià!
__GNUC_PREREQ
 (7, 0)

255 
	#__butš_huge_v®f64
(è(
	`__butš_huge_v®
 ())

	)

256 
	#__butš_šff64
(è(
	`__butš_šf
 ())

	)

257 
	#__butš_Çnf64
(
x
è(
	`__butš_Çn
 (x))

	)

258 
	#__butš_Çnsf64
(
x
è(
	`__butš_Çns
 (x))

	)

265 #ià
__HAVE_FLOAT32X


267 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


268 
	t_Flßt32x
;

271 #ià!
__GNUC_PREREQ
 (7, 0)

272 
	#__butš_huge_v®f32x
(è(
	`__butš_huge_v®
 ())

	)

273 
	#__butš_šff32x
(è(
	`__butš_šf
 ())

	)

274 
	#__butš_Çnf32x
(
x
è(
	`__butš_Çn
 (x))

	)

275 
	#__butš_Çnsf32x
(
x
è(
	`__butš_Çns
 (x))

	)

280 #ià
__HAVE_FLOAT64X


282 #ià
__HAVE_FLOAT64X_LONG_DOUBLE


284 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


285 
	t_Flßt64x
;

288 #ià!
__GNUC_PREREQ
 (7, 0)

289 
	#__butš_huge_v®f64x
(è(
	`__butš_huge_v®l
 ())

	)

290 
	#__butš_šff64x
(è(
	`__butš_šæ
 ())

	)

291 
	#__butš_Çnf64x
(
x
è(
	`__butš_ÇÆ
 (x))

	)

292 
	#__butš_Çnsf64x
(
x
è(
	`__butš_Çn¦
 (x))

	)

297 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


298 
_Flßt128
 
	t_Flßt64x
;

301 #ià!
__GNUC_PREREQ
 (7, 0)

302 
	#__butš_huge_v®f64x
(è(
	`__butš_huge_v®f128
 ())

	)

303 
	#__butš_šff64x
(è(
	`__butš_šff128
 ())

	)

304 
	#__butš_Çnf64x
(
x
è(
	`__butš_Çnf128
 (x))

	)

305 
	#__butš_Çnsf64x
(
x
è(
	`__butš_Çnsf128
 (x))

	)

312 #ià
__HAVE_FLOAT128X


314 #ià!
__GNUC_PREREQ
 (7, 0è|| 
defšed
 
__ılu¥lus


318 #ià!
__GNUC_PREREQ
 (7, 0)

319 
	#__butš_huge_v®f128x
(è((
_Flßt128x
è
	`__butš_huge_v®
 ())

	)

320 
	#__butš_šff128x
(è((
_Flßt128x
è
	`__butš_šf
 ())

	)

321 
	#__butš_Çnf128x
(
x
è((
_Flßt128x
è
	`__butš_Çn
 (x))

	)

322 
	#__butš_Çnsf128x
(
x
è((
_Flßt128x
è
	`__butš_Çns
 (x))

	)

	@/usr/include/bits/posix1_lim.h

24 #iâdef 
_BITS_POSIX1_LIM_H


25 
	#_BITS_POSIX1_LIM_H
 1

	)

27 
	~<b™s/wÜdsize.h
>

32 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

35 
	#_POSIX_AIO_MAX
 1

	)

38 
	#_POSIX_ARG_MAX
 4096

	)

41 #ifdeà
__USE_XOPEN2K


42 
	#_POSIX_CHILD_MAX
 25

	)

44 
	#_POSIX_CHILD_MAX
 6

	)

48 
	#_POSIX_DELAYTIMER_MAX
 32

	)

52 
	#_POSIX_HOST_NAME_MAX
 255

	)

55 
	#_POSIX_LINK_MAX
 8

	)

58 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

61 
	#_POSIX_MAX_CANON
 255

	)

65 
	#_POSIX_MAX_INPUT
 255

	)

68 
	#_POSIX_MQ_OPEN_MAX
 8

	)

71 
	#_POSIX_MQ_PRIO_MAX
 32

	)

74 
	#_POSIX_NAME_MAX
 14

	)

77 #ifdeà
__USE_XOPEN2K


78 
	#_POSIX_NGROUPS_MAX
 8

	)

80 
	#_POSIX_NGROUPS_MAX
 0

	)

84 #ifdeà
__USE_XOPEN2K


85 
	#_POSIX_OPEN_MAX
 20

	)

87 
	#_POSIX_OPEN_MAX
 16

	)

90 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


93 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

97 
	#_POSIX_PATH_MAX
 256

	)

100 
	#_POSIX_PIPE_BUF
 512

	)

104 
	#_POSIX_RE_DUP_MAX
 255

	)

107 
	#_POSIX_RTSIG_MAX
 8

	)

110 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

113 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

116 
	#_POSIX_SIGQUEUE_MAX
 32

	)

119 
	#_POSIX_SSIZE_MAX
 32767

	)

122 
	#_POSIX_STREAM_MAX
 8

	)

125 
	#_POSIX_SYMLINK_MAX
 255

	)

129 
	#_POSIX_SYMLOOP_MAX
 8

	)

132 
	#_POSIX_TIMER_MAX
 32

	)

135 
	#_POSIX_TTY_NAME_MAX
 9

	)

138 #ifdeà
__USE_XOPEN2K


139 
	#_POSIX_TZNAME_MAX
 6

	)

141 
	#_POSIX_TZNAME_MAX
 3

	)

144 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


146 
	#_POSIX_QLIMIT
 1

	)

150 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

153 
	#_POSIX_UIO_MAXIOV
 16

	)

157 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

161 
	~<b™s/loÿl_lim.h
>

164 #iâdef 
SSIZE_MAX


168 #ià
__WORDSIZE
 =ğ64 || 
__WORDSIZE32_SIZE_ULONG


169 
	#SSIZE_MAX
 
LONG_MAX


	)

171 
	#SSIZE_MAX
 
INT_MAX


	)

179 #iâdef 
NGROUPS_MAX


180 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/posix2_lim.h

22 #iâdef 
_BITS_POSIX2_LIM_H


23 
	#_BITS_POSIX2_LIM_H
 1

	)

27 
	#_POSIX2_BC_BASE_MAX
 99

	)

30 
	#_POSIX2_BC_DIM_MAX
 2048

	)

33 
	#_POSIX2_BC_SCALE_MAX
 99

	)

36 
	#_POSIX2_BC_STRING_MAX
 1000

	)

40 
	#_POSIX2_COLL_WEIGHTS_MAX
 2

	)

44 
	#_POSIX2_EXPR_NEST_MAX
 32

	)

47 
	#_POSIX2_LINE_MAX
 2048

	)

51 
	#_POSIX2_RE_DUP_MAX
 255

	)

55 
	#_POSIX2_CHARCLASS_NAME_MAX
 14

	)

62 #iâdef 
BC_BASE_MAX


63 
	#BC_BASE_MAX
 
_POSIX2_BC_BASE_MAX


	)

65 #iâdef 
BC_DIM_MAX


66 
	#BC_DIM_MAX
 
_POSIX2_BC_DIM_MAX


	)

68 #iâdef 
BC_SCALE_MAX


69 
	#BC_SCALE_MAX
 
_POSIX2_BC_SCALE_MAX


	)

71 #iâdef 
BC_STRING_MAX


72 
	#BC_STRING_MAX
 
_POSIX2_BC_STRING_MAX


	)

74 #iâdef 
COLL_WEIGHTS_MAX


75 
	#COLL_WEIGHTS_MAX
 255

	)

77 #iâdef 
EXPR_NEST_MAX


78 
	#EXPR_NEST_MAX
 
_POSIX2_EXPR_NEST_MAX


	)

80 #iâdef 
LINE_MAX


81 
	#LINE_MAX
 
_POSIX2_LINE_MAX


	)

83 #iâdef 
CHARCLASS_NAME_MAX


84 
	#CHARCLASS_NAME_MAX
 2048

	)

88 
	#RE_DUP_MAX
 (0x7fff)

	)

	@/usr/include/bits/select.h

18 #iâdeà
_SYS_SELECT_H


22 
	~<b™s/wÜdsize.h
>

25 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

27 #ià
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "¡osq"

	)

30 
	#__FD_ZERO_STOS
 "¡o¦"

	)

33 
	#__FD_ZERO
(
fd¥
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¬r
 = (
£t
); \

52 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |ğ
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &ğ~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)è!ğ0)

	)

	@/usr/include/bits/select2.h

19 #iâdeà
_SYS_SELECT_H


24 
__fd–t_chk
 (
__d
);

25 
	$__fd–t_w¬n
 (
__d
)

26 
	`__w¬Ç‰r
 ("bit outside of fd_set selected");

27 #undeà
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__ex‹nsiÚ__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__butš_cÚ¡ªt_p
 (
__d
) \

32 ? (0 <ğ
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fd–t_w¬n
 (
__d
)) \

35 : 
	`__fd–t_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/strings_fortified.h

19 #iâdeà
__STRINGS_FORTIFIED


20 
	#__STRINGS_FORTIFIED
 1

	)

22 
__fÜtify_funùiÚ
 

23 
__NTH
 (
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__Ën
))

25 (è
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

26 
	}
}

28 
__fÜtify_funùiÚ
 

29 
__NTH
 (
	$bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

31 (è
	`__butš___mem£t_chk
 (
__de¡
, '\0', 
__Ën
, 
	`__bos0
 (__dest));

32 
	}
}

	@/usr/include/bits/thread-shared-types.h

19 #iâdeà
_THREAD_SHARED_TYPES_H


20 
	#_THREAD_SHARED_TYPES_H
 1

	)

44 
	~<b™s/±h»adty³s-¬ch.h
>

49 
	s__±h»ad_š‹º®_li¡


51 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

52 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

53 } 
	t__±h»ad_li¡_t
;

55 
	s__±h»ad_š‹º®_¦i¡


57 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

58 } 
	t__±h»ad_¦i¡_t
;

74 
	~<b™s/¡ruù_mu‹x.h
>

87 
	~<b™s/¡ruù_rwlock.h
>

92 
	s__±h»ad_cÚd_s


94 
__ex‹nsiÚ__
 union

96 
__ex‹nsiÚ__
 
	m__w£q
;

99 
	m__low
;

100 
	m__high
;

101 } 
	m__w£q32
;

103 
__ex‹nsiÚ__
 union

105 
__ex‹nsiÚ__
 
	m__g1_¡¬t
;

108 
	m__low
;

109 
	m__high
;

110 } 
	m__g1_¡¬t32
;

112 
	m__g_»fs
[2] 
	m__LOCK_ALIGNMENT
;

113 
	m__g_size
[2];

114 
	m__g1_Üig_size
;

115 
	m__w»fs
;

116 
	m__g_sigÇls
[2];

	@/usr/include/bits/time.h

23 #iâdeà
_BITS_TIME_H


24 
	#_BITS_TIME_H
 1

	)

26 
	~<b™s/ty³s.h
>

34 
	#CLOCKS_PER_SEC
 ((
__şock_t
è1000000)

	)

36 #ià(!
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_POSIX
) \

37 && !
defšed
 
__USE_XOPEN2K


40 
__syscÚf
 ();

41 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

44 #ifdeà
__USE_POSIX199309


46 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

50 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

52 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

54 
	#CLOCK_MONOTONIC_RAW
 4

	)

56 
	#CLOCK_REALTIME_COARSE
 5

	)

58 
	#CLOCK_MONOTONIC_COARSE
 6

	)

60 
	#CLOCK_BOOTTIME
 7

	)

62 
	#CLOCK_REALTIME_ALARM
 8

	)

64 
	#CLOCK_BOOTTIME_ALARM
 9

	)

66 
	#CLOCK_TAI
 11

	)

69 
	#TIMER_ABSTIME
 1

	)

72 #ifdeà
__USE_GNU


73 
	~<b™s/timex.h
>

75 
__BEGIN_DECLS


78 
	$şock_adjtime
 (
__şockid_t
 
__şock_id
, 
timex
 *
__utx
è
__THROW
;

80 
__END_DECLS


	@/usr/include/bits/time64.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TIME64_H


24 
	#_BITS_TIME64_H
 1

	)

28 #ià
__TIMESIZE
 == 64

30 
	#__TIME64_T_TYPE
 
__TIME_T_TYPE


	)

33 
	#__TIME64_T_TYPE
 
__SQUAD_TYPE


	)

	@/usr/include/bits/timesize.h

19 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


21 
	#__TIMESIZE
 64

	)

24 
	#__TIMESIZE
 
__WORDSIZE


	)

	@/usr/include/bits/types/__locale_t.h

20 #iâdeà
_BITS_TYPES___LOCALE_T_H


21 
	#_BITS_TYPES___LOCALE_T_H
 1

	)

28 
	s__loÿË_¡ruù


31 
__loÿË_d©a
 *
	m__loÿËs
[13];

34 cÚ¡ *
	m__ùy³_b
;

35 cÚ¡ *
	m__ùy³_tŞow”
;

36 cÚ¡ *
	m__ùy³_touµ”
;

39 cÚ¡ *
	m__Çmes
[13];

42 
__loÿË_¡ruù
 *
	t__loÿË_t
;

	@/usr/include/bits/types/__mbstate_t.h

1 #iâdeà
____mb¡©e_t_defšed


2 
	#____mb¡©e_t_defšed
 1

	)

8 #iâdeà
__WINT_TYPE__


9 
	#__WINT_TYPE__
 

	)

15 
	m__couÁ
;

18 
__WINT_TYPE__
 
	m__wch
;

19 
	m__wchb
[4];

20 } 
	m__v®ue
;

21 } 
	t__mb¡©e_t
;

	@/usr/include/bits/types/sigset_t.h

1 #iâdeà
__sig£t_t_defšed


2 
	#__sig£t_t_defšed
 1

	)

4 
	~<b™s/ty³s/__sig£t_t.h
>

7 
__sig£t_t
 
	tsig£t_t
;

	@/usr/include/bits/types/struct_itimerspec.h

1 #iâdeà
__™im”¥ec_defšed


2 
	#__™im”¥ec_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

5 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

8 
	s™im”¥ec


10 
time¥ec
 
	m™_š‹rv®
;

11 
time¥ec
 
	m™_v®ue
;

	@/usr/include/bits/types/struct_sched_param.h

19 #iâdeà
_BITS_TYPES_STRUCT_SCHED_PARAM


20 
	#_BITS_TYPES_STRUCT_SCHED_PARAM
 1

	)

23 
	ssched_·¿m


25 
	msched_´iÜ™y
;

	@/usr/include/bits/types/struct_timeval.h

1 #iâdeà
__timev®_defšed


2 
	#__timev®_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

8 
	stimev®


10 
__time_t
 
	mtv_£c
;

11 
__su£cÚds_t
 
	mtv_u£c
;

	@/usr/include/bits/types/struct_tm.h

1 #iâdeà
__¡ruù_tm_defšed


2 
	#__¡ruù_tm_defšed
 1

	)

4 
	~<b™s/ty³s.h
>

7 
	stm


9 
	mtm_£c
;

10 
	mtm_mš
;

11 
	mtm_hour
;

12 
	mtm_mday
;

13 
	mtm_mÚ
;

14 
	mtm_y—r
;

15 
	mtm_wday
;

16 
	mtm_yday
;

17 
	mtm_isd¡
;

19 #ifdef 
__USE_MISC


20 
	mtm_gmtoff
;

21 cÚ¡ *
	mtm_zÚe
;

23 
	m__tm_gmtoff
;

24 cÚ¡ *
	m__tm_zÚe
;

	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

74 
	#__CPU_MASK_TYPE
 
__SYSCALL_ULONG_TYPE


	)

76 #ifdeà
__x86_64__


80 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

83 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__RLIM_T_MATCHES_RLIM64_T
 1

	)

89 
	#__STATFS_MATCHES_STATFS64
 1

	)

91 
	#__RLIM_T_MATCHES_RLIM64_T
 0

	)

93 
	#__STATFS_MATCHES_STATFS64
 0

	)

97 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/xopen_lim.h

29 #iâdeà
_XOPEN_LIM_H


30 
	#_XOPEN_LIM_H
 1

	)

62 
	#_XOPEN_IOV_MAX
 
_POSIX_UIO_MAXIOV


	)

64 
	~<b™s/uio_lim.h
>

65 #ifdeà
__IOV_MAX


66 
	#IOV_MAX
 
__IOV_MAX


	)

68 #undeà
IOV_MAX


73 
	#NL_ARGMAX
 
_POSIX_ARG_MAX


	)

76 
	#NL_LANGMAX
 
_POSIX2_LINE_MAX


	)

79 
	#NL_MSGMAX
 
INT_MAX


	)

83 #ià
defšed
 
__USE_GNU
 || !defšed 
__USE_XOPEN2K8


84 
	#NL_NMAX
 
INT_MAX


	)

88 
	#NL_SETMAX
 
INT_MAX


	)

91 
	#NL_TEXTMAX
 
INT_MAX


	)

94 
	#NZERO
 20

	)

98 #ifdeà
INT_MAX


99 #ià
INT_MAX
 == 32767

100 
	#WORD_BIT
 16

	)

102 #ià
INT_MAX
 == 2147483647

103 
	#WORD_BIT
 32

	)

106 
	#WORD_BIT
 64

	)

109 #–ià
defšed
 
__INT_MAX__


110 #ià
__INT_MAX__
 == 32767

111 
	#WORD_BIT
 16

	)

113 #ià
__INT_MAX__
 == 2147483647

114 
	#WORD_BIT
 32

	)

117 
	#WORD_BIT
 64

	)

121 
	#WORD_BIT
 32

	)

125 #ifdeà
LONG_MAX


126 #ià
LONG_MAX
 == 2147483647

127 
	#LONG_BIT
 32

	)

130 
	#LONG_BIT
 64

	)

132 #–ià
defšed
 
__LONG_MAX__


133 #ià
__LONG_MAX__
 == 2147483647

134 
	#LONG_BIT
 32

	)

137 
	#LONG_BIT
 64

	)

140 
	~<b™s/wÜdsize.h
>

141 #ià
__WORDSIZE
 == 64

142 
	#LONG_BIT
 64

	)

144 
	#LONG_BIT
 32

	)

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/inttypes.h

22 #iâdeà
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<¡dšt.h
>

30 #iâdeà
____gwch¬_t_defšed


31 #ifdeà
__ılu¥lus


32 
	#__gwch¬_t
 
wch¬_t


	)

33 #–ià
defšed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

36 
	#__Ãed_wch¬_t


	)

37 
	~<¡ddef.h
>

38 
wch¬_t
 
	t__gwch¬_t
;

40 
	#____gwch¬_t_defšed
 1

	)

43 #ià
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Î"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #ià
__WORDSIZE
 == 64

273 
	mquÙ
;

274 
	m»m
;

275 } 
	timaxdiv_t
;

282 
__ex‹nsiÚ__
 
	mquÙ
;

283 
__ex‹nsiÚ__
 
	m»m
;

284 } 
	timaxdiv_t
;

290 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

294 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

297 
štmax_t
 
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

298 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

301 
uštmax_t
 
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

302 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

305 
štmax_t
 
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

306 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

307 
__THROW
;

310 
uštmax_t
 
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

311 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

312 
__THROW
;

314 #ifdeà
__USE_EXTERN_INLINES


316 #ià
__WORDSIZE
 == 64

318 
	$__¡¹Ş_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

319 **
__»¡riù
 
__’d±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

323 
__ex‹º_šlše
 
štmax_t


324 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

325 
ba£
))

327  
	`__¡¹Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

328 
	}
}

330 
	$__¡¹oul_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 ** 
__»¡riù
 
__’d±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

335 
__ex‹º_šlše
 
uštmax_t


336 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

337 
ba£
))

339  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc¡Ş_š‹º®
 (cÚ¡ 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

343 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

347 
__ex‹º_šlše
 
štmax_t


348 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

349 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

351  
	`__wc¡Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc¡oul_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

355 
__»¡riù
 
__ÅŒ
,

356 
__gwch¬_t
 **

357 
__»¡riù
 
__’d±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

361 
__ex‹º_šlše
 
uštmax_t


362 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

363 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

365  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

366 
	}
}

370 
__ex‹nsiÚ__


371 
	$__¡¹Şl_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

372 **
__»¡riù
 
__’d±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

376 
__ex‹º_šlše
 
štmax_t


377 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

378 
ba£
))

380  
	`__¡¹Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

381 
	}
}

383 
__ex‹nsiÚ__


384 
	$__¡¹ouÎ_š‹º®
 (const *

385 
__»¡riù
 
__ÅŒ
,

387 
__»¡riù
 
__’d±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

392 
__ex‹º_šlše
 
uštmax_t


393 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

394 
ba£
))

396  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

397 
	}
}

399 
__ex‹nsiÚ__


400 
	$__wc¡Şl_š‹º®
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

401 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

405 
__ex‹º_šlše
 
štmax_t


406 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

407 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

409  
	`__wc¡Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

410 
	}
}

413 
__ex‹nsiÚ__


414 
	$__wc¡ouÎ_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

415 
__»¡riù
 
__ÅŒ
,

416 
__gwch¬_t
 **

417 
__»¡riù
 
__’d±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

422 
__ex‹º_šlše
 
uštmax_t


423 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

424 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

426  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

58 
	#__STDC_ISO_10646__
 201706L

	)

	@/usr/include/sys/cdefs.h

18 #iâdef 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #iâdeà
_FEATURES_H


23 
	~<ã©u»s.h
>

29 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


34 #undeà
__P


35 #undeà
__PMT


37 #ifdeà
__GNUC__


41 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


42 
	#__LEAF
 , 
__Ëaf__


	)

43 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

57 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

58 
	#__NTHNL
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
)è
	)
fct

60 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

61 
	#__THROW
 
	`throw
 ()

	)

62 
	#__THROWNL
 
	`throw
 ()

	)

63 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

64 
	#__NTHNL
(
fù
èfù 
	`throw
 ()

	)

66 
	#__THROW


	)

67 
	#__THROWNL


	)

68 
	#__NTH
(
fù
è
	)
fct

69 
	#__NTHNL
(
fù
è
	)
fct

75 #ià(
defšed
 
__ılu¥lus
 \

76 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

77 
	#__šlše
 
šlše


	)

79 
	#__šlše


	)

82 
	#__THROW


	)

83 
	#__THROWNL


	)

84 
	#__NTH
(
fù
è
	)
fct

91 #ià
defšed
 
__şªg__
 && defšed 
__has_ex‹nsiÚ


92 
	#__glibc_şªg_has_ex‹nsiÚ
(
ext
è
	`__has_ex‹nsiÚ
 (ext)

	)

94 
	#__glibc_şªg_has_ex‹nsiÚ
(
ext
è0

	)

99 
	#__P
(
¬gs
è
	)
args

100 
	#__PMT
(
¬gs
è
	)
args

105 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

106 
	#__STRING
(
x
è#x

	)

109 
	#__±r_t
 *

	)

113 #ifdef 
__ılu¥lus


114 
	#__BEGIN_DECLS
 "C" {

	)

115 
	#__END_DECLS
 }

	)

117 
	#__BEGIN_DECLS


	)

118 
	#__END_DECLS


	)

123 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

124 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

126 #ià
__GNUC_PREREQ
 (4,3)

127 
	#__w¬ndeş
(
Çme
, 
msg
) \

128 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

129 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

130 
	#__”rÜdeş
(
Çme
, 
msg
) \

131 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

133 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

134 
	#__w¬Ç‰r
(
msg
)

	)

135 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

142 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

143 
	#__æex¬r
 []

	)

144 
	#__glibc_c99_æex¬r_avaabË
 1

	)

145 #–ià
__GNUC_PREREQ
 (2,97)

148 
	#__æex¬r
 []

	)

149 
	#__glibc_c99_æex¬r_avaabË
 1

	)

150 #–ià
defšed
 
__GNUC__


153 
	#__æex¬r
 [0]

	)

154 
	#__glibc_c99_æex¬r_avaabË
 1

	)

157 
	#__æex¬r
 [1]

	)

158 
	#__glibc_c99_æex¬r_avaabË
 0

	)

172 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

174 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

175 #ifdeà
__ılu¥lus


176 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

177 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

179 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

181 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

182 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

183 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

184 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

186 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

187 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

200 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

201 
	#__©Œibu‹__
(
xyz
è

	)

207 #ià
__GNUC_PREREQ
 (2,96)

208 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

210 
	#__©Œibu‹_m®loc__


	)

215 #ià
__GNUC_PREREQ
 (4, 3)

216 
	#__©Œibu‹_®loc_size__
(
·¿ms
) \

217 
	`__©Œibu‹__
 ((
__®loc_size__
 
·¿ms
))

	)

219 
	#__©Œibu‹_®loc_size__
(
·¿ms
è

	)

225 #ià
__GNUC_PREREQ
 (2,96)

226 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

228 
	#__©Œibu‹_pu»__


	)

232 #ià
__GNUC_PREREQ
 (2,5)

233 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

235 
	#__©Œibu‹_cÚ¡__


	)

241 #ià
__GNUC_PREREQ
 (3,1)

242 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

243 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

245 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

246 
	#__©Œibu‹_nošlše__


	)

250 #ià
__GNUC_PREREQ
 (3,2)

251 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

253 
	#__©Œibu‹_d•»ÿ‹d__


	)

259 #ià
__GNUC_PREREQ
 (4,5) \

260 || 
	$__glibc_şªg_has_ex‹nsiÚ
 (
__©Œibu‹_d•»ÿ‹d_w™h_mes§ge__
)

261 
	#__©Œibu‹_d•»ÿ‹d_msg__
(
msg
) \

262 
	`__©Œibu‹__
 ((
	`__d•»ÿ‹d__
 (
msg
)))

	)

264 
	#__©Œibu‹_d•»ÿ‹d_msg__
(
msg
è
__©Œibu‹_d•»ÿ‹d__


	)

273 #ià
	`__GNUC_PREREQ
 (2,8)

274 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

276 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

283 #ià
	`__GNUC_PREREQ
 (2,97)

284 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

285 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

287 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

292 #ià
	`__GNUC_PREREQ
 (3,3)

293 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

295 
	#__nÚnuÎ
(
·¿ms
)

	)

300 #ià
	`__GNUC_PREREQ
 (3,4)

301 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

302 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

303 #ià
__USE_FORTIFY_LEVEL
 > 0

304 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

307 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

309 #iâdeà
__wur


310 
	#__wur


	)

314 #ià
	`__GNUC_PREREQ
 (3,2)

318 #undeà
__®ways_šlše


319 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

321 #undeà
__®ways_šlše


322 
	#__®ways_šlše
 
__šlše


	)

327 #ià
	`__GNUC_PREREQ
 (4,3)

328 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

330 
	#__©Œibu‹_¬tificŸl__


	)

342 #ià(!
defšed
 
__ılu¥lus
 || 
	`__GNUC_PREREQ
 (4,3) \

343 || (
defšed
 
__şªg__
 && (defšed 
__GNUC_STDC_INLINE__
 \

344 || 
defšed
 
__GNUC_GNU_INLINE__
)))

345 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


346 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

347 
	#__ex‹º_®ways_šlše
 \

348 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

350 
	#__ex‹º_šlše
 
__šlše


	)

351 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

355 #ifdeà
__ex‹º_®ways_šlše


356 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

361 #ià
	`__GNUC_PREREQ
 (4,3)

362 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

363 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

370 #ià!
	`__GNUC_PREREQ
 (2,8)

371 
	#__ex‹nsiÚ__


	)

375 #ià!
	`__GNUC_PREREQ
 (2,92)

376 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

377 
	#__»¡riù
 
»¡riù


	)

379 
	#__»¡riù


	)

386 #ià
	`__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


387 
	#__»¡riù_¬r
 
__»¡riù


	)

389 #ifdeà
__GNUC__


390 
	#__»¡riù_¬r


	)

392 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

393 
	#__»¡riù_¬r
 
»¡riù


	)

396 
	#__»¡riù_¬r


	)

401 #ià
__GNUC__
 >= 3

402 
	#__glibc_uÆik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 0)

	)

403 
	#__glibc_lik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 1)

	)

405 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

406 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

409 #ifdeà
__has_©Œibu‹


410 
	#__glibc_has_©Œibu‹
(
©Œ
è
	`__has_©Œibu‹
 (©Œ)

	)

412 
	#__glibc_has_©Œibu‹
(
©Œ
è0

	)

415 #ià(!
defšed
 
_NÜ‘uº
 \

416 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

417 && !
	$__GNUC_PREREQ
 (4,7))

418 #ià
	`__GNUC_PREREQ
 (2,8)

419 
	#_NÜ‘uº
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

	)

421 
	#_NÜ‘uº


	)

425 #ià
	`__GNUC_PREREQ
 (8, 0)

429 
	#__©Œibu‹_nÚ¡ršg__
 
	`__©Œibu‹__
 ((
__nÚ¡ršg__
))

	)

431 
	#__©Œibu‹_nÚ¡ršg__


	)

435 #undeà
__©Œibu‹_cİy__


436 #ià
	`__GNUC_PREREQ
 (9, 0)

439 
	#__©Œibu‹_cİy__
(
¬g
è
	`__©Œibu‹__
 ((
	`__cİy__
 (¬g)))

	)

441 
	#__©Œibu‹_cİy__
(
¬g
)

	)

444 #ià(!
defšed
 
_Stic_as£¹
 && !defšed 
__ılu¥lus
 \

445 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

446 && (!
	`__GNUC_PREREQ
 (4, 6è|| 
defšed
 
__STRICT_ANSI__
))

447 
	#_Stic_as£¹
(
ex´
, 
dŸgno¡ic
) \

448 (*
	`__Stic_as£¹_funùiÚ
 ()) \

449 [!! (¡ruù { 
__”rÜ_if_Ãg©ive
: (
ex´
è? 2 : -1; })]

	)

452 
	~<b™s/wÜdsize.h
>

453 
	~<b™s/lÚg-doubË.h
>

455 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


456 
	#__LDBL_COMPAT
 1

	)

457 #ifdeà
__REDIRECT


458 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

459 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

460 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

461 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

462 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

463 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

464 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

465 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

466 
	#__LDBL_REDIR_DECL
(
Çme
) \

467 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

468 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

469 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

470 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

471 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

474 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


475 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

476 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

477 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

478 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

479 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

480 #ifdeà
__REDIRECT


481 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

482 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

483 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

492 #ià
	`__GNUC_PREREQ
 (4,8è|| 
	`__glibc_şªg_´”eq
 (3,5)

493 
	#__glibc_maüo_w¬nšg1
(
mes§ge
è
	`_P¿gma
 (#mes§ge)

	)

494 
	#__glibc_maüo_w¬nšg
(
mes§ge
) \

495 
	`__glibc_maüo_w¬nšg1
 (
GCC
 
w¬nšg
 
mes§ge
)

	)

497 
	#__glibc_maüo_w¬nšg
(
msg
)

	)

507 #ià!
defšed
 
__ılu¥lus
 \

508 && (
	`__GNUC_PREREQ
 (4, 9) \

509 || 
	`__glibc_şªg_has_ex‹nsiÚ
 (
c_g’”ic_£ËùiÚs
) \

510 || (!
defšed
 
__GNUC__
 && defšed 
__STDC_VERSION__
 \

511 && 
__STDC_VERSION__
 >= 201112L))

512 
	#__HAVE_GENERIC_SELECTION
 1

	)

514 
	#__HAVE_GENERIC_SELECTION
 0

	)

	@/usr/include/bits/local_lim.h

24 #iâdeà
NR_OPEN


25 
	#__undef_NR_OPEN


	)

27 #iâdeà
LINK_MAX


28 
	#__undef_LINK_MAX


	)

30 #iâdeà
OPEN_MAX


31 
	#__undef_OPEN_MAX


	)

33 #iâdeà
ARG_MAX


34 
	#__undef_ARG_MAX


	)

38 
	~<lšux/lim™s.h
>

41 #ifdeà
__undef_NR_OPEN


42 #undeà
NR_OPEN


43 #undeà
__undef_NR_OPEN


46 #ifdeà
__undef_LINK_MAX


47 #undeà
LINK_MAX


48 #undeà
__undef_LINK_MAX


51 #ifdeà
__undef_OPEN_MAX


52 #undeà
OPEN_MAX


53 #undeà
__undef_OPEN_MAX


56 #ifdeà
__undef_ARG_MAX


57 #undeà
ARG_MAX


58 #undeà
__undef_ARG_MAX


62 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

64 
	#PTHREAD_KEYS_MAX
 1024

	)

67 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

69 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

72 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

74 #undeà
PTHREAD_THREADS_MAX


78 
	#AIO_PRIO_DELTA_MAX
 20

	)

81 
	#PTHREAD_STACK_MIN
 16384

	)

84 
	#DELAYTIMER_MAX
 2147483647

	)

87 
	#TTY_NAME_MAX
 32

	)

90 
	#LOGIN_NAME_MAX
 256

	)

93 
	#HOST_NAME_MAX
 64

	)

96 
	#MQ_PRIO_MAX
 32768

	)

99 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/long-double.h

21 
	#__LONG_DOUBLE_USES_FLOAT128
 0

	)

	@/usr/include/bits/pthreadtypes-arch.h

18 #iâdeà
_BITS_PTHREADTYPES_ARCH_H


19 
	#_BITS_PTHREADTYPES_ARCH_H
 1

	)

21 
	~<b™s/wÜdsize.h
>

23 #ifdeà
__x86_64__


24 #ià
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

26 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

27 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

28 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

30 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

31 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

32 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

33 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

37 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

38 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

39 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

41 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

42 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

43 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

44 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

45 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

47 
	#__LOCK_ALIGNMENT


	)

48 
	#__ONCE_ALIGNMENT


	)

50 #iâdeà
__x86_64__


52 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/struct_mutex.h

19 #iâdeà
_THREAD_MUTEX_INTERNAL_H


20 
	#_THREAD_MUTEX_INTERNAL_H
 1

	)

22 
	s__±h»ad_mu‹x_s


24 
	m__lock
;

25 
	m__couÁ
;

26 
	m__owÃr
;

27 #ifdeà
__x86_64__


28 
	m__nu£rs
;

32 
	m__kšd
;

33 #ifdeà
__x86_64__


34 
	m__¥šs
;

35 
	m__–isiÚ
;

36 
__±h»ad_li¡_t
 
	m__li¡
;

37 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

39 
	m__nu£rs
;

40 
__ex‹nsiÚ__
 union

44 
	m__e¥šs
;

45 
	m__“lisiÚ
;

46 
	#__¥šs
 
__–isiÚ_d©a
.
__e¥šs


	)

47 
	#__–isiÚ
 
__–isiÚ_d©a
.
__“lisiÚ


	)

48 } 
	m__–isiÚ_d©a
;

49 
__±h»ad_¦i¡_t
 
	m__li¡
;

51 
	#__PTHREAD_MUTEX_HAVE_PREV
 0

	)

55 #ifdeà
__x86_64__


56 
	#__PTHREAD_MUTEX_INITIALIZER
(
__kšd
) \

57 0, 0, 0, 0, 
__kšd
, 0, 0, { 0, 0 }

	)

59 
	#__PTHREAD_MUTEX_INITIALIZER
(
__kšd
) \

60 0, 0, 0, 
__kšd
, 0, { { 0, 0 } }

	)

	@/usr/include/bits/struct_rwlock.h

20 #iâdeà
_RWLOCK_INTERNAL_H


21 
	#_RWLOCK_INTERNAL_H


	)

23 
	s__±h»ad_rwlock_¬ch_t


25 
	m__»ad”s
;

26 
	m__wr™”s
;

27 
	m__w½ha£_fu‹x
;

28 
	m__wr™”s_fu‹x
;

29 
	m__·d3
;

30 
	m__·d4
;

31 #ifdeà
__x86_64__


32 
	m__cur_wr™”
;

33 
	m__sh¬ed
;

34 sigÃd 
	m__rw–isiÚ
;

35 #ifdeà 
__ILP32__


36 
	m__·d1
[3];

37 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0 }

	)

39 
	m__·d1
[7];

40 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0, 0, 0, 0, 0 }

	)

42 
	m__·d2
;

45 
	m__æags
;

49 
	m__æags
;

50 
	m__sh¬ed
;

51 sigÃd 
	m__rw–isiÚ
;

52 
	m__·d2
;

53 
	m__cur_wr™”
;

57 #ifdeà
__x86_64__


58 
	#__PTHREAD_RWLOCK_INITIALIZER
(
__æags
) \

59 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 
__æags


	)

61 
	#__PTHREAD_RWLOCK_INITIALIZER
(
__æags
) \

62 0, 0, 0, 0, 0, 0, 
__æags
, 0, 0, 0, 0

	)

	@/usr/include/bits/timex.h

18 #iâdef 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<b™s/ty³s.h
>

22 
	~<b™s/ty³s/¡ruù_timev®.h
>

26 
	stimex


28 
	mmodes
;

29 
__sysÿÎ_¦Úg_t
 
	moff£t
;

30 
__sysÿÎ_¦Úg_t
 
	mäeq
;

31 
__sysÿÎ_¦Úg_t
 
	mmax”rÜ
;

32 
__sysÿÎ_¦Úg_t
 
	me¡”rÜ
;

33 
	m¡©us
;

34 
__sysÿÎ_¦Úg_t
 
	mcÚ¡ªt
;

35 
__sysÿÎ_¦Úg_t
 
	m´ecisiÚ
;

36 
__sysÿÎ_¦Úg_t
 
	mtŞ”ªû
;

37 
timev®
 
	mtime
;

38 
__sysÿÎ_¦Úg_t
 
	mtick
;

39 
__sysÿÎ_¦Úg_t
 
	mµsäeq
;

40 
__sysÿÎ_¦Úg_t
 
	mj™‹r
;

41 
	mshiá
;

42 
__sysÿÎ_¦Úg_t
 
	m¡ab
;

43 
__sysÿÎ_¦Úg_t
 
	mj™út
;

44 
__sysÿÎ_¦Úg_t
 
	mÿlút
;

45 
__sysÿÎ_¦Úg_t
 
	m”rút
;

46 
__sysÿÎ_¦Úg_t
 
	m¡bút
;

48 
	mi
;

57 
	#ADJ_OFFSET
 0x0001

	)

58 
	#ADJ_FREQUENCY
 0x0002

	)

59 
	#ADJ_MAXERROR
 0x0004

	)

60 
	#ADJ_ESTERROR
 0x0008

	)

61 
	#ADJ_STATUS
 0x0010

	)

62 
	#ADJ_TIMECONST
 0x0020

	)

63 
	#ADJ_TAI
 0x0080

	)

64 
	#ADJ_SETOFFSET
 0x0100

	)

65 
	#ADJ_MICRO
 0x1000

	)

66 
	#ADJ_NANO
 0x2000

	)

67 
	#ADJ_TICK
 0x4000

	)

68 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

69 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

72 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

73 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

74 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

75 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

76 
	#MOD_STATUS
 
ADJ_STATUS


	)

77 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

78 
	#MOD_CLKB
 
ADJ_TICK


	)

79 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

80 
	#MOD_TAI
 
ADJ_TAI


	)

81 
	#MOD_MICRO
 
ADJ_MICRO


	)

82 
	#MOD_NANO
 
ADJ_NANO


	)

86 
	#STA_PLL
 0x0001

	)

87 
	#STA_PPSFREQ
 0x0002

	)

88 
	#STA_PPSTIME
 0x0004

	)

89 
	#STA_FLL
 0x0008

	)

91 
	#STA_INS
 0x0010

	)

92 
	#STA_DEL
 0x0020

	)

93 
	#STA_UNSYNC
 0x0040

	)

94 
	#STA_FREQHOLD
 0x0080

	)

96 
	#STA_PPSSIGNAL
 0x0100

	)

97 
	#STA_PPSJITTER
 0x0200

	)

98 
	#STA_PPSWANDER
 0x0400

	)

99 
	#STA_PPSERROR
 0x0800

	)

101 
	#STA_CLOCKERR
 0x1000

	)

102 
	#STA_NANO
 0x2000

	)

103 
	#STA_MODE
 0x4000

	)

104 
	#STA_CLK
 0x8000

	)

107 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 \

108 | 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/bits/types/__sigset_t.h

1 #iâdeà
____sig£t_t_defšed


2 
	#____sig£t_t_defšed


	)

4 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

7 
	m__v®
[
_SIGSET_NWORDS
];

8 } 
	t__sig£t_t
;

	@/usr/include/bits/uio_lim.h

19 #iâdeà
_BITS_UIO_LIM_H


20 
	#_BITS_UIO_LIM_H
 1

	)

30 
	#__IOV_MAX
 1024

	)

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_chæags


	)

11 
	#__¡ub_fchæags


	)

12 
	#__¡ub_g‰y


	)

13 
	#__¡ub_lchmod


	)

14 
	#__¡ub_»voke


	)

15 
	#__¡ub_£ogš


	)

16 
	#__¡ub_sig»tuº


	)

17 
	#__¡ub_s¡k


	)

18 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___com·t_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_fchæags


	)

13 
	#__¡ub_g‰y


	)

14 
	#__¡ub_lchmod


	)

15 
	#__¡ub_»voke


	)

16 
	#__¡ub_£ogš


	)

17 
	#__¡ub_sig»tuº


	)

18 
	#__¡ub_s¡k


	)

19 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-x32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___com·t_bdæush


	)

11 
	#__¡ub___com·t_ü—‹_moduË


	)

12 
	#__¡ub___com·t_g‘_k”Ãl_syms


	)

13 
	#__¡ub___com·t_nfs£rvùl


	)

14 
	#__¡ub___com·t_qu”y_moduË


	)

15 
	#__¡ub___com·t_u£lib


	)

16 
	#__¡ub_chæags


	)

17 
	#__¡ub_fchæags


	)

18 
	#__¡ub_g‰y


	)

19 
	#__¡ub_lchmod


	)

20 
	#__¡ub_»voke


	)

21 
	#__¡ub_£ogš


	)

22 
	#__¡ub_sig»tuº


	)

23 
	#__¡ub_s¡k


	)

24 
	#__¡ub_¡ty


	)

	@/usr/include/linux/limits.h

2 #iâdeà
_LINUX_LIMITS_H


3 
	#_LINUX_LIMITS_H


	)

5 
	#NR_OPEN
 1024

	)

7 
	#NGROUPS_MAX
 65536

	)

8 
	#ARG_MAX
 131072

	)

9 
	#LINK_MAX
 127

	)

10 
	#MAX_CANON
 255

	)

11 
	#MAX_INPUT
 255

	)

12 
	#NAME_MAX
 255

	)

13 
	#PATH_MAX
 4096

	)

14 
	#PIPE_BUF
 4096

	)

15 
	#XATTR_NAME_MAX
 255

	)

16 
	#XATTR_SIZE_MAX
 65536

	)

17 
	#XATTR_LIST_MAX
 65536

	)

19 
	#RTSIG_MAX
 32

	)

	@
1
.
1
/usr/include
194
4888
common.h
core/buffered_pmem_log.h
core/double_hashing_cache.h
core/fixed_length_string_key.h
core/integer_key.h
core/linear_probing_hashtable_cache.h
core/log.cc
core/log.h
core/log_buffer.cc
core/log_buffer.h
core/log_writer.h
core/lru_skiplist.h
core/pmem_blob.h
core/pmem_db.h
core/pmem_log.h
core/pmem_log_writer.cc
core/pmem_log_writer.h
core/pmem_ptr.h
core/pmem_wal_writer.h
core/skiplist_cache.h
core/skiplist_cache_test.cc
core/static_hashtable_cache.h
db_client.h
db_client_group_logging.h
db_client_test.cc
env.h
index/braided_pmem_skiplist.h
index/braided_pmem_skiplist_test.cc
index/index.h
index/lockfree_pskiplist_brdb.cc
index/lockfree_pskiplist_brdb.h
index/lockfree_skiplist.h
index/simple_hash_table.h
index/skiplist_single_thread.h
lib/arena.h
lib/hash.h
lib/memory.h
lib/murmur3.cc
lib/murmur3.h
lib/numa.h
lib/numa_test.cc
lib/sha1.cc
lib/sha1.h
lib/singleton.h
lib/string_key.h
listdb.cc
listdb.h
lsm/dram_layered_pmemtable.h
lsm/level.cc
lsm/level.h
lsm/level_list.cc
lsm/level_list.h
lsm/memtable.h
lsm/memtable_list.h
lsm/pmemtable.h
lsm/pmemtable_list.h
lsm/table.cc
lsm/table.h
lsm/table_list.h
lsm/table_list_test.cc
lsm/table_v2.h
monitoring/histogram.h
pmem/db_layout.h
pmem/pmem.h
pmem/pmem_arena.h
pmem/pmem_ptr.h
pmem/pmem_test.cc
port/likely.h
port/port_posix.h
tools/db_bench.cc
ubench/aaa.cc
ubench/bbb.cc
ubench/ccc.cc
ubench/eee.cc
ubench/recovery_test.cc
ubench/rw_ratio.cc
ubench/string_kv_test.cc
ubench/tune_l1.cc
ubench/ycsb_index_microbench.cc
util.h
util/clock.h
util/random.h
util/rate_limiter.h
util/reporter.h
util/reporter_client.h
/usr/include/alloca.h
/usr/include/arpa/nameser_compat.h
/usr/include/endian.h
/usr/include/getopt.h
/usr/include/gflags/gflags.h
/usr/include/numa.h
/usr/include/sched.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/sys/syscall.h
/usr/include/sys/types.h
/usr/include/tbb/task_scheduler_init.h
/usr/include/tbb/tbb.h
/usr/include/unistd.h
/usr/include/asm/unistd.h
/usr/include/bits/byteswap.h
/usr/include/bits/confname.h
/usr/include/bits/cpu-set.h
/usr/include/bits/endian.h
/usr/include/bits/environments.h
/usr/include/bits/floatn.h
/usr/include/bits/getopt_core.h
/usr/include/bits/getopt_ext.h
/usr/include/bits/getopt_posix.h
/usr/include/bits/libc-header-start.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/sched.h
/usr/include/bits/stdint-intn.h
/usr/include/bits/stdint-uintn.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-bsearch.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string_fortified.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/syscall.h
/usr/include/bits/types.h
/usr/include/bits/types/FILE.h
/usr/include/bits/types/__FILE.h
/usr/include/bits/types/__fpos64_t.h
/usr/include/bits/types/__fpos_t.h
/usr/include/bits/types/clock_t.h
/usr/include/bits/types/clockid_t.h
/usr/include/bits/types/cookie_io_functions_t.h
/usr/include/bits/types/locale_t.h
/usr/include/bits/types/struct_FILE.h
/usr/include/bits/types/struct_timespec.h
/usr/include/bits/types/time_t.h
/usr/include/bits/types/timer_t.h
/usr/include/bits/uintn-identity.h
/usr/include/bits/unistd.h
/usr/include/bits/unistd_ext.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/features.h
/usr/include/gflags/gflags_declare.h
/usr/include/limits.h
/usr/include/numacompat1.h
/usr/include/strings.h
/usr/include/sys/select.h
/usr/include/time.h
/usr/include/asm/unistd_32.h
/usr/include/asm/unistd_64.h
/usr/include/asm/unistd_x32.h
/usr/include/bits/endianness.h
/usr/include/bits/floatn-common.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/posix2_lim.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/strings_fortified.h
/usr/include/bits/thread-shared-types.h
/usr/include/bits/time.h
/usr/include/bits/time64.h
/usr/include/bits/timesize.h
/usr/include/bits/types/__locale_t.h
/usr/include/bits/types/__mbstate_t.h
/usr/include/bits/types/sigset_t.h
/usr/include/bits/types/struct_itimerspec.h
/usr/include/bits/types/struct_sched_param.h
/usr/include/bits/types/struct_timeval.h
/usr/include/bits/types/struct_tm.h
/usr/include/bits/typesizes.h
/usr/include/bits/xopen_lim.h
/usr/include/gnu/stubs.h
/usr/include/inttypes.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/bits/local_lim.h
/usr/include/bits/long-double.h
/usr/include/bits/pthreadtypes-arch.h
/usr/include/bits/struct_mutex.h
/usr/include/bits/struct_rwlock.h
/usr/include/bits/timex.h
/usr/include/bits/types/__sigset_t.h
/usr/include/bits/uio_lim.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/gnu/stubs-x32.h
/usr/include/linux/limits.h
